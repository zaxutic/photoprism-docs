{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"PhotoPrism: Browse Your Life in Pictures","text":"<p>PhotoPrism\u00ae is an AI-Powered Photos App for the Decentralized Web. It makes use of the latest technologies to tag and find pictures automatically without getting in your way. You can run it at home, on a private server, or in the cloud.</p> <p></p>"},{"location":"#feature-overview","title":"Feature Overview","text":"<p>Our mission is to provide the most user- and privacy-friendly solution to keep your pictures organized and accessible. That's why PhotoPrism was built from the ground up to run wherever you need it, without compromising freedom, privacy, or functionality:</p> <ul> <li>Browse all your photos and videos without worrying about RAW conversion, duplicates or video formats</li> <li>Easily find specific pictures using powerful search filters</li> <li>Recognizes the faces of your family and friends</li> <li>Automatic classification of pictures based on their content and location </li> <li>Play Live Photos by hovering over them in albums and search results</li> <li>Since the User Interface is a  Progressive Web App,   it provides a native app-like experience, and you can conveniently install it on the home screen of all major operating systems and mobile devices</li> <li>Includes 4 high-resolution World Maps to bring back the memories of your favorite trips</li> <li>Metadata is extracted and merged from Exif, XMP, and other sources such as Google Photos</li> <li>Many more image properties like Colors, Chroma, and Quality can be searched as well</li> <li>Use  PhotoSync to securely backup iOS and Android phones in the background</li> <li>WebDAV clients such as Microsoft's Windows Explorer and Apple's Finder can connect directly to PhotoPrism, allowing you to open, edit, and delete files from your computer as if they were local</li> </ul> <p>Compare Features \u203a</p>"},{"location":"#100-privacy","title":"100% Privacy","text":"<p>Because PhotoPrism is 100% self-funded and independent, we can promise you that we will never sell your data and that we will always be transparent about our software and services. Your data will never be shared with Google, Amazon, Microsoft or Apple unless you intentionally upload files to one of their services.</p> <p> TRY OUR DEMO GET STARTED </p>"},{"location":"credits/","title":"Credits","text":"<p>A big thank you to all current and past sponsors, whose generous support has been and continues to be essential to the success of the project! </p>"},{"location":"credits/#infrastructure","title":"Infrastructure","text":"<p>Our project infrastructure is provided by the following companies:</p> <ul> <li>GitHub hosts our code repositories and also provides many other important services</li> <li>Docker approved us for their Open Source Program and hosts all of our app images</li> <li>Element develops and operates the infrastructure that our community chat is based on</li> <li>BrowserStack provides free access to their device and browser testing infrastructure</li> </ul>"},{"location":"credits/#technologies","title":"Technologies","text":"<ul> <li>Go, Gin and Vuetify</li> <li>Google TensorFlow and Material Design</li> <li>MkDocs and Material for MkDocs</li> <li>Complete list of 3rd-party software packages</li> </ul>"},{"location":"credits/#artwork","title":"Artwork","text":"<ul> <li>AI-Generated Faces by generated.photos</li> <li>NGC 1499 California Nebula by Remidone</li> <li>Prism Light Separation by digitalvosem</li> <li>Follow that light by Margeois</li> <li>Go Gopher designed by Renee French</li> <li>Gopher Stickers created by Takuya Ueda</li> </ul>"},{"location":"known-issues/","title":"Known Issues","text":"<p>This is a high-level overview of the currently unresolved issues. PhotoPrism follows a zero-bug policy, which means that we do our best to fix any issues we learn about. However, sometimes this is not immediately possible, for example due to dependencies on third-party libraries, other apps, or because it is a specific use case that we do not support at this time.</p> <p>In order to improve readability and reduce maintenance, minor issues and those we plan to fix in the short term are not listed here. You can browse all reported bugs, ideas, and planned enhancements on GitHub Issues.</p>"},{"location":"known-issues/#self-hosted-setup","title":"Self-Hosted Setup","text":""},{"location":"known-issues/#shared-domain","title":"Shared Domain","text":"<p>Installation in a sub-directory on a shared domain is generally possible if you run your instance behind a reverse proxy. At the moment, this method is experimental. We do not recommend it because technical expertise is required and a number of specific issues still need to be addressed:</p> <ul> <li>Hosting: Resolve known issues when installing in a sub-directory on a shared domain #2391</li> </ul>"},{"location":"known-issues/#nested-import-folder","title":"Nested Import Folder","text":"<p>You may not configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files.</p>"},{"location":"known-issues/#nested-storage-folder","title":"Nested Storage Folder","text":"<p>You may not configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden, as this will cause a loop when indexing the thumbnails of already indexed files:</p> <ul> <li>Config: Prevent nesting of \"storage\" folder inside \"originals\" unless hidden #1642</li> </ul> <p>In practice, this is not a problem as long as you follow our documentation and examples. We intend to automatically detect, report, and prevent such issues in the future. Due to the flexible mapping of folders within a Docker container to host directories, this has not yet been implemented.</p>"},{"location":"known-issues/#symbolic-links","title":"Symbolic Links","text":"<p>Symbolic links to files and directories within the originals folder are supported if they are accessible from the environment in which your instance is running. However, you cannot mount a symbolic link as a storage folder or use links within the storage folder.</p>"},{"location":"known-issues/#user-authentication","title":"User Authentication","text":"<p>Session and user management have been reimplemented recently. If you are upgrading from a Development Preview with a build number between 221102-905925b4d and 220901-f493607b0, you will need to run the <code>photoprism users reset --yes</code> command in a terminal after the upgrade to recreate the new database tables so that they are compatible with the stable version. This will not affect your pictures or albums.</p> <p>Upgrading from the last stable version should work without any problems. However, if you have already created additional accounts with the previously offered unofficial multi-user support, you will notice that only the main admin account is migrated automatically. Run <code>photoprism users legacy</code> in a terminal to display the legacy accounts so you can migrate them manually if needed.</p>"},{"location":"known-issues/#face-recognition","title":"Face Recognition","text":""},{"location":"known-issues/#legacy-hardware","title":"Legacy Hardware","text":"<p>Face recognition can be slow (or even crash) on old devices due to insufficient resources.</p> <p>Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p>"},{"location":"known-issues/#asian-faces-and-children","title":"Asian Faces and Children","text":"<p>It is a known issue that children and Asian-looking faces cannot be recognized reliably. Detection without automatic recognition should not be affected by that.</p> <p>This is because the model we use was trained with North American images, which unfortunately do not include many Asians. The absence of children in the training data comes from the fact that parents do not usually share such images under a public license (and may not have the right to do so).</p> <p>We will continue to improve our models over time as our resources allow.</p>"},{"location":"known-issues/#background-worker","title":"Background Worker","text":"<p>Face recognition was developed and tested under the assumption that the background worker runs every 15 minutes, unless the backend is busy with other tasks like indexing. It has not been tested with much longer intervals and is not designed for that.</p> <p>PhotoPrism's background worker groups new faces by similarity, compares faces with clusters, and optimizes existing clusters as needed. Without these routine tasks, the number of faces to be processed becomes too large. The first and next time the worker runs, it can then cause a heavy server load until all the faces, face clusters, and related pictures have been updated. The longer you wait, the more CPU is required and the longer it takes.</p> <p>An important reason for the worker to run independently of actual changes in the main instance is that some users change the database content directly or run additional instances, for example for indexing. It is a problem that can be solved, but it takes time. If we were to ignore this and don't run the worker at all times, it could lead to many additional support requests, further reducing the amount of time we can spend on development. </p> <p>The handling of changes in multiple instances will be improved over time so that the worker can be run less frequently in future releases.</p>"},{"location":"known-issues/#photos-with-all-faces-assigned-appear-under-new-faces","title":"Photos With All Faces Assigned Appear Under \u201cNew Faces\u201d","text":"<p>This can happen when multiple image files are grouped into a stack, for example, because they were taken at the same place and time, and stacking is enabled.</p> <p>Secondary images are not searched for faces by default. So the problem is limited to specific cases where you have manually changed the primary image or the images are stacked after detection, which may indicate more fundamental problems, e.g. with the metadata, filenames, or settings.</p> <p>One possible solution is to change the primary image of a stack to assign faces to the other images in the stack. You can also manually unstack these files and disable stacking in Settings &gt; Library. Note that files that are already stacked are not automatically unstacked when you change the stacking settings, and that Live Photos do not appear in Stacks because they are a special type of media that is always \"stacked\".</p>"},{"location":"known-issues/#removing-merged-clusters-fails","title":"Removing Merged Clusters Fails","text":"<p>Under certain conditions, inconsistent face assignments cannot be automatically resolved by the background worker, which can result in an unusually high CPU load when it is running:</p> <ul> <li>if you use multiple browser tabs or windows for assigning faces and don't wait until saving the changes is complete, the likelihood of this problem increases, especially if you accidentally enter different names for the same face</li> <li>another possible cause is running multiple instances (for example, parallel indexing workers started by a scheduler in the background) or modifying database content directly, as this may also lead to inconsistent faces, markers and subjects</li> <li>see Faces: Error \"Failed removing merged clusters for subject\" seems to cause tagging of faces to become slow #2806</li> </ul> <p>Running the following command in a terminal can resolve problems with inconsistent data:</p> <pre><code>docker compose exec photoprism photoprism faces audit --fix\n</code></pre> <p>It can also be helpful to manually check for inconsistent assignments and fix them in the user interface. Alternatively, you can use the <code>photoprism faces reset</code> command for a clean start if you haven't invested much time in assigning faces yet.</p> <p>Advanced users affected by this are welcome to privately provide us with a SQL dump of their subjects, faces, and markers database tables for debugging. Thank you very much!</p>"},{"location":"known-issues/#file-compatibility","title":"File Compatibility","text":""},{"location":"known-issues/#jpeg-bad-rst-marker","title":"JPEG: Bad RST Marker","text":"<p>This error can occur when decoding JPEG images that contain consecutive 0xFF bytes, e.g. images that have a \"glich\" (like a few lines of missing image information at the end) or were created with software that inserts them for padding, although this is based on an edge case of the specification and rather uncommon:</p> <ul> <li>Bug: (invalid JPEG format: bad RST marker) #1673</li> <li>image/jpeg: \"bad RST marker\" error when decoding #40130</li> <li>JPEG: Automatically check and repair broken/invalid images #2463</li> </ul>"},{"location":"known-issues/#raw-converters","title":"RAW Converters","text":""},{"location":"known-issues/#jpeg-size-limit","title":"JPEG Size Limit","text":"<p>RawTherapee and \"heif-convert\" cannot limit the resolution of JPEG files when converting files from other formats such as RAW, DNG, HEIC or AVIF. In general, when converting images, the resolution of the generated JPEG files can be limited with the environment variable <code>PHOTOPRISM_JPEG_SIZE</code> or the CLI parameter <code>--jpeg-size</code>.</p> <p>However, this does not work with certain converters because, unlike Darktable, they do not support CLI options to limit JPEG size:</p> <ul> <li>RAW: PHOTOPRISM_JPEG_SIZE is ignored when converting RAW with RawTherapee #2446</li> </ul> <p>It would probably also hurt indexing performance and image quality if PhotoPrism reduced the size of the generated file after conversion, for example, by using a temporary file.</p> <p>As a result, this option is ignored when generating JPEG files with these converters. Whether RawTherapee or \"heif-convert\" are used depends on additional settings such as <code>PHOTOPRISM_DARKTABLE_BLACKLIST</code>, <code>PHOTOPRISM_DISABLE_DARKTABLE</code>, <code>PHOTOPRISM_RAWTHERAPEE_BLACKLIST</code>, and <code>PHOTOPRISM_DISABLE_RAWTHERAPEE</code>.</p>"},{"location":"known-issues/#reporting-bugs","title":"Reporting Bugs","text":"<p>Before reporting a bug, please use our Troubleshooting Checklists to determine the cause of your problem. If you have a general question, need help, it could be a local configuration issue, or a misunderstanding in how the software works:</p> <ul> <li>you are welcome to ask in our Community Chat</li> <li>or post your question in GitHub Discussions</li> </ul> <p>When reporting a problem, always include the software versions you are using and other information about your environment such as browser, browser plugins, operating system, storage type, memory size, and processor.</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app.</p> <p>Note that all issue subscribers receive an email notification from GitHub whenever a new comment is added, so these should only be used for sharing important information and not for discussions, questions or expressing personal opinions.</p>"},{"location":"release-notes/","title":"Release Notes","text":"<p>You can test upcoming features and enhancements by changing the image tag from <code>:latest</code> to <code>:preview</code> and then following our update guide to download the most recent image and restart your instance.</p>"},{"location":"release-notes/#development-preview","title":"Development Preview","text":"<p>Build 230801-82dac4b7d</p> <p>What's new?</p> <ul> <li>UX: Added \"Delete All\" button to the archive page toolbar</li> <li>UX: Added a preview image to the Labels tab in the photo edit dialog</li> <li>UX: Reduced padding in mosaic view in favor of larger thumbnails</li> <li>UX: Edit dialog allows pasting latitude and longitude in a single operation</li> <li>Places: Added cluster view to browse pictures close to each other in an overlay</li> <li>Albums: Last edited timestamp is updated when photos are added to an album</li> <li>Metadata: Changed order of field names from which the title is extracted</li> <li>Metadata: Added support for reading fstop favorite flag from XMP sidecar files</li> <li>Themes: Added \"Mint\" and improved the default theme styles</li> </ul>"},{"location":"release-notes/#july-19-2023","title":"July 19, 2023","text":"<p>Build 230719-73fa7bbe8</p> <p>Our latest release includes new features and enhancements contributed by our community, a number of security improvements, as well as fixes for recently discovered issues. Thank you to everyone who submitted pull requests, helped with testing, signed up as a member, or contributed in other ways! We appreciate it very much.</p> <p>What's new?</p> <ul> <li>Setup: Added a batch script for simplified installation under Windows</li> <li>Search: Added <code>geo:false</code> filter to find pictures without GPS coordinates</li> <li>Photos: JPEG files with missing EOI marker are automatically repaired</li> <li>Photos: Fixed an error when opening panoramas taken with a Samsung S21</li> <li>Videos: Added a config option to limit the resolution of transcoded videos</li> <li>Videos: Fixed container and codec checks in <code>photoprism convert</code> command</li> <li>Metadata: Dates in WhatsApp generated file names can be parsed</li> <li>Metadata: Year 0000 is mapped to 0001 when parsing dates from Exiftool</li> <li>Security: Default to a self-signed HTTPS/TLS certificate if no other certificate is available</li> <li>Security: Clipboard contents are cleared on logout and when user privileges change</li> <li>Security: Go has been updated to v1.20.6, which includes bug fixes and enhancements</li> <li>Translations: Updated Japanese</li> </ul> <p>We recommend that you explicitly disable TLS by adding <code>PHOTOPRISM_DISABLE_TLS: \"true\"</code> to your <code>docker-compose.yml</code> file when running PhotoPrism behind a reverse proxy. HTTPS could otherwise be accidentally enabled if a certificate matching the site URL is found or <code>PHOTOPRISM_DEFAULT_TLS</code> is set to <code>\"true\"</code>. </p>"},{"location":"release-notes/#june-25-2023","title":"June 25, 2023","text":"<p>Build 230625-17242fb07</p> <p>This service release includes the latest translations contributed by our community, as well as fixes for recently discovered issues.</p> <p>What's new?</p> <ul> <li>Albums: Invalid entries are automatically hidden and flagged as missing</li> <li>CLI: Fixed an issue where entering a very long password could disable the login</li> <li>Security: Updated third-party dependencies in backend and frontend</li> <li>Translations: Updated Chinese (Simplified), Italian, and Japanese</li> </ul>"},{"location":"release-notes/#june-15-2023","title":"June 15, 2023","text":"<p>Build 230615-90a18f6e7</p> <p>This update includes new features and enhancements contributed by our community, as well as fixes for recently discovered issues. We would like to thank everyone involved!</p> <p>What's new?</p> <ul> <li>Photos: Related albums are displayed in the Info tab of the edit dialog</li> <li>Photos: Added a link from the Files tab to the related folder in the file browser</li> <li>Moments: Added labels to match Holidays as well as additional Pets</li> <li>CLI: Added <code>photoprism find</code> command to search the index for specific files</li> <li>CLI: Fixed the <code>photoprism import</code> command destination parameter type</li> <li>PikaPods: Fixed an issue that caused newly deployed instances to require a restart</li> <li>Security: Updated third-party dependencies in backend and frontend</li> </ul>"},{"location":"release-notes/#june-7-2023","title":"June 7, 2023","text":"<p>Build 230607-9e086c7eb</p> <p>With this much anticipated update, our new high-resolution vector world map becomes available to all users. It also features a special terrain mode for mountain lovers, so you can view the \"Satellite\", \"Outdoor\" and \"Topography\" maps in 3D!</p> <p>What's new?</p> <ul> <li>Places: Improved the level of detail of the freely available default world map</li> <li>Places: Added terrain mode to display the satellite, outdoor and topography maps in 3D</li> <li>Security: Go has been updated to v1.20.5, which includes bug fixes and enhancements</li> <li>Translations: Updated Chinese (Simplified), Italian, and Slovak</li> </ul> <p>PhotoPrism\u00ae Plus</p> <ul> <li>Config: CSP header is updated automatically when a CDN is configured</li> </ul>"},{"location":"release-notes/#june-3-2023","title":"June 3, 2023","text":"<p>Build 230603-378d4746a</p> <p>This service release fixes recently discovered issues and improves compatibility with the upcoming MariaDB v11.0. If you are upgrading from MariaDB 10.x to 11.0, please make sure that you replace <code>command: mysqld</code> with <code>command: mariadbd</code> in your <code>docker-compose.yml</code> file, otherwise the database server might fail to start. Thank you to everyone who contributed with pull requests, reported bugs, and helped us test the changes!</p> <p>What's new?</p> <ul> <li>Folders: Searching for substrings now returns all matching albums</li> <li>Search: Fixed an issue where the \"Unknown country\" filter has been ignored</li> <li>Navigation: Fixed account feature check when clicking on the profile picture</li> <li>Config: Fixed setting the title of the search page based on the site title</li> <li>MariaDB: Improved compatibility with the upcoming release 11.0</li> <li>Security: Updated third-party dependencies in backend and frontend</li> <li>Security: Go has been updated to v1.20.4, which includes bug fixes and enhancements</li> <li>Translations: Updated Chinese (Traditional), Dutch, German, and French</li> </ul> <p>PhotoPrism\u00ae Plus</p> <ul> <li>Security: Malicious client requests can be automatically detected and blocked</li> </ul>"},{"location":"release-notes/#may-13-2023","title":"May 13, 2023","text":"<p>Build 230513-0b780defb</p> <p>As promised, this update makes hardware transcoding and many other config options available to all users. A big thank you to all of our contributors, members, and sponsors, whose generous support has been and continues to be essential to the success of the project! </p> <p>What's new?</p> <ul> <li>Config: Additional options are now available to all users</li> </ul>"},{"location":"release-notes/#may-6-2023","title":"May 6, 2023","text":"<p>Build 230506-9de9a3540</p> <p>This update resolves two recently reported issues and includes updated translations.</p> <p>What's new?</p> <ul> <li>Sharing: Upload checks if files have been deleted</li> <li>CLI: Logging output is reduced in production mode</li> <li>Translations: Updated French</li> </ul>"},{"location":"release-notes/#may-4-2023","title":"May 4, 2023","text":"<p>Build 230504-cbf48798c</p> <p>This service release makes the Nordic theme and the Hide People feature available to all users. It also changes the theme order in Settings so that the freely available themes come first.</p> <p>What's new?</p> <ul> <li>Settings: Changed order in the theme dropdown so the freely available themes come first</li> </ul>"},{"location":"release-notes/#may-2-2023","title":"May 2, 2023","text":"<p>Build 230502-c405f6eff</p> <p>With this major new release, you'll get a long list of new features and enhancements with a focus on performance, security, and file type support. In addition, our Plus Members can now register directly in the app to unlock additional features like vector graphics support and a new admin web UI for user and session management. Thank you to all contributors, members, and sponsors who made this possible!</p> <p>What's new?</p> <ul> <li>UX: Improved user interface layout for right-to-left languages</li> <li>UX: Improved highlight and background colors in the cards view</li> <li>UX: Improved theme styles and search field contrast in Places</li> <li>UX: Navigation shows the total number of pictures without those under review</li> <li>UX: Enabled long-touch menu in photo viewer on iOS Safari</li> <li>PWA: Increased allowed length of app name on home screen</li> <li>PWA: Improved manifest.json for more reliable installation prompts</li> <li>Themes: Added \"Carbon\", \"Neon\", and \"Nordic\" based on colors from nordtheme.com</li> <li>Themes: Removed \"Electra\", \"Moonlight\", \"Seaweed\", and \"Cyano\"</li> <li>People: Ambiguous faces are skipped when matching to improve performance</li> <li>People: Entering names is faster with many faces tagged</li> <li>Search: Added <code>id:...</code> filter to find pictures by Exif UID, XMP Document ID or Instance ID</li> <li>Search: Increased batch size for better performance when loading results</li> <li>Search: Deleted albums are ignored when using the <code>unsorted</code> filter</li> <li>Search: Sepia colored pictures are excluded when using the <code>mono</code> filter</li> <li>Photos: Image orientation can be changed through the user interface</li> <li>RAW: Upgraded RawTherapee from v5.8 to v.5.9 to fix ProRAW support</li> <li>Videos: Improved player compatibility with browser plugins</li> <li>Videos: Improved preview image generation depending on duration</li> <li>Videos: Playback durations of less than one second can be indexed and displayed</li> <li>Videos: Added .dv to the list of known video file types</li> <li>Videos: Specific video and audio streams can be selected for transcoding</li> <li>Videos: Improved detection of HEVC support for Google Chrome</li> <li>Albums: Added extended search form with sorting options</li> <li>Albums: Fixed form field styles in the share dialog</li> <li>Albums: Double quotes in album names are replaced by Unicode characters</li> <li>Albums: Improved error handling and validation of query parameters</li> <li>Albums: \"Download as zip\" button is displayed on mobile screens</li> <li>Moments: Changed default sort order in the overview to \"newest\"</li> <li>Folders: Search is case-insensitive and uses wildcards for improved usability</li> <li>Metadata: GPS coordinates are normalized to be within a common range</li> <li>Metadata: Out-of-range altitude values are ignored to prevent indexing errors</li> <li>Metadata: Date defaults caused by software or camera bugs are ignored</li> <li>Metadata: Software name is displayed on the Files tab, if available</li> <li>Metadata: Valid year range in Exif data and filenames has been extended from 1990 to 1970</li> <li>Metadata: Scanned images are automatically recognized by device name</li> <li>Metadata: Added TakenAtLocal to YAML backups to prevent incorrectly restored times</li> <li>Metadata: Notes can be extracted from the Comment and UserComment fields</li> <li>Index: Improved performance by skipping updates when there are no changes</li> <li>Index: Improved performance when flagging hidden files</li> <li>Index: Added file format support for Adobe Photoshop PSD images</li> <li>Index: Added support for decoding JPEG XL and playing PNG animations</li> <li>Index: Corrupted JPEG images are automatically repaired if necessary</li> <li>Index: TIFF images with unsupported file format features can be converted</li> <li>Upload: Estimated time remaining is displayed in minutes and seconds</li> <li>Download: Added settings to choose which files to download by default</li> <li>Backups: Improved backup and restore commands to better handle large index dumps</li> <li>WebDAV: Enabled access to the originals and import folders in read-only mode</li> <li>WebDAV: Replaced client library to prevent incomplete uploads to other servers</li> <li>WebDAV: Download sync is prevented when read-only mode is enabled</li> <li>API: Search results can be sorted randomly to get a random set of pictures</li> <li>API: HEAD requests are now supported for frontend bootstrap paths</li> <li>CLI: Added file extension flag to the <code>photoprism convert</code> command</li> <li>CLI: Commands create thumbnails and convert files in deterministic order</li> <li>Config: Migrations are skipped if the same version has already been initialized</li> <li>Config: Use dynamic social preview image based on app name</li> <li>Config: Custom template path is not searched for files if not specified</li> <li>Config: Advanced settings include additional options for PNGs and vector graphics</li> <li>Config: Added advanced HTTP cache control options</li> <li>Config: Added option to stream videos over a Content Delivery Network (CDN)</li> <li>Docker: Ubuntu base image has been upgraded from v22.04 to v23.04</li> <li>Docker: MariaDB image and binaries have been upgraded from v10.9 to v10.11</li> <li>Podman: Added config examples for users of Red Hat-based Linux distributions</li> <li>Security: Improved bcrypt password support with explicit 72-character limit</li> <li>Security: Go has been updated to v1.20.3, which includes bug fixes and other improvements</li> <li>Translations: Added Afrikaans (South Africa) and Basque (Euskara)</li> <li>Translations: Updated Arabic, Bulgarian, Chinese, Czech, Dutch, Estonian, French, German, Italian, Malay, Russian, Ukrainian and many others</li> </ul> <p>PhotoPrism\u00ae Plus</p> <ul> <li>Auth: Admins can manage user accounts and active sessions through the web UI </li> <li>Index: Added file format support for SVG, AI, PS and EPS vector graphics</li> </ul> <p>Our new Plus License is used for both the PhotoPrism+ extensions we provide to our members as well as the standard Docker image we distribute. This allows us to bundle the extensions, and other third-party components that we are not allowed to distribute under the AGPL, with the compiled application in the Docker image. The public source code, however, remains under the Open Source AGPL license. If you don't want additional features, you can alternatively use the \"ce\" tag instead of \"latest\" to get a smaller Docker image distributed under the AGPL license.</p> <p>View Membership FAQ \u203a View Plus License \u203a</p>"},{"location":"release-notes/#november-18-2022","title":"November 18, 2022","text":"<p>Build 221118-e58fee0fb</p> <p>This service release includes compatibility fixes for MariaDB 10.10, the latest translations, a new theme, and updated dependencies. We recommend not using the <code>:latest</code> tag for the MariaDB Docker image and to upgrade manually by changing the tag once we had a chance to test a new major version.</p> <p>What's new?</p> <ul> <li>UI: Added \"Electra\" theme</li> <li>MariaDB: Compatibility fixes for version 10.10</li> <li>Translations: Updated Czech and Estonian</li> </ul>"},{"location":"release-notes/#november-17-2022","title":"November 17, 2022","text":"<p>Build 221117-3268c4de8</p> <p>This update includes video transcoding improvements and the latest translations contributed by our community.</p> <p>What's new?</p> <ul> <li>Videos: Fixed installation of Intel Quick Sync drivers for hardware transcoding</li> <li>Videos: Added <code>.m2ts</code> to known file extensions</li> <li>Translations: Updated Chinese (Traditional) and Estonian</li> </ul>"},{"location":"release-notes/#november-16-2022","title":"November 16, 2022","text":"<p>Build 221116-122ebfb70</p> <p>With this update you get the latest translations, updated dependencies, and two metadata bug fixes. Thanks to all who contributed!</p> <p>What's new?</p> <ul> <li>Metadata: Bad Unicode strings are sanitized automatically </li> <li>Metadata: UTC can be overridden by local time with unknown zone</li> <li>MariaDB: Unsupported versions are allowed in \"unsafe\" mode</li> <li>Translations: Added Estonian</li> <li>Translations: Updated Polish, Italian, Korean, Romanian, and Chinese (Traditional)</li> </ul>"},{"location":"release-notes/#november-5-2022","title":"November 5, 2022","text":"<p>Build 221105-7a295cab4</p> <p>This service release provides UX improvements for the photo editing dialog and includes the latest translations contributed by our community. Note that our guides now use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code> to start and stop your instance.</p> <p>What's new?</p> <ul> <li>UX: Improved layout of form fields in photo edit dialog</li> <li>Account: Disabled \"gender\" dropdown when busy or in demo mode</li> <li>Docker: Changed \"docker-compose\" command to \"docker compose\"</li> <li>Translations: Updated Estonian, Hungarian, and Russian</li> </ul>"},{"location":"release-notes/#november-4-2022","title":"November 4, 2022","text":"<p>Build 221104-20d180b21</p> <p>A small update featuring improved NVIDIA GPU support, the latest translations contributed by our community, and updated dependencies.</p> <p>What's new?</p> <ul> <li>NVIDIA: Added a ready-to-use <code>docker-compose.yml</code> config example</li> <li>NVIDIA: Updated FFmpeg parameters for hardware video transcoding</li> <li>NVIDIA: Updated install-gpu.sh script and related documentation</li> <li>Translations: Updated Chinese</li> </ul>"},{"location":"release-notes/#november-3-2022","title":"November 3, 2022","text":"<p>Build 221103-211eb36ea</p> <p>With this update you'll get the latest translations contributed by our community, updated dependencies as well as a few minor bug fixes and improvements.</p> <p>What's new?</p> <ul> <li>Index: Paths starting with <code>_.</code> and <code>__</code> like <code>__MACOSX</code> are ignored</li> <li>Config: Updated new trusted proxy header options and command help</li> <li>MariaDB: Improved server version check on startup</li> <li>Security: Go has been updated to v1.19.3, which includes security fixes</li> <li>Translations: Updated Chinese, French, Norwegian Bokm\u00e5l, and Romanian</li> </ul>"},{"location":"release-notes/#november-2-2022","title":"November 2, 2022","text":"<p>Build 221102-905925b4d</p> <p>Due to the many new features, enhancements and bug fixes, this is one of those updates that took longer to release. Before upgrading, please read the full release notes and note that this release does not yet include support for user roles other than Admin, as we need to specify, create and test each new role before we can release it. Once this is done, we will also provide additional user management documentation.</p> <p>We've generated missing translations with the help of DeepL and Google Translate. Native speakers are invited to help us improve those if needed. A special thank you to everyone who contributed!</p> <p>Breaking Changes</p> <ul> <li>In order to improve security and compatibility, the default Docker image is now based on Ubuntu 22.04 LTS (Jammy Jellyfish) instead of Debian 12 (Bookworm). The entrypoint script has been updated to preserve group permissions required for hardware transcoding.</li> <li>Session and user management have been re-implemented. If you are upgrading from a preview build, you will need to run the <code>photoprism users reset --yes</code> command in a terminal after the upgrade to recreate the new database tables so that they are compatible with the stable version. This will not affect your pictures or albums.</li> <li>Upgrading from the last stable version should work without any problems. However, if you have already created additional accounts with the previously offered unofficial multi-user support, you will notice that only the main admin account is migrated automatically. Run <code>photoprism users legacy</code> in a terminal to display the legacy accounts so you can migrate them manually if needed.</li> <li>Sharing link visitors can now see the picture locations in the regular album view and optionally on a map after clicking the link. Based on user feedback, we may add settings to hide the locations for enhanced privacy.</li> <li>We recommend performing a full rescan after the upgrade to take advantage of new search filters and sort options.</li> <li>Indexing is also necessary to find and view HEIC, DNG, and AVIF images that were previously unsupported or had errors. In some cases with incorrectly converted images, it may be necessary to recreate the JPEG sidecar files by running the <code>photoprism convert -f</code> command in a terminal before starting the rescan. To regenerate your thumbnails, run <code>photoprism thumbs -f</code>.</li> </ul> <p>What's new?</p> <ul> <li>Auth: Session and user management have been re-implemented</li> <li>Auth: API has been improved to prevent unnecessary re-logins</li> <li>Auth: User interface routes have been prefixed with <code>/library</code></li> <li>UX: Scroll position is restored again when navigating back</li> <li>UX: Loading screen and mobile toolbar menu have been redesigned</li> <li>UX: Improved user interface styles for RTL languages</li> <li>Search: Added <code>city:...</code> and <code>state:...</code> to filter by location details</li> <li>Search: Results can now also be sorted by \"File Size\" and \"Video Duration\"</li> <li>Albums: Added breadcrumbs to navigate back on large screens</li> <li>Albums: Deselected labels are ignored when adding photos by label</li> <li>HEIC: Added support for Sony's <code>.HIF</code> file extension</li> <li>HEIC: Updated <code>heif-convert</code> tool to fix conversion problems</li> <li>AVIF: Added support for the AV1 Image File Format</li> <li>RAW: Updated Darktable from v3.8.1 to v4.0.1 (AMD64 only)</li> <li>ProRAW: JPEGs embedded in <code>.DNG</code> files can be searched and viewed</li> <li>Videos: Added VAAPI hardware AVC encoder support</li> <li>Index: Delayed RAW file format check to improve indexing performance</li> <li>Import: Selection of a source folder with dots in its name is now possible</li> <li>Import: Related original names are indexed in addition to the main filename</li> <li>Settings: Services cannot be managed in public mode to increase security</li> <li>Backups: Worker no longer recreates all album YAML files on every run</li> <li>Metadata: Added more place names with known countries</li> <li>Metadata: Default to UTC when reading time from XMP file</li> <li>Config: Increased default resolution limit from 100 to 150 MP</li> <li>Config: <code>imprint</code> info text option has been renamed to <code>legal-info</code></li> <li>SQLite: Added busy timeout preset to reduce locking errors when indexing</li> <li>MariaDB: Startup fails with an error message if an unsupported version is used</li> <li>Docker: Default image is based on Ubuntu 22.04 LTS (Jammy Jellyfish)</li> <li>Docker: Switched from <code>gosu</code> to <code>setpriv</code> in entrypoint.sh script</li> <li>Security: New files are created without execution permission</li> <li>Security: Go has been updated to v1.19.2, which includes security fixes</li> <li>Translations: Added Persian</li> <li>Translations: Updated Chinese, Dutch, Finnish, French, German, Spanish, and many more</li> </ul>"},{"location":"release-notes/#september-1-2022","title":"September 1, 2022","text":"<p>Build 220901-f493607b0</p> <p>With this update you get all the latest translations contributed by our community, mobile navigation enhancements, updated dependencies and, as usual, fixes for recently discovered issues. Thanks to everyone involved!</p> <p>What's new?</p> <ul> <li>UX: Mobile toolbar menu has been redesigned and expanded</li> <li>UX: Improved search result and Gemstone theme styles</li> <li>Search: Known file extensions are stripped from <code>name:...</code> filter string</li> <li>Library: Indexing will be aborted if the originals folder is empty</li> <li>Videos: Local time is extracted from <code>DateTimeOriginal</code> if possible</li> <li>Albums: All pictures are shown if \"Private\" has been disabled in Settings</li> <li>Thumbs: <code>photoprism thumbs</code> command regenerates thumbnails of sidecar files</li> <li>Docker: Permissions of original media files are no longer updated on startup</li> <li>Build: Go has been updated to v1.19, which includes fixes and enhancements</li> <li>Build: NodeJS has been updated from v16 to v18</li> <li>Translations: Added Catalan, Finnish, Ukrainian, and Slovene</li> </ul>"},{"location":"release-notes/#july-30-2022","title":"July 30, 2022","text":"<p>Build 220730-0e1222c83</p> <p>Fixes the activation of public mode with <code>PHOTOPRISM_AUTH_MODE</code> instead of <code>PHOTOPRISM_PUBLIC</code>.</p> <p>What's new?</p> <ul> <li>Auth: Activate public mode via <code>PHOTOPRISM_AUTH_MODE=\"public\"</code></li> </ul>"},{"location":"release-notes/#july-28-2022","title":"July 28, 2022","text":"<p>Build 220728-729ddd920</p> <p>Includes indexing, metadata, and authentication enhancements, as well as updated translations.</p> <p>What's new?</p> <ul> <li>Library: Added support for indexing and importing symbolically linked files</li> <li>Thumbs: Creating redundant JPEG files is skipped to save disk space</li> <li>Zip: Improved file system rights detection and temporary file handling</li> <li>Metadata: Creation time is extracted from DateTimeCreated, if available</li> <li>Metadata: Unknown values are ignored when parsing timestamps</li> <li>Purge: Fixed SQL error when the photo ID of a file is missing</li> <li>Cleanup: Improved logging when deleting related sidecar files</li> <li>Config: Added <code>PHOTOPRISM_AUTH_MODE</code> option to select authentication mode</li> <li>Config: Improved inline docs in <code>docker-compose.yml</code> examples</li> <li>Build: Updated Go to v1.18.4, which includes a number of security and compiler fixes</li> <li>Translations: Added Greek</li> </ul> <p>Breaking Changes</p> <ul> <li>Config: <code>PHOTOPRISM_AUTH</code> has been removed in favor of <code>PHOTOPRISM_AUTH_MODE</code></li> <li>Config: <code>PHOTOPRISM_PUBLIC</code> has been deprecated in favor of <code>PHOTOPRISM_AUTH_MODE</code></li> </ul>"},{"location":"release-notes/#june-29-2022","title":"June 29, 2022","text":"<p>Build 220629-5d7448d2</p> <p>With this update, you'll enjoy a much faster and smoother scrolling experience as well as direct streaming of OGV, VP8, VP9, AV1, WebM and HEVC videos if they do not exceed the configured bitrate limit. Special thanks to Heiko Mathes and Andre Carrera for their contributions!</p> <ul> <li>UX: Much faster and smoother scrolling experience in albums and search results</li> <li>Videos: Direct streaming of OGV, VP8, VP9, AV1, WebM, and HEVC where supported</li> <li>Videos: Fixed incorrect frame rate when using NVIDIA hardware transcoding</li> <li>Sharing: Fixed the spacing of the top navigation toolbar on small screens</li> <li>RAW: Display actual dimensions as Exif metadata can be wrong, e.g. for <code>.NEF</code> files</li> <li>WebDAV: Endpoints have been disabled in public mode as they cannot be used</li> <li>API: Maximum number of search results has been increased to 100,000 files</li> <li>CLI: Config command also lists <code>disable-webdav</code> and <code>http-compression</code></li> <li>Documentation: Added notes about manual session invalidation and other known issues</li> <li>Translations: Updated Arabic, Dutch, Polish, Japanese, Chinese, French, German, and Italian</li> </ul>"},{"location":"release-notes/#june-17-2022","title":"June 17, 2022","text":"<p>Build 220617-0402b8d3</p> <p>This update features updated translations as well as fixes for recently discovered issues.</p> <ul> <li>Albums: A deleted album is restored when trying to add a new album with the same name</li> <li>WebDAV: Added support for auto indexing/importing in a sub-directory on a shared domain</li> <li>Translations: Updated Arabic, Czech, Korean, and Norwegian Bokm\u00e5l</li> </ul>"},{"location":"release-notes/#june-14-2022","title":"June 14, 2022","text":"<p>Build 220614-dea9ff68</p> <p>A small but important update that includes translations to Arabic, a migration fix for MariaDB, and many updated dependencies.</p> <ul> <li>Security: Updated Go to v1.18.3, which includes TLS and validation fixes</li> <li>MariaDB: Removed migration that could corrupt photo descriptions in the index</li> <li>Translations: Added Arabic, updated Danish and Polish</li> </ul>"},{"location":"release-notes/#may-28-2022","title":"May 28, 2022","text":"<p>Build 220528-efb5d710</p> <p>This update includes translations that were recently contributed via translate.photoprism.app. Missing translations were added by us using DeepL and Google Translate. Native speakers are invited to help improve those if needed. Thank you very much!</p> <ul> <li>UX: Mobile toolbar menu has been redesigned and made accessible in public mode</li> <li>Themes: Gemstone and Raspberry have been updated</li> </ul>"},{"location":"release-notes/#may-27-2022","title":"May 27, 2022","text":"<p>Build 220527-005770ca</p> <p>This update improves navigation fonts and mobile submenu colors for light themes. We are also working to establish PhotoPrism+ as the name for our community membership and associated benefits. For this, membership information in the app, on our website, on GitHub Sponsors and Patreon is gradually being updated.</p> <ul> <li>UX: Fixed light theme colors of mobile navigation submenu</li> <li>UX: Splash screen has been updated and no longer depends on admin theme</li> </ul>"},{"location":"release-notes/#may-24-2022","title":"May 24, 2022","text":"<p>Build 220524-c76de0df</p> <p>This service release fixes potential issues with our new Debian 12-based Docker image that shipped with the last update. These may have prevented users from deploying it without making changes to their environment. In our ongoing effort to improve usability and performance, we have also implemented a number of UX/UI optimizations, such as using the default operating system font instead of Google's Roboto.</p> <ul> <li>UX: Added submenu to mobile navigation toolbar</li> <li>UX: Updated splash screen information and animation</li> <li>UX: Numerous translations have been added and updated</li> <li>UX: Improved UI styles for right-to-left languages</li> <li>Auth: Short initial passwords are permitted again to avoid login problems</li> <li>Logs: Repeated log messages are omitted to prevent feedback loops</li> <li>Logs: Trace and debug messages are no longer displayed in the UI to avoid information leaks and reduce websocket communication overhead</li> <li>Search: <code>mono:true</code> filter now omits files with unknown chroma</li> <li>Docker: Removed incorrect permission check for storage folder on startup</li> <li>Docker: Supported User and Group ID ranges have been documented</li> </ul> <p>Thank you to everyone who helped with testing, signed up as a member, or contributed in other ways! We appreciate it very much.</p>"},{"location":"release-notes/#may-17-2022","title":"May 17, 2022","text":"<p>Build 220517-b9c68f8f</p> <p>This update features search UX enhancements, a new Docker base image based on Debian 12 \"Bookworm\", as well as fixes for recently discovered issues. Front- and backend translations in numerous languages have been added and updated. Thanks to all involved!</p> <ul> <li>File Formats: Added native support for WebP images and animated GIFs</li> <li>UX: RAW files are skipped by default when downloading photos and ZIP archives</li> <li>Auth: Passwords must have at least 8 characters to mitigate brute-force attacks</li> <li>Search: User interface and database performance optimizations</li> <li>Search: Fixed occasional lag when entering queries in the search toolbar</li> <li>Search: Improved <code>album:...</code> filter supports numeric names, <code>albums:..</code> also AND/OR</li> <li>Search: Improved <code>camera:...</code> and <code>lens:...</code> filters accept names in addition to IDs</li> <li>Search: Added <code>square:yes</code> and <code>landscape:yes</code> filters</li> <li>Albums: \"Add to album\" dialog preloads more names for auto-completion</li> <li>Albums: Album names are shortened if necessary to avoid errors when saving</li> <li>Albums: Fixed accidental creation of duplicates by pressing Enter multiple times</li> <li>People: Improved logging and fixed potential issues with matching unrecognized faces</li> <li>Places: Number of pictures rendered on the map has been limited to 500,000</li> <li>Library: Added button to clear log history in Library &gt; Errors</li> <li>Library: RAW previews and the number of actual files are shown under Originals</li> <li>Library: Disabled hidden files warning while indexing as it can be misleading</li> <li>Index: Fixed errors when re-indexing libraries with archived photos</li> <li>Index: RAW and video conversion commands run in a virtual home directory</li> <li>Thumbnails: Reduced default JPEG quality from 92 to 85 to optimize storage and loading</li> <li>Metadata: Manual local time changes are always preserved when reindexing</li> <li>Metadata: Fixed Exif orientation flag when converting HEIF/HEIC images to JPEG</li> <li>Metadata: Fault-tolerant parsing of timestamps from Exif and JSON sidecar files</li> <li>Metadata: Improved parsing of two-digit years in original file paths</li> <li>Metadata: Exif IFD1 tags with existing IFD0 values are ignored to improve standard compliance</li> <li>Metadata: Brute-force search is skipped by default if no Exif headers were found in JPEG, PNG, TIFF, and HEIF files</li> <li>Metadata: SubSecDateTimeOriginal and SubSecCreateDate timestamps are preferred</li> <li>WebDAV: Up- and download sync can no longer be enabled at the same time to prevent unexpected behavior</li> <li>WebDAV: Added timeout/retry settings and improved handling of sync errors</li> <li>WebDAV: Fixed sharing videos and uploading automatically created albums</li> <li>CLI: Renamed <code>--config-file</code> to <code>--defaults-yaml</code> and improved command help</li> <li>CLI: Added short names for common config flags, e.g. <code>-i</code> for <code>--wakeup-interval</code></li> <li>CLI: Run <code>photoprism show tags</code> to display metadata tags and supported standards</li> <li>CLI: Run <code>photoprism show formats</code> to display supported media and sidecar file formats</li> <li>CLI: Run <code>photoprism show filters</code> to display a search filter overview with examples</li> <li>Config: Improved FFmpeg parameters for Intel QSV hardware transcoding</li> <li>Config: Added NVIDIA hardware video transcoding support for members</li> <li>Config: Added <code>--disable-raw</code> flag to disable indexing and conversion of RAW files</li> <li>Config: Added <code>--resolution-limit</code> option to skip high-resolution images when indexing</li> <li>Docker: New Debian 12 \"Bookworm\" base image with FFmpeg 4.4.1 and Darktable 3.8.1</li> <li>Docker: Added default users and groups for enhanced video transcoding compatibility</li> <li>Translations: Added Swedish, Romanian, Turkish, Lithuanian, Bulgarian, Malay, and Croatian</li> </ul>"},{"location":"release-notes/#march-2-2022","title":"March 2, 2022","text":"<p>Build 220302-0059f429</p> <p>The Docker images for this release are based on Debian 11 \"Bullseye\" and include many updated dependencies such as Darktable 3.8. Behind the scenes, the build process has also been improved so that it will be easier to provide standalone packages in the future.</p> <ul> <li>Auth: New login screen with more space for buttons, links, and legal information</li> <li>Metadata: Redesigned file details tab in the edit dialog</li> <li>Metadata: Support for Zulu formatted timestamps in Exiftool JSON and XMP</li> <li>Sharing: Fixed upload of complete albums via WebDAV</li> <li>Sharing: Manual WebDAV upload of video and RAW files</li> <li>iOS: Fixed multi-select via long touch in Safari PWA mode</li> <li>API: Added cache control header for faster thumbnail loading</li> <li>Config: Simplified configuration of Unix domain socket database connections</li> <li>Config: Added <code>--imprint</code> and <code>--imprint-url</code> to display legal information in the footer</li> <li>Docker: Automatic installation of compatible CPU and GPU drivers</li> <li>Translations: Updated all front- and backend locales</li> </ul> <p>You can now join us on translate.photoprism.app to help translate the UI!</p>"},{"location":"release-notes/#january-21-2022","title":"January 21, 2022","text":"<p>Build 220121-2b4c8e1f</p> <p>We've generated missing translations with the help of DeepL and Google Translate. Native speakers are invited to help us improve those if needed. Learn how to contribute.</p> <ul> <li>Minimum memory requirements have been reduced to 3 GB</li> <li>Photos: Fixed buttons in full screen view</li> <li>People: Fixed typo that prevented face matching optimization</li> <li>Moments: Improved update performance on MariaDB</li> <li>Translations: Pre-translated missing UI messages</li> </ul>"},{"location":"release-notes/#january-18-2022","title":"January 18, 2022","text":"<p>Build 220118-76c94a1f</p> <ul> <li>Auth: Logout redirects to base URI instead of site root</li> <li>Videos: Excluded streaming from gzip compression</li> <li>Videos: Fixed Content-Type header and streaming in Safari</li> <li>Folders: Fixed search query string substitutions and sanitation</li> <li>UI: Updated information and links in Settings &gt; About</li> <li>UI: Improved bootstrap template rendering performance</li> </ul>"},{"location":"release-notes/#january-7-2022","title":"January 7, 2022","text":"<p>Build 220107-f5b7ef83</p> <p>Based on our zero bug policy, this update focuses on bug fixes, security, and UX enhancements for search  filters, metadata, and the indexer. In addition, one of the merged pull requests may improve face recognition  performance on smaller devices and with large libraries.</p> <ul> <li>People: Improved update performance on MariaDB</li> <li>People: Improved contrast of person selection menu</li> <li>Albums: Private pictures are excluded from download as zip</li> <li>Search: Improved query parser for additional security</li> <li>Search: Added <code>uid:...</code> search filter to find photos by uid</li> <li>Search: <code>keywords:...</code> filter does not exclude stopwords anymore</li> <li>Index: Original filenames can be extracted from Exiftool JSON</li> <li>Index: More accurate and resilient handling of related files and photo stacks</li> <li>Live Photos: HEIF is used to create primary JPEG instead of a MOV still image</li> <li>Metadata: Reduced log level for missing Exif data from warn to info</li> <li>Metadata: Increased size of projection and color profile fields to 40 characters</li> <li>Backups: Improved help for config options and CLI commands</li> <li>Help: Fixed reverse proxy documentation links</li> <li>Config: Added Apple Video Toolbox hardware transcoding support for macOS</li> <li>Config: Added <code>/opt/photoprism</code> to search path for asset and storage folders</li> </ul>"},{"location":"release-notes/#december-15-2021","title":"December 15, 2021","text":"<p>Build 211215-93b26f19</p> <p>PhotoPrism is not directly affected by the Apache Log4j vulnerability. Logs may still contain messages that can cause harm if consumed by an unpatched Java application. As a precaution, this release includes additional rules and filters to validate user input.</p> <ul> <li>Sharing: Fixed album link redirect on shared domains</li> <li>Import: More helpful warning when another import is already running</li> <li>Docker: ARMv7 image for 32-bit processors and operating systems</li> </ul>"},{"location":"release-notes/#december-10-2021","title":"December 10, 2021","text":"<p>Build 211210-2cb90e7e</p> <p>Starting with this release, the regular multi-arch Docker image is 64-bit only.  A 32-bit version of our stable release for older devices  is offered separately. This frees up development and infrastructure resources with minimal impact.</p> <ul> <li>Security: Updated Go to v1.17.5, which includes HTTP/2 and networking fixes</li> <li>People: Concurrent updates are no longer possible to prevent inconsistencies</li> <li>Places: Additional logs to detect invalid GPS coordinates in metadata</li> <li>SQLite: Reduced routine maintenance log levels and fixed migration warnings</li> <li>Thumbnails: Apple Display P3 profile support for more accurate colors</li> <li>Translations: Updated French</li> </ul>"},{"location":"release-notes/#december-3-2021","title":"December 3, 2021","text":"<p>Build 211203-fdb6b5e1</p> <p>Since the funding goal required to make all features and maps generally available has not been reached, early-access features have been renamed to sponsor features in this update. Offline and high-resolution street maps remain free for everyone, while hybrid, topographic, and outdoor maps are  now a member feature. We believe this is fair. A big thank you to all our sponsors and contributors!</p> <ul> <li>CLI: Improved parameter and command descriptions</li> <li>CLI: Reset command optionally also deletes files in the cache folder</li> <li>Config: Improved <code>docker-compose.yml</code> examples</li> </ul>"},{"location":"release-notes/#november-30-2021","title":"November 30, 2021","text":"<p>Build 211130-13cfcf6d</p> <ul> <li>Videos: Live photos page has been added to the sub-navigation</li> <li>Albums: Manually created albums are sorted by name, with favorites first</li> <li>Places: Improved location details in border regions and near Paris</li> <li>PWA: Updated app icons, style is now also applied to the user interface</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UI: New Abyss and Gemstone dark themes \ud83d\udc8e</li> </ul>"},{"location":"release-notes/#november-28-2021","title":"November 28, 2021","text":"<p>Build 211128-7e8974fd</p> <p>Official support for MySQL 8 is discontinued with this update as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible. We recommend upgrading to MariaDB 10.6 or later. PostgreSQL support is planned for 2022 without a specific release date yet.</p> <ul> <li>CLI: <code>photoprism migrations run --failed</code> will re-run previously failed migrations</li> </ul>"},{"location":"release-notes/#november-27-2021","title":"November 27, 2021","text":"<p>Build 211127-86c43159</p> <p>When possible, location estimates now include a latitude and longitude. Photos load faster when you open  them in Places, and the viewer sorts them by distance. Time zone handling has been completely reworked,  in particular for UTC. The Docker base image has been updated to Ubuntu 21.10, which ships with  Darktable 3.6 among other updated dependencies. </p> <ul> <li>UX: Redesigned splash screen based on theme colors</li> <li>Places: Viewer loads faster and sorts photos by distance instead of date</li> <li>Places: Less frequent estimates to reduce background activity</li> <li>Places: Normalized names of states, oceans, and lakes</li> <li>Places: Updated location data from OpenStreetMap</li> <li>Places: State albums are grouped by country name</li> <li>Folders: Path names are searched in addition to titles</li> <li>People: Improved face detection performance</li> <li>People: Fixed naming faces in non-primary files</li> <li>People: Optimized matching of children's faces</li> <li>RAW: Updated Darktable to 3.6.0</li> <li>Metadata: Improved estimates and UTC time zone handling</li> <li>Metadata: Altitude is indexed even if coordinates are missing</li> <li>Auth: Usernames are not case-sensitive anymore</li> <li>CLI: Added <code>--force</code> flag to <code>photoprism optimize</code> command</li> <li>CLI: Improved parameter and command descriptions</li> <li>Config: Improved <code>docker-compose.yml</code> examples</li> <li>Translations: Added Bahasa Indonesia and Hungarian</li> <li>Translations: Updated Polish and Italian</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>CLI: Run <code>photoprism places update</code> to retrieve updated location details</li> <li>Config: Set <code>PHOTOPRISM_APP_ICON</code> to choose an alternative PWA icon</li> </ul>"},{"location":"release-notes/#october-18-2021","title":"October 18, 2021","text":"<p>Build 211018-e200f322</p> <ul> <li>UI: Updated Lavender theme</li> <li>Places: Fixed maps initialization after reload in non-public mode</li> <li>Search: Added <code>live</code> and <code>raw:true</code> filters as alternative to <code>type:\u2026</code></li> <li>Search: Added <code>faces:new</code> alias for <code>face:new</code></li> <li>Config: Maximum background worker interval has been increased to 7 days</li> <li>Security: Added <code>Content-Security-Policy</code> header to prevent framing attacks</li> <li>Translations: Updated Russian and Slovak</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UI: New Vanta dark theme \u2728</li> </ul>"},{"location":"release-notes/#october-10-2021","title":"October 10, 2021","text":"<p>Build 211010-83b4f783</p> <ul> <li>Translations: Fixed German frontend typo</li> <li>Translations: Updated all backend locales</li> </ul> <p>We've generated missing translations with the help of DeepL and Google Translate. Native speakers are  invited to help us improve those if needed. Learn how to contribute.</p>"},{"location":"release-notes/#october-9-2021","title":"October 9, 2021","text":"<p>Build 211009-d6cc8df5`</p> <ul> <li>UX: Improved wording of search result notifications</li> <li>UX: Fixed sidebar navigation on small screens</li> <li>Users: Show name and email in sidebar navigation</li> <li>Folders: Directory names listed in .ppignore are ignored</li> <li>Config: Allows bypassing low memory suggestion</li> <li>Docs: Updated about page</li> <li>Translations: Updated all frontend locales</li> </ul>"},{"location":"release-notes/#october-7-2021","title":"October 7, 2021","text":"<p>Build 211007-8f55d6f8</p> <ul> <li>People: Improved stability and performance of new faces overview page</li> <li>Index: Duplicate error logs caused by broken JPEG files have been removed</li> <li>UX: Enhanced visibility of file errors in the edit dialog files tab</li> <li>CLI: Revised descriptions of commands and configuration flags</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>People: Recognized faces can be hidden on the overview page </li> </ul>"},{"location":"release-notes/#october-2-2021","title":"October 2, 2021","text":"<p>Build 211002-bf015326</p> <ul> <li>People: Enhanced UI / UX for renaming and merging faces</li> <li>People: Improved face detection accuracy</li> <li>Labels: Improved photo count accuracy</li> <li>Covers: Thumbnails load and update faster</li> <li>Search: Finds titles when query is too short for full-text index</li> <li>Search: <code>name:\u2026</code> filter ignores path and extension</li> <li>Videos: Optional Intel GPU hardware transcoding support</li> <li>Index: Automatic cleanup of orphaned file entries</li> <li>Logs: Updated log messages for improved readability</li> <li>Translations: Updated German and French</li> <li>Docker: Simplified installation of TensorFlow with AVX / AVX2 support</li> <li>Docker: Entrypoint script uses prefixed environment variables, <code>UID</code> and <code>GID</code> are deprecated</li> </ul>"},{"location":"release-notes/#september-25-2021","title":"September 25, 2021","text":"<p>Build 210925-96168e4b</p> <ul> <li>Recognizes faces so that specific people can be found</li> <li>UX: Improved UI design, navigation, and wording</li> <li>Search: Omit full-text index if query is too short</li> <li>Search: Added <code>keywords:\u2026</code>, <code>subjects:\u2026</code>, and <code>albums:\u2026</code> filters</li> <li>Places: Internationalized maps incl RTL support</li> <li>Labels: Added photo counts to overview page </li> <li>Albums: Fixed share expiration date in form label</li> <li>Calendar: Empty month albums are hidden</li> <li>Viewer: Photos will be updated when search filters change</li> <li>Index: Ignore Synology <code>@eaDir</code> folders</li> <li>Import: Ignore dot files listed in <code>.ppignore</code></li> <li>Upload: Added more detailed error logs</li> <li>Videos: Skip related images when downloading</li> <li>Videos: Added .mp as known MP4 file extension</li> <li>Videos: Default to UTC as metadata time zone</li> <li>Exiftool: Enabled large file support</li> <li>Metadata: Improved Exif parser with cycle detection</li> <li>Metadata: Support for long projection type names like transverse-cylindrical</li> <li>Config: Added RAW file extension blacklists for Darktable and RawTherapee</li> <li>Config: Added disable options for image classification and facial recognition</li> <li>Config: Added support for non-root site URLs</li> <li>Config: Added content delivery network URL option</li> <li>MariaDB: Set explicit table engine, charset, and collation</li> <li>MariaDB: Added log message for old versions with broken table name resolution</li> <li>Docker: Added <code>HOME</code> env for Darktable &amp; RawTherapee</li> <li>Docker: Single multi-arch image for AMD64, ARM64, and ARMv7</li> </ul>"},{"location":"release-notes/#may-23-2021","title":"May 23, 2021","text":"<p>Build 210523-b1856b9d</p> <ul> <li>RAW: Added RawTherapee flag to use existing sidecar files</li> <li>Import: Never remove ignored folders such as for Syncthing</li> </ul>"},{"location":"release-notes/#may-20-2021","title":"May 20, 2021","text":"<p>Build 210520-4b32bac7</p> <ul> <li>Docker: Fixed home directory permissions in new base image</li> <li>HEIF: Test if JPEG was already rotated based on video metadata</li> </ul>"},{"location":"release-notes/#may-19-2021","title":"May 19, 2021","text":"<p>Build 210519-24b5c7e6</p> <ul> <li>Metadata: Updated Exiftool to fix security issue</li> </ul>"},{"location":"release-notes/#may-18-2021","title":"May 18, 2021","text":"<p>Build 210518-80981c25</p> <ul> <li>Safari: Fixed PWA file download on iOS</li> <li>Docker: Added config example for scheduled background tasks</li> <li>Docker: Updated base image includes Darktable 3.4.1, RawTherapee 5.8, and FFmpeg 4.3.2</li> <li>TensorFlow: Improved error handling</li> <li>Translations: Updated French</li> </ul>"},{"location":"release-notes/#may-5-2021","title":"May 5, 2021","text":"<p>Build 210505-d3e53a89</p> <ul> <li>UI: Improved RTL (right-to-left language) alignment</li> <li>RAW: Added config options to disable specific converters</li> <li>Metadata: Preserve stopwords in existing keywords</li> <li>Metadata: Allow single quotes in keywords</li> <li>WebDAV: Keep favorite flag when uploading via PhotoSync</li> <li>Translations: Updated Dutch   and German</li> </ul>"},{"location":"release-notes/#april-26-2021","title":"April 26, 2021","text":"<p>Build 210426-da6e948f</p> <ul> <li>UI: Added Yellowstone theme for members, unlocked Grayscale theme for everyone</li> <li>Metadata: Support for XMP sidecar CreateDate and Keywords</li> <li>Metadata: Merge keywords from different sources</li> <li>Translations: Updated Hebrew</li> </ul>"},{"location":"release-notes/#april-22-2021","title":"April 22, 2021","text":"<p>Build 210422-97e75b04</p> <ul> <li>UX: Improved touch event accuracy</li> <li>UX: Optimized rendering on small screens</li> <li>UX: Fixed autocomplete in \"add to album\" dialog</li> <li>HEIF: Prevent redundant sidecar JPEG files</li> <li>Backup: Added command flags and usage docs</li> <li>Translations: Added Danish    and Kurdish</li> </ul>"},{"location":"release-notes/#february-22-2021","title":"February 22, 2021","text":"<p>Build 210222-ac5a9d5e</p> <ul> <li>UX: Autofocus for input fields and confirm on enter</li> <li>Restore: Find YAML album backups in originals folder</li> <li>Metadata: Improved location labels and moments</li> <li>Thumbnails: Fixed auto-rotation for HEIF, TIFF, and PNG images</li> <li>Translations: Added Norwegian (Bokm\u00e5l)</li> </ul>"},{"location":"release-notes/#february-17-2021","title":"February 17, 2021","text":"<p>Build 210217-49039368</p> <ul> <li>Videos: Optimized transcoding parameters</li> <li>Videos: Use AAC audio for MP4 transcoding </li> <li>Metadata: Default to landscape orientation if data is invalid</li> <li>Translations: Updated Brazilian Portuguese</li> </ul>"},{"location":"release-notes/#february-16-2021","title":"February 16, 2021","text":"<p>Build 210216-4939e36a</p> <ul> <li>UX: Automatically hide scrollbar in photo viewer and Places</li> <li>Delete: Permanently remove all related sidecar files</li> <li>Videos: Added transcoding config options</li> <li>Videos: Added batch transcoding via convert command</li> <li>Metadata: Remove estimate when setting a new country</li> <li>Metadata: Workaround for Exif strings containing newlines</li> </ul>"},{"location":"release-notes/#february-11-2021","title":"February 11, 2021","text":"<p>Build 210211-b9595dd4</p> <ul> <li>Videos: Native player featuring performance and UX enhancements</li> <li>Index: Improved detection of missing photos, files, and folders</li> </ul>"},{"location":"release-notes/#february-8-2021","title":"February 8, 2021","text":"<p>Build 210208-9e10ba69</p> <ul> <li>Upload: Adds duplicates to selected albums as well</li> <li>Library: Show folder covers in Originals</li> <li>Metadata: Automatically remove orphan countries, cameras, and lenses</li> <li>Metadata: Improved Exif parser</li> <li>Backup: Restore archive flag from YAML files</li> <li>Docker: Improved entrypoint script</li> </ul>"},{"location":"release-notes/#january-28-2021","title":"January 28, 2021","text":"<p>Build 210128-a82061e0</p> <ul> <li>UX: Improved theme colors and icons</li> <li>UX: Download all related media files using their current name by default</li> <li>UX: Redirect already authenticated users from /login to /browse</li> <li>Mobile: Prevent like on touch swipe</li> <li>Translations: Updated German and French</li> <li>Config: Reduced auto index &amp; import safety delay defaults</li> <li>Metadata: Improved photo titles, removed small words from title endings</li> <li>Metadata: Improved date extraction from current and original file names</li> <li>Metadata: Fallback to earliest file mod time in case there is no other date</li> <li>Import: Index keywords from non-primary filenames as well</li> <li>WebDAV: Improved service discovery</li> <li>Purge: Hide missing files in edit dialog and set new primary if needed</li> <li>Archive: Physically delete files after confirmation</li> <li>Moments: Added delete button to context menu</li> <li>Settings: Added Estimates and Delete feature flags</li> <li>CLI: Added cleanup command to remove orphaned index entries and thumbnails</li> </ul>"},{"location":"release-notes/#january-21-2021","title":"January 21, 2021","text":"<p>Build 210121-07e559df</p> <ul> <li>UX: Improved video playback and icons</li> <li>UX: Restructured main navigation</li> <li>Mobile: Show search field in albums</li> </ul>"},{"location":"release-notes/#january-20-2021","title":"January 20, 2021","text":"<p>Build 210120-e7cd5e9a</p> <ul> <li>API: Apply limit, offset and sort order when searching for IDs</li> <li>ARM64: Reverted database image back to arm64v8/mariadb in config example</li> </ul>"},{"location":"release-notes/#january-19-2021","title":"January 19, 2021","text":"<p>Build 210119-a5399f06</p> <ul> <li>UX: Optimized user interface for iOS and tablets</li> <li>UX: Improved theme colors</li> <li>UX: Scroll position is restored when navigating back</li> <li>Translations: Added Czech</li> <li>Metadata: Estimate timezone    and allow overwriting estimated locations </li> <li>Settings: Fixed disabling logs</li> </ul> <p>For our sponsors and contributors:</p> <ul> <li>UX: Added two dark themes</li> </ul>"},{"location":"release-notes/#january-11-2021","title":"January 11, 2021","text":"<p>Build 210111-cc05c430</p> <ul> <li>UX: Disabled preloading in live photo player to reduce memory footprint</li> <li>UX: Updated main navigation, find all media types via /browse</li> <li>UX: Removed lag when selecting pictures</li> <li>UX: Tweaked tile size breakpoints in Albums, Labels, and Search</li> <li>UX: Added tooltips to navigation expand and minimize buttons</li> <li>UX: Preload additional search results</li> <li>UX: Removed image loading spinners for faster rendering</li> <li>Thumbnails: Added cache control headers for improved performance</li> <li>Album Covers: Cache will be flushed after updating private flags</li> <li>Search: Improved performance of photos query</li> <li>PWA: Added service worker so that app can be installed more easily</li> <li>PWA: Enabled auto-rotate   so that photos may be viewed in landscape mode</li> <li>Frontend: Removed unused dependencies and    reduced build size</li> <li>Translations: Updated Russian,    French,   Simplified Chinese, and   German</li> <li>Index: Automatically create JPEGs for related media files as well</li> <li>Import: Improved error handling when the file system becomes unavailable</li> <li>Config: Updated docker-compose.yml examples</li> <li>Config: Added optional gzip compression for built-in web server</li> <li>Config: Limit number of indexing workers to half the number of physical cores by default to    avoid high load on hyper-threading capable CPUs</li> </ul>"},{"location":"release-notes/#january-4-2021","title":"January 4, 2021","text":"<p>Build 210104-7f9e806a</p> <ul> <li>Config: Added auto index &amp; import defaults to Dockerfiles</li> <li>Import: Extract metadata with ExifTool before moving</li> <li>Import: Automatically create folder albums</li> <li>Help: Updated WebSocket page</li> <li>UX: Added <code>UI.Zoom</code> setting to re-enable page zoom</li> <li>UI: Updated default theme</li> <li>Translations: Added Hebrew &amp; Japanese, updated Brazilian Portuguese</li> <li>Albums &amp; Cards View: Reduced tile size on large screens</li> <li>WebDAV: Less verbose logging</li> </ul>"},{"location":"release-notes/#january-2-2021","title":"January 2, 2021","text":"<p>Build 210102-af71e5f7</p> <ul> <li>WebDAV: Uploads and other changes trigger auto indexing / importing</li> <li>Config: Use random hash for improved preview token security </li> <li>UX: Disabled page zoom so that app feels more native on mobile devices</li> <li>UX: Reduced min password length to 4 characters</li> <li>UX: Improved docker-compose.yml examples</li> <li>UX: Reduced icon size in \"add to album\" dialog</li> </ul>"},{"location":"release-notes/#december-31-2020","title":"December 31, 2020","text":"<p>Build 201231-8e22fbf8</p> <ul> <li>Initial Stable Release</li> </ul>"},{"location":"release-notes/#getting-updates","title":"Getting Updates","text":"<p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. To update, you can either manually pull the most recent image and restart, or set up a service like Watchtower to get automatic updates.</p>"},{"location":"developer-guide/","title":"Every Contribution Makes a Difference","text":"<p>We welcome contributions of any kind, including blog posts, tutorials, testing, writing documentation, and pull requests.</p>"},{"location":"developer-guide/#our-milestones","title":"Our Milestones","text":""},{"location":"developer-guide/#upcoming-features-and-enhancements","title":"Upcoming Features and Enhancements","text":"<p>The public roadmap shows what tasks are in progress,  what needs testing, and which features are going to be implemented next.</p> <p>You are welcome to submit specific feature requests if you have verified that no similar idea or todo already exists. Give ideas you like a thumbs-up \ud83d\udc4d  , so that we know what is most popular.</p>"},{"location":"developer-guide/#join-the-community","title":"Join the Community","text":"<p>Follow us on Twitter and join the Community Chat to get regular updates, connect with other contributors, and discuss your ideas. Our Code of Conduct explains the \"dos and don\u2019ts.\"</p> <p>An important part of our journey is to explore new directions in product development and build better software through consistent use of feedback.</p> <p>Feel free to contact us with anything that is on your mind, even if you just want to say hello. It is our goal to answer all questions we receive from our users, customers, partners, and the developer community. Our team also welcomes feedback if you believe something can or should be improved.</p>"},{"location":"developer-guide/#creating-bug-reports","title":"Creating Bug Reports","text":"<p>Before reporting a bug, please use our Troubleshooting Checklists to determine the cause of your problem. If you have a general question, need help, it could be a local configuration issue, or a misunderstanding in how the software works:</p> <ul> <li>you are welcome to ask in our Community Chat</li> <li>or post your question in GitHub Discussions</li> </ul> <p>When reporting a problem, always include the software versions you are using and other information about your environment such as browser, browser plugins, operating system, storage type, memory size, and processor.</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app.</p> <p>Note that all issue subscribers receive an email notification from GitHub whenever a new comment is added, so these should only be used for sharing important information and not for discussions, questions or expressing personal opinions.</p>"},{"location":"developer-guide/#submitting-pull-requests","title":"Submitting Pull Requests","text":"<p>Follow our step-by-step guide to learn how to submit new features, bug fixes, and documentation enhancements.</p> <p>Pull requests solving \"help wanted\" issues are the easiest to merge and the most helpful to us, as they allow us to spend more time on core functionality and other issues that are difficult for external contributors to work on. If you are new to this project, anything labeled \"easy\" may be a good first contribution.</p> <p>Be aware that reviewing, testing and finally merging pull requests requires significant resources on our side. It can therefore take several months if it is not just a small fix, especially if extensive testing is needed to prevent bugs from getting into our stable version.</p>"},{"location":"developer-guide/#thank-you-to-all-current-and-past-sponsors","title":"Thank You to All Current and Past Sponsors","text":"<p>A big thank you to all of our sponsors, whose generous support has been and continues to be essential to the success of the project! </p> <p>Our project infrastructure is provided by the following companies:</p> <ul> <li>GitHub hosts our code repositories and also provides many other important services</li> <li>Docker approved us for their Open Source Program and hosts all of our app images</li> <li>Element develops and operates the infrastructure that our community chat is based on</li> <li>BrowserStack provides free access to their device and browser testing infrastructure</li> </ul> <p>View Sponsors \u203a View Credits \u203a</p> <p>Privacy Notice</p> <p>We operate a number of web services that help us develop and maintain our software in collaboration with the open source community, for example translate.photoprism.app.</p> <p>Because many of these apps and tools were originally developed for internal use without a high level of privacy in mind, we ask that you do not enter personal information such as your real name or personal email address if you want it to remain private.</p> <p>Personal details may otherwise show up in logs, source code, translation files, commit messages, and pull request comments.</p>"},{"location":"developer-guide/code-quality/","title":"Quality and Best Practices","text":"<p>The quality of code has a practical impact on both your agility and the cost of development:<sup>1</sup></p> <ul> <li>you can't change buggy and/or bloated code fast enough to be truly agile</li> <li>existing bugs can easily increase development costs (and time) by 10x</li> <li>the mess eventually becomes so big and so deep that you cannot clean it up anymore<sup>2</sup></li> </ul> <p> </p> Productivity vs Time <p>All developers with more than a few years experience know that previous messes slow them down. And yet all developers feel the pressure to make messes in order to meet deadlines. In short, they don\u2019t take the time to go fast! You will not make the deadline by making a mess. Indeed, the mess will slow you down instantly, and will force you to miss the deadline. \u2014 Robert C. Martin</p>"},{"location":"developer-guide/code-quality/#bottom-up-development","title":"Bottom-Up Development","text":"<p>Breaking a problem down into small, coherent fragments lends itself to organization. Start with the basic low-level components and then proceed to higher-level abstractions.</p> <p>Bottom-up development emphasizes coding and early testing, which can begin before having a detailed understanding of the final system. In practice, this may never be the case as requirements are constantly evolving.</p> <p>Advantages of the bottom-up approach are component reusability, agility, and testability.</p> <p>I compared Mel's hand-optimized programs with the same code massaged by the optimizing assembler program, and Mel's always ran faster. That was because the \u201ctop-down\u201d method of program design hadn't been invented yet, and Mel wouldn't have used it anyway.  He wrote the innermost parts of his program loops first. \u2014 The Story of Mel</p>"},{"location":"developer-guide/code-quality/#opportunistic-refactoring","title":"Opportunistic Refactoring","text":"<p>We encourage developers to refactor existing code when they notice a specific issue, even though this may seem difficult when working with a distributed team, branches, and pull requests due to potential merge conflicts and delayed feedback.</p> <p>It is best to do this while you are working on the same component anyway, for example to implement a feature or enhancement. This way you can easily validate if the proposed changes make sense and you avoid conflicts with others.</p> <p>Releasing imperfect code is not a problem as long as it is accompanied by automated tests. This makes it easy to refactor later without breaking anything or requiring detailed knowledge of the requirements and a lot of time for manual testing. Be pragmatic. Done is better than perfect.</p> <p>Potential security issues are an important exception. These should never be ignored. If you find a problem, please report it to us immediately so we can fix it.</p> <p>Feel free to think ahead, just don't code ahead. But also, don't feel the need to decide so many details ahead. Learn enough to get started and build only what you need. \u2014 J. B. Rainsberger</p>"},{"location":"developer-guide/code-quality/#premature-optimization","title":"Premature Optimization","text":"<p>One of the hardest parts of software development is knowing what to work on. Don't get carried away implementing unnecessary abstractions and focusing on scalability optimization before you've even validated the functionality of a feature or component.</p> <p>Instead of spending a lot of time on something you may not need, focus on user needs and test automation. That way, you'll make sure you're developing the right functionality, and you can refactor it later for scalability and other non-functional aspects without breaking anything.</p> <p>Also keep in mind that it's much easier and less effort to maintain small amounts of duplicate code than to choose the wrong abstraction.</p> <p>Premature optimization is the root of all evil. \u2014 Donald Knuth</p>"},{"location":"developer-guide/code-quality/#be-careful-with-caching","title":"Be Careful with Caching","text":"<p>There are two hard things in computer science: cache invalidation and naming things.</p> <p>A cache is just a memory leak you haven't met yet. \u2014 Dave Cheney</p>"},{"location":"developer-guide/code-quality/#go-slow-before-you-go-fast","title":"Go Slow Before You Go Fast \ud83d\udc30","text":"<p>Read the docs, understand the context, and talk to others to gather missing information before you start coding. Write tests. Stay focused.</p> <p>Don't worry that this will take too long. Take your time. It's the fastest and only sustainable way to get things done. You have to go slow before you can go fast.</p> <p>Simple, elegant solutions are more effective, but they are harder to find than complex ones, and they require more time, which we too often believe to be unaffordable. \u2014 Niklaus Wirth, Communications of the ACM, 1985</p>"},{"location":"developer-guide/code-quality/#effectiveness-efficiency","title":"Effectiveness &gt; Efficiency","text":"<p>Optimize for effectiveness before efficiency when prioritizing tasks:</p> <ul> <li>Effectiveness is about achieving a specific outcome, such as providing the features that best help users solve their problems.</li> <li>Efficiency means doing things in an optimal way, for example, faster and cheaper. We all strive to be efficient, but that's worthless if it doesn't contribute to effectiveness.</li> </ul> <p>In contrast, a feature factory focuses on the quantity of new features rather than their quality:</p> <p></p> <p>It is fundamentally the confusion between effectiveness and efficiency that stands between doing the right things and doing things right. There is surely nothing quite so useless as doing with great efficiency what should not be done at all. \u2014 Peter Drucker</p>"},{"location":"developer-guide/code-quality/#test-automation-guidelines","title":"Test Automation Guidelines","text":"<p>We strive for complete test coverage as it is a useful tool for finding  untested parts of our code base. Test coverage is of limited use as a numerical statement of how good our tests are.</p> <p>The F.I.R.S.T. Principle includes five rules that good tests should follow:<sup>2</sup></p> <ul> <li>Fast. If tests are slow, you won't run them frequently, which makes them much less useful and increases the cost of development.</li> <li>Independent. You should be able to run each test independently and run the tests in any order you like. When tests depend on each other, then the first one to fail causes a cascade of downstream failures, making diagnosis difficult and hiding downstream defects.</li> <li>Repeatable. If your tests aren\u2019t repeatable in any environment, then you\u2019ll always have an excuse for why they fail. You\u2019ll also find yourself unable to run the tests when the environment isn\u2019t available.</li> <li>Self-Validating. You should not have to read through a log file to tell whether the tests pass. If the tests aren\u2019t self-validating, then failure can become subjective and running the tests can require a long manual evaluation.</li> <li>Timely. If you write the tests after the production code, you will generally find that the production code is difficult to test. Instead, add tests at implementation time to ensure that the code is testable, does what you expect it to do, and meets the requirements.</li> </ul> <p>Code that cannot be tested is flawed. \u2014 Anonymous</p>"},{"location":"developer-guide/code-quality/#code-quality-reports","title":"Code Quality Reports","text":"<p>goreportcard.com generates reports on the quality of Open Source Go projects. It uses several measures, including <code>gofmt</code>, <code>go vet</code>, <code>go lint</code> and <code>gocyclo</code>. If you find this helpful and also use the tool for your own projects, you can support the developers on Patreon.</p> <p></p> <p>Take inspiration from quality reports, but keep in mind that not every reported issue must be fixed immediately.</p>"},{"location":"developer-guide/code-quality/#security-best-practices","title":"Security Best Practices","text":"<p>The Open Source Security Foundation (OpenSSF) maintains standardized security criteria and best practices for open-source projects:</p> <p></p> <p>View Security Testing Guide \u203a</p> <ol> <li> <p>Allen Holub, twitter.com/allenholub/status/1073738216140791808, 2018\u00a0\u21a9</p> </li> <li> <p>Robert C. Martin, Clean Code: A Handbook of Agile Software Craftsmanship, 2009\u00a0\u21a9\u21a9</p> </li> </ol>"},{"location":"developer-guide/configuration/","title":"Configuration","text":""},{"location":"developer-guide/configuration/#help","title":"Help","text":"<p><code>photoprism help</code> shows available commands, config parameters and environment variable names. These are also listed in Getting Started.</p>"},{"location":"developer-guide/configuration/#show-current-settings","title":"Show current settings","text":"<p><code>photoprism config</code> shows all config parameters and their values.</p>"},{"location":"developer-guide/configuration/#change-settings","title":"Change settings","text":"<p>You can either use environment variables like <code>PHOTOPRISM_CACHE_PATH</code>, config files (in the <code>storage/config</code> directory) or command line parameters like <code>--cache-path</code> to configure PhotoPrism. Environment variables are usually best for dockerized applications. You can easily set them in docker-compose.yml without touching any other files.</p> <p>There is no need to change any settings if you follow the steps described in Setup.</p>"},{"location":"developer-guide/directories/","title":"Repository Folder Structure","text":"<p>Our directory layout is loosely based on golang-standards/project-layout:</p> <ul> <li><code>/</code> contains a Makefile, a readme, the license and various config files for dependency management, building and continuous integration</li> <li><code>/assets</code> contains subdirectories for various assets such as photos, built JS/HTML/CSS files and server-side HTML templates</li> <li><code>/cmd</code> contains the application source code (main package)</li> <li><code>/docker</code> contains Dockerfiles and related assets, e.g. for Development, TensorFlow and ARM64</li> <li><code>/frontend</code> contains our Web frontend JS/HTML/CSS source code</li> <li><code>/internal</code> contains the source code of our internal Go packages</li> <li><code>/pkg</code> contains the source code of our public Go packages</li> <li><code>/scripts</code> contains shell scripts used for building, deployment and continuous integration</li> </ul>"},{"location":"developer-guide/documentation/","title":"Documentation","text":""},{"location":"developer-guide/documentation/#user-facing-documentation","title":"User Facing Documentation","text":"<p>User-facing documentation lives in the photoprism-docs repository and can be browsed on docs.photoprism.app.</p> <p>See the README for how to easily edit the docs yourself.</p>"},{"location":"developer-guide/documentation/#package-documentation-godoc","title":"Package Documentation (GoDoc)","text":"<p>Godoc generates documentation automatically, so it's tightly coupled to the photoprism source code.</p> <p> View Package Docs </p> <p>Some highlights to explore:</p> <ul> <li>cmd/photoprism - main application</li> <li>internal/photoprism - main library package</li> <li>internal/server - server initialization and routing</li> <li>internal/api - server api</li> <li>internal/commands - command line interface</li> <li>internal/form - input validation (based on gin)</li> <li>internal/entity - models (based on GORM)</li> </ul>"},{"location":"developer-guide/faq/","title":"Frequently Asked Questions","text":""},{"location":"developer-guide/faq/#why-not-use-a-more-permissive-public-license-so-that-for-example-developers-at-google-can-contribute-more-easily","title":"Why not use a more permissive public license so that, for example, developers at Google can contribute more easily?","text":"<p>Since we had hoped for a collaboration with Google and were aware of their AGPL policy, PhotoPrism was initially licensed under Apache 2.0, which is much more permissive. However, no one seemed interested, although we did talk to quite a few personal acquaintances at Google. That made it easy for our community to convince us to use AGPL instead.</p>"},{"location":"developer-guide/faq/#isnt-it-insecure-that-thumbnail-urls-work-even-if-you-are-not-logged-in","title":"Isn't it insecure that thumbnail URLs work even if you are not logged in?","text":"<p>Like most commercial image hosting services, we've chosen to use a cookie-free thumbnail API to minimize request latency and avoid unnecessary network traffic. If you were to copy private session cookies and use them in a different browser window, you would have a similar problem, except that they also work for other API endpoints, not just a single image.</p> <p>Even if URLs were to become invalid every minute: Digital copies are as good as originals. Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back. Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p> <p>Visit docs.photoprism.app/developer-guide/media/thumbnails/ to learn more.</p>"},{"location":"developer-guide/faq/#does-your-software-depend-on-any-external-services","title":"Does your software depend on any external services?","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>Your use of these services is fully covered by us. Depending on your usage, this can save you much more than the cost of a PhotoPrism+ Membership, since other providers generally charge usage-based fees and often don't allow you to cache the data they provide, compromising performance and your privacy with unnecessary requests.</p> <p>You might also come across other apps that use the free map tile service offered by openstreetmap.org. In this case, their usage and privacy policies apply, meaning that your request data is stored and used to create publicly available reports. This is a major difference from our approach, which focuses on your privacy and user experience.</p> <p>In order to use the maps and view location details in PhotoPrism, as well as successfully run our test suite as a developer, you must allow requests to these API endpoints if you have a firewall installed and make sure your Internet connection is working.</p> <p>Should you wish to operate one or both of these services on your own premises, we can set up such a fully autonomous solution for you, provided you are prepared to cover the initial setup costs as well as ongoing maintenance fees for content licenses and updates.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p>"},{"location":"developer-guide/faq/#why-do-i-see-connection-errors-when-requesting-api-keys-at-startup","title":"Why do I see connection errors when requesting API keys at startup?","text":"<p>As explained above, reverse geocoding and interactive world maps depend on retrieving the necessary information from external services. Please make sure that you allow requests to these API endpoints if you have a firewall installed, and verify that your Internet connection is working.</p>"},{"location":"developer-guide/faq/#are-the-keys-for-using-interactive-world-maps-provided-free-of-charge","title":"Are the keys for using interactive world maps provided free of charge?","text":"<p>The API keys required to use the maps are unfortunately not free for us due to the number of users we have. Those costs are one of the reasons why we encourage all users to support our mission by signing up as a member or purchasing a commercial license.</p> <p>To improve the situation for those who don't want to or cannot sign up, it would be possible to add more details like cities and lakes to the basic maps. The only problem is that we don't have the resources to do it ourselves due to the large backlog of feature requests, so we hope someone can contribute this:</p> <ul> <li>Places: Improve the level of detail of the basic world map</li> </ul> <p>We are aware that advanced users could register \"non-commercial test accounts\" instead, but we think that would not be completely fair and MapTiler could then no longer offer them to those in need. Keep in mind that we have many more users than other open source projects that might encourage their users to do this. Likewise, using the OpenSteetMap development API is discouraged for consumer applications like ours, although some projects do it anyway.</p>"},{"location":"developer-guide/issues/","title":"GitHub Issues","text":"<p>We use GitHub issues for managing bugs,  ideas, and todos. Issues labeled help wanted / easy can be good (first) contributions. Don't hesitate to contact us if you want to work on something specific or need help with a pull request. </p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app.</p> <p>Note that all issue subscribers receive an email notification from GitHub whenever a new comment is added, so these should only be used for sharing important information and not for discussions, questions or expressing personal opinions.</p>"},{"location":"developer-guide/issues/#how-to-write-user-stories","title":"How to Write User Stories","text":"<p>Start describing new ideas and tasks with a user story similar to this one:</p> <p>As a [type of person] I'd like to be able to [do something] so that I can [get some result].</p> <p>This makes it easier for everyone to understand who wants what and why.</p> <p>Reading between the lines consumes a lot of time that can be used more effectively. Vague requirements become even more expensive when the wrong things are implemented, or they don't provide value in the way they were implemented.</p>"},{"location":"developer-guide/issues/#acceptance-criteria","title":"Acceptance Criteria","text":"<p>Issues should include a list of Acceptance Criteria that clearly state what is expected. We recommend using MAY, SHOULD, and MUST as keywords to indicate priorities.</p> <p>Clickable checkboxes for each item can be created via GitHub Markdown:</p> <pre><code>Acceptance Criteria:\n\n- [ ] \"Log In\" button MUST be visible on /login page\n- [ ] \"Log In\" button MAY be disabled if password field is empty\n- [ ] Page SHOULD use existing Vuetify components\n- [ ] Login MUST work in latest Firefox, Safari and Chrome\n</code></pre>"},{"location":"developer-guide/pull-requests/","title":"Pull Requests","text":""},{"location":"developer-guide/pull-requests/#acceptance-criteria","title":"Acceptance Criteria","text":"<p>Because we want to create the best possible product for our users, we have a set of criteria to ensure that all submissions are acceptable:</p> <ul> <li> Features and enhancements must be fully implemented so that they can be released at any time without additional work</li> <li> Automated unit and/or acceptance tests are mandatory to ensure the changes work as expected and to reduce repetitive manual work</li> <li> Frontend components must be responsive to work and look properly on phones, tablets, and desktop computers; you must have tested them on all major browsers and different devices</li> <li> Documentation and translation updates should be provided if needed</li> <li> In case you submit database-related changes, they must be tested and compatible with SQLite 3 and MariaDB 10.5.12+</li> </ul> <p>These guidelines are not intended as a filter or barrier to participation. If you are unfamiliar with Open Source development, we will help you.</p>"},{"location":"developer-guide/pull-requests/#contributor-license-agreement","title":"Contributor License Agreement","text":"<p>After you submit your first pull request, you will be asked to accept our Contributor License Agreement (CLA). Visit photoprism.app/cla to learn more.</p>"},{"location":"developer-guide/pull-requests/#how-to-create-and-submit-a-pull-request","title":"How to Create and Submit a Pull Request","text":""},{"location":"developer-guide/pull-requests/#fork-our-repository","title":"Fork our repository","text":"<ul> <li>Click the Fork button in the header of our main repository</li> <li>Clone the forked repository on your local computer: <ul> <li><code>git clone https://github.com/[your username]/photoprism</code></li> </ul> </li> <li>Connect your local to our \"upstream\" main repository by adding it as a remote: <ul> <li><code>git remote add upstream https://github.com/photoprism/photoprism.git</code> </li> </ul> </li> <li>Create a new branch from <code>develop</code> - it should have a short and descriptive name (not \"patch-1\") that does not already exist, for example:<ul> <li><code>git checkout -b feature/your_feature_name</code> </li> </ul> </li> <li>See also https://guides.github.com/activities/forking/</li> </ul>"},{"location":"developer-guide/pull-requests/#make-your-changes","title":"Make your changes","text":"<ul> <li>While you are working on it and your pull request is not merged yet, pull in changes from \"upstream\" often so that you stay up to date and there is a lower risk for merge conflicts:<ul> <li><code>git fetch upstream</code></li> <li><code>git merge upstream/develop</code></li> </ul> </li> <li>We recommend running tests after each change to make sure you didn't break anything:<ul> <li><code>make test</code></li> </ul> </li> <li>Add tests for any new code <ul> <li>If you have questions about how to do this, please ask in your pull request</li> </ul> </li> <li>Run <code>make fmt</code> to ensure code is properly formatted according to our standards</li> <li>If all tests are green and you see no other errors, commit your changes. To reference related GitHub issues, please end your commit message with the issue ID like <code>#1234</code>:<ul> <li><code>git status -s</code></li> <li><code>git add .</code></li> <li><code>git commit -m \"Your commit message #1234\"</code></li> </ul> </li> </ul>"},{"location":"developer-guide/pull-requests/#when-you-are-ready","title":"When you are ready...","text":"<ul> <li> Verify you didn't forget to add / commit files, output of <code>git status -s</code> should be empty</li> <li> Push all commits to your forked remote repository on GitHub:<code>git push -u origin feature/your_feature_name</code></li> <li> Create a pull request with a helpful description of what it does</li> <li> Wait for us to perform a code review and fix the remaining issues, if any</li> <li> Update and/or add documentation if needed</li> <li> Sign the Contributor License Agreement (CLA)</li> </ul> <p>You can also create a pull request if your changes are not yet complete or working. Just let us know  it's in progress, so we don't try to merge them. We can help you with a code review or other feedback  if needed. Please be patient with us.</p> <p>Be aware that reviewing, testing and finally merging pull requests requires significant resources on our side. It can therefore take several months if it is not just a small fix, especially if extensive testing is needed to prevent bugs from getting into our stable version.</p> <p>Privacy Notice</p> <p>We operate a number of web services that help us develop and maintain our software in collaboration with the open source community, for example translate.photoprism.app.</p> <p>Because many of these apps and tools were originally developed for internal use without a high level of privacy in mind, we ask that you do not enter personal information such as your real name or personal email address if you want it to remain private.</p> <p>Personal details may otherwise show up in logs, source code, translation files, commit messages, and pull request comments.</p>"},{"location":"developer-guide/setup/","title":"Setting Up Your Development Environment","text":""},{"location":"developer-guide/setup/#step-1-use-git-to-clone-the-project-from-github","title":"Step 1: Use Git to Clone the Project from GitHub","text":"<p>Before running any commands, please make sure you have Git, Make, Docker, and Docker Compose installed on your system. These are available for Mac, Linux, and Windows.<sup>1</sup></p> <p>In case you are using Ubuntu Linux, you can run this script to install the latest Docker version including the Compose Plugin on your computer in one step:</p> <pre><code>bash &lt;(curl -s https://setup.photoprism.app/ubuntu/install-docker.sh)\n</code></pre> <p>When working with Windows, you need to install the latest version of Docker Desktop and also disable \"autocrlf\" in Git to avoid errors:</p> <pre><code>git config --global core.autocrlf false\n</code></pre> <p>Now change to the directory where you usually keep your development projects, and run this command to download the project from GitHub:</p> <pre><code>git clone git@github.com:photoprism/photoprism.git\n</code></pre> <p>Once all code has been downloaded, change to the project directory which should now exist:</p> <pre><code>cd photoprism\n</code></pre>"},{"location":"developer-guide/setup/#step-2-launch-your-local-development-environment","title":"Step 2: Launch Your Local Development Environment","text":"<p>Pull the latest Docker images and then launch the pre-configured build environment we provide to have an isolated development container pre-installed with all the tools you might need, including the latest versions of Go, NodeJS, and NPM:<sup>2</sup></p> <pre><code>make docker-build\ndocker compose up\n</code></pre> <p>This environment is for testing and development purposes only. Do not use it in production. Also note that our guides now use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code>.</p>"},{"location":"developer-guide/setup/#step-3-install-the-dependencies-and-start-developing","title":"Step 3: Install the Dependencies and Start Developing","text":"<p>Open a terminal to run commands directly in your local development environment:</p> <pre><code>make terminal\n</code></pre> <p>Before starting to build, make sure all dependencies, such as NPM packages and TensorFlow models, are installed:</p> <pre><code>make dep\n</code></pre> <p>Congratulations! You can now build the frontend assets (JS), compile the backend binary (Go) and then run a custom PhotoPrism version in your local environment:</p> <pre><code>make build-js\nmake build-go\n./photoprism start\n</code></pre> <p>After PhotoPrism has been started as shown above, the user interface can be opened in a web browser by navigating to one of these URLs:</p> <ul> <li>http://localhost:2342/ (HTTP)</li> <li>https://localssl.dev/ (HTTPS)</li> </ul> <p>In the build environment, the default login is <code>admin</code> with the password <code>photoprism</code>. You can disable it with the <code>--public</code> command flag:</p> <pre><code>./photoprism --public start\n</code></pre> <p>You can find the default settings in the docker-compose.yml file located in the root of the project. Keep them when you run tests. Otherwise, the tests may fail for others, even if they succeed in your local environment.</p> <p>You can find a list of all <code>make</code> targets in the Makefile. For example, <code>make test</code> will run frontend and backend unit tests. Wrong filesystem permissions can be fixed by running <code>make fix-permissions</code> in a terminal.</p>"},{"location":"developer-guide/setup/#optional-build-the-frontend-in-watch-mode","title":"Optional: Build the Frontend in Watch Mode","text":"<p>The integrated web server not only provides the backend API, but is also used to serve static assets. These can be automatically rebuilt (updated) when you change a file. To do this, run the following command in a terminal, either inside or outside the container (outside is faster if your host is not running Linux):</p> <pre><code>make watch-js\n</code></pre> <p>Alternatively, you can change to the <code>frontend</code> directory and run NPM directly:</p> <pre><code>cd frontend\nnpm run watch\n</code></pre> <p>To update the frontend dependencies, also change to the <code>frontend</code> directory and run:</p> <pre><code>npm update\n</code></pre>"},{"location":"developer-guide/setup/#optional-use-a-go-debugger","title":"Optional: Use a Go Debugger","text":"<p>To debug the backend Go code, first make sure you have built and run the containers as described above:</p> <pre><code>make docker-build\ndocker compose up\n</code></pre> <p>Note: If you make changes in the <code>Dockerfile</code> to test things out, you can build and run the <code>photoprism</code> container individually:</p> <pre><code>docker compose build photoprism\ndocker compose up photoprism\n</code></pre> <p>Then open a terminal to the container as described above:</p> <pre><code>make terminal\n</code></pre> <p>and if you made code changes, make sure the rebuild the Go code:</p> <pre><code>make build-go\n</code></pre> <p>You can then run the Delve command from inside the container to start the debugger - the command-line options can be customized based on your needs:</p> <pre><code>dlv --listen=:40000 --headless=true --log=true --log-output=debugger,debuglineerr,gdbwire,lldbout,rpc --accept-multiclient --api-version=2 exec ./photoprism -- start\n</code></pre> <p>Once you run this command, you can use VSCode or Goland to add breakpoints and step through breakpoints in the code. Follow the instructions here to set up VSCode, and here to set up Goland to connect to the debugger.</p> <p>Once the debugger is running, you can view the app at <code>http://localhost:2342/</code> and debug the code.</p> <p>Questions?</p> <ul> <li>Radomir Sohlich wrote a pragmatic introduction to Makefiles for Go developers</li> <li>we are using Go Modules for managing our dependencies (new in 1.11)</li> <li>this guide was not tested on Windows, you might need to change docker-compose.yml to make it work with Windows specific paths</li> </ul>"},{"location":"developer-guide/setup/#apple-silicon-raspberry-pi-and-arm64","title":"Apple Silicon, Raspberry Pi, and ARM64","text":"<p>Our development environment has been built into a single multi-arch image for 64-bit AMD, Intel, and ARM processors. That means, Apple Silicon, Raspberry Pi 3 / 4, and other ARM64-based devices can pull from the same repository.</p>"},{"location":"developer-guide/setup/#multi-arch-docker-builds","title":"Multi-Arch Docker Builds","text":"<p>For information about multi-architecture Docker builds, see the following documentation:</p> <ul> <li>Docker Buildx</li> <li>Leverage multi-CPU architecture support</li> </ul>"},{"location":"developer-guide/setup/#qemu-quick-start","title":"QEMU Quick Start","text":"<ol> <li>install qemu-user-static from docker hub: <code>docker run --rm --privileged multiarch/qemu-user-static --reset -p yes</code> multiarch/qemu-user-static</li> <li>verify that dockers buildx command is installed <code>docker buildx version</code>. if missing, follow install instructions here</li> <li>create buildx builder: <code>docker buildx create --name multiarch-builder &amp;&amp; docker buildx inspect --builder multiarch-builder --bootstrap</code></li> <li>start building: <code>make docker-development-multiarch</code> or <code>make docker-photoprism-multiarch</code></li> </ol> <ol> <li> <p>Instead of using Docker, you can also set up your own build environment, for example, based on the steps documented in the Dockerfiles we provide. You need at least Go 1.20.5, TensorFlow for C, Make, NPM 8 and MariaDB 10.11. Note that test results are unreliable without Docker. As a result, this method is not suitable for contributors and we cannot provide support if something does not work as expected.\u00a0\u21a9</p> </li> <li> <p>Docker uses human-readable Dockerfiles that contain all the commands a user would invoke in a terminal to assemble a complete application image.\u00a0\u21a9</p> </li> </ol>"},{"location":"developer-guide/tests/","title":"Running Unit and Acceptance Tests","text":"<p>In any process, obsessing about the wait times will yield greater enhancements than practically anything else, for longer than you might think. Automation, simplification, etc. are implementation details of that obsession. \u2014 Dan North</p>"},{"location":"developer-guide/tests/#unit-tests","title":"Unit Tests","text":""},{"location":"developer-guide/tests/#go","title":"Go","text":"<p>To run all unit tests, type <code>make test</code> or <code>go test ./internal/...</code> in a terminal.</p> <p>These <code>make</code> targets are currently defined for tests:</p> <ul> <li><code>test</code>: Executes all tests found in a) /internal with a timeout of 20 min and verbose output and b) frontend/tests/unit</li> <li><code>test-short</code>: Executes only fast tests found in /internal with a timeout of 5 min and verbose output</li> <li><code>test-race</code>: Same as <code>test</code> but with race condition detector (much slower) and higher timeout of 60 min</li> <li><code>test-codecov</code>: Same as <code>test</code> but creates a coverage log in coverage.txt and sends it to Codecov (don't use it locally)</li> <li><code>test-coverage</code>: Same as <code>test</code> but creates a coverage.txt file as well as a human-readable report in coverage.html; timeout is elevated to 30 min</li> </ul> <p>You can run single tests via <code>go test -run</code> in a package directory, e.g. /internal/photoprism:</p> <pre><code>$ go test -run NameOfTest\n</code></pre> <p>See docs for more info.</p>"},{"location":"developer-guide/tests/#test-frameworks","title":"Test Frameworks","text":"<p>Go comes with a cool testing framework, it allows you to write test code using the same language, without needing to learn any library or test engine. Go advanced testing tips &amp; tricks contains a lot of useful information. We only import testify/assert to save a few lines for common assertions.</p> <p>Todo: Use a SQL mock driver to test database interactions, for example DATA-DOG/go-sqlmock.</p>"},{"location":"developer-guide/tests/#slow-tests","title":"Slow Tests","text":"<p>Slow tests and benchmarks can be skipped using the <code>-short</code> flag:</p> <pre><code>func TestTimeConsuming(t *testing.T) {\nif testing.Short() {\nt.Skip(\"skipping test in short mode.\")\n}\n...\n}\n</code></pre> <p>To execute:</p> <pre><code>go test -short\n</code></pre>"},{"location":"developer-guide/tests/#javascript","title":"Javascript","text":"<p>To run all javascript unit tests, type <code>make test-js</code> in a terminal.</p> <p>In case you want to run a single test add .only to the test you want to run e.g.:</p> <pre><code> it.only(\"should get album id\",  () =&gt; {\nconst values = {\nID: 5, AlbumName: \"Christmas 2019\", AlbumSlug: \"christmas-2019\", AlbumUUID: 66\n};\nconst album = new Album(values);\nconst result = album.getId();\nassert.equal(result, \"66\");\n});\n</code></pre> <p>Test coverage output is saved to frontend/coverage/html</p>"},{"location":"developer-guide/tests/#test-frameworks_1","title":"Test Frameworks","text":"<p>To test javascript code we use mocha in combination with karma, chai, sinon and the karma-istanbul-coverage-reporter.</p>"},{"location":"developer-guide/tests/#acceptance-tests","title":"Acceptance Tests","text":"<p>Before you proceed run</p> <pre><code>make dep-acceptance\n</code></pre>"},{"location":"developer-guide/tests/#running-tests-inside-the-docker-container","title":"Running Tests Inside the Docker Container","text":"<p>In the development container environment, you can run the tests in headless chrome:</p> <pre><code>make acceptance-run-chromium\n</code></pre>"},{"location":"developer-guide/tests/#test-frameworks_2","title":"Test Frameworks","text":"<p>Our goal was to implement UI acceptance tests using JavaScript, so that frontend developers are able to run and write them without learning Go.</p> <p>To make a final decision, we compared  TestCafe, Cypress and Nightwatch.js. We agreed on using TestCafe as tests were the most stable and pretty fast (because no long timeouts are needed).</p> Feature TestCafe Cypress Nightwatch.js Supported Browsers Local Chrome, Firefox, Opera, Safari, Internet Explorer, Microsoft Edge, Google Chrome Canary, Chromium Chrome, Chromium, Chrome Canary, Electron Geckodriver, Chromedriver, Microsoft Webdriver, Safaridriver Supported Browsers Headless Chrome, Firefox Electron Problems running headless Continuous Integration Support yes yes yes Setup easy via npm easy via npm easy via npm Usability +++ +++ ++ Speed (3 tests) 2 min (headless chrome and firefox) 1 min (only chrome headless) 1 min (chrome headed) 5 min (headless electron) 2,5 min (chrome headed) 7 min (chrome headed) headless not working Stability nice unstable --&gt; waiting times needed unstable --&gt; waiting times needed Documentation +++ ++ ++ Notes easy to find elements easy to find elements additional library needed to find selectors by text <p>Other test libraries and frameworks we currently don't use:</p> <ul> <li>https://codecept.io/</li> <li>https://funcunit.com/</li> <li>https://www.browserstack.com/</li> <li>http://nightwatchjs.org/ (used by Mozilla's Coral Project)</li> <li>https://developers.google.com/web/updates/2017/04/headless-chrome</li> </ul>"},{"location":"developer-guide/translations-weblate/","title":"Contributing Translations with Weblate","text":"<p>We operate translate.photoprism.app so that you can easily add and update user interface translations without having any development skills.</p> <p>You can either sign in with your GitHub account or create a new account with an email account you have access to:</p> <ul> <li>Provide an alternate address if you want your personal email to remain private as it may appear as authorship in commits, translation files, and pull requests.</li> <li>You are also not required to provide your full name if you do not wish to do so.</li> <li>Let us know privately that you have registered so that we can grant you permissions if needed.</li> </ul> <p>When you sign up, you will be asked to accept our Contributor License Agreement (CLA). Visit photoprism.app/cla to learn more.</p> Sign upAgree to CLAAdd missing translationsReview translationsAdd new language <ol> <li> <p>Navigate to https://translate.photoprism.app/</p> </li> <li> <p>Click Register and create an account</p> </li> </ol> <p></p> <p></p> <ol> <li>Sign in </li> <li>Select the language you want translate to</li> </ol> <p> 3. Open your Dashboard and click Backend (or access to the Backend by clicking here)</p> <p> 4. Click on View contributor agreement</p> <p> 5. Accept the contributor agreement and click Submit</p> <p> 6. Go back to your Dashboard and repeat steps 3-5 for the Frontend-Component</p> <p>Your Dashboard shows you how many strings have no translation yet.</p> <p></p> <ol> <li>Click on the count</li> <li>Enter the translation and click Save and continue</li> </ol> <p> 3. Repeat until all strings are translated</p> <p>Your translations will be reviewed and included in one of the next releases.</p> <p>If translations are missing, we pre-translate messages using services such as DeepL and Google Translate.  This can lead to grammatical errors and misunderstandings.  Native speakers should check existing translations and improve them if necessary.</p> <p>If you are a native speaker and would like to support us by reviewing existing translations, please contact us at hello@photoprism.app so that we can grant you the rights to review.</p> <ol> <li>From your Dashboard open one of the components by clicking on the language</li> </ol> <p> 2. Click on Strings waiting for review</p> <p> 3. Review the translation - edit the string if needed. Then select Approved and click Save and continue</p> <p> 4.  Repeat until all strings are reviewed</p> <p>Please contact us at hello@photoprism.app and we will set up a new language for you to translate!</p>"},{"location":"developer-guide/translations/","title":"Translations","text":"<p>Please don't use the method described here to add/edit translations anymore use this instead!</p> <p>PhotoPrism uses gettext for frontend and backend localization. It is one of the most widely used standards for user interface translation:</p> <ul> <li>Human-readable messages such as <code>File not found</code> are used as identifiers to search for appropriate translations. They also serve as default values when no translation is available.</li> <li>Messages can optionally contain placeholders for numbers and other variables, for example <code>Found %{n} files</code>.</li> </ul> <p>We recommend Poedit for creating and updating translations. The download is free for Mac, Windows and Linux. The source code can be obtained on GitHub.</p> <p>If translations are missing, we pre-translate messages using services such as DeepL and Google Translate. This can lead to grammatical errors and misunderstandings. Native speakers should check existing translations and improve them if necessary. You can use the version compare feature on GitHub to detect changes in translation files.</p>"},{"location":"developer-guide/translations/#frontend","title":"Frontend","text":"<p>Localizations can be found in <code>/frontend/src/locales</code>. The POT file, only containing message ids,  is <code>translations.pot</code>.</p> <p><code>*.po</code> files contain localized messages for each  language identified by their locale,  for example <code>de.po</code> for German and <code>pt_BR.po</code> for Brazilian Portuguese. You can open, edit and save them with Poedit to update existing translations.</p>"},{"location":"developer-guide/translations/#add-new-translation","title":"Add new translation","text":"<ul> <li>In /frontend run <code>npm run gettext-extract</code></li> <li>Install a translation tool e.g. Poedit</li> <li>Open the <code>/frontend/src/locales/translations.pot</code> file with Poedit</li> <li>In Poedit click on \"Create New Translation\" at the bottom and select the language</li> <li>Now you can start translating</li> <li>When done, save your translation as <code>*.po</code> file using the language locale (e.g. <code>de.po</code>) as name</li> <li>Add the new language to the <code>Languages</code> function in  <code>/frontend/src/options/options.js</code></li> <li>Run <code>npm run gettext-compile</code> to compile existing translations into a single <code>translations.json</code> file</li> <li>To test your translations you need to build the frontend again using <code>npm run build</code> or <code>npm run watch</code></li> </ul>"},{"location":"developer-guide/translations/#update-existing-translation","title":"Update existing translation","text":"<ul> <li>In /frontend run <code>npm run gettext-extract</code></li> <li>Install a translation tool e.g. Poedit</li> <li>Open the <code>*.po</code> file of your language e.g. <code>/frontend/src/locales/fr.po</code> file with Poedit</li> <li>In the Poedit menu click \"Catalogue\" --&gt; \"Update from POT File\" --&gt; select the <code>translations.pot</code> file from <code>/frontend/src/locales</code></li> <li>Now you can start proofreading and adding the missing translations</li> <li>Once your done save the changes in the <code>*.po</code> file</li> <li>Run <code>npm run gettext-compile</code> to compile existing translations into a single <code>translations.json</code> file</li> <li>To test your translations you need to build the frontend again using <code>npm run build</code> or <code>npm run watch</code></li> </ul> <p>A binary <code>*.mo</code> (machine object) file will be automatically saved along with every <code>*.po</code> file.  You won't be able to open those in a text editor, but please include them in git commits or when sending translations via email. The compiled <code>translations.json</code> file is not required for pull requests  and often causes merge conflicts.</p>"},{"location":"developer-guide/translations/#backend","title":"Backend","text":"<p>Only asynchronous notifications and certain API responses need translation to provide a  consistent user experience. Technical log messages should be in English to avoid ambiguities and (even slightly) wrong translations. </p> <p>Localizations are kept in <code>/assets/locales</code>. The POT file, only containing message ids, is <code>messages.pot</code>.</p> <p><code>default.po</code> files in sub directories contain localized messages for each  language identified by their locale,  for example <code>de/default.po</code> for German and <code>pt_BR/default.po</code> for Brazilian Portuguese.  You can open, edit and save them with Poedit. Please also add and commit binary <code>*.mo</code> files,  which will be automatically created by Poedit.</p>"},{"location":"developer-guide/translations/#add-new-translation_1","title":"Add new translation","text":"<ul> <li>Run <code>make generate</code> to update <code>/assets/locales/messages.pot</code></li> <li>Open the <code>/assets/locales/messages.pot</code> file with Poedit</li> <li>In Poedit click on \"Create New Translation\" at the bottom and select the language</li> <li>Now you can start translating</li> <li>When done, create a new directory (using the locale as name) and save your translation there as <code>default.po</code></li> </ul>"},{"location":"developer-guide/translations/#update-existing-translation_1","title":"Update existing translation","text":"<ul> <li>Run <code>make generate</code> to update <code>/assets/locales/messages.pot</code></li> <li>Open the <code>/assets/locales/fr/default.po</code> file with Poedit</li> <li>In the Poedit menu click \"Catalogue\" --&gt; \"Update from POT File\" --&gt; select the messages.pot file from /assets/locales/</li> <li>Now you can start proofreading and adding the missing translations</li> <li>Once you're done, save the changes in the default.po file</li> </ul> <p>This will only work when you have gettext installed on your system. We recommend using our latest development image as described in the setup instructions.</p>"},{"location":"developer-guide/api/","title":"Introduction","text":"<p>Routes and parameters can be found in our API docs:</p> <p>https://godoc.org/github.com/photoprism/photoprism/internal/api</p>"},{"location":"developer-guide/api/#examples","title":"Examples","text":""},{"location":"developer-guide/api/#basic","title":"Basic","text":"<p><pre><code>GET /api/v1/photos?count=10\n</code></pre> Note: Routes are going to change while we are developing the frontend. The API is not covered by a deprecation policy.</p>"},{"location":"developer-guide/api/#with-authentication","title":"With authentication","text":"<p>PhotoPrism uses <code>X-Session-ID</code> HTTP header as authentication method: <pre><code>curl -H \"X-Session-ID: xyz\" http://localhost:2342/api/v1/photos?count=10\n</code></pre> Replace <code>xyz</code> by <code>session_id</code> value of your active browser session, which can be found inside local storage. </p>"},{"location":"developer-guide/api/#external-resources","title":"External Resources","text":"<ul> <li>Mat Ryer: How I write Go HTTP services after seven years</li> </ul>"},{"location":"developer-guide/api/clients/go/","title":"Go API Client","text":"<p>Maintained by Kris N\u00f3va</p> <p>GitHub URL: kris-nova/photoprism-client-go</p>"},{"location":"developer-guide/api/clients/go/#installation","title":"Installation","text":"<pre><code>go get github.com/kris-nova/photoprism-client-go\n</code></pre>"},{"location":"developer-guide/api/clients/go/#methods","title":"Methods","text":"<pre><code>func New(connURL *url.URL, token, downloadToken string) *V1Client\nfunc (v1 *V1Client) AddPhotosToAlbum(albumUUID string, photoIDs []string) error\nfunc (v1 *V1Client) ApprovePhoto(uuid string) error\nfunc (v1 *V1Client) CancelIndex() error\nfunc (v1 *V1Client) CloneAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) CreateAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) DeleteAlbums(albumUUIDs []string) error\nfunc (v1 *V1Client) DELETE(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) DeletePhotosFromAlbum(albumUUID string, photoIDs []string) error\nfunc (v1 *V1Client) DislikeAlbum(uuid string) error\nfunc (v1 *V1Client) DislikePhoto(uuid string) error\nfunc (v1 *V1Client) Endpoint(str string) string\nfunc (v1 *V1Client) GetAlbumDownload(uuid string) ([]byte, error)\nfunc (v1 *V1Client) GetAlbums(options *AlbumOptions) ([]Album, error)\nfunc (v1 *V1Client) GetAlbum(uuid string) (Album, error)\nfunc (v1 *V1Client) GET(endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) GetPhotoDownload(uuid string) ([]byte, error)\nfunc (v1 *V1Client) GetPhotos(options *PhotoOptions) ([]Photo, error)\nfunc (v1 *V1Client) GetPhoto(uuid string) (Photo, error)\nfunc (v1 *V1Client) GetPhotoYaml(uuid string) ([]byte, error)\nfunc (v1 *V1Client) Index() error\nfunc (v1 *V1Client) LikeAlbum(uuid string) error\nfunc (v1 *V1Client) LikePhoto(uuid string) error\nfunc (v1 *V1Client) PhotoPrimary(uuid, fileuuid string) error\nfunc (v1 *V1Client) POST(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) PUT(payload interface{}, endpointFormat string, a ...interface{}) *V1Response\nfunc (v1 *V1Client) SetToken(token string)\nfunc (v1 *V1Client) UpdateAlbum(album Album) (Album, error)\nfunc (v1 *V1Client) UpdatePhoto(photo Photo) (Photo, error)\n</code></pre>"},{"location":"developer-guide/api/clients/go/#example","title":"Example","text":"<pre><code>package main\n\nimport (\n\"fmt\"\n\"io/ioutil\"\n\"path\"\n\nphotoprism \"github.com/kris-nova/photoprism-client-go\"\n\"github.com/kris-nova/logger\"\n)\n\nfunc main()\nlogger.Level = 4\n\nuuid := \"pqnzigq351j2fqgn\" // This is a known ID\nclient := photoprism.New(\"http://localhost:8080\")\nerr := client.Auth(photoprism.NewClientAuthLogin(\"admin\", \"missy\"))\nif err != nil\nlogger.Critical(\"Error logging into API: %v\", err)\nos.Exit(1)\n}\n\n// -----------------\n// GetPhoto()\n//\nphoto, err := client.V1().GetPhoto(uuid)\nif err != nil\nlogger.Critical(\"Error fetching photo: %v\", err)\nos.Exit(1)\n}\n\n// -----------------\n// UpdatePhoto()\n//\nphoto.PhotoTitle = \"A really great photo!\"\nphoto, err = client.V1().UpdatePhoto(photo)\nif err != nil\nlogger.Critical(\"Error updating photo: %v\", err)\nos.Exit(1)\n}\n\n// -----------------\n// GetPhotoDownload()\n//\nfile, err := client.V1().GetPhotoDownload(photo.UUID)\nif err != nil\nlogger.Critical(\"Error getting photo download: %v\", err)\nos.Exit(1)\n}\n\nfor _, f := range photo.Files\nfileName := fmt.Sprintf(\"/tmp/%s\", path.Base(f.FileName))\nlogger.Always(fileName)\nioutil.WriteFile(fileName, file, 0666)\n}\nos.Exit(0)\n}\n</code></pre>"},{"location":"developer-guide/database/","title":"Database Schema","text":"<p>Please keep in mind that some information may be outdated or missing, as these docs were automatically generated from the source code. You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"developer-guide/database/#entity-relationships","title":"Entity Relationships","text":"<p>\u21aa Entity-Relationship Diagram</p>"},{"location":"developer-guide/database/#mermaidjs-markup","title":"Mermaid.js Markup","text":"<p>Mermaid lets you create diagrams and visualizations using text and code.</p> <p>\u21aa mariadb.mmd</p>"},{"location":"developer-guide/database/#mariadb-sql","title":"MariaDB SQL","text":"<p>\u21aa mariadb.sql</p>"},{"location":"developer-guide/database/migrations/","title":"Schema Migrations","text":"<p>When using Docker Compose, you can prepend commands like <code>docker compose exec [service] [command]</code> to run them in a service container. Should this fail with no container found, make sure the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where the <code>docker-compose.yml</code> file is located.</p>"},{"location":"developer-guide/database/migrations/#show-migration-status","title":"Show Migration Status","text":"<p>Run the <code>photoprism migrations ls</code> command in a terminal to see a list of all migrations and their current status:</p> <pre><code>$ photoprism migrations ls\n\n|-----------------|---------|---------------------|---------------------|--------|\n|       ID        | Dialect |     Started At      |     Finished At     | Status |\n|-----------------|---------|---------------------|---------------------|--------|\n| 20211121-094727 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20211124-120008 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-030000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-040000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-050000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-060000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-061000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-070000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-071000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-080000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-081000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-083000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-090000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-091000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-093000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220421-200000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000001 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000002 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000003 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n|-----------------|---------|---------------------|---------------------|--------|\n</code></pre>"},{"location":"developer-guide/database/migrations/#run-specific-migrations","title":"Run Specific Migrations","text":"<p>To explicitly re-run specific migrations, you can pass them as arguments to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run 20220521-000003\n\nINFO[2022-07-12T11:45:29Z] migrate: 20220521-000003 successful [12.967654ms] \nINFO[2022-07-12T11:45:29Z] migration completed in 40.89123ms            \nINFO[2022-07-12T11:45:29Z] closed database connection \n</code></pre>"},{"location":"developer-guide/database/migrations/#retry-failed-migrations","title":"Retry Failed Migrations","text":"<p>To automatically retry previously failed migrations, pass the <code>-f</code> flag to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run -f\n</code></pre>"},{"location":"developer-guide/database/schema/","title":"Entity-Relationship Diagram","text":"<p>Please keep in mind that some information may be outdated or missing, as these docs were automatically generated from the source code.</p> cell_idlabel_idcategory_idplace_idphoto_idphoto_idaccount_idfile_idaccount_idfile_idface_idsubject_uidsubject_uidcamera_idcell_idlens_idplace_idphoto_countryalbum_countrypathplace_countrykeyword_idphoto_idlabel_idphoto_idalbum_uidphoto_uidaddress_iduiduidaccountsdatetime sync_datedatetime created_atdatetime updated_atdatetime deleted_atvarchar(160) : acc_namevarchar(160) : acc_ownervarchar(255) : acc_urlvarbinary(255) : acc_typevarbinary(255) : acc_keyvarbinary(255) : acc_uservarbinary(255) : acc_passvarbinary(16) : acc_timeoutvarbinary(512) : acc_errorint(11) : acc_errorstinyint(1) : acc_sharetinyint(1) : acc_syncint(11) : retry_limitvarbinary(500) : share_pathvarbinary(16) : share_sizeint(11) : share_expiresvarbinary(500) : sync_pathvarbinary(16) : sync_statusint(11) : sync_intervaltinyint(1) : sync_uploadtinyint(1) : sync_downloadtinyint(1) : sync_filenamestinyint(1) : sync_rawint(10) : unsigned idaddressesfloat address_latfloat address_lngdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(42) : cell_idvarbinary(8) : address_srcvarchar(255) : address_line1varchar(255) : address_line2varchar(32) : address_zipvarchar(128) : address_cityvarchar(128) : address_statevarbinary(2) : address_countryvarchar(1024) : address_notesint(11) : idalbumsdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(42) : album_uidvarbinary(42) : parent_uidvarbinary(160) : album_slugvarbinary(500) : album_pathvarbinary(8) : album_typevarchar(160) : album_titlevarchar(160) : album_locationvarchar(100) : album_categoryvarchar(1024) : album_captionvarchar(2048) : album_descriptionvarchar(1024) : album_notesvarbinary(2048) : album_filtervarbinary(32) : album_ordervarbinary(255) : album_templatevarchar(100) : album_statevarbinary(2) : album_countryint(11) : album_yearint(11) : album_monthint(11) : album_daytinyint(1) : album_favoritetinyint(1) : album_privatevarbinary(128) : thumbvarbinary(8) : thumb_srcint(10) : unsigned idcamerasdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(160) : camera_slugvarchar(160) : camera_namevarchar(160) : camera_makevarchar(160) : camera_modelvarchar(100) : camera_typevarchar(2048) : camera_descriptionvarchar(1024) : camera_notesint(10) : unsigned idcategoriesint(10) : unsigned label_idint(10) : unsigned category_idcellsdatetime created_atdatetime updated_atvarchar(200) : cell_namevarchar(100) : cell_streetvarchar(50) : cell_postcodevarchar(50) : cell_categoryvarbinary(42) : place_idvarbinary(42) : idcountriesvarbinary(160) : country_slugvarchar(160) : country_namevarchar(2048) : country_descriptionvarchar(1024) : country_notesint(10) : unsigned country_photo_idvarbinary(2) : iddetailsdatetime created_atdatetime updated_atvarchar(2048) : keywordsvarbinary(8) : keywords_srcvarchar(2048) : notesvarbinary(8) : notes_srcvarchar(1024) : subjectvarbinary(8) : subject_srcvarchar(1024) : artistvarbinary(8) : artist_srcvarchar(1024) : copyrightvarbinary(8) : copyright_srcvarchar(1024) : licensevarbinary(8) : license_srcvarchar(1024) : softwarevarbinary(8) : software_srcint(10) : unsigned photo_idduplicatesvarbinary(128) : file_hashbigint(20) : file_sizebigint(20) : mod_timevarbinary(755) : file_namevarbinary(16) : file_rooterrorsdatetime error_timevarbinary(32) : error_levelvarbinary(2048) : error_messageint(10) : unsigned idfacesdouble sample_radiusdouble collision_radiusmediumblob embedding_jsondatetime matched_atdatetime created_atdatetime updated_atvarbinary(8) : face_srcint(11) : face_kindtinyint(1) : face_hiddenvarbinary(42) : subj_uidint(11) : samplesint(11) : collisionsvarbinary(42) : idfilesdatetime photo_taken_atdouble file_fpsfloat file_aspect_ratiodatetime created_atdatetime updated_atdatetime deleted_atint(10) : unsigned photo_idvarbinary(42) : photo_uidvarbinary(48) : time_indexvarbinary(32) : media_idbigint(20) : media_utcvarbinary(42) : instance_idvarbinary(42) : file_uidvarbinary(755) : file_namevarbinary(16) : file_rootvarbinary(755) : original_namevarbinary(128) : file_hashbigint(20) : file_sizevarbinary(32) : file_codecvarbinary(16) : file_typevarbinary(16) : media_typevarbinary(64) : file_mimetinyint(1) : file_primarytinyint(1) : file_sidecartinyint(1) : file_missingtinyint(1) : file_portraittinyint(1) : file_videobigint(20) : file_durationint(11) : file_framesint(11) : file_widthint(11) : file_heightint(11) : file_orientationvarbinary(64) : file_projectiontinyint(1) : file_hdrtinyint(1) : file_watermarkvarbinary(64) : file_color_profilevarbinary(16) : file_main_colorvarbinary(9) : file_colorsvarbinary(9) : file_luminanceint(11) : file_diffsmallint(6) : file_chromavarchar(64) : file_softwarevarbinary(512) : file_errorbigint(20) : mod_timebigint(20) : created_inbigint(20) : updated_inint(10) : unsigned idfiles_sharedatetime created_atdatetime updated_atvarbinary(16) : statusvarbinary(512) : errorint(11) : errorsint(10) : unsigned file_idint(10) : unsigned account_idvarbinary(255) : remote_namefiles_syncdatetime remote_datedatetime created_atdatetime updated_atint(10) : unsigned file_idbigint(20) : remote_sizevarbinary(16) : statusvarbinary(512) : errorint(11) : errorsvarbinary(255) : remote_nameint(10) : unsigned account_idfoldersdatetime created_atdatetime updated_atdatetime modified_atdatetime deleted_atvarbinary(500) : pathvarbinary(16) : rootvarbinary(16) : folder_typevarchar(200) : folder_titlevarchar(100) : folder_categoryvarchar(2048) : folder_descriptionvarbinary(32) : folder_ordervarbinary(2) : folder_countryint(11) : folder_yearint(11) : folder_monthint(11) : folder_daytinyint(1) : folder_favoritetinyint(1) : folder_privatetinyint(1) : folder_ignoretinyint(1) : folder_watchvarbinary(42) : folder_uidkeywordsvarchar(64) : keywordtinyint(1) : skipint(10) : unsigned idlabelsdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(42) : label_uidvarbinary(160) : label_slugvarbinary(160) : custom_slugvarchar(160) : label_nameint(11) : label_prioritytinyint(1) : label_favoritevarchar(2048) : label_descriptionvarchar(1024) : label_notesint(11) : photo_countvarbinary(128) : thumbvarbinary(8) : thumb_srcint(10) : unsigned idlensesdatetime created_atdatetime updated_atdatetime deleted_atvarbinary(160) : lens_slugvarchar(160) : lens_namevarchar(160) : lens_makevarchar(160) : lens_modelvarchar(100) : lens_typevarchar(2048) : lens_descriptionvarchar(1024) : lens_notesint(10) : unsigned idlinksdatetime created_atdatetime modified_atvarbinary(42) : share_uidvarbinary(160) : share_slugvarbinary(160) : link_tokenint(11) : link_expiresint(10) : unsigned link_viewsint(10) : unsigned max_viewstinyint(1) : has_passwordtinyint(1) : can_commenttinyint(1) : can_editvarbinary(42) : link_uidmarkersdouble face_distmediumblob embeddings_jsonmediumblob landmarks_jsonfloat xfloat yfloat wfloat hdatetime matched_atdatetime created_atdatetime updated_atvarbinary(42) : file_uidvarbinary(8) : marker_typevarbinary(8) : marker_srcvarchar(160) : marker_nametinyint(1) : marker_reviewtinyint(1) : marker_invalidvarbinary(42) : subj_uidvarbinary(8) : subj_srcvarbinary(42) : face_idint(11) : qint(11) : sizesmallint(6) : scorevarbinary(128) : thumbvarbinary(42) : marker_uidmigrationsdatetime started_atdatetime finished_atvarchar(16) : dialectvarchar(255) : errorvarchar(16) : sourcevarchar(16) : idpasswordsdatetime created_atdatetime updated_atvarbinary(255) : hashvarbinary(255) : uidphotosdatetime taken_atdatetime taken_at_localfloat photo_latfloat photo_lngfloat photo_f_numberdatetime created_atdatetime updated_atdatetime edited_atdatetime checked_atdatetime estimated_atdatetime deleted_atvarbinary(42) : uuidvarbinary(8) : taken_srcvarbinary(42) : photo_uidvarbinary(8) : photo_typevarbinary(8) : type_srcvarchar(200) : photo_titlevarbinary(8) : title_srcvarchar(4096) : photo_descriptionvarbinary(8) : description_srcvarbinary(500) : photo_pathvarbinary(255) : photo_namevarbinary(755) : original_nametinyint(4) : photo_stacktinyint(1) : photo_favoritetinyint(1) : photo_privatetinyint(1) : photo_scantinyint(1) : photo_panoramavarbinary(64) : time_zonevarbinary(42) : place_idvarbinary(8) : place_srcvarbinary(42) : cell_idint(11) : cell_accuracyint(11) : photo_altitudevarbinary(2) : photo_countryint(11) : photo_yearint(11) : photo_monthint(11) : photo_dayint(11) : photo_isovarbinary(64) : photo_exposureint(11) : photo_focal_lengthsmallint(6) : photo_qualityint(11) : photo_facessmallint(6) : photo_resolutionsmallint(6) : photo_colorint(10) : unsigned camera_idvarbinary(160) : camera_serialvarbinary(8) : camera_srcint(10) : unsigned lens_idint(10) : unsigned idphotos_albumsdatetime created_atdatetime updated_atint(11) : ordertinyint(1) : hiddentinyint(1) : missingvarbinary(42) : photo_uidvarbinary(42) : album_uidphotos_keywordsint(10) : unsigned photo_idint(10) : unsigned keyword_idphotos_labelsvarbinary(8) : label_srcsmallint(6) : uncertaintyint(10) : unsigned photo_idint(10) : unsigned label_idplacesdatetime created_atdatetime updated_atvarchar(400) : place_labelvarchar(100) : place_districtvarchar(100) : place_cityvarchar(100) : place_statevarbinary(2) : place_countryvarchar(300) : place_keywordstinyint(1) : place_favoriteint(11) : photo_countvarbinary(42) : idsubjectsmediumblob metadata_jsondatetime created_atdatetime updated_atdatetime deleted_atvarbinary(8) : subj_typevarbinary(8) : subj_srcvarbinary(160) : subj_slugvarchar(160) : subj_namevarchar(160) : subj_aliasvarchar(2048) : subj_biovarchar(1024) : subj_notestinyint(1) : subj_favoritetinyint(1) : subj_hiddentinyint(1) : subj_privatetinyint(1) : subj_excludedint(11) : file_countint(11) : photo_countvarbinary(128) : thumbvarbinary(8) : thumb_srcvarbinary(42) : subj_uiduserslongtext user_settingstext person_biolongtext person_accountsdatetime login_atdatetime created_atdatetime updated_atdatetime deleted_atint(11) : address_idvarbinary(42) : user_uidvarbinary(42) : mother_uidvarbinary(42) : father_uidvarbinary(42) : global_uidvarchar(128) : full_namevarchar(64) : nick_namevarchar(64) : maiden_namevarchar(64) : artist_namevarchar(64) : user_namevarchar(32) : user_statustinyint(1) : user_disabledvarchar(255) : primary_emailtinyint(1) : email_confirmedvarchar(255) : backup_emailvarbinary(255) : person_urlvarchar(32) : person_phonevarchar(32) : person_statusvarbinary(255) : person_avatarvarchar(128) : person_locationvarbinary(255) : business_urlvarchar(32) : business_phonevarchar(255) : business_emailvarchar(128) : company_namevarchar(128) : department_namevarchar(64) : job_titleint(11) : birth_yearint(11) : birth_monthint(11) : birth_daytinyint(1) : terms_acceptedtinyint(1) : is_artisttinyint(1) : is_subjecttinyint(1) : role_admintinyint(1) : role_guesttinyint(1) : role_childtinyint(1) : role_familytinyint(1) : role_friendtinyint(1) : webdavvarbinary(500) : storage_pathtinyint(1) : can_invitevarbinary(32) : invite_tokenvarbinary(32) : invited_byvarbinary(64) : confirm_tokenvarbinary(64) : reset_tokenvarbinary(128) : api_tokenvarbinary(128) : api_secretint(11) : login_attemptsint(11) : id"},{"location":"developer-guide/media/","title":"Supported Media and Sidecar File Formats","text":"Format Description Type Extensions AVIF AV1 Image File Format Image .avif AVIFS AV1 Image Sequence Image .avifs, .avis BMP Bitmap Image .bmp GIF Graphics Interchange Format Image .gif HEIC High Efficiency Image Container Image .avci, .avcs, .heic, .heif, .hif HEICS HEIC Image Sequence Image .heics, .heifs JPG Joint Photographic Experts Group (JPEG) Image .jfi, .jfif, .jif, .jpe, .jpeg, .jpg, .thm JXL JPEG XL Image .jxl MPO Stereoscopic JPEG (3D) Image .mpo PNG Portable Network Graphics Image .apng, .pn, .png, .pnga PSD Adobe Photoshop Image .psd TIFF Tag Image File Format Image .tif, .tiff WEBP Google WebP Image .webp DNG Adobe Digital Negative Raw .dng RAW Unprocessed Sensor Data Raw .3fr, .ari, .arw, .bay, .cap, .cr2, .cr3, .crw, .data, .dcr, .dcs, .drf, .eip, .erf, .fff, .gpr, .iiq, .k25, .kdc, .mdc, .mef, .mos, .mrw, .nef, .nrw, .obm, .orf, .pef, .ptx, .pxn, .r3d, .raf, .raw, .rw2, .rwl, .rwz, .sr2, .srf, .srw, .x3f AAE Apple Image Edits XML Sidecar .aae JSON Serialized JSON Data (Exiftool, Google Photos) Sidecar .json MD Markdown Formatted Text Sidecar .markdown, .md TXT Plain Text Sidecar .txt XML Extensible Markup Language Sidecar .xml XMP Adobe Extensible Metadata Platform Sidecar .xmp YML Serialized YAML Data (Config, Metadata) Sidecar .yaml, .yml AI Adobe Illustrator Vector .ai EPS Encapsulated PostScript Vector .epi, .eps, .eps2, .eps3, .epsf, .epsi, .ept PS Adobe PostScript Vector .ps, .ps2, .ps3 SVG Scalable Vector Graphics Vector .svg 3G2 Mobile Multimedia Container (CDMA2000) Video .3g2 3GP Mobile Multimedia Container (3G) Video .3gp ASF Advanced Systems Format Video .asf AV1 AOMedia Video 1 Video .av1 AVC Advanced Video Coding (H.264, MPEG-4 Part 10) Video .avc AVI Microsoft Audio Video Interleave Video .avi DV DV Video Video .dv FLV Adobe Flash Video .f4v, .flv HEVC High Efficiency Video Coding (H.265) Video .hevc M2TS Blu-ray MPEG-2 Transport Stream Video .m2ts M4V Apple iTunes Multimedia Container Video .m4v MJPG Motion JPEG Video .mjpeg, .mjpg MKV Matroska Multimedia Container Video .mkv MOV Apple QuickTime Video .mov, .qt MP2 MPEG 2 (H.262) Video .mp2, .mpv MP4 Multimedia Container (MPEG-4 Part 14) Video .mp, .mp4 MPG Moving Picture Experts Group (MPEG) Video .mpeg, .mpg MTS Advanced Video Coding High Definition (AVCHD) Video .mts OGV Ogg Media (OGG) Video .ogg, .ogv, .ogx VVC Versatile Video Coding (H.266) Video .vvc WEBM Google WebM Video .webm WMV Windows Media Video .wmv"},{"location":"developer-guide/media/#cli-command","title":"CLI Command","text":"<p>Run <code>photoprism show file-formats</code> in a terminal to list supported media and sidecar file formats.</p> <p>Command Flags:</p> <ul> <li><code>--md</code>, <code>-m</code>     format as machine-readable Markdown</li> <li><code>--csv</code>, <code>-c</code>    export as semicolon separated values</li> <li><code>--tsv</code>, <code>-t</code>    export as tab separated values</li> <li><code>--short</code>, <code>-s</code>  hide format descriptions</li> </ul>"},{"location":"developer-guide/media/abstraction/","title":"Abstraction","text":"<p>We need to add file system abstraction, also to speed up testing. Afero seems to be the gold standard for this in the Go world:</p> <p>spf13/afero</p>"},{"location":"developer-guide/media/abstraction/#issues","title":"Issues","text":"<ul> <li>Embedded Database + Bleve for search? #55</li> <li>Postgres support? #47</li> </ul>"},{"location":"developer-guide/media/abstraction/#external-resources","title":"External Resources","text":"<ul> <li>rclone/rclone - rsync for cloud storage (Google Drive, AWS, One Drive, ...)</li> <li>@minio - Object Storage for AI</li> <li>upper.io/db.v3 - a productive data access layer for Go</li> <li>LevelDB - fast key-value storage library written at Google (written in Go)</li> <li>Bleve - full-text search and indexing for Go</li> <li>TiDB - a distributed HTAP database compatible with the MySQL protocol (written in Go)</li> <li>KSQL - the Streaming SQL Engine for Apache Kafka</li> <li>CockroachDB - ultra-resilient SQL for global business (written in Go)</li> <li>LedisDB - a high performance NoSQL like Redis powered by Go</li> <li>go-pg/pg - Golang ORM with focus on PostgreSQL features and performance</li> <li>go-redis/redis - Type-safe Redis client for Golang</li> </ul>"},{"location":"developer-guide/media/encryption/","title":"Encryption","text":""},{"location":"developer-guide/media/encryption/#related-tickets","title":"Related tickets","text":"<p>Support for cloud storage with encryption</p>"},{"location":"developer-guide/media/heif/","title":"HEIF / HEIC","text":"<p>HEIF is a new image file format employing HEVC (h.265) image coding for the best compression ratios currently possible. Newer iPhones use it for internal photo storage. It is supported on iOS 11 and macOS High Sierra and later.</p>"},{"location":"developer-guide/media/heif/#testing-conversion-and-orientation","title":"Testing Conversion and Orientation","text":"<p>Let's say you have Docker installed and want to test HEIF image conversion and orientation with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and <code>libheif-examples</code> (includes the <code>heif-convert</code> command) via <code>apt</code>:</p> <pre><code>apt update\napt install -y libheif-examples exiftool\n</code></pre> <p>Finally, run the <code>heif-convert</code> command (<code>-q 92</code> is optional and determines the JPEG quality/compression):</p> <pre><code>root@1ad9fb887a4f:/test# heif-convert -q 92 IMG_8437.HEIC IMG_8437.HEIC.jpg\nFile contains 1 image\nWritten to IMG_8437.HEIC.jpg\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code> and optionally use grep to filter the output:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre> <p>Rotation and Orientation are the important values you should pay attention to and compare. The rotation is in degrees.</p>"},{"location":"developer-guide/media/heif/#exiftool-parameters","title":"Exiftool Parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>"},{"location":"developer-guide/media/heif/#exif-orientation","title":"Exif Orientation","text":"<p>The Exif orientation values are numbered from 1 to 8:</p> <ol> <li>= 0 degrees: the correct orientation, no adjustment is required.</li> <li>= 0 degrees, mirrored: image has been flipped back-to-front.</li> <li>= 180 degrees: image is upside down.</li> <li>= 180 degrees, mirrored: image has been flipped back-to-front and is upside down.</li> <li>= 90 degrees: image has been flipped back-to-front and is on its side.</li> <li>= 90 degrees, mirrored: image is on its side.</li> <li>= 270 degrees: image has been flipped back-to-front and is on its far side.</li> <li>= 270 degrees, mirrored: image is on its far side.</li> </ol>"},{"location":"developer-guide/media/heif/#external-resources","title":"External Resources","text":"<ul> <li>https://www.idownloadblog.com/2017/10/18/how-to-convert-heif-to-jpeg-imazing-heic-converter/ - How to convert HEIF images to JPEGs with iMazing HEIC Converter</li> <li>strukturag/libheif - libheif is a ISO/IEC 23008-12:2017 HEIF file format decoder and encoder (C++)</li> <li>nokiatech/heif - Reader/Writer Engine is an implementation of the HEIF standard to demonstrate its powerful features and capabilities (C++)</li> <li>monostream/tifig - A fast HEIF image converter aimed at thumbnailing</li> <li>perkeep/perkeep#969 - HEIC/HEVC support in Perkeep</li> <li>jdeng/goheif - A decoder/converter for HEIC based on libde265 (CGO)</li> </ul>"},{"location":"developer-guide/media/import/","title":"Import","text":"<p>As PhotoPrism is a complete photo management solution, it is not only possible to index existing images, but also to add / upload new files to a photo collection or delete existing photos to save storage.</p> <p>There has been a debate on whether PhotoPrism should be responsible for file naming, see Support Photos In Place on Hard Drive #41. As soon as you want the software to create new files or merge photo libraries from different devices, there is no other way. Therefore we're going to implement a read-only mode for those who want to use it as a gallery with reduced functionality, see Read-only mode #56.</p>"},{"location":"developer-guide/media/import/#post-processing-keyboard-shortcuts","title":"Post Processing / Keyboard Shortcuts","text":"<p>After importing new images, it would be amazing to be able to quickly sort / review them. This way the library stays clean and well organized, even without applying filters to hide bad shots. Apparently this is common among users of Adobe Bridge, a tool used by many professionals. They go through complete asset collections and sort photos using keyboard shortcuts, where keys toggle pre-defined tags or flags like \"favorite\".</p>"},{"location":"developer-guide/media/import/#upload","title":"Upload","text":"<p>Idea: We can use Webassembly for performance enhancements / faster upload.</p>"},{"location":"developer-guide/media/raw/","title":"RAW Images","text":"<p>Many photographers keep their originals in some sort of lossless RAW format instead of compressed JPEG, especially when shooting with a Digital SLR. Some mobile phones also support RAW or use HEIC/HEIF for a similar purpose. PhotoPrism aims at providing excellent support for all RAW formats, independent of camera brand and model. Please let us know when there is an issue with your specific device.</p> <p>Web browsers in general can not display RAW image files. They need to be converted, which is what our import and convert commands do. You'll also find a checkbox for this step in our Web UI.</p> <p>In addition, PhotoPrism now also supports TIFF, PNG, BMP and GIF files. Be aware that files in those formats often don't contain useful metadata and are typically used for screenshots, charts, graphs and icons only.</p> <p></p>"},{"location":"developer-guide/media/raw/#sips","title":"Sips","text":"<p>On a Mac, PhotoPrism can convert multiple files at once using Sips (pre-installed on OS X). It is not available for other operating systems, as far as we know.</p>"},{"location":"developer-guide/media/raw/#darktable","title":"Darktable","text":"<p>We've recently upgraded Darktable from 2.6.2 to 3.0.0. Since the old PPA is not maintained anymore, we switched to this repository that is hosted by SuSE:</p> <p>https://software.opensuse.org/download.html?project=graphics:darktable:master&amp;package=darktable</p> <p>Note that PhotoPrism can only run one instance of <code>darktable-cli</code> because it uses a lock file. If you run it more than once, it will fail. Be prepared to wait a bit.</p>"},{"location":"developer-guide/media/raw/#using-darktable-as-library","title":"Using Darktable as library","text":"<p>We had the idea to use cgo and link directly against <code>libdarktable.so</code> to convert RAW images to JPEG, see darktable-dev mailing list. However this requires calling/wrapping a large number of C functions and also has other disadvantages. The idea is postponed until a clear benefit becomes visible. Running <code>darktable-cli</code> or any other binary that does the job (see above) seems to be the way to go.</p>"},{"location":"developer-guide/media/raw/#comparison-of-raw-to-jpeg-converters","title":"Comparison of RAW to JPEG converters","text":"<ul> <li>darktable - popular open-source photography app and raw developer; available for Mac, Linux, and Windows; supports XMP (compatible with photoshop/lightroom?)</li> <li>Mac OS X ships with sips: <code>sips -s format jpeg IMAGE.RAW --out IMAGE.JPG</code></li> <li>Photivo - open-source photo processor; available for Mac, Linux, and Windows; no XMP support?</li> <li>RawTherapee - open-source RAW image processing app; available for Mac, Linux, and Windows; no XMP support?</li> <li>digiKam - open-source digital photo management application based on Qt (KDE); available for Mac, Linux, and Windows; supports XMP (compatible with photoshop/lightroom?)</li> <li>UFRaw - Unidentified Flying Raw is a utility to read and manipulate raw images from digital cameras</li> </ul> Tool Command line options Compatible OS JPG Diff* XMP support Possible settings EXIF Diff* Compatible with Raspberry (ARM64) Darktable 1) <code>darktable-cli IMG_0310.CR2  IMG_0310_darktable1.jpg</code> 2) <code>darktable-cli IMG_0310_EDITED.CR2 IMG_0310_EDITED.xmp IMG_0310_EDITED_darktable2.jpg</code> macOS, Linux, Windows **** yes (but seems to be not compatible with adobe xmps) ? **** yes Sips <code>sips -s format jpeg IMG_0310.CR2 --out IMG_0310_sips.jpg</code> macOS ***** no ? **** not available for ubuntu Rawtherapee <code>rawtherapee-cli -o IMG_0310_rawtherapee.jpg -c IMG_0310.CR2</code> macOS, Linux, Windows *** no ? **** yes UFraw <code>ufraw-batch --out-type=jpg --output=IMG_0310_ufraw.jpg IMG_0310.CR2</code> macOS, Linux, Windows * no ? ** yes ImageMagick <code>magick IMG_0310.CR2 IMG_0310_magick.jpg</code> macOS, Linux, Windows * no ? ** yes Digikam ? macOS, Linux, Windows - - - - - Photiva ? macOS, Linux, Windows - - - - - <code>*</code> Compared to JPG/EXIF converted from photoshop"},{"location":"developer-guide/media/raw/#image-diff","title":"Image Diff","text":"<p>The following table shows the difference between the JPEG files converted by Darktable, Sips, Rawtherapee, UFraw and ImageMagick compared to Adobe Photoshop. Red are pixel that differ from the photoshop version, white are equal pixels. In total 5 Images have been compared (full results). The diff was created using ewanmellor/git-diff-image.</p> Tool Diff (left is Photoshop) Darktable Sips Rawtherapee UFraw ImageMagick"},{"location":"developer-guide/media/raw/#exif-diff","title":"EXIF Diff","text":"<p>The following table shows the difference between the JPG files converted by the tools compared to JPG files converted by photoshop. 5 Images have been compared.</p> Info Photoshop Sips Darktable Raw-therapee Image Magick UFraw Kind identical identical identical identical identical identical Size 2.881.969 bytes (EXIF)/ 2.7M (ls -alh) 2.673.777 bytes / 2.5M 5.446.710 bytes / 5.2M always bigger 3.467.998 bytes / 3.3M 3.467.998 bytes / 3.3M 1.558.587 bytes / 1.5M always smaller Where reference different different different different different Created reference different different different different different Modified reference different different different different different Dimension identical - 5472\u200a\u00d7\u200a3648 5472\u200a\u00d7\u200a3648 different - 5494\u200a\u00d7\u200a3666 different - 5488\u200a\u00d7\u200a3662 different - 5496\u200a\u00d7\u200a3670 different - 5496\u200a\u00d7\u200a3670 Device Make refrence identical identical identical not set not set Colour space reference identical identical identical identical identical Colour profile Adobe RGB (1998) different - Display P3 different - sRGB different - RTv2_sRGB not set not set Focal length reference identical identical identical not set not set Alpha Channel reference identical identical identical not set not set Red eye reference identical identical identical not set not set Metering Mode reference identical identical identical not set not set F number reference identical identical identical not set not set Exposure program reference identical identical identical not set not set Exposure time reference identical identical identical not set not set Latitude reference sometimes very small differences identical identical not set not set Longitude reference sometimes very small differences identical identical not set not set"},{"location":"developer-guide/media/raw/#adobe-photoshop-lightroom","title":"Adobe Photoshop / Lightroom","text":"<p>Ideally we can convert images directly with Photoshop or Lightroom, if installed. It seems like Photoshop comes with some sort of command-line automation tool based on NodeJS: adobe-photoshop/generator-core</p> <p>See https://photo.stackexchange.com/questions/39532/command-line-approach-to-develop-raw-images-with-adobe-xmp-sidecars</p> <p>This needs further investigation. Contributions welcome!</p>"},{"location":"developer-guide/media/raw/#todo-reading-list","title":"Todo / Reading List","text":"<ul> <li>Compare the quality and XMP compatibility of different RAW converters #65</li> <li>Investigate if PhotoShop or Lightroom can be used to convert images on the command line</li> <li>Collect example RAW files of common camera brands and models</li> <li>Figure out how we can implement \"auto-enhance\" (automatically fix exposure and write XMP file while converting to JPEG)</li> <li>https://howtogimp.com/raw-photos-in-gimp/ - RAW converters to use with GIMP</li> <li>mdouchement/hdr - HDR is a library that handles RAW image format written with Golang</li> </ul>"},{"location":"developer-guide/media/samples/","title":"Samples","text":"<p>For now, we only want to support RAW and JPEG from the most popular camera brands/models. Therefore we need an archive of example pictures for testing purposes. </p> <p>In the tables below you see for which camera models we still need images. In case you have images from the requested cameras you want to share with us:</p> <ul> <li>You can get an account for uploading example images to https://dl.photoprism.app/samples/, please ask</li> <li>You can also send us images per mail</li> </ul>"},{"location":"developer-guide/media/samples/#most-popular-brands-according-to-flickr","title":"Most Popular Brands according to Flickr","text":"<p>https://www.flickr.com/cameras</p>"},{"location":"developer-guide/media/samples/#market-share-by-brand-2016","title":"Market Share by Brand (2016):","text":"<p>DSLR cameras:</p> Brand Share Canon 63.3% Nikon 31.6% Ricoh Imaging (Pentax) 4.8% <p>System cameras:</p> Brand Share Olympus 26.8% Canon 18.5% Sony 17.9% <p>Brands with the highest market share 2016</p>"},{"location":"developer-guide/media/samples/#most-popular-camera-models","title":"Most popular camera models:","text":""},{"location":"developer-guide/media/samples/#camera-models-supported-by-photoshop","title":"Camera models supported by photoshop:","text":"<p>https://helpx.adobe.com/camera-raw/kb/camera-raw-plug-supported-cameras.html</p>"},{"location":"developer-guide/media/thumbnails/","title":"Thumbnail Images","text":"<p>PhotoPrism uses the disintegration/imaging package to generate thumbnail images that are displayed in search results and in the full-screen viewer.</p> <p>The smallest configurable size limit is 720px, which corresponds to the <code>fit_720</code> thumbnail type. All sizes up to 720x720 will be generated by default and should therefore always be available.</p> <p>Besides their obvious use in the frontend, the indexer uses thumbnails for color detection, face detection, and image classification, see Advanced Settings in the User Guide.</p>"},{"location":"developer-guide/media/thumbnails/#server-api","title":"Server API","text":"<p>Like most commercial image hosting services, we have chosen to implement a cookie-free thumbnail API to minimize request latency by avoiding unnecessary network traffic:</p> <ul> <li>When a browser requests static files such as images from a server over HTTPS, it is generally unnecessary to send a cookie with each request if the URLs cannot be guessed, so for most practical use cases</li> <li>One possible use of cookies may be to prevent the user from intentionally or accidentally sharing confidential thumbnail URLs with others</li> <li>This is possible with most image hosting services/social media sites, and could also be considered a feature if you just want to share a few thumbnails without a lot of bells and whistles</li> <li>Once an image has been downloaded by someone else, blocking the original URL provides little additional security, as digital copies are just as good as the original, see info box below</li> <li>Keeping that in mind, previously shared URLs can be invalidated by changing the security token in your config</li> <li>This will invalidate the browser cache on all connected devices, requiring previously cached thumbnails to be downloaded again</li> <li>Be aware that frequent token changes result in performance degradation and a poor user experience.</li> </ul> <p>In addition to better performance, a major advantage of cookie-free thumbnails is that they can be easily integrated into a content delivery network (CDN), since there is no need to check cookies or add other complex logic on edge servers.</p> <p>Web Security</p> <p>Digital copies are as good as originals: Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back, even if the download URL becomes invalid or the service is shut down completely.</p> <p>Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p>"},{"location":"developer-guide/media/thumbnails/#references","title":"References","text":"<ul> <li>https://ourcodeworld.com/articles/read/1341/why-you-should-use-a-cookie-less-domain-for-serving-your-static-content-cdn</li> <li>https://pragmaticwebsecurity.com/articles/oauthoidc/localstorage-xss.html</li> </ul> <p>Since most users have only one domain/host name and modern web applications can store authentication tokens in localStorage, our REST API does not require or use cookies by default.</p>"},{"location":"developer-guide/media/thumbnails/#image-endpoint-uri","title":"Image Endpoint URI","text":"<p>Authenticated with SHA1 hash and additional security token:</p> <pre><code>/api/v1/t/a2195b6840f46b555719d8e22e9b080e61a7317c/10d68214/tile_500\n</code></pre> <p>In public mode without security token:</p> <pre><code>/api/v1/t/a2195b6840f46b555719d8e22e9b080e61a7317c/public/tile_500\n</code></pre> <p>The thumbnail size and aspect ratio are specified at the end, in this case <code>tile_500</code>, which means 500x500 pixels.</p>"},{"location":"developer-guide/media/thumbnails/#video-endpoint-uri","title":"Video Endpoint URI","text":"<p>Authenticated with SHA1 hash and additional security token:</p> <pre><code>/api/v1/videos/51843134d75f4cbde534270cdd5954067f887ee6/10d68214/avc\n</code></pre> <p>In public mode without security token:</p> <pre><code>/api/v1/videos/51843134d75f4cbde534270cdd5954067f887ee6/public/avc\n</code></pre> <p>Videos can be streamed if the browser supports it. The format is specified at the end, in this case MPEG-4 AVC.</p>"},{"location":"developer-guide/media/thumbnails/#thumbnail-types","title":"Thumbnail Types","text":"<p>The smallest configurable static and dynamic size limit is 720px, so all formats up to <code>fit_720</code> should be generated by default while indexing.</p> <p>Higher settings allow PhotoPrism to generate thumbnails with more detail in higher resolutions - either  statically (while indexing) or dynamically (on-demand).</p> Name Width Height Common Use <code>colors</code> 3 3 Color Detection <code>tile_50</code> 50 50 List Preview <code>tile_100</code> 100 100 Maps Preview <code>tile_224</code> 224 224 Mosaic Preview <code>left_224</code> 224 224 TensorFlow <code>right_224</code> 224 224 TensorFlow <code>tile_500</code> 500 500 Cards Preview <code>fit_720</code> 720 720 Mobile, TV <code>fit_1280</code> 1280 1024 Mobile, HD Ready TV <code>fit_1920</code> 1920 1200 Mobile, Full HD TV <code>fit_2048</code> 2048 2048 Tablets, Cinema 2K <code>fit_2560</code> 2560 1600 Quad HD, Retina Display <code>fit_3840</code> 3840 2400 Ultra HD <code>fit_4096</code> 4096 4096 Ultra HD, Retina 4K <code>fit_7680</code> 7680 4320 8K Ultra HD 2, Retina 6K <p>See <code>/internal/thumb/sizes.go</code> for details.</p>"},{"location":"developer-guide/media/thumbnails/#storage-folders","title":"Storage Folders","text":"<p>Generated thumbnails are cached in sub-folders of <code>/storage/cache/thumbnails</code> based on the SHA1 hash of the original file, for example:</p> <pre><code>/storage/cache/thumbnails/1/a/3/1a30c1f...9_100x100_center.jpg\n</code></pre>"},{"location":"developer-guide/media/thumbnails/#downscaling-filters","title":"Downscaling Filters","text":""},{"location":"developer-guide/media/thumbnails/#linear","title":"Linear","text":"<p>Bilinear interpolation takes a weighted average of the four neighborhood pixels to calculate its final interpolated value. The result is a much smoother image than the original image. When all known pixel distances are equal, then the interpolated value is simply their sum divided by four. This technique performs interpolation in both directions, horizontal and vertical. This technique gives better result than nearest neighbor interpolation and take less computation time compared to bicubic interpolation.</p>"},{"location":"developer-guide/media/thumbnails/#cubic","title":"Cubic","text":"<p>Catmull-Rom is a local interpolating spline developed for computer graphics purposes. Its initial use was in design of curves and surfaces, and has recently been used in several applications. Catmull-Rom splines are a family of cubic interpolating splines formulated such that the tangent at each point is calculated using the previous and next point on the spline. The results are similar to ones produced by bicubic interpolation with regards to sharpness, but the Catmull-Rom reconstruction is clearly superior in smooth signal region.</p>"},{"location":"developer-guide/media/thumbnails/#lanczos","title":"Lanczos","text":"<p>The Lanczos interpolation function is a mathematical formula used to smoothly interpolate the value of a digital image between its samples. It maps each sample of the given image to a translated and scaled copy of the Lanczos kernel, which is a sinc function windowed by the central hump of a dilated sinc function. The sum of these translated and scaled kernels is then evaluated at the desired pixel. Lanczos interpolation has the best properties in terms of detail preservation and minimal generation of aliasing artifacts for geometric transformations not involving strong down sampling. However higher order Lanczos interpolation requires high computational time, which makes it unsuitable for most commercial software.</p>"},{"location":"developer-guide/media/thumbnails/#blackman","title":"Blackman","text":"<p>Blackman is a modification of Lanczos that has better control of ringing artifacts.</p>"},{"location":"developer-guide/media/thumbnails/#further-reading","title":"Further Reading","text":"<ul> <li>https://en.wikipedia.org/wiki/Image_scaling</li> <li>https://en.wikipedia.org/wiki/Lanczos_resampling</li> <li>https://en.wikipedia.org/wiki/Comparison_gallery_of_image_scaling_algorithms</li> </ul>"},{"location":"developer-guide/media/videos/","title":"Videos","text":"<p>For maximum browser compatibility, PhotoPrism can transcode video codecs and containers supported by FFmpeg to MPEG-4 AVC, as well as extract still images for thumbnail creation:</p> <ul> <li>if FFmpeg is disabled or not installed, indexing and importing videos is not possible because still images cannot be created</li> <li>if Exiftool is disabled or not installed, indexing and importing videos is only partially possible because the video metadata cannot be extracted and thus the duration, resolution, and codec are unknown</li> <li>MPEG-4 AVC videos can be played natively by most modern browsers and are not re-encoded, even if they exceed the configured bitrate limit; to reduce the size of AVC videos, you can manually replace the original files with a smaller version or wait for a future release that offers this functionality</li> <li>OGV, VP8, VP9, AV1, WebM, and HEVC videos will be streamed directly if they are supported by your browser and do not exceed the configured bitrate limit</li> <li>other formats must always be transcoded</li> </ul> <p>You can view a list of codecs that FFmpeg supports by executing this command in a terminal:</p> <pre><code>ffmpeg -decoders\n</code></pre> <p>Our setup guide for advanced users explains how to configure hardware video transcoding.</p> <p>Please note:</p> <ol> <li>Not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</li> <li>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</li> </ol> <p>Although the QuickTime <code>.mov</code> container format served as the basis for MPEG-4, there are differences and the two are not strictly interchangeable. Nevertheless, they can be played in most browsers and are not automatically transcoded for this reason.</p> <p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have Exiftool enabled to extract metadata such as duration, resolution, and codec.   </p>"},{"location":"developer-guide/media/videos/#resolutions","title":"Resolutions","text":"<p>The <code>PHOTOPRISM_FFMPEG_SIZE</code> config option allows to limit the resolution of transcoded videos. It accepts the following standard sizes, while other values are automatically adjusted to the next supported size:</p> Size Usage 720 SD TV, Mobile 1280 HD TV, SXGA 1920 Full HD 2048 DCI 2K, Tablets 2560 Quad HD, Notebooks 3840 4K Ultra HD 4096 DCI 4K, Retina 4K 7680 8K Ultra HD 2"},{"location":"developer-guide/media/videos/#containers","title":"Containers","text":"<ul> <li>https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Containers</li> </ul>"},{"location":"developer-guide/media/videos/#codecs","title":"Codecs","text":"<ul> <li>https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Video_codecs</li> </ul>"},{"location":"developer-guide/metadata/classification/","title":"Image Classification","text":"<p>Image classification is performed using a pre-trained model, NASNet Mobile 224, that we have chosen because of its size, performance and accuracy. To get a basic understanding of how this works, you can read Image Classification using Deep Neural Networks.</p> <p>In addition, we manually matched the model classification with the labels you see in our UI:</p> <p><pre><code>cat:\nlabel: cat\nthreshold: 0.3\npriority: 5\ncategories:\n- animal\n\ntabby cat:\nsee: cat\n</code></pre> </p> <p>This was necessary because we didn't find a taxonomy suitable for consumers (mainly just scientific ones) and needed a lot of control to fine tune terms and their probability thresholds. The raw results were not useful to a typical user. Indexing too many words, categories and alternatives also negatively affects performance and leads to noise. </p> <p>It took us several months of testing until we were happy with the results and there are still labels to improve.</p>"},{"location":"developer-guide/metadata/classification/#updating-labels","title":"Updating labels","text":"<p>After editing or adding labels in rules.yml, you now have to run <code>make generate</code> in the main project directory to generate native Go source from this file.</p>"},{"location":"developer-guide/metadata/classification/#pre-trained-models","title":"Pre-trained Models","text":"<p>See also: TensorFlow Hub</p> <p>Source: https://github.com/tensorflow/models/blob/master/research/slim/README.md</p> <p>Neural nets work best when they have many parameters, making them powerful function approximators. However, this  means they must be trained on very large datasets. Because training models from scratch can be a very computationally intensive process requiring days or even weeks, there are various pre-trained models available.  These CNNs have been trained on the ILSVRC-2012-CLS image classification dataset.</p> <p>Note that the VGG and ResNet V1 parameters have been converted from their original caffe formats (here and here), whereas the Inception and ResNet V2 parameters have been trained internally at Google. Also be aware that these accuracies were computed by evaluating using a single image crop. PhotoPrism uses three crops, except for square images.</p> Model TF-Slim File Checkpoint Top-1 Accuracy Top-5 Accuracy Inception V1 Code inception_v1_2016_08_28.tar.gz 69.8 89.6 Inception V2 Code inception_v2_2016_08_28.tar.gz 73.9 91.8 Inception V3 Code inception_v3_2016_08_28.tar.gz 78.0 93.9 Inception V4 Code inception_v4_2016_09_09.tar.gz 80.2 95.2 Inception-ResNet-v2 Code inception_resnet_v2_2016_08_30.tar.gz 80.4 95.3 ResNet V1 50 Code resnet_v1_50_2016_08_28.tar.gz 75.2 92.2 ResNet V1 101 Code resnet_v1_101_2016_08_28.tar.gz 76.4 92.9 ResNet V1 152 Code resnet_v1_152_2016_08_28.tar.gz 76.8 93.2 ResNet V2 50^ Code resnet_v2_50_2017_04_14.tar.gz 75.6 92.8 ResNet V2 101^ Code resnet_v2_101_2017_04_14.tar.gz 77.0 93.7 ResNet V2 152^ Code resnet_v2_152_2017_04_14.tar.gz 77.8 94.1 ResNet V2 200 Code TBA 79.9* 95.2* VGG 16 Code vgg_16_2016_08_28.tar.gz 71.5 89.8 VGG 19 Code vgg_19_2016_08_28.tar.gz 71.1 89.8 MobileNet_v1_1.0_224 Code mobilenet_v1_1.0_224.tgz 70.9 89.9 MobileNet_v1_0.50_160 Code mobilenet_v1_0.50_160.tgz 59.1 81.9 MobileNet_v1_0.25_128 Code mobilenet_v1_0.25_128.tgz 41.5 66.3 MobileNet_v2_1.4_224^* Code mobilenet_v2_1.4_224.tgz 74.9 92.5 MobileNet_v2_1.0_224^* Code mobilenet_v2_1.0_224.tgz 71.9 91.0 NASNet-A_Mobile_224# Code nasnet-a_mobile_04_10_2017.tar.gz 74.0 91.6 NASNet-A_Large_331# Code nasnet-a_large_04_10_2017.tar.gz 82.7 96.2 PNASNet-5_Large_331 Code pnasnet-5_large_2017_12_13.tar.gz 82.9 96.2 PNASNet-5_Mobile_224 Code pnasnet-5_mobile_2017_12_13.tar.gz 74.2 91.9 <p>^ ResNet V2 models use Inception pre-processing and input image size of 299 (use <code>--preprocessing_name inception --eval_image_size 299</code> when using <code>eval_image_classifier.py</code>). Performance numbers for ResNet V2 models are reported on the ImageNet validation set.</p> <p>(#) More information and details about the NASNet architectures are available at this README</p> <p>All 16 float MobileNet V1 models reported in the MobileNet Paper and all 16 quantized TensorFlow Lite compatible MobileNet V1 models can be found here.</p> <p>(^#) More details on MobileNetV2 models can be found here.</p> <p>(*): Results quoted from the paper.</p> <p>Here is an example of how to download the Inception V3 checkpoint:</p> <pre><code>$ CHECKPOINT_DIR=/tmp/checkpoints\n$ mkdir ${CHECKPOINT_DIR}\n$ wget http://download.tensorflow.org/models/inception_v3_2016_08_28.tar.gz\n$ tar -xvf inception_v3_2016_08_28.tar.gz\n$ mv inception_v3.ckpt ${CHECKPOINT_DIR}\n$ rm inception_v3_2016_08_28.tar.gz\n</code></pre>"},{"location":"developer-guide/metadata/classification/#landmark-detection","title":"Landmark detection","text":"<p>DELF: DEep Local Features  - https://github.com/tensorflow/models/tree/master/research/delf - Tensorflow implementation</p> <p></p> <p>Source: https://gitcdn.xyz/cdn/Tony607/blog_statics/ce9c3391932e24655b78e27a54543f28f11f3af0/images/landmark/query.jpg</p>"},{"location":"developer-guide/metadata/classification/#types-of-neural-networks","title":"Types of neural networks","text":"<p> Source: http://www.asimovinstitute.org/neural-network-zoo/</p>"},{"location":"developer-guide/metadata/classification/#external-resources","title":"External Resources","text":"<ul> <li>https://ai.facebook.com/blog/roberta-an-optimized-method-for-pretraining-self-supervised-nlp-systems/ - An optimized method for pretraining self-supervised NLP systems</li> <li>zihangdai/xlnet - Generalized Autoregressive Pretraining for Language Understanding</li> <li>https://pjreddie.com/darknet/yolo/ - real time image detection</li> <li>https://pjreddie.com/darknet/imagenet/ - using use Darknet to classify images</li> <li>ZanLabs/go-yolo - Golang binding for YOLO/Darknet recognition framework</li> <li>https://itnext.io/implementing-yolo-v3-in-tensorflow-tf-slim-c3c55ff59dbe - Implementing YOLO v3 in Tensorflow (TF-Slim)</li> <li>chewxy/lingo - provides the data structures and algorithms required for natural language processing</li> <li>https://modelzoo.co/ - Discover open source deep learning code and pretrained models</li> <li>https://polarr.ai/ - Efficient and Immersive C.V. experiences on the edge</li> <li>gildasch/gildas-ai</li> <li>https://www.tensorflow.org/lite/guide/hosted_models</li> <li>https://github.com/tensorflow/models/tree/master/research/slim/nets/nasnet</li> <li>https://www.wikidata.org/wiki/Wikidata:Database_download</li> <li>ropensci/wikitaxa</li> <li>https://datahub.io/collections/yago - YAGO3 is a huge semantic knowledge base, derived from Wikipedia WordNet and GeoNames</li> <li>Google AI Blog: Improving Inception and Image Classification in TensorFlow</li> <li>CNN Architectures: LeNet, AlexNet, VGG, GoogLeNet, ResNet and more</li> <li>Gildas Chabot - AI image search with Go &amp; Tensorflow (slides)</li> </ul>"},{"location":"developer-guide/metadata/colors/","title":"Color Detection","text":"<p>We've reimplemented color indexing using a 3x3 thumbnail. It enables us to search specific parts of an image. Our previous algorithm was not deterministic, so search would have returned different results every time.</p> <p>Demo: https://try.photoprism.app/library/photos?q=green</p>"},{"location":"developer-guide/metadata/colors/#colors","title":"Colors","text":"<p>See https://vuetifyjs.com/en/framework/colors</p> <p>TODO: Complete table with ID, Color Name, HTML Code and Sample</p> ID Name Code Sample 0 Black #000000 1 Brown #795548 2 Grey #9E9E9E 3 White #FFFFFF 4 Purple #9C27B0 5 Gold #FFDF00 6 Blue #3F51B5 7 Cyan #00BCD4 8 Teal #009688 9 Green #4CAF50 A Lime #CDDC39 B Yellow #FFEB3B C Magenta #FF00FF D Orange #FF9800 E Red #F44336 F Pink #E91E63 ID Name Code Sample 0 Black #000000 1 Brown #A1887F #8D6E63 #A07F6C #9B7B5B #75645B #795548 #6D4C41 #5D4037 #9B6136 #C1A487 #AA8062 #6B5546 #B4B59C #B2B49B 2 Grey #E0E0E0 #9E9E9E #757575 #616161 #424242 #847A72 #DFE0E1 3 White #FFFFFF #E4E4E4 #E7E7E7 4 Purple #F3E5F5 #E1BEE7 #CE93D8 #BA68C8 #AB47BC #9C27B0 #9B318F #86007E #8E24AA #7B1FA2 #6A1B9A #4A148C #AA00FF #EDE7F6 #D1C4E9 #B39DDB #9575CD #7E57C2 #5E35B1 #673AB7 #512DA8 #4527A0 #311B92 #B388FF #7C4DFF #8E6493 #5E3A5E #440E79 #483678 #4E3880  #3B0E79 5 Gold #EDDEAC #E8B451 #C08A3E #A27D4b #755531 #D19327 #DEA253 #D5AA6F #F5EAD4 6 Blue #3F51B5 #C5CAE9 #5C6BC0 #3949AB #303F9F #283593 #1A237E #536DFE #3D5AFE #304FFE #2196F3 #BBDEFB #90CAF9 #64B5F6 #42A5F5 #1E88E5 #1976D2 #1565C0 #0D47A1 #82B1FF #448AFF #2979FF #2962FF #03A9F6 #B3E5FC #81D4FA #4FC3F7 #29B6F6 #039BE5 #0288D1 #0277BD #01579B #80D8FF #40C4FF #00B0FF #0091EA #607D8B #78909C #546E7A #37474F #E4EBFD #7DD3EA #076399 #28446B #4AC8F5 #0800F4 #012D5F 7 Cyan #B2EBF2 #80DEEA #4DD0E1 #26C6DA #00B8D4 #00BCD4 #00ACC1 #0097A7 #00838F #006064 #84FFFF #18FFFF #00E5FF 8 Teal #009688 #00897B #00796B #00695C #045D5C #245A5F #03454F #2C545E #174741 9 Green #E8F5E9 #C8E6C9 #ABC7B0 #A5D6A7 #81C784 #66BB6A #4CAF50 #43A047 #388E3C #2E7D32 #1B5E20 #F1F8E9 #DCEDC8 #C5E1A5 #AED581 #8BC34A #9CCC65 #7CB342 #689F38 #558B2F #33691E #B9F6CA #69F0AE #00C853 #00E676 #CCFF90 #B2FF59 #76FF03 #64DD17 #DDD579 #EEECA2 #244E3B #9A9D47 #BEBD76 #5C5A30 #B3C16C #ACA783 #474C25 #CDD087 #796D41 A Lime #F0F4C3 #E6EE9C #DCE775 #D4E157 #CDDC39 #C0CA33 #AFB42B #EEFF41 #C6FF00 #AEEA00 B Yellow #FFF9C4 #FFF59D #FFF176 #FFEE58 #FFFF8D #FFFF00 #FFD54F #FFCA28 #E3CE81 #D1AF52 #EEBB2B #D3A83A #C5A702 #9F8201 #E8CE03 C Magenta #FF00FF #E500E5 #F000B5 #CE009B #C0055B #B00085 #A82863 #5B002F #4B0121 #860225 #CB023D #64071A #9E0047 #DC7ACF D Orange #FF9800 #FFA726 #FB8C00 #F57C00 #EF6C00 #FF9100  #FF6D00 #FD9A31 #7D2704 #FD571F #F86704 #FD9A00 #FE8A00 #F19652 #E58347 #C94C30 #9F5601 #FA6801 #F9A825 #BB723D E Red #FF5252 #F44336 #EF5350 #E53935 #F6292E  #FC252D #D32F2F #C62828 #BA2830 #B71C1C #D50000 #DB0806 #CF0904 #D81A14 #CC1708 #D80807 #DE2616 #EE240F #A1211F  #701219 #511218 #491114 F Pink #FCE4EC #FDC8EB #E79FA6 #F8BBD0 #F48FB1 #FF80AB #FF4081 #F50057 #F06292 #EC407A #E91E63 #D81B60 #C2185B <pre><code>Black:  \"black\",  // 0\nBrown:  \"brown\",  // 1\nGrey:   \"grey\",   // 2\nWhite:  \"white\",  // 3\nPurple: \"purple\", // 4\nGold: \"gold\",     // 5\nBlue:   \"blue\",   // 6\nCyan:   \"cyan\",   // 7\nTeal:   \"teal\",   // 8\nGreen:  \"green\",  // 9\nLime:   \"lime\",   // A\nYellow: \"yellow\", // B\nMagenta: \"magenta\",  // C\nOrange: \"orange\", // D\nRed:    \"red\",    // E\nPink:   \"pink\",   // F\n</code></pre>"},{"location":"developer-guide/metadata/colors/#hcl-vs-hsl","title":"HCL vs HSL","text":"<p>See also lucasb-eyer/go-colorful#so-which-colorspace-should-i-use</p>"},{"location":"developer-guide/metadata/colors/#issues","title":"Issues","text":"<ul> <li>~~Improved color indexing #7~~</li> </ul>"},{"location":"developer-guide/metadata/colors/#external-resources","title":"External Resources","text":"<ul> <li>https://opencv.org/</li> <li>RobCherry/vibrant</li> </ul>"},{"location":"developer-guide/metadata/face-recognition/","title":"Face Recognition","text":"<p>To recognize faces, PhotoPrism first extracts crops from your images using the Pigo face detection library. It is based on pixel intensity comparisons.</p> <p>These are then fed into TensorFlow to compute 512-dimensional vectors for characterization.</p> <p>In the final step, the DBSCAN algorithm attempts to cluster these so-called face embeddings so that they can be assigned to people with a few clicks.</p>"},{"location":"developer-guide/metadata/face-recognition/#configuration","title":"Configuration","text":"<p>We recommend that only advanced users and developers change these parameters.</p> Environment CLI Flag Default Description PHOTOPRISM_FACE_SIZE --face-size 50 minimum size of faces in <code>PIXELS</code> (20-10000) PHOTOPRISM_FACE_SCORE --face-score 9.000000 minimum face <code>QUALITY</code> score (1-100) PHOTOPRISM_FACE_OVERLAP --face-overlap 42 face area overlap threshold in <code>PERCENT</code> (1-100) PHOTOPRISM_FACE_CLUSTER_SIZE --face-cluster-size 80 minimum size of automatically clustered faces in <code>PIXELS</code> (20-10000)\u2002members only PHOTOPRISM_FACE_CLUSTER_SCORE --face-cluster-score 15 minimum <code>QUALITY</code> score of automatically clustered faces (1-100)\u2002members only PHOTOPRISM_FACE_CLUSTER_CORE --face-cluster-core 4 <code>NUMBER</code> of faces forming a cluster core (1-100)\u2002members only PHOTOPRISM_FACE_CLUSTER_DIST --face-cluster-dist 0.640000 similarity <code>DISTANCE</code> of faces forming a cluster core (0.1-1.5)\u2002members only PHOTOPRISM_FACE_MATCH_DIST --face-match-dist 0.460000 similarity <code>OFFSET</code> for matching faces with existing clusters (0.1-1.5)\u2002members only <ul> <li>A reasonable range for the similarity distance between face embeddings is between 0.60 and 0.70, with a higher value being more aggressive and leading to larger clusters with more false positives.</li> <li>To cluster a smaller number of faces, you can reduce the kernel to 3 or 2 similar faces.</li> </ul>"},{"location":"developer-guide/metadata/face-recognition/#external-resources","title":"External Resources","text":"<ul> <li>https://cheppers.com/deploying-distributed-face-recognition-application-kubernetes - Deploying a distributed face-recognition application with Kubernetes</li> <li>http://dlib.net/ - Machine learning library, good for face recognition</li> <li>Kagami/go-face - implements face recognition for Go using dlib</li> <li>https://hackernoon.com/face-recognition-with-go-676a555b8a7e - face recognition howto using Kagami/go-face</li> <li>esimov/pigo - Pigo is a face detection library implemented in Go</li> <li>https://gocv.io/ - GoCV gives access to the OpenCV 4 computer vision library</li> <li>davidsandberg/facenet - Face Recognition using Tensorflow (Python, not Go)</li> </ul>"},{"location":"developer-guide/metadata/geocoding/","title":"Reverse Geocoding","text":"<p>If enabled, reverse geocoding enriches photo and video metadata with details such as country, state, city, and category.</p>"},{"location":"developer-guide/metadata/geocoding/#privacy-policy","title":"Privacy Policy","text":"<p>As explained in detail in our Privacy Policy, reverse geocoding depends on retrieving the necessary information from a backend that we provide for this purpose.</p> <p>The costs are currently fully covered by us for all users, including non-sponsors, and we ensure a very high level of privacy and confidentiality:</p> <ul> <li>API requests are not logged permanently.</li> <li>Our API approximates the coordinates and encodes them with a fuzzy S2 cell ID that does not include the house number or any other data identifying a specific residential address, except possibly in very sparsely populated areas of the world. Even then, we cannot trace the request back to a person, picture or point in time.</li> <li>We may store your server's IP address and other HTTP request headers for a limited time to perform authorization checks, prevent abuse, and implement rate limits. Since the traffic is encrypted, no one intercepting the server-to-server communication can see the exact request and response; only the fact that you exchanged data with our backend.</li> </ul>"},{"location":"developer-guide/metadata/geocoding/#example-request","title":"Example Request","text":"<p><code>GET https://places.photoprism.app/v1/location/149ce78563</code></p> <pre><code>{\n\"id\": \"s2:149ce78563\",\n\"name\": \"Elafonisi Kite Club\",\n\"street\": \"\u039a\u03b5\u03c6\u03b1\u03bb\u03ae\",\n\"postcode\": \"\",\n\"category\": \"nature\",\n\"timezone\": \"Europe/Athens\",\n\"lat\": 35.269638,\n\"lng\": 23.536951,\n\"place\": {\n\"id\": \"gr:GCd9oey68OFr\",\n\"label\": \"\u03a7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03b9\u03c3\u03c3\u03b1, Greece\",\n\"district\": \"\",\n\"city\": \"\u03a7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03b9\u03c3\u03c3\u03b1\",\n\"state\": \"\u0391\u03c0\u03bf\u03ba\u03b5\u03bd\u03c4\u03c1\u03c9\u03bc\u03ad\u03bd\u03b7 \u0394\u03b9\u03bf\u03af\u03ba\u03b7\u03c3\u03b7 \u039a\u03c1\u03ae\u03c4\u03b7\u03c2\",\n\"country\": \"gr\",\n\"keywords\": \"\u03c7\u03c1\u03c5\u03c3\u03bf\u03c3\u03ba\u03b1\u03bb\u03af\u03c4\u03c3\u03b1\"\n},\n\"events\": [],\n\"licence\": \"Data \u00a9 PhotoPrism\"\n}\n</code></pre>"},{"location":"developer-guide/metadata/geocoding/#location-data","title":"Location Data","text":"<p>See: internal/maps/location.go</p>"},{"location":"developer-guide/metadata/geocoding/#world-maps","title":"World Maps","text":"<p>PhotoPrism also includes four high-resolution world maps that allow you to browse photos by location, see Web User Interface &gt; Interactice Maps. Visit try.photoprism.app/library/places to try them on our demo.</p>"},{"location":"developer-guide/metadata/geocoding/#related-resources","title":"Related Resources","text":""},{"location":"developer-guide/metadata/geocoding/#event-discovery","title":"Event Discovery","text":"<ul> <li>https://schedjoules.github.io/event-discovery-api/#introduction</li> <li>https://www.gdeltproject.org/data.html#rawdatafiles</li> </ul>"},{"location":"developer-guide/metadata/geocoding/#libraries","title":"Libraries","text":"<ul> <li>https://tegola.io/ - An open source vector tile server written in Go</li> <li>https://tegola.io/tutorials/tegola-with-open-layers/ - Using Tegola with OpenLayers</li> <li>go-spatial/tegola-osm - scripts for importing and running a mirror of OSM with tegola</li> <li>https://pelias.io/ - Pelias Geocoder (GitHub)</li> <li>Leaflet/Leaflet - JavaScript library for mobile-friendly interactive maps</li> <li>tidwall/tile38 - a geospatial database and realtime geofencing server</li> <li>melihmucuk/geocache - an in-memory cache that is suitable for geolocation based applications</li> <li>aaronland/go-slippy-tiles - a proxy for map tiles</li> <li>paulmach/osm - a general purpose library for reading, writing and working with OpenStreetMap data</li> <li>maguro/pbf - a Go-based OpenStreetMap PBF encoder/ decoder</li> <li>golang/geo - S2 geometry library in Go</li> <li>https://gist.github.com/antoniomo/3371e44cbe2f0cc75a525aac0d188cfb - example for S2 geometry library</li> <li>tidwall/redcon - Redis compatible server framework (Go)</li> <li>siddontang/ledisdb - a high performance NoSQL DB powered by Go (homepage)</li> <li>https://github.com/blevesearch/bleve/tree/master/geo - geo support in bleve</li> </ul>"},{"location":"developer-guide/metadata/geocoding/#commercial-services","title":"Commercial Services","text":"<ul> <li>https://developers.google.com/maps/documentation/</li> <li>https://www.mapbox.com/maps/</li> </ul>"},{"location":"developer-guide/metadata/geocoding/#tutorials","title":"Tutorials","text":"<ul> <li>https://developers.google.com/maps/solutions/store-locator/clothing-store-locator#findnearsql</li> <li>https://blog.mastermaps.com/2014/08/showing-geotagged-photos-on-leaflet-map.html - Showing geotagged photos on a Leaflet map</li> <li>https://rubenspgcavalcante.github.io/leaflet-ant-path/ - Animate polylines as ants walking in a path</li> </ul>"},{"location":"developer-guide/metadata/orientation/","title":"Image Orientation","text":""},{"location":"developer-guide/metadata/orientation/#using-exiftool","title":"Using Exiftool","text":"<p>Assuming you have Docker installed and want to run <code>exiftool</code> with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and any other packages you need, e.g. <code>libheif-examples</code> to convert HEIF images to JPEG, via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code> and optionally use grep to filter the output:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre> <p>Rotation and Orientation are the important values you should pay attention to and compare. The rotation is in degrees.</p>"},{"location":"developer-guide/metadata/orientation/#exiftool-parameters","title":"Exiftool Parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>"},{"location":"developer-guide/metadata/orientation/#exif-values","title":"Exif Values","text":"<p>The Exif orientation values are numbered from 1 to 8:</p> <ol> <li>= 0 degrees: the correct orientation, no adjustment is required.</li> <li>= 0 degrees, mirrored: image has been flipped back-to-front.</li> <li>= 180 degrees: image is upside down.</li> <li>= 180 degrees, mirrored: image has been flipped back-to-front and is upside down.</li> <li>= 90 degrees: image has been flipped back-to-front and is on its side.</li> <li>= 90 degrees, mirrored: image is on its side.</li> <li>= 270 degrees: image has been flipped back-to-front and is on its far side.</li> <li>= 270 degrees, mirrored: image is on its far side.</li> </ol> <p>See also sirv.com/help/articles/rotate-photos-to-be-upright/.</p>"},{"location":"developer-guide/metadata/xmp/","title":"Adobe XMP","text":"<p>XMP (Extensible Metadata Platform) is the standard sidecar file format supported by Adobe Lightroom. While YAML files might be easier to understand, read and edit for humans, using the XML-based XMP format simplifies importing metadata from Lightroom and we can leverage a documented standard. Ideally, data can be kept in sync continuously between PhotoPrism and other photo management applications.</p> <p>A proof-of-concept for reading <code>Title</code>, <code>Copyright</code>, <code>Artist</code> and <code>Description</code> is implemented but full support is a lot more work, contributions welcome. One issue is proper XML parsing in Go as basic types like date and time are not supported by <code>xml.Unmarshaler</code>. GPS coordinates are not stored as float but as a string like <code>52,27.5814N</code>.</p> <p>The original plan to build upon <code>go-xmp</code> didn't work out as we couldn't read many fields, so we're using pure Go for now until we find a way to get the data we need with <code>go-xmp</code>. It might be a bug and/or it's an issue with our specific XMP files.</p>"},{"location":"developer-guide/metadata/xmp/#file-samples","title":"File Samples","text":"<p>We would be happy to receive more XMP files for testing, either via pull request or email.</p>"},{"location":"developer-guide/metadata/xmp/#specification","title":"Specification","text":"<ul> <li>Part 1: Data and Serialization Model</li> <li>Part 2: Standard Schemas</li> <li>Part 3: Storage in Files </li> <li>Adobe XMP Programmers Guide</li> <li>Adobe XMP Files Plugin SDK</li> <li>Adobe BSD 3-Clause License and XMP Toolkit SDK</li> </ul>"},{"location":"developer-guide/metadata/xmp/#open-issues","title":"Open Issues","text":"<ul> <li>Experiment with Adobe Lightroom to see how it uses sidecar files. The new version doesn't seem to use XMP to automatically sync metadata anymore, probably because Adobe focuses on cloud storage. Needs further investigation.</li> <li>Create a matrix showing what fields are used/supported by which application/tool (Photoshop, Lightroom, Darktable and others, see</li> <li>Read http://www.exiv2.org/tags-xmp-crs.html (Camera Raw Schema)</li> </ul>"},{"location":"developer-guide/metadata/xmp/#released-features","title":"Released Features","text":"<ul> <li>Store metadata in the filesystem #4</li> <li>Compare the quality and XMP compatibility of different RAW converters #65</li> </ul>"},{"location":"developer-guide/metadata/xmp/#external-resources","title":"External Resources","text":"<ul> <li>trimmer-io/go-xmp - A native Go SDK for the Extensible Metadata Platform (XMP)</li> <li>XMP code in GIMP - Nothing beyond some comments. It was a code drop, we needed the feature, but unfortunately the original contributor left.</li> </ul>"},{"location":"developer-guide/metadata/exif/","title":"Extraction","text":"<p>PhotoPrism uses the dsoprea/go-exif package to natively extract EXIF information from images. Exiftool support can be optionally enabled to support a wider range of metadata formats and extraction from video files.</p> <ul> <li>see internal/meta/exif.go for which tags are integrated into PhotoPrism </li> <li>see official EXIF specification for more information about EXIF tags</li> </ul>"},{"location":"developer-guide/metadata/exif/#using-exiftool","title":"Using Exiftool","text":"<p>Assuming you have Docker installed and want to run <code>exiftool</code> with Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Now install <code>exiftool</code> and any other packages you need, e.g. <code>libheif-examples</code> to convert HEIF images to JPEG, via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre> <p>To view the image metadata, run <code>exiftool -n &lt;filename&gt;</code>:</p> <pre><code>root@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC.jpg | grep ation\nFile Modification Date/Time     : 2022:09:18 08:16:28+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nroot@1ad9fb887a4f:/test# exiftool -n IMG_8437.HEIC | grep ation\nFile Modification Date/Time     : 2022:09:17 16:57:40+00:00\nOrientation                     : 6\nExposure Compensation           : 0\nHEVC Configuration Version      : 1\nMin Spatial Segmentation IDC    : 0\nRotation                        : 270\n</code></pre>"},{"location":"developer-guide/metadata/exif/#exiftool-parameters","title":"Exiftool Parameters","text":"<ul> <li><code>-n</code> displays the raw values without changes</li> <li><code>-j</code> will format the output as JSON</li> <li><code>-g</code> groups the output by metadata source</li> </ul>"},{"location":"developer-guide/metadata/exif/#screenshots","title":"Screenshots","text":"<p>This is how other apps show metadata:</p> <p></p> <p></p> <p></p>"},{"location":"developer-guide/metadata/exif/edit/","title":"Editing","text":"<p>Exiftool --&gt; https://exiftool.org/</p> <p>Installation possible via brew or from homepage.</p> <p>Exif-Read-Tool: dsoprea/go-exif</p>"},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-for-debugging","title":"Show exif data for debugging","text":""},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-read-from-exiftool","title":"Show exif data read from exiftool","text":"<p><code>exiftool -j photo.jpg</code></p>"},{"location":"developer-guide/metadata/exif/edit/#show-exif-data-read-from-exif-read-tool","title":"Show exif data read from exif-read-tool","text":"<p><code>exif-read-tool -f photo.jpg</code></p>"},{"location":"developer-guide/metadata/exif/edit/#edit-exif-data-for-testing","title":"Edit EXIF data for testing","text":""},{"location":"developer-guide/metadata/exif/edit/#set-createdate","title":"Set CreateDate","text":"<p><code>exiftool -CreateDate=\"1919:05:04 05:59:26+02:00\" dog_toshi_yellow.jpg</code></p>"},{"location":"developer-guide/metadata/exif/edit/#remove-all-gps-data","title":"Remove all GPS data","text":"<p><code>exiftool -GPS:all= file.jpg</code></p>"},{"location":"developer-guide/metadata/exif/edit/#remove-all-exif-data","title":"Remove all exif data","text":"<p><code>exiftool -all= foo.jpg</code></p> <p>Further examples can be found here: https://exiftool.org/examples.html</p>"},{"location":"developer-guide/security/","title":"Security Testing Guide","text":""},{"location":"developer-guide/security/#vulnerability-scanners","title":"Vulnerability Scanners","text":"<p>Nuclei is a fast and customizable vulnerability scanner based on a simple YAML-based DSL. It uses community curated templates to find vulnerabilities in applications.</p> <p>On a Mac, you can install it via Homebrew by running the following command:</p> <pre><code>brew install nuclei\n</code></pre>"},{"location":"developer-guide/security/#web-security-checklist","title":"Web Security Checklist","text":"<p>The following OWASP\u00ae Web Application Security Checklist is also available as PDF or Docx for printing:</p>"},{"location":"developer-guide/security/#information-gathering","title":"Information Gathering","text":"<ul> <li> Manually explore the site</li> <li> Spider/crawl for missed or hidden content</li> <li> Check for files that expose content, such as robots.txt, sitemap.xml, .DS_Store</li> <li> Check the caches of major search engines for publicly accessible sites</li> <li> Check for differences in content based on User Agent (eg, Mobile sites, access as a Search engine Crawler)</li> <li> Perform Web Application Fingerprinting</li> <li> Identify technologies used</li> <li> Identify user roles</li> <li> Identify application entry points</li> <li> Identify client-side code</li> <li> Identify multiple versions/channels (e.g. web, mobile web, mobile app, web services)</li> <li> Identify co-hosted and related applications</li> <li> Identify all hostnames and ports</li> <li> Identify third-party hosted content</li> </ul>"},{"location":"developer-guide/security/#configuration-management","title":"Configuration Management","text":"<ul> <li> Check for commonly used application and administrative URLs</li> <li> Check for old, backup and unreferenced files</li> <li> Check HTTP methods supported and Cross Site Tracing (XST)</li> <li> Test file extensions handling</li> <li> Test for security HTTP headers (e.g. CSP, X-Frame-Options, HSTS)</li> <li> Test for policies (e.g. Flash, Silverlight, robots)</li> <li> Test for non-production data in live environment, and vice-versa</li> <li> Check for sensitive data in client-side code (e.g. API keys, credentials)</li> </ul>"},{"location":"developer-guide/security/#secure-transmission","title":"Secure Transmission","text":"<ul> <li> Check SSL Version, Algorithms, Key length</li> <li> Check for Digital Certificate Validity (Duration, Signature and CN)</li> <li> Check credentials only delivered over HTTPS</li> <li> Check that the login form is delivered over HTTPS</li> <li> Check session tokens only delivered over HTTPS</li> <li> Check if HTTP Strict Transport Security (HSTS) in use</li> </ul>"},{"location":"developer-guide/security/#authentication","title":"Authentication","text":"<ul> <li> Test for user enumeration</li> <li> Test for authentication bypass</li> <li> Test for bruteforce protection</li> <li> Test password quality rules</li> <li> Test remember me functionality</li> <li> Test for autocomplete on password forms/input</li> <li> Test password reset and/or recovery</li> <li> Test password change process</li> <li> Test CAPTCHA</li> <li> Test multi factor authentication</li> <li> Test for logout functionality presence</li> <li> Test for cache management on HTTP (eg Pragma, Expires, Max-age)</li> <li> Test for default logins</li> <li> Test for user-accessible authentication history</li> <li> Test for out-of channel notification of account lockouts and successful password changes</li> <li> Test for consistent authentication across applications with shared authentication schema / SSO</li> </ul>"},{"location":"developer-guide/security/#session-management","title":"Session Management","text":"<ul> <li> Establish how session management is handled in the application (eg, tokens in cookies, token in URL)</li> <li> Check session tokens for cookie flags (httpOnly and secure)</li> <li> Check session cookie scope (path and domain)</li> <li> Check session cookie duration (expires and max-age)</li> <li> Check session termination after a maximum lifetime</li> <li> Check session termination after relative timeout</li> <li> Check session termination after logout</li> <li> Test to see if users can have multiple simultaneous sessions</li> <li> Test session cookies for randomness</li> <li> Confirm that new session tokens are issued on login, role change and logout</li> <li> Test for consistent session management across applications with shared session management</li> <li> Test for session puzzling</li> <li> Test for CSRF and clickjacking</li> </ul>"},{"location":"developer-guide/security/#authorization","title":"Authorization","text":"<ul> <li> Test for path traversal</li> <li> Test for bypassing authorization schema</li> <li> Test for vertical Access control problems (a.k.a. Privilege Escalation)</li> <li> Test for horizontal Access control problems (between two users at the same privilege level)</li> <li> Test for missing authorization</li> </ul>"},{"location":"developer-guide/security/#data-validation","title":"Data Validation","text":"<ul> <li> Test for Reflected Cross Site Scripting</li> <li> Test for Stored Cross Site Scripting</li> <li> Test for DOM based Cross Site Scripting</li> <li> Test for Cross Site Flashing</li> <li> Test for HTML Injection</li> <li> Test for SQL Injection</li> <li> Test for LDAP Injection</li> <li> Test for ORM Injection</li> <li> Test for XML Injection</li> <li> Test for XXE Injection</li> <li> Test for SSI Injection</li> <li> Test for XPath Injection</li> <li> Test for XQuery Injection</li> <li> Test for IMAP/SMTP Injection</li> <li> Test for Code Injection</li> <li> Test for Expression Language Injection</li> <li> Test for Command Injection</li> <li> Test for Overflow (Stack, Heap and Integer)</li> <li> Test for Format String</li> <li> Test for incubated vulnerabilities</li> <li> Test for HTTP Splitting/Smuggling</li> <li> Test for HTTP Verb Tampering</li> <li> Test for Open Redirection</li> <li> Test for Local File Inclusion</li> <li> Test for Remote File Inclusion</li> <li> Compare client-side and server-side validation rules</li> <li> Test for NoSQL injection</li> <li> Test for HTTP parameter pollution</li> <li> Test for auto-binding</li> <li> Test for Mass Assignment</li> <li> Test for NULL/Invalid Session Cookie</li> </ul>"},{"location":"developer-guide/security/#denial-of-service","title":"Denial of Service","text":"<ul> <li> Test for anti-automation</li> <li> Test for account lockout</li> <li> Test for HTTP protocol DoS</li> <li> Test for SQL wildcard DoS</li> </ul>"},{"location":"developer-guide/security/#business-logic","title":"Business Logic","text":"<ul> <li> Test for feature misuse</li> <li> Test for lack of non-repudiation</li> <li> Test for trust relationships</li> <li> Test for integrity of data</li> <li> Test segregation of duties</li> </ul>"},{"location":"developer-guide/security/#cryptography","title":"Cryptography","text":"<ul> <li> Check if data which should be encrypted is not</li> <li> Check for wrong algorithms usage depending on context</li> <li> Check for weak algorithms usage</li> <li> Check for proper use of salting</li> <li> Check for randomness functions</li> </ul>"},{"location":"developer-guide/security/#html-5","title":"HTML 5","text":"<ul> <li> Test Web Messaging</li> <li> Test for Web Storage SQL injection</li> <li> Check CORS implementation</li> <li> Check Offline Web Application</li> </ul>"},{"location":"developer-guide/security/#risky-functionality","title":"Risky Functionality","text":""},{"location":"developer-guide/security/#file-uploads","title":"File Uploads","text":"<ul> <li> Test that acceptable file types are whitelisted</li> <li> Test that file size limits, upload frequency and total file counts are defined and are enforced</li> <li> Test that file contents match the defined file type</li> <li> Test that all file uploads have Anti-Virus scanning in-place.</li> <li> Test that unsafe filenames are sanitised</li> <li> Test that uploaded files are not directly accessible within the web root</li> <li> Test that uploaded files are not served on the same hostname/port</li> <li> Test that files and other media are integrated with the authentication and authorisation schemas</li> </ul>"},{"location":"developer-guide/security/#card-payment","title":"Card Payment","text":"<ul> <li> Test for known vulnerabilities and configuration issues on Web Server and Web Application</li> <li> Test for default or guessable password</li> <li> Test for non-production data in live environment, and vice-versa</li> <li> Test for Injection vulnerabilities</li> <li> Test for Buffer Overflows</li> <li> Test for Insecure Cryptographic Storage</li> <li> Test for Insufficient Transport Layer Protection</li> <li> Test for Improper Error Handling</li> <li> Test for all vulnerabilities with a CVSS v2 score &gt; 4.0</li> <li> Test for Authentication and Authorization issues</li> <li> Test for CSRF</li> </ul> <p>Source: 0xRadi/OWASP-Web-Checklist</p>"},{"location":"developer-guide/security/#openssf-security-criteria","title":"OpenSSF Security Criteria","text":"<p>The Open Source Security Foundation maintains standardized security criteria and best practices for open-source projects:</p> <p></p>"},{"location":"developer-guide/security/go/","title":"Secure Coding in Go","text":"<p>The Go Language: Web Application Secure Coding Practices is a book written for anyone who is using the Go Programming Language and aims to use it for Web development.</p> <p>You can download it in the following formats:</p> <ul> <li>PDF</li> <li>Mobi</li> <li>and ePub</li> </ul> <p>This book is collaborative effort of Checkmarx Security Research Team and it follows the OWASP Secure Coding Practices - Quick Reference Guide v2 (stable) release.</p> <p>Source: OWASP/Go-SCP</p>"},{"location":"developer-guide/security/policy/","title":"Vulnerability Disclosure Guidelines","text":"<p>Visit photoprism.app/security-policy to learn more about our security policy, responsible disclosure, and how you can report issues as a business or organization.</p>"},{"location":"developer-guide/technologies/broadway/","title":"Broadway","text":"<p>Broadway is a display server for using GTK+ applications in a web browser like Chrome or Firefox. It is based on HTML5 and WebSockets. GTK (originally GIMP Toolkit) is a GUI toolkit used by many Linux desktop applications like Darktable, Gimp and RawTherapee. Obviously this technology is ideal for editing images in the browser, at least when the connection is fast enough.</p>"},{"location":"developer-guide/technologies/broadway/#docker-configuration","title":"Docker Configuration","text":"<pre><code># Configure broadwayd (HTML5 display server)\nRUN apt-get update &amp;&amp; apt-get install libgtk-3-bin\nENV GDK_BACKEND broadway\nENV BROADWAY_DISPLAY :5\nEXPOSE 8080\nCMD broadwayd -p 8080 -a 0.0.0.0 :5\n</code></pre> <p>When this is configured, all you need to do is open http://localhost:8080 in a browser and start any GTK application in the same container (broadwayd must be running). It should be displayed instantly, otherwise the screen is white, but you shouldn't see an error.</p>"},{"location":"developer-guide/technologies/broadway/#screenshot","title":"Screenshot","text":""},{"location":"developer-guide/technologies/docker/","title":"Docker","text":"<p>Docker is an Open Source container virtualization tool. It is ideal for running  applications on any computer without extensive installation, configuration, or performance overhead.</p> <p>We are aware Docker is not widely used by end users despite its many advantages. For this reason, we aim  to provide native binaries for common operating systems at a later time.</p>"},{"location":"developer-guide/technologies/docker/#why-are-we-using-docker","title":"Why are we using Docker?","text":"<p>Containers are nothing new; Solaris Zones have been around for about 15 years, first released publicly in 2004. The chroot system call was introduced during development of Version 7 Unix in 1979. It is used ever since for hosting applications exposed to the public Internet.</p> <p>Modern Linux containers are an incremental enhancement. A main advantage of Docker is that application images can be easily made available to users via Internet. It provides a common standard across most operating systems and devices, which saves our team a lot of time that we can then spend more effectively, for example, providing support and developing one of the many features that users are waiting for.</p> <p>Human-readable and versioned Dockerfiles as part of our public source code also help avoid \"works for me\" moments and other unwelcome surprises by enabling teams to have the exact same environment everywhere in development, staging, and production.</p> <p>Last but not least, virtually all file format parsers have vulnerabilities that just haven't been discovered yet. This is a known risk that can affect you even if your computer is not directly connected to the Internet. Running apps in a container with limited host access is an easy way to improve security without compromising performance and usability.</p>"},{"location":"developer-guide/technologies/docker/#running-docker-images","title":"Running Docker Images","text":"<p>Assuming you have Docker installed and want to test Debian 12 \"Bookworm\", you can simply run this command to open a terminal:</p> <pre><code>docker run --rm -v ${PWD}:/test -w /test -ti debian:bookworm bash\n</code></pre> <p>This will mount the current working directory as <code>/test</code>. Of course, you can also specify a full path instead of <code>${PWD}</code>.</p> <p>The available Ubuntu, Debian and PhotoPrism images can be found on Docker Hub:</p> <ul> <li>https://hub.docker.com/_/ubuntu</li> <li>https://hub.docker.com/_/debian</li> <li>https://hub.docker.com/r/photoprism/photoprism/tags</li> </ul> <p>Additional packages can be installed via <code>apt</code>:</p> <pre><code>apt update\napt install -y exiftool libheif-examples\n</code></pre>"},{"location":"developer-guide/technologies/docker/#continuous-integration-deployment","title":"Continuous Integration / Deployment","text":"<p>Build and push of an updated container image to Docker Hub is automatically performed by Travis CI whenever develop is merged into master and the tests are all green. For that reason, we don't use semantic versioning for our binaries and container images. A version string might look like <code>181112-edc7c2f-Darwin-i386-DEBUG</code> instead. Travis CI uses the photoprism/development image for running unit and integration tests on all branches and for pull requests, see Dockerfile.</p>"},{"location":"developer-guide/technologies/docker/#multi-stage-build","title":"Multi-Stage Build","text":"<p>When creating new images, Docker supports so called multi-stage builds, that means you can compile an application like PhotoPrism in a container that contains all development dependencies (like source code, debugger, compiler,...) and later copy the binary to a fresh container. This way we could reduce the compressed container size from ~1 GB to less than 200 MB. Most of that is used by Darktable, TensorFlow and Ubuntu 18.04. Our <code>photoprism</code> binary is smaller than 20 MB.</p> <p>Example:</p> <pre><code>FROM photoprism/development:20181112 as build\n\n# Build PhotoPrism\nWORKDIR \"/go/src/github.com/photoprism/photoprism\"\nCOPY . .\nRUN make all install DESTDIR=/opt/photoprism\n\n# Base base image as photoprism/development\nFROM ubuntu:18.04\n\nWORKDIR /opt/photoprism\n\n# Copy built binaries and assets to this image\nCOPY --from=build /usr/local/bin/photoprism /usr/local/bin/photoprism\nCOPY --from=build /opt/photoprism /opt/photoprism\n\n# Expose HTTP port\nEXPOSE 80\n\n# Start PhotoPrism server\nCMD photoprism start\n</code></pre>"},{"location":"developer-guide/technologies/docker/#kubernetes","title":"Kubernetes","text":"<ul> <li>https://forge.sh/ - Define and deploy multi-container apps in Kubernetes, from source</li> <li>https://www.telepresence.io/ - a local development environment for a remote Kubernetes cluster</li> </ul>"},{"location":"developer-guide/technologies/docker/#external-resources","title":"External Resources","text":"<ul> <li>estesp/manifest-tool</li> <li>docker/app</li> <li>moby/moby</li> <li>https://hub.docker.com/r/multiarch/qemu-user-static/ - quemu for building multiarch images with Docker</li> <li>https://github.com/opencontainers/image-spec - standard labels for Docker image metadata</li> <li>Yelp/dumb-init - A minimal init system for Linux containers</li> </ul>"},{"location":"developer-guide/technologies/external-apis/","title":"External APIs","text":""},{"location":"developer-guide/technologies/external-apis/#photo-sharing","title":"Photo Sharing","text":"<ul> <li>Instagram Developer API </li> <li>Twitter API</li> <li>Facebook Photo API</li> <li>Google Photos API</li> <li>EyeEm API</li> <li>Nextcloud API</li> </ul>"},{"location":"developer-guide/technologies/external-apis/#books-prints","title":"Books / Prints","text":"<ul> <li>Cewe Stiftung &amp; Co. KGaA - Europe's leading online printing experts</li> </ul>"},{"location":"developer-guide/technologies/external-apis/#tools","title":"Tools","text":"<ul> <li>KrakenD - API Gateway that sits between clients and services to offer tailored endpoints</li> <li>Photobak - Back up your content from Google Photos</li> </ul>"},{"location":"developer-guide/technologies/golang/","title":"Golang","text":"<p>We have chosen Go because of its simplicity and performance. On top, it enables us to build a single binary for distribution.</p>"},{"location":"developer-guide/technologies/golang/#learning","title":"Learning","text":"<ul> <li>https://golang.org/doc/code.html - how to write Go code</li> <li>https://golang.org/doc/effective_go.html -  gives tips for writing clear, idiomatic Go code</li> <li>https://golangbridge.org/ - Go workshops for underrepresented communities</li> <li>https://www.sohamkamani.com/blog/golang/2018-06-20-golang-factory-patterns/ - there are many different ways in which you can use the factory pattern to make your code cleaner and more concise</li> <li>https://www.alexedwards.net/blog/form-validation-and-processing - Form Validation and Processing in Go</li> </ul>"},{"location":"developer-guide/technologies/golang/#testing","title":"Testing","text":"<ul> <li>https://medium.com/@povilasve/go-advanced-tips-tricks-a872503ac859 - Go advanced testing tips &amp; tricks</li> <li>Golang version of Pact - contract testing framework for HTTP APIs and non-HTTP asynchronous messaging systems</li> <li>Integration Tests in Go - blog post </li> <li>Parallelize your table-driven tests - blog post</li> </ul>"},{"location":"developer-guide/technologies/golang/#useful-libraries-and-frameworks","title":"Useful libraries and frameworks","text":"<ul> <li>spf13/afero - a filesystem abstraction library</li> <li>gin-gonic/gin - HTTP web framework</li> <li>gobuffalo/pop - a database abstraction layer</li> <li>jinzhu/gorm - another database abstraction layer</li> <li>appleboy/gorush - a push notification micro server for Gin</li> <li>cavaliercoder/grab - a download manager package</li> <li>russross/blackfriday - a library for rendering Markdown</li> <li>sirupsen/logrus - structured, pluggable logging for Go</li> <li>alecthomas/participle - a dead simple parser package for Go</li> <li>tidwall/tile38 - a geospatial database and realtime geofencing server</li> <li>melihmucuk/geocache - an in-memory cache that is suitable for geolocation based applications</li> <li>aaronland/go-slippy-tiles - a proxy for map tiles</li> <li>paulmach/osm - a general purpose library for reading, writing and working with OpenStreetMap data</li> <li>@minio - Object Storage for AI</li> <li>http://www.gorillatoolkit.org/pkg/schema - fills a struct with form values</li> </ul>"},{"location":"developer-guide/technologies/golang/#jobs","title":"Jobs","text":"<ul> <li>SoundCloud is looking for backend developers (Berlin, permanent, full-time)</li> </ul>"},{"location":"developer-guide/technologies/tensorflow/","title":"TensorFlow","text":""},{"location":"developer-guide/technologies/tensorflow/#using-tensorflow-with-go","title":"Using TensorFlow with Go","text":"<p>For an introduction please read Understanding Tensorflow using Go.</p> <p>The TensorFlow API for Go is well suited to loading existing models and executing them within a Go application. It requires the TensorFlow C library to be installed. A full TensorFlow installation is not needed.</p> <p>It is not possible to statically link against the C library, but the issue is known and there might be a fix later this year.</p>"},{"location":"developer-guide/technologies/tensorflow/#vision","title":"Vision","text":"<p>Our long-term goal is to become an open platform for machine learning research based on real-world photo collections.</p>"},{"location":"developer-guide/technologies/tensorflow/#external-resources","title":"External Resources","text":"<ul> <li>https://tfhub.dev/ - TensorFlow Hub is a library for reusable machine learning modules</li> <li>https://www.tensorflow.org/install/lang_c - TensorFlow for C</li> <li>http://www.asimovinstitute.org/neural-network-zoo/ - types of neural networks explained</li> <li>http://playground.tensorflow.org/ - Experiment with neural networks in your browser</li> <li>http://jupyter.org/ - open-source web application for creating and sharing documents that contain live code</li> <li>https://developers.google.com/machine-learning/crash-course/ - Machine Learning Crash Course with TensorFlow APIs</li> <li>https://medium.com/implodinggradients/tensorflow-or-keras-which-one-should-i-learn-5dd7fa3f9ca0</li> <li>https://medium.com/analytics-vidhya/deploy-your-first-deep-learning-model-on-kubernetes-with-python-keras-flask-and-docker-575dc07d9e76 - Deploy Your First Deep Learning Model On Kubernetes With Python, Keras, Flask, and Docker</li> <li>https://medium.com/mlreview/getting-inception-architectures-to-work-with-style-transfer-767d53475bf8 - Getting Inception Architectures to Work with Style Transfer</li> <li>jdeng/goface - Face Detector based on MTCNN, tensorflow and golang</li> <li>https://www.tensorflow.org/tutorials/representation/word2vec - Vector Representations of Words (for searching/tagging)</li> <li>chtorr/go-tensorflow-realtime-object-detection - Real-time object detection with Go, Tensorflow, and OpenCV</li> <li>https://ai.googleblog.com/2018/07/accelerated-training-and-inference-with.html - Accelerated Training and Inference with the Tensorflow Object Detection API</li> <li>NanoNets/object-detection-sample-golang - NanoNets Object Detection API Example for Golang</li> <li>https://hub.packtpub.com/object-detection-go-tensorflow/ - Implementing Object detection with Go using TensorFlow</li> </ul>"},{"location":"developer-guide/technologies/yaml/","title":"Introduction to YAML","text":"<p>YAML is a human-friendly format that we use for metadata exports and configuration files because of its simplicity and widespread support. The name originally meant Yet Another Markup Language. Common file extensions are <code>.yml</code>and <code>.yaml</code>.</p> <p>Values are represented in the form <code>key: value</code> with one entry per line:</p> <pre><code>Type: image\nTitle: \"La Tour Eiffel \ud83c\udf08\"\nYear: 2014\n# Key-Value Collection Example:\nDetails:\nNotes: \"Bonjour\\nla France!\" Keywords: 'paris, france' # Comment\n</code></pre>"},{"location":"developer-guide/technologies/yaml/#basic-rules","title":"Basic Rules","text":"<ul> <li>Keys are case-sensitive</li> <li>Related values start at the same indentation level<ul> <li>Tabs are not allowed for indentation</li> <li>We recommend using 2 spaces, but any number will work as long as it is consistent</li> </ul> </li> <li>You can generally use all Unicode characters and Emojis<ul> <li>To avoid ambiguity, it is recommended to enclose text strings in single <code>'</code> or double quotes <code>\"</code>, especially if they contain a colon <code>:</code></li> <li>The difference between single and double quotes is that double quotes support escape sequences like <code>\\t</code> for a tab or <code>\\n</code> for a new line</li> </ul> </li> <li>Comments begin with the <code>#</code> sign, can start anywhere on a line, and continue until the end of the line</li> </ul>"},{"location":"developer-guide/technologies/yaml/#multiple-values","title":"Multiple Values","text":"<p>List are lines that start at the same indentation level and begin with a dash and a space as shown in the example below. They are commonly used to define service dependencies, exposed network ports, or folders shared between host and container in <code>docker-compose.yml</code> files:</p> <pre><code>services:\nphotoprism:\ndepends_on:\n- mariadb\n- nextcloud\nports:\n# \"host:container\"\n- \"2342:2342\"\nvolumes:\n# \"/host/folder:/container/folder\"\n- \"/photos:/photoprism/originals\"\n</code></pre>"},{"location":"developer-guide/technologies/yaml/#key-value-collections","title":"Key-Value Collections","text":"<p>Collections of key-value pairs are commonly used for photo metadata details as shown in the first example and to define environment variables in <code>docker-compose.yml</code> files:</p> <pre><code>services:\nmariadb:\nenvironment:\nMARIADB_AUTO_UPGRADE: \"1\"\nMARIADB_INITDB_SKIP_TZINFO: \"1\"\nMARIADB_ROOT_PASSWORD: \"Y(&amp;^UIk34\"\nMARIADB_DATABASE: photoprism\nMARIADB_USER: photoprism\nMARIADB_PASSWORD: insecure\n</code></pre>"},{"location":"developer-guide/ui/browsers/","title":"Browsers","text":"<p>We should at least support the latest Firefox and Chrome on Linux, OS X and Windows. Ideally also Safari (OS X) and Explorer/Edge (Windows). </p>"},{"location":"developer-guide/ui/browsers/#testing","title":"Testing","text":"<ul> <li>BrowserStack is free for open-source projects</li> </ul>"},{"location":"developer-guide/ui/components/","title":"Components","text":"<p>Our frontend code is structured into reusable VueJS components. So far, it was clear enough for developers to add features and send pull requests, so it's probably not necessary to document individual components in our Developer Guide. Let us know via email or chat when you have any questions!</p> <p>Frontend contains general information about the front-end libraries we use and how to trigger a build.</p>"},{"location":"developer-guide/ui/design/","title":"Design & Colors","text":"<p>We strive for a user interface that is clutter-free, well-organized, and doesn't behave in unexpected ways. It should work across a wide range of devices and be easy to use for everyone.</p>"},{"location":"developer-guide/ui/design/#theme-colors","title":"Theme Colors","text":"<p>The colors we use should be consistent and functional, for example, provide sufficient contrast. For the included themes, the preferred primary colors are violet and cyan, but other colors can be used as well.</p> <p>To avoid distorting the visual impression of photos and videos, large background areas should generally be neutral or just slightly saturated.</p>"},{"location":"developer-guide/ui/design/#context-menu","title":"Context Menu","text":"<p>The context menu at the bottom right should use a color spectrum for the individual actions to reflect the spectral colors of a prism:</p> <p></p>"},{"location":"developer-guide/ui/design/#icon-fonts","title":"Icon Fonts","text":"<p>We stick to Google's Material icons and use other icons only when absolutely necessary:</p> <ul> <li>https://material.io/resources/icons/</li> <li>https://jossef.github.io/material-design-icons-iconfont/</li> </ul>"},{"location":"developer-guide/ui/design/#inspirational-quotes","title":"Inspirational Quotes","text":"<p>Design is a funny word. Some people think design means how it looks. But of course, if you dig deeper, it's really how it works.\u2014 Steve Jobs</p> <p>Choice is the enemy of productivity. Put another way, if your solution does everything, and has no opinions about anything, then it solves nothing.\u2014 Asim Aslam</p> <p>Any fool can make something complicated. It takes a genius to make it simple.\u2014 Woody Guthrie</p>"},{"location":"developer-guide/ui/design/#external-resources","title":"External Resources","text":""},{"location":"developer-guide/ui/design/#color-schemes","title":"Color Schemes","text":"<ul> <li>https://www.nordtheme.com/#palettes-modularity</li> <li>Scheme Color Finder<ul> <li>https://www.schemecolor.com/?s=colorful</li> <li>https://www.schemecolor.com/?s=google</li> <li>https://www.schemecolor.com/memories-of-the-garden.php</li> <li>https://www.schemecolor.com/double-disclosure.php</li> <li>https://www.schemecolor.com/true-lovers-color-scheme.php</li> <li>https://www.schemecolor.com/sunset-painting.php</li> <li>https://www.schemecolor.com/happy-with-self.php</li> </ul> </li> </ul>"},{"location":"developer-guide/ui/design/#web-color-tools","title":"Web Color Tools","text":"<ul> <li>Adobe Color Wheel</li> <li>Artyclick Color Name Finder</li> <li>Coolors Color Palette Generator</li> <li>FFFuel HEX, RGB &amp; HSL Color Picker</li> <li>iColorpalette</li> </ul>"},{"location":"developer-guide/ui/design/#related-content","title":"Related Content","text":"<ul> <li>Screenshots - development of our user interface in time lapse \u23f1</li> <li>The 7 pillars of design - slides by Raffaella Isidori (Codemotion Berlin 2018)</li> </ul>"},{"location":"developer-guide/ui/infinite-scrolling/","title":"Infinite Scrolling","text":"<p>There are two problems to solve when allowing the user to scroll through an \"infinite\" number of elements/photos:</p> <ol> <li>You can't load an infinite amount of data.</li> <li>You can't render an infinite amount of elements.</li> </ol> <p>The solution to both is to not provide an infinite amount of elements, but instead create the illusion of an infinite amount of elements by only loading and displaying what the user would actually currently be able to see.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#loading-data-progressively","title":"Loading Data - Progressively","text":"<p>The problem of infinite data is solved by loading the actually required elements progressively, in fixed amounts (batches).</p> <ul> <li>Load a batch of elements. If they don't fill the screen, load the next batch. repeat until the screen is filled.</li> <li>When the user is getting close to the end of the currently loaded elements, load the next batch of data.</li> </ul> <p>In an ideal world the \"next batch\" is always loaded fast and early enough so that the user doesn't even notice that it wasn't there from the beginning. This creates the illusion of having an infinite amount of data available. There are two parameters to consider:</p> <ol> <li>When to start loading the next batch?<ul> <li>loading to early results in to much unnecessary data getting laoded.</li> <li>loading to late results in the user bumping into the end of the list of elements, because the next batch hasn't finished loading yet.</li> </ul> </li> <li>How large are the batches?<ul> <li>to small batches can slow down the overall loading time by resulting in overhad because of too many requests.</li> <li>to large batches need to long to load for a single batch, so that the data may not yet be ready when it is needed.</li> </ul> </li> </ol> <p>The best values for these parameters vary vastly depending on the current network speed, number of elements that fit on the screen and the speed the user is scrolling. Luckily these values don't need to be perfect, just good enough.</p> <p>We currently use vue-infinite-scroll to detect when the user is about to reacht the end of the currently loaded list, so we can load the next batch. The batchsize depends on the current view and is currently somewhere in the range of 50 - 300 elements.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#rendering-elements-virtualized","title":"Rendering elements - Virtualized","text":"<p>The further a user scrolls, the more batches of elements get loaded and displayed. The more elements get displayed, the slower the browser gets and the more memory it needs. This means, if we were to just render all loaded elements, the limit how far you can scroll would be entirely determined by the available cpu and memory of the client.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#regular-virtualization","title":"Regular virtualization","text":"<p>This problem is usually solved by virtualization:</p> <ol> <li>determine the scrollposition and screensize of the client.</li> <li>calculate what elements would be on the screen.</li> <li>render only those elements.</li> </ol> <p>The problem with this regular virtualization is that it requires the elements to be positioned absolutely and may prescribe how they are structured. Implementing it would therefore imply a potentialy larger rewrite and less freedom when designing the elements.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#pseudo-virtualization-with-placeholders","title":"Pseudo-Virtualization with placeholders","text":"<p>Using the IntersectionObserver API we can efficiently determine wether something is currently visible or not. We can use this information to replace all elements that are currently not in the visible area with simple placeholders of the same size. This drastically reduces the load on the browser, because these (often single-domnode) placeholder-elements require a LOT less ressources.</p> <p>This has the huge benefit that it doesn't restrict how components are structured or positioned, while also being easier to implement. There are however two caveats:</p> <ol> <li>We are still rendering something for every single loaded elements<ul> <li>The load on the browser therefore technically still increases (slightly) the more elements are loaded</li> <li>This however reduces the load so much, that this slight increase per element barely matters at all</li> </ul> </li> <li>The placeholders size should be as close to the originals size as possible.<ul> <li>If the sizes don't match, scrolling might become a little janky.</li> </ul> </li> </ol> <p>This type of virtualization more than fast enough, and because we think the benefits outweigh the downsides, we decided go this route.</p>"},{"location":"developer-guide/ui/infinite-scrolling/#implementation-details","title":"Implementation details","text":"<p>The setup for a component that uses the placeholder-virtualization is as follows:</p> <ol> <li>Add a ref to all the elements whose visibilty needs to be tracked</li> <li>create a single <code>IntersectionObserver</code> in the <code>beforeCreate</code> that calls a (yet to be defined) <code>this.visibilitiesChanged</code></li> <li>add a watcher that is called when the list of elements changes. call observe on all refs from step 1</li> <li>define a function that takes an IntersectionObserverEntry and returns the index of the corresponding target (for example by adding a <code>data-index</code>-attribute to the observed element)</li> <li>add <code>firstVisibleElementIndex: 0</code>, <code>lastVisibleElementIndex: 0</code> and <code>visibleElementIndices: new Set()</code> to the components state</li> <li>conditionally render elements whose index is between <code>firstVisibleElementIndex</code> and <code>lastVisibleElementIndex</code>. Render placeholders for all other elements</li> <li>define <code>visibilitiesChanged</code>. Let it call <code>virtualizationTools.updateVisibleElementIndices</code>. Use the result as new <code>this.firstVisibleElementIndex</code> and <code>this.lastVisibileElementIndex</code></li> </ol> <p>We use the <code>visibleElementIndices</code>-Set to keep track of elements that became visible or invisible. We also use <code>firstVisibleElementIndex</code> and <code>lastVisibleElementIndex</code> for two reasons:</p> <ol> <li>Vue doesn't react to Set-changes (because its identity never changes), so manipulating it doesn't cause a rerender</li> <li>When scrolling very fast, the set may for a very brief moment contain holes (for example it has the indices <code>1, 2, 4, 5, 6</code>). By implying that everything between the smallest and largest index is visible, these short-lived holes don't have any negative effect (index 3 would be rendered anyway)</li> </ol> <p>As a bonus, you can make the IntersectionObserver only observe for example every 5th element to speed up calculation of intersections. If you do so, you should add for Example -4 to <code>firstVisibleElementIndex</code> and +4 to <code>lastVisibleElementIndex</code></p>"},{"location":"developer-guide/ui/infinite-scrolling/#render-performance","title":"Render Performance","text":"<p>When working with a huge amount of elements, render performance of these elements is critically important. The better the render performance, the more it actually feels like scrolling through an infinite list. It allowes the user to scroll faster without having to see placeholders and makes the application feel way snappier, especially on lower-end devices.</p> <p>Here are some tips on how to gain performance. They are ordered from most to least important and only apply to things that are rendered for every element:</p> <ul> <li>Prefer regular HTML-Elements over vue-components<ul> <li>Rendering vue components executes a lot of JavaScript, blocking everything else. Rendering regular HTML elements is way faster</li> <li>Example: use <code>&lt;button&gt;</code> instead of <code>&lt;v-btn&gt;</code></li> </ul> </li> <li>Prefer conditional rendering over hiding/showing elements via css<ul> <li>showing/hiding via css may prevent rerenders, but it increases the amount of rendered elements</li> <li>The less elements (and therefore domnodes) are rendered the better</li> </ul> </li> <li>Use less elements<ul> <li>Why use a <code>&lt;v-card&gt;&lt;v-img&gt;&lt;/v-img&gt;&lt;/v-card&gt;</code> when performance is important and a <code>&lt;div&gt;&lt;/div&gt;</code> with some css works too?</li> </ul> </li> </ul>"},{"location":"developer-guide/ui/infinite-scrolling/#memoization","title":"Memoization","text":"<p>Memoization is a technique to speed up function calls by caching results. This can have a noticable impact on render-performance, especially when function results are used for placeholders</p> <p>Example: The texts on the cards in the cards-view. There are function-calls like <code>photo.locationInfo()</code> and <code>photo.getDateString()</code>. The resulting values rarely change, but are calculated again and again on every render, resulting in ~280k calls per function when scrolling through ~2k pictures.</p> <p>We use <code>memoize-one</code> for much called, non-trivial functions whose parameters rarely change. The funtions in the Photo model are a prime example for that.</p> <p>For this to work the memoized function must be pure, which means its result must not depend on outside factors, but only on its parameters. Calling the same function twice with the same parameters must always return the same result.</p> <p>If you want to memoize a function that is not pure you can still do so by moving all its logic into a new, memoized, pure function and having the old funtion just call the memoized one, providing the required parameters. Example: <pre><code>// ------------------ before ------------------\nisPlayable() {\nif (this.Type === MediaAnimated) {\nreturn true;\n} else if (!this.Files) {\nreturn false;\n}\n\nreturn this.Files.some((f) =&gt; f.Video);\n}\n</code></pre> <pre><code>// ------------------ after ------------------\nisPlayable() {\nreturn this.generateIsPlayable(this.Type, this.Files);\n}\n\ngenerateIsPlayable = memoizeOne((type, files) =&gt; {\nif (type === MediaAnimated) {\nreturn true;\n} else if (!files) {\nreturn false;\n}\n\nreturn files.some((f) =&gt; f.Video);\n})\n</code></pre></p>"},{"location":"developer-guide/ui/introduction/","title":"Introduction","text":"<p>Open a terminal and type <code>photoprism start</code> to start the built-in server. It will listen on localhost:2342 by default, see docker-compose.yml and Configuration.</p>"},{"location":"developer-guide/ui/introduction/#frameworks","title":"Frameworks","text":"<p>Vuetify is a powerful open-source Material Design UI component framework for building modern single-page applications.</p> <p>It is based on VueJS, a JavaScript library that combines the best ideas from AngularJS (Google) and React (Facebook); development is community driven and the API fairly stable.</p> <p>Vuetify and VueJS are initialized in frontend/src/app.js. Webpack is used as a module loader / bundler. It creates single, optimized JS and CSS files in the server assets public build directory from the original source code. You can find the build configuration in <code>frontend/webpack.config.js</code>.</p> <p>For our docs and landing pages, we may use https://materializecss.com/ as a lightweight alternative to Vuetify.</p>"},{"location":"developer-guide/ui/introduction/#components","title":"Components","text":"<p>Components are reusable user-interface widgets. UI Components contains a list of custom components. Standard components like buttons or forms are well documented on vuetifyjs.com.</p>"},{"location":"developer-guide/ui/introduction/#dependencies","title":"Dependencies","text":"<p>The full list of dependencies can be found in <code>frontend/package.json</code>. You need to run <code>npm install</code> in the frontend directory to install them (automatically happens during installation, see <code>Makefile</code>). Run <code>npm install -P [package name]</code> to add a new package (library or framework).</p>"},{"location":"developer-guide/ui/introduction/#building","title":"Building","text":"<p>A build can be triggered by running <code>npm run watch</code> (watches for changes and re-builds when needed) or <code>npm run build</code> (single build) in the frontend directory. NPM is the default package manager that comes with NodeJS, a JavaScript run-time environment that executes JavaScript code outside of a browser.</p>"},{"location":"developer-guide/ui/introduction/#external-resources","title":"External Resources","text":"<ul> <li>https://web.dev/progressive-web-apps/</li> <li>vuejs-templates/pwa - a progressive web app template for VueJS</li> <li>https://hackernoon.com/a-progressive-web-app-in-vue-tutorial-part-1-the-vue-app-f9231b032a0b</li> <li>https://medium.com/the-web-tub/creating-your-first-vue-js-pwa-project-22f7c552fb34</li> <li>https://developers.google.com/web/fundamentals/native-hardware/fullscreen/</li> <li>https://webpack.js.org/configuration/optimization/</li> <li>https://photoswipe.com/documentation/responsive-images.html</li> <li>https://seregpie.github.io/VueWordCloud/ - Word cloud for VueJS</li> <li>snorpey/jpg-glitch - JPEG Glitch lib for JS</li> <li>https://stylable.io/ - scopes styles to components so they don\u2019t \u201cleak\u201d and clash with other styles (not sure if this is of any use for us)</li> <li>Building the Google Photos Web UI - Antin Harasymiv on Medium</li> <li>Progressive Image Grid - arrange images in a responsive, progressive-loading grid managed in JavaScript, see #85</li> </ul>"},{"location":"developer-guide/ui/maps/","title":"Rendering Interactive Maps in the UI","text":"<p>PhotoPrism includes four high-resolution world maps that allow you to browse photos by location. Visit try.photoprism.app/library/places to try them on our demo.</p> <p></p> <p>The API keys required to use these maps are unfortunately not free for us due to the number of users we have, see FAQ.</p>"},{"location":"developer-guide/ui/maps/#mapboxmaplibre-gl-js","title":"Mapbox/MapLibre GL JS","text":"<p>Because Mapbox GL JS is no longer open-source, we now sponsor and use MapLibre GL JS for rendering maps in the UI. MapLibre GL is a fork from the last Mapbox GL version available under a permissive BSD license.</p> <p>Statement by former Mapbox engineer Tom MacWright:</p> <p>OSS, we hoped, was about enabling people and unlocking people\u2019s ability to collaborate. It turns out that in 2020, it\u2019s mostly helping companies and getting nothing in return. That\u2019s not a dynamic you can build a sustainable business on.</p>"},{"location":"developer-guide/ui/screenshots/","title":"UI Development in Fast Motion \u23f1","text":""},{"location":"developer-guide/ui/screenshots/#august-15-2018","title":"August 15 , 2018","text":"<p>The first prototype was based on Bootstrap 4.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-6-2018","title":"September 6, 2018","text":"<p>We switched to the Vuetify component framework, which comes complete with everything modern Web applications need.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-7-2018","title":"September 7, 2018","text":"<p>Navigation was extended.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-7-2018_1","title":"September 7, 2018","text":"<p>We started to experiment with the search form.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-8-2018","title":"September 8, 2018","text":"<p>Search dropdowns got populated with options.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-10-2018","title":"September 10, 2018","text":"<p>New logo and speed-dial action button.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-11-2018","title":"September 11, 2018","text":""},{"location":"developer-guide/ui/screenshots/#september-19-2018","title":"September 19, 2018","text":"<p>Pastel colored buttons and photo selection.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#september-26-2018","title":"September 26, 2018","text":"<p>The detail view.</p> <p></p>"},{"location":"developer-guide/ui/screenshots/#july-3-2019","title":"July 3, 2019","text":"<p>Improved UI with flat look, photo upload and powerful filters as well as new pages for searching places and labels.</p> <p></p> <p></p> <p></p>"},{"location":"developer-guide/ui/screenshots/#january-24-2020","title":"January 24, 2020","text":""},{"location":"developer-guide/ui/screenshots/#january-26-2020","title":"January 26, 2020","text":""},{"location":"developer-guide/ui/screenshots/#june-24-2020","title":"June 24, 2020","text":""},{"location":"developer-guide/ui/screenshots/#january-21-2021","title":"January 21, 2021","text":""},{"location":"developer-guide/ui/screenshots/#october-18-2021","title":"October 18, 2021","text":""},{"location":"developer-guide/ui/screenshots/#march-2-2022","title":"March 2, 2022","text":""},{"location":"getting-started/","title":"Setup","text":"<p>PhotoPrism can be installed on all operating systems supporting Docker, as well as FreeBSD, Raspberry Pi, and many NAS devices. It is also available in the cloud on PikaPods and DigitalOcean.</p> <p>We recommend running PhotoPrism with Docker Compose when hosting it on a private server. It is available for Mac, Linux, and Windows.</p> <p>Once the initial setup is complete, our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>Our stable version and development preview have been built into a single multi-arch Docker image for 64-bit AMD, Intel, and ARM processors. That means, Raspberry Pi 3 / 4, Apple Silicon, and other ARM64-based devices can pull from the same repository, enjoy the exact same functionality, and can follow the regular installation instructions after going through a short list of requirements. See FAQs for instructions and notes on alternative installation methods.</p>"},{"location":"getting-started/#roadmap","title":"Roadmap","text":"<p>Our vision is to provide the most user- and privacy-friendly solution to keep your pictures organized and accessible. The roadmap shows what tasks are in progress,  what needs testing, and which features are going to be implemented next.</p> <p>We have a zero bug policy and do our best to help users when they need support or have other questions. This comes at a price, as we can't give exact deadlines for new features.</p> <p>Having said that, funding really has the highest impact. So users can do their part and become a member to get their favorite features as soon as possible.</p>"},{"location":"getting-started/#system-requirements","title":"System Requirements","text":"<p>You should host PhotoPrism on a server with at least 2 cores, 3 GB of physical memory,<sup>1</sup> and a 64-bit operating system. Beyond these minimum requirements, the amount of RAM should match the number of CPU cores. Indexing large photo and video collections also benefits greatly from local SSD storage, especially for the database and cache files.</p> <p>If your server has less than 4 GB of swap space or a manual memory/swap limit is set, this can cause unexpected restarts, for example, when the indexer temporarily needs more memory to process large files. High-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p> <p>We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>"},{"location":"getting-started/#databases","title":"Databases","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+.<sup>2</sup> Note that SQLite is generally not a good choice for users who require scalability and high performance, and that support for MySQL 8 has been discontinued due to low demand and missing features.<sup>3</sup></p>"},{"location":"getting-started/#browsers","title":"Browsers","text":"<p>Built as a Progressive Web App (PWA), the web interface works with most modern browsers, and runs best on Chrome, Chromium, Safari, Firefox, and Edge. You can conveniently install it on the home screen of all major operating systems and mobile devices.</p> <p>Not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</p>"},{"location":"getting-started/#https","title":"HTTPS","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy such as Traefik or Caddy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone,  including your provider, hackers, and governments. Backup tools and file sync apps like FolderSync  may refuse to connect as well.</p>"},{"location":"getting-started/#firewall","title":"Firewall","text":"<p>In order to successfully set up your installation and view location details in PhotoPrism, you must allow incoming requests as well as those to our Geocoding API and Docker if you have a firewall installed, and make sure that your Internet connection is working.</p> <p>Configure Firewall \u203a</p>"},{"location":"getting-started/#maps-places","title":"Maps &amp; Places","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.<sup>4</sup></p> <p>Your use of these services is fully covered by us. Depending on your usage, this can save you much more than the cost of a PhotoPrism+ Membership, since other providers generally charge usage-based fees and often don't allow you to cache the data they provide, compromising performance and your privacy with unnecessary requests.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p>"},{"location":"getting-started/#getting-support","title":"Getting Support","text":"<p>If you need help installing our software at home, you are welcome to post your question in GitHub Discussions or ask in our Community Chat. Common problems can be quickly diagnosed and solved using our Troubleshooting Checklists. Silver, Gold, and Platinum members are also welcome to email us for technical support and advice.</p> <p>View Support Options \u203a Compare Memberships \u203a</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Contact us or a community member if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p> <ol> <li> <p>RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory\u00a0\u21a9</p> </li> <li> <p>Our configuration examples are generally based on the current stable MariaDB version to take advantage of performance improvements. This does not mean that older versions are no longer supported and you must upgrade immediately. We recommend not using the <code>:latest</code> tag for the MariaDB Docker image and to upgrade manually by changing the tag once we had a chance to test a new major version.\u00a0\u21a9</p> </li> <li> <p>Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.\u00a0\u21a9</p> </li> <li> <p>Our Compliance FAQ gives answers to the most frequently asked questions about product compliance and scalability.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/config-options/","title":"Config Options","text":"<p>Changing values in a <code>docker-compose.yml</code> file or in the Advanced Settings UI always requires a restart to take effect. Open a terminal, run <code>docker compose stop</code>, and then run <code>docker compose up -d</code> to restart all services.</p>"},{"location":"getting-started/config-options/#authentication","title":"Authentication","text":"<p><code>PHOTOPRISM_AUTH_MODE: public</code> is NOT recommended for instances installed on a server accessible from outside your home network.</p> Environment CLI Flag Default Description PHOTOPRISM_AUTH_MODE --auth-mode password authentication <code>MODE</code> (public, password) PHOTOPRISM_ADMIN_USER --admin-user admin admin login <code>USERNAME</code> PHOTOPRISM_ADMIN_PASSWORD --admin-password initial admin <code>PASSWORD</code> (8-72 characters) PHOTOPRISM_SESSION_MAXAGE --session-maxage 1209600 time in <code>SECONDS</code> until API sessions expire automatically (-1 to disable) PHOTOPRISM_SESSION_TIMEOUT --session-timeout 604800 time in <code>SECONDS</code> until API sessions expire due to inactivity (-1 to disable) PHOTOPRISM_REGISTER_URI --register-uri user registration <code>URI</code> plus PHOTOPRISM_PASSWORD_LENGTH --password-length 8 minimum password <code>LENGTH</code> in characters\u2002plus PHOTOPRISM_PASSWORD_RESET_URI --password-reset-uri forgot password <code>URI</code> plus"},{"location":"getting-started/config-options/#logging","title":"Logging","text":"Environment CLI Flag Default Description PHOTOPRISM_LOG_LEVEL --log-level info log message verbosity <code>LEVEL</code> (trace, debug, info, warning, error, fatal, panic) PHOTOPRISM_DEBUG --debug enable debug mode, show non-essential log messages PHOTOPRISM_TRACE --trace enable trace mode, show all log messages"},{"location":"getting-started/config-options/#storage","title":"Storage","text":"Environment CLI Flag Default Description PHOTOPRISM_CONFIG_PATH --config-path config storage <code>PATH</code>, values in options.yml override CLI flags and environment variables if present PHOTOPRISM_DEFAULTS_YAML --defaults-yaml /etc/photoprism/defaults.yml load config defaults from <code>FILE</code> if exists, does not override CLI flags and environment variables PHOTOPRISM_ORIGINALS_PATH --originals-path storage <code>PATH</code> of your original media files (photos and videos) PHOTOPRISM_ORIGINALS_LIMIT --originals-limit 1000 maximum size of media files in <code>MB</code> (1-100000; -1 to disable) PHOTOPRISM_RESOLUTION_LIMIT --resolution-limit 150 maximum resolution of media files in <code>MEGAPIXELS</code> (1-900; -1 to disable) PHOTOPRISM_USERS_PATH --users-path users relative <code>PATH</code> to create base and upload subdirectories for users PHOTOPRISM_STORAGE_PATH --storage-path writable storage <code>PATH</code> for sidecar, cache, and database files PHOTOPRISM_SIDECAR_PATH --sidecar-path custom relative or absolute sidecar <code>PATH</code> optional PHOTOPRISM_BACKUP_PATH --backup-path custom backup <code>PATH</code> for index backup files\u2002optional PHOTOPRISM_CACHE_PATH --cache-path custom cache <code>PATH</code> for sessions and thumbnail files\u2002optional PHOTOPRISM_IMPORT_PATH --import-path base <code>PATH</code> from which files can be imported to originals\u2002optional PHOTOPRISM_IMPORT_DEST --import-dest relative originals <code>PATH</code> to which the files should be imported by default\u2002optional PHOTOPRISM_ASSETS_PATH --assets-path assets <code>PATH</code> containing static resources like icons, models, and translations PHOTOPRISM_TEMP_PATH --temp-path temporary file <code>PATH</code> optional"},{"location":"getting-started/config-options/#index-workers","title":"Index Workers","text":"Environment CLI Flag Default Description PHOTOPRISM_WORKERS --workers 4 maximum <code>NUMBER</code> of indexing workers, default depends on the number of physical cores PHOTOPRISM_WAKEUP_INTERVAL --wakeup-interval 15m0s <code>DURATION</code> between worker runs required for face recognition and index maintenance (1-86400s) PHOTOPRISM_AUTO_INDEX --auto-index 300 WebDAV auto index safety delay in <code>SECONDS</code> (-1 to disable) PHOTOPRISM_AUTO_IMPORT --auto-import 180 WebDAV auto import safety delay in <code>SECONDS</code> (-1 to disable)"},{"location":"getting-started/config-options/#feature-flags","title":"Feature Flags","text":"Environment CLI Flag Default Description PHOTOPRISM_READONLY --read-only disable import, upload, delete, and all other operations that require write permissions PHOTOPRISM_EXPERIMENTAL --experimental enable experimental features PHOTOPRISM_DISABLE_SETTINGS --disable-settings disable settings UI and API PHOTOPRISM_DISABLE_RESTART --disable-restart disable restarting the server from the user interface PHOTOPRISM_DISABLE_BACKUPS --disable-backups disable backing up albums and photo metadata to YAML files PHOTOPRISM_DISABLE_WEBDAV --disable-webdav disable built-in WebDAV server PHOTOPRISM_DISABLE_PLACES --disable-places disable reverse geocoding and maps PHOTOPRISM_DISABLE_TENSORFLOW --disable-tensorflow disable all features depending on TensorFlow PHOTOPRISM_DISABLE_FACES --disable-faces disable face detection and recognition (requires TensorFlow) PHOTOPRISM_DISABLE_CLASSIFICATION --disable-classification disable image classification (requires TensorFlow) PHOTOPRISM_DISABLE_SIPS --disable-sips disable conversion of media files with Sips\u2002macOS only PHOTOPRISM_DISABLE_FFMPEG --disable-ffmpeg disable video transcoding and thumbnail extraction with FFmpeg PHOTOPRISM_DISABLE_EXIFTOOL --disable-exiftool disable creating JSON metadata sidecar files with ExifTool PHOTOPRISM_DISABLE_DARKTABLE --disable-darktable disable conversion of RAW images with Darktable PHOTOPRISM_DISABLE_RAWTHERAPEE --disable-rawtherapee disable conversion of RAW images with RawTherapee PHOTOPRISM_DISABLE_IMAGEMAGICK --disable-imagemagick disable conversion of image files with ImageMagick PHOTOPRISM_DISABLE_HEIFCONVERT --disable-heifconvert disable conversion of HEIC images with libheif PHOTOPRISM_DISABLE_RSVGCONVERT --disable-rsvgconvert disable conversion of SVG graphics with librsvg\u2002plus PHOTOPRISM_DISABLE_VECTORS --disable-vectors disable vector graphics support\u2002plus PHOTOPRISM_DISABLE_JPEGXL --disable-jpegxl disable JPEG XL file format support PHOTOPRISM_DISABLE_RAW --disable-raw disable indexing and conversion of RAW images PHOTOPRISM_RAW_PRESETS --raw-presets enables applying user presets when converting RAW images (reduces performance) PHOTOPRISM_EXIF_BRUTEFORCE --exif-bruteforce always perform a brute-force search if no Exif headers were found PHOTOPRISM_DETECT_NSFW --detect-nsfw automatically flag photos as private that MAY be offensive (requires TensorFlow) PHOTOPRISM_UPLOAD_NSFW --upload-nsfw allow uploads that MAY be offensive (no effect without TensorFlow)"},{"location":"getting-started/config-options/#customization","title":"Customization","text":"Environment CLI Flag Default Description PHOTOPRISM_DEFAULT_LOCALE --default-locale en standard user interface language <code>CODE</code> PHOTOPRISM_DEFAULT_THEME --default-theme standard user interface theme <code>NAME</code> PHOTOPRISM_APP_NAME --app-name progressive web app <code>NAME</code> when installed on a device PHOTOPRISM_APP_MODE --app-mode standalone progressive web app <code>MODE</code> (fullscreen, standalone, minimal-ui, browser) PHOTOPRISM_APP_ICON --app-icon home screen <code>ICON</code> (logo, app, crisp, mint, bold, square) PHOTOPRISM_APP_COLOR --app-color #000000 splash screen <code>COLOR</code> code PHOTOPRISM_LEGAL_INFO --legal-info legal information <code>TEXT</code>, displayed in the page footer PHOTOPRISM_LEGAL_URL --legal-url legal information <code>URL</code> PHOTOPRISM_WALLPAPER_URI --wallpaper-uri login screen background image <code>URI</code>"},{"location":"getting-started/config-options/#site-information","title":"Site Information","text":"Environment CLI Flag Default Description PHOTOPRISM_CDN_URL --cdn-url content delivery network <code>URL</code> PHOTOPRISM_CDN_VIDEO --cdn-video stream videos over the specified CDN PHOTOPRISM_SITE_URL --site-url http://localhost:2342/ public site <code>URL</code> PHOTOPRISM_SITE_AUTHOR --site-author site <code>OWNER</code>, copyright, or artist PHOTOPRISM_SITE_TITLE --site-title site <code>TITLE</code> PHOTOPRISM_SITE_CAPTION --site-caption AI-Powered Photos App site <code>CAPTION</code> PHOTOPRISM_SITE_DESCRIPTION --site-description site <code>DESCRIPTION</code> optional PHOTOPRISM_SITE_PREVIEW --site-preview sharing preview image <code>URL</code>"},{"location":"getting-started/config-options/#proxy-servers","title":"Proxy Servers","text":"Environment CLI Flag Default Description PHOTOPRISM_HTTPS_PROXY --https-proxy proxy server <code>URL</code> to be used for outgoing connections\u2002optional PHOTOPRISM_HTTPS_PROXY_INSECURE --https-proxy-insecure ignore invalid HTTPS certificates when using a proxy PHOTOPRISM_TRUSTED_PROXY --trusted-proxy 172.16.0.0/12 <code>CIDR</code> ranges or IPv4/v6 addresses from which reverse proxy headers can be trusted, separated by commas PHOTOPRISM_PROXY_PROTO_HEADER --proxy-proto-header X-Forwarded-Proto proxy protocol header <code>NAME</code> PHOTOPRISM_PROXY_PROTO_HTTPS --proxy-proto-https https forwarded HTTPS protocol <code>NAME</code>"},{"location":"getting-started/config-options/#web-server","title":"Web Server","text":"Environment CLI Flag Default Description PHOTOPRISM_DISABLE_TLS --disable-tls disable HTTPS/TLS even if the site URL starts with https:// and a certificate is available PHOTOPRISM_DEFAULT_TLS --default-tls default to a self-signed HTTPS/TLS certificate if no other certificate is available PHOTOPRISM_TLS_CERT --tls-cert public HTTPS certificate <code>FILE</code> (.crt) PHOTOPRISM_TLS_KEY --tls-key private HTTPS key <code>FILE</code> (.key) PHOTOPRISM_DISABLE_STS --disable-sts disable HTTP Strict-Transport-Security (STS) header PHOTOPRISM_STS_SECONDS --sts-seconds 31536000 <code>TIME</code> for the browser to remember that the site is to be accessed only via HTTPS (0 to disable)\u2002plus PHOTOPRISM_STS_SUBDOMAINS --sts-subdomains rule applies to all subdomains as well\u2002plus PHOTOPRISM_STS_PRELOAD --sts-preload submit to Google's HSTS preload service\u2002plus PHOTOPRISM_LOGIN_LIMIT --login-limit 10 maximum number of consecutive failed LOGIN <code>ATTEMPTS</code> from a single IP\u2002plus PHOTOPRISM_LOGIN_INTERVAL --login-interval 1m0s average <code>DURATION</code> between failed LOGIN attempts from a single IP (0-86400s)\u2002plus PHOTOPRISM_IPS_LIMIT --ips-limit 3 maximum number of malicious request <code>ATTEMPTS</code> before a client IP is blocked (-1 to disable)\u2002plus PHOTOPRISM_IPS_INTERVAL --ips-interval 1h0m0s average <code>DURATION</code> between malicious request attempts from a single IP (0-86400s)\u2002plus PHOTOPRISM_HTTP_CSP --http-csp HTTP Content-Security-Policy (CSP) <code>HEADER</code> plus PHOTOPRISM_HTTP_CTO --http-cto nosniff HTTP X-Content-Type-Options <code>HEADER</code> plus PHOTOPRISM_HTTP_COOP --http-coop same-origin HTTP Cross-Origin-Opener-Policy (COOP) <code>HEADER</code> plus PHOTOPRISM_HTTP_REFERRER_POLICY --http-referrer-policy same-origin HTTP Referrer-Policy <code>HEADER</code> plus PHOTOPRISM_HTTP_FRAME_OPTIONS --http-frame-options DENY HTTP X-Frame-Options <code>HEADER</code> plus PHOTOPRISM_HTTP_XSS_PROTECTION --http-xss-protection 1; mode=block HTTP X-XSS-Protection <code>HEADER</code> plus PHOTOPRISM_HTTP_MODE --http-mode Web server <code>MODE</code> (debug, release, test) PHOTOPRISM_HTTP_COMPRESSION --http-compression Web server compression <code>METHOD</code> (gzip, none) PHOTOPRISM_HTTP_CACHE_MAXAGE --http-cache-maxage 2592000 time in <code>SECONDS</code> until cached content expires PHOTOPRISM_HTTP_CACHE_PUBLIC --http-cache-public allow static content to be cached by a CDN or caching proxy PHOTOPRISM_HTTP_HOST --http-host Web server <code>IP</code> address PHOTOPRISM_HTTP_PORT --http-port 2342 Web server port <code>NUMBER</code> PHOTOPRISM_HTTP_HOSTNAME --http-hostname serve requests for this <code>HOSTNAME</code> only\u2002plus"},{"location":"getting-started/config-options/#database-connection","title":"Database Connection","text":"Environment CLI Flag Default Description PHOTOPRISM_DATABASE_DRIVER --database-driver sqlite database <code>DRIVER</code> (sqlite, mysql) PHOTOPRISM_DATABASE_DSN --database-dsn database connection <code>DSN</code> (sqlite file, optional for mysql) PHOTOPRISM_DATABASE_NAME --database-name photoprism database schema <code>NAME</code> PHOTOPRISM_DATABASE_SERVER --database-server database <code>HOST</code> incl. port e.g. \"mariadb:3306\" (or socket path) PHOTOPRISM_DATABASE_USER --database-user photoprism database user <code>NAME</code> PHOTOPRISM_DATABASE_PASSWORD --database-password database user <code>PASSWORD</code> PHOTOPRISM_DATABASE_CONNS --database-conns 0 maximum <code>NUMBER</code> of open database connections PHOTOPRISM_DATABASE_CONNS_IDLE --database-conns-idle 0 maximum <code>NUMBER</code> of idle database connections"},{"location":"getting-started/config-options/#file-converters","title":"File Converters","text":"Environment CLI Flag Default Description PHOTOPRISM_SIPS_BIN --sips-bin sips Sips <code>COMMAND</code> for media file conversion\u2002macOS only PHOTOPRISM_SIPS_BLACKLIST --sips-blacklist avif,avifs do not use Sips to convert files with these <code>EXTENSIONS</code> macOS only PHOTOPRISM_FFMPEG_BIN --ffmpeg-bin ffmpeg FFmpeg <code>COMMAND</code> for video transcoding and thumbnail extraction PHOTOPRISM_FFMPEG_ENCODER --ffmpeg-encoder libx264 FFmpeg AVC encoder <code>NAME</code> PHOTOPRISM_FFMPEG_SIZE --ffmpeg-size 3840 maximum video size in <code>PIXELS</code> (720-7680) PHOTOPRISM_FFMPEG_BITRATE --ffmpeg-bitrate 50 maximum video <code>BITRATE</code> in Mbit/s  PHOTOPRISM_FFMPEG_MAP_VIDEO --ffmpeg-map-video <code>0:v:0</code> video <code>STREAMS</code> that should be transcoded PHOTOPRISM_FFMPEG_MAP_AUDIO --ffmpeg-map-audio <code>0:a:0?</code> audio <code>STREAMS</code> that should be transcoded PHOTOPRISM_EXIFTOOL_BIN --exiftool-bin exiftool ExifTool <code>COMMAND</code> for extracting metadata PHOTOPRISM_DARKTABLE_BIN --darktable-bin darktable-cli Darktable CLI <code>COMMAND</code> for RAW to JPEG conversion PHOTOPRISM_DARKTABLE_BLACKLIST --darktable-blacklist do not use Darktable to convert files with these <code>EXTENSIONS</code> PHOTOPRISM_DARKTABLE_CACHE_PATH --darktable-cache-path custom Darktable cache <code>PATH</code> PHOTOPRISM_DARKTABLE_CONFIG_PATH --darktable-config-path custom Darktable config <code>PATH</code> PHOTOPRISM_RAWTHERAPEE_BIN --rawtherapee-bin rawtherapee-cli RawTherapee CLI <code>COMMAND</code> for RAW to JPEG conversion PHOTOPRISM_RAWTHERAPEE_BLACKLIST --rawtherapee-blacklist dng do not use RawTherapee to convert files with these <code>EXTENSIONS</code> PHOTOPRISM_IMAGEMAGICK_BIN --imagemagick-bin convert ImageMagick CLI <code>COMMAND</code> for image file conversion PHOTOPRISM_IMAGEMAGICK_BLACKLIST --imagemagick-blacklist heif,heic,heics,avif,avifs,jxl do not use ImageMagick to convert files with these <code>EXTENSIONS</code> PHOTOPRISM_HEIFCONVERT_BIN --heifconvert-bin heif-convert libheif HEIC image conversion <code>COMMAND</code> PHOTOPRISM_RSVGCONVERT_BIN --rsvgconvert-bin rsvg-convert librsvg SVG graphics conversion <code>COMMAND</code> plus"},{"location":"getting-started/config-options/#security-tokens","title":"Security Tokens","text":"Environment CLI Flag Default Description PHOTOPRISM_DOWNLOAD_TOKEN --download-token <code>DEFAULT</code> download URL token for originals (leave empty for a random value) PHOTOPRISM_PREVIEW_TOKEN --preview-token <code>DEFAULT</code> thumbnail and video streaming URL token (leave empty for a random value)"},{"location":"getting-started/config-options/#image-quality","title":"Image Quality","text":"Environment CLI Flag Default Description PHOTOPRISM_THUMB_COLOR --thumb-color sRGB standard color <code>PROFILE</code> for thumbnails (leave blank to disable) PHOTOPRISM_THUMB_FILTER --thumb-filter lanczos image downscaling filter <code>NAME</code> (best to worst: blackman, lanczos, cubic, linear) PHOTOPRISM_THUMB_SIZE --thumb-size 2048 maximum size of thumbnails created during indexing in <code>PIXELS</code> (720-7680) PHOTOPRISM_THUMB_SIZE_UNCACHED --thumb-size-uncached 7680 maximum size of missing thumbnails created on demand in <code>PIXELS</code> (720-7680) PHOTOPRISM_THUMB_UNCACHED --thumb-uncached enable on-demand creation of missing thumbnails (high memory and cpu usage) PHOTOPRISM_JPEG_QUALITY --jpeg-quality 85 a higher value increases the <code>QUALITY</code> and file size of JPEG images and thumbnails (25-100) PHOTOPRISM_JPEG_SIZE --jpeg-size 7680 maximum size of created JPEG sidecar files in <code>PIXELS</code> (720-30000) PHOTOPRISM_PNG_SIZE --png-size 7680 maximum size of created PNG sidecar files in <code>PIXELS</code> (720-30000)"},{"location":"getting-started/config-options/#face-recognition","title":"Face Recognition","text":"<p>To recognize faces, PhotoPrism first extracts crops from your images using a library based on pixel intensity comparisons. These are then fed into TensorFlow to compute 512-dimensional vectors for characterization. In the final step, the DBSCAN algorithm attempts to cluster these so-called face embeddings, so they can be matched to persons with just a few clicks. A reasonable range for the similarity distance between face embeddings is between 0.60 and 0.70, with a higher value being more aggressive and leading to larger clusters with more false positives. To cluster a smaller number of faces, you can reduce the core to 3 or 2 similar faces.</p> <p>We recommend that only advanced users change these parameters:</p> Environment CLI Flag Default Description PHOTOPRISM_FACE_SIZE --face-size 50 minimum size of faces in <code>PIXELS</code> (20-10000) PHOTOPRISM_FACE_SCORE --face-score 9.000000 minimum face <code>QUALITY</code> score (1-100) PHOTOPRISM_FACE_OVERLAP --face-overlap 42 face area overlap threshold in <code>PERCENT</code> (1-100) PHOTOPRISM_FACE_CLUSTER_SIZE --face-cluster-size 80 minimum size of automatically clustered faces in <code>PIXELS</code> (20-10000) PHOTOPRISM_FACE_CLUSTER_SCORE --face-cluster-score 15 minimum <code>QUALITY</code> score of automatically clustered faces (1-100) PHOTOPRISM_FACE_CLUSTER_CORE --face-cluster-core 4 <code>NUMBER</code> of faces forming a cluster core (1-100) PHOTOPRISM_FACE_CLUSTER_DIST --face-cluster-dist 0.640000 similarity <code>DISTANCE</code> of faces forming a cluster core (0.1-1.5) PHOTOPRISM_FACE_MATCH_DIST --face-match-dist 0.460000 similarity <code>OFFSET</code> for matching faces with existing clusters (0.1-1.5)"},{"location":"getting-started/config-options/#daemon-mode","title":"Daemon Mode","text":"<p>If you start the server as a daemon in the background, you can additionally specify a filename for the log and the process ID:</p> Environment CLI Flag Default Description PHOTOPRISM_PID_FILENAME --pid-filename process id <code>FILE</code> daemon-mode only PHOTOPRISM_LOG_FILENAME --log-filename server log <code>FILE</code> daemon-mode only"},{"location":"getting-started/config-options/#docker-image","title":"Docker Image","text":"<p>The following variables are used by our Docker images only and have no effect otherwise:</p> Environment Default Description PHOTOPRISM_UID 0 run as a non-root user after initialization (supported: 0, 33, 50-99, 500-600, and 900-1200) PHOTOPRISM_GID 0 run with a specific group id after initialization, to be used together with <code>PHOTOPRISM_UID</code> PHOTOPRISM_UMASK 0002 file-creation mode (default: u=rwx,g=rwx,o=rx) PHOTOPRISM_INIT run/install on first startup (options: update https gpu tensorflow davfs clitools clean) PHOTOPRISM_DISABLE_CHOWN false disable updating storage permissions via chmod and chown on startup"},{"location":"getting-started/docker-compose/","title":"Setup Using Docker Compose","text":"<p>With Docker Compose, you use a YAML file to configure all application services so you can easily start them with a single command. Before you proceed, make sure you have Docker installed on your system. It is available for Mac, Linux, and Windows.</p> <p>Podman is also supported as a drop-in replacement for Docker on Red Hat-compatible Linux distributions such as CentOS, Fedora, AlmaLinux, and Rocky Linux.</p>"},{"location":"getting-started/docker-compose/#step-1-configure","title":"Step 1: Configure","text":"LinuxPodmanRaspberry PiARMv7WindowsmacOS <p>Download our docker-compose.yml example (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/docker-compose.yml\n</code></pre> <p>Commands on Linux may have to be prefixed with <code>sudo</code> when not running as root. Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in the <code>volumes:</code>  section of your <code>docker-compose.yml</code>. Kernel security modules such as AppArmor and SELinux  have been reported to cause issues. Ensure that your server has at least 4 GB of swap configured so that indexing doesn't cause restarts when there are memory usage spikes.</p> <p>Download our docker-compose.yml example (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/podman/docker-compose.yml\n</code></pre> <p>Alternatively, you can run these commands to install Podman and download the default configuration to <code>/opt/photoprism</code>:</p> <pre><code>mkdir -p /opt/photoprism\ncd /opt/photoprism\ncurl -sSf https://dl.photoprism.app/podman/install.sh | bash\n</code></pre> <p>Please keep in mind to replace the <code>docker</code> and <code>docker compose</code> commands with <code>podman</code> and <code>podman-compose</code> when following the examples in our documentation.</p> <p>Download our docker-compose.yml example for  the Raspberry Pi 3 / 4 and other ARM64-based devices (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/arm64/docker-compose.yml\n</code></pre> <p>Mostly the same installation instructions as for regular Linux servers apply. Commands may have to be prefixed with <code>sudo</code> when not running as root. Ensure your device meets the requirements and has at least 4 GB of swap configured before you continue.</p> <p>Download our docker-compose.yml example for  older ARMv7-based devices (right click and Save Link As... or use <code>wget</code>) to a folder of your choice, and change the configuration as needed:</p> <pre><code>wget https://dl.photoprism.app/docker/armv7/docker-compose.yml\n</code></pre> <p>Mostly the same installation instructions as for regular Linux servers apply. Commands may have to be prefixed with <code>sudo</code> when not running as root. Ensure your device meets the requirements and has at least 4 GB of swap configured before you continue.</p> <p>Download our docker-compose.yml example for Windows (right click and Save Link As...) to a folder of your choice, and change the configuration as needed:</p> <p>https://dl.photoprism.app/docker/windows/docker-compose.yml </p> <p>On Windows Pro, you may need to disable the WSL 2-based engine under Docker Settings &gt; General  so that you can mount drives other than <code>C:</code>. <sup>1</sup> This will enable Hyper-V, which  Microsoft doesn't offer  to its Windows Home customers. Docker Desktop uses dynamic memory allocation with WSL 2. It is important to explicitly increase the Docker memory limit to 4 GB or more when using  Hyper-V. The default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p> <p>Running the following commands will automatically download all required config files and start the server for you:</p> <pre><code>curl.exe -o install.bat https://dl.photoprism.app/docker/windows/install.bat\ninstall.bat\n</code></pre> <p>Before you run this, make sure you are in the directory where you want to install PhotoPrism and that Docker Desktop is installed and started on your PC.</p> <p>Download our docker-compose.yml example for macOS (right click and Save Link As...) to a folder of your choice, and change the configuration as needed:</p> <p>https://dl.photoprism.app/docker/macos/docker-compose.yml </p> <p>It is important to increase the Docker memory limit to 4 GB or more, as the default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p> <p>When editing the configuration file, please note that related values must start at the same indentation level in YAML files and that tabs are not allowed for indentation. We recommend using 2 spaces.</p> <p>Always change <code>PHOTOPRISM_ADMIN_PASSWORD</code> so that the app starts with a secure initial password. Never use easy-to-guess passwords or default values like <code>insecure</code> on publicly accessible servers. There is no default in case no password was provided. A minimum length of 8 characters is required.</p>"},{"location":"getting-started/docker-compose/#database","title":"Database","text":"<p>Our example includes a pre-configured MariaDB database server. If you remove it  and provide no other database server credentials, SQLite database files will be created in the  storage folder. Local SSD storage is best for databases of any kind.</p> <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p> <p>It is not possible to change the database password with <code>MARIADB_PASSWORD</code> after MariaDB has been started for the first time. However, choosing a secure password is not essential if you don't expose the database to other apps or hosts. To enable automatic schema updates after upgrading to a new major version, make sure that  <code>MARIADB_AUTO_UPGRADE</code> is set to a non-empty value in your <code>docker-compose.yml</code>.</p>"},{"location":"getting-started/docker-compose/#volumes","title":"Volumes","text":"<p>You must explicitly specify the directories you want to mount from your host, since PhotoPrism can't see files in folders that have not been shared. This is an important security feature and allows for a flexible configuration without having to change any other variables.</p>"},{"location":"getting-started/docker-compose/#photoprismoriginals","title":"/photoprism/originals","text":"<p>The originals folder contains your original photo and video files. </p> <p><code>~/Pictures</code> will be mounted by default, where <code>~</code> is a shortcut for your home directory:</p> <pre><code>volumes:\n# \"/host/folder:/photoprism/folder\"  # example\n- \"~/Pictures:/photoprism/originals\"\n</code></pre> <p>You can mount any folder accessible from the host, including network shares. Additional directories can also be mounted as sub folders of <code>/photoprism/originals</code> (depending on overlay file system support):</p> <pre><code>volumes:\n- \"/home/username/Pictures:/photoprism/originals\"\n- \"/example/friends:/photoprism/originals/friends\"\n- \"/mnt/photos:/photoprism/originals/media\"\n</code></pre> <p>On Windows, prefix the host path with the drive letter and use <code>/</code> instead of <code>\\</code> as separator:</p> <pre><code>volumes:\n- \"D:/Example/Pictures:/photoprism/originals\"\n</code></pre> <p>If read-only mode is enabled, all features that require write permission to the originals folder  are disabled, e.g. WebDAV, uploading and deleting files. Set <code>PHOTOPRISM_READONLY</code> to <code>\"true\"</code> in <code>docker-compose.yml</code> for this. In addition, you can mount volumes with the <code>:ro</code> flag so that writes are also blocked by Docker.</p>"},{"location":"getting-started/docker-compose/#photoprismstorage","title":"/photoprism/storage","text":"<p>The storage folder is used to save SQLite, config, cache, thumbnail and sidecar files:</p> <ul> <li>a storage folder mount (with write access) must always be configured in your <code>docker-compose.yml</code> file so that you do not lose these files after a restart or upgrade</li> <li>never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden</li> <li>we recommend placing the storage folder on a local SSD drive for best performance</li> <li>mounting symbolic links or using them inside the storage folder is currently not supported</li> </ul> <pre><code>volumes:\n- \"./storage:/photoprism/storage\"\n</code></pre> <p>Should you later want to move your instance to another host, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>"},{"location":"getting-started/docker-compose/#photoprismimport","title":"/photoprism/import","text":"<p>You can optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates:</p> <ul> <li>imported files receive a canonical filename and will be organized by year and month</li> <li>never configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files</li> </ul> <p>You can safely skip this. Adding files via Web Upload and WebDAV remains possible, unless read-only mode is enabled or the features have been disabled.</p>"},{"location":"getting-started/docker-compose/#step-2-start-the-server","title":"Step 2: Start the server","text":"<p>Open a terminal and change to the folder in which the <code>docker-compose.yml</code> file has been saved.<sup>2</sup> Run this command to start the application and database services in the background:</p> <pre><code>docker compose up -d\n</code></pre> <p>Note that our guides now use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code>.</p> <p>Now open the Web UI by navigating to http://localhost:2342/. You should see a login screen. Sign in with the user <code>admin</code> and the initial password configured via <code>PHOTOPRISM_ADMIN_PASSWORD</code>. You may change it on the account settings page. Enabling public mode will disable authentication.</p> <p>It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting.</p> <p>Should the server already be running, or you see no errors, you may have started it on a different host and/or port. There could also be an issue with your browser, ad blocker, or firewall settings.</p> <p>It is not possible to change the password via <code>PHOTOPRISM_ADMIN_PASSWORD</code> after the app has been  started for the first time. You may run <code>docker compose exec photoprism photoprism passwd [username]</code>  in a terminal to change an existing password. You can also reset your database for a clean start.</p> <p>The server port and other config options can be changed in <code>docker-compose.yml</code> at any time. Remember to restart the services for changes to take effect:</p> <pre><code>docker compose stop\ndocker compose up -d\n</code></pre>"},{"location":"getting-started/docker-compose/#step-3-index-your-library","title":"Step 3: Index Your Library","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>Easy, isn't it?</p>"},{"location":"getting-started/docker-compose/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project! </p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"getting-started/docker-compose/#troubleshooting","title":"Troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the CPU performance and number of cores</li> <li> Make sure your server has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/docker-compose/#command-line-interface","title":"Command-Line Interface","text":""},{"location":"getting-started/docker-compose/#introduction","title":"Introduction","text":"<p><code>photoprism help</code> lists all commands and config options available in the current version:</p> <pre><code>docker compose exec photoprism photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>docker compose exec photoprism photoprism backup --help\n</code></pre> <p>PhotoPrism's command-line interface is also well suited for job automation using a scheduler.</p> <p>When using Docker Compose, you can prepend commands like <code>docker compose exec [service] [command]</code> to run them in a service container. Should this fail with no container found, make sure the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where the <code>docker-compose.yml</code> file is located.</p>"},{"location":"getting-started/docker-compose/#opening-a-terminal","title":"Opening a Terminal","text":"<p>To open a terminal session as the current user, you can do the following:</p> <pre><code>docker compose exec -u $UID photoprism bash\n</code></pre>"},{"location":"getting-started/docker-compose/#changing-the-user-id","title":"Changing the User ID","text":"<p>Specifying a user via <code>-u $UID</code> is possible for all commands you run with Docker Compose. In the following examples, it is omitted for brevity. The currently supported user ID ranges are 0, 33, 50-99, 500-600, and 900-1200. Note that commands will otherwise be executed as root.</p> <p>We also recommend running the PhotoPrism service as a non-root user by setting either the user service property or the <code>PHOTOPRISM_UID</code> environment variable in the <code>docker-compose.yml</code> file. Don't forget to update file permissions and/or ownership with the <code>chown</code> command when you make changes.</p>"},{"location":"getting-started/docker-compose/#examples","title":"Examples","text":"Action Command Start Services <code>docker compose up -d</code> Stop Services <code>docker compose stop</code> Download Updates <code>docker compose pull</code> Uninstall <code>docker compose rm -s -v</code> View Logs <code>docker compose logs --tail=100 -f</code> Display Config Values <code>docker compose exec photoprism photoprism show config</code> Show Migration Status <code>docker compose exec photoprism photoprism migrations ls</code> Repeat Failed Migrations <code>docker compose exec photoprism photoprism migrations run -f</code> Reset Database <code>docker compose exec photoprism photoprism reset -y</code> Backup Database <code>docker compose exec photoprism photoprism backup -a -i</code> Restore Database <code>docker compose exec photoprism photoprism restore -a -i</code> Change Admin Password <code>docker compose exec photoprism photoprism passwd [username]</code> Show User Management Commands <code>docker compose exec photoprism photoprism users help</code> Reset Users <code>docker compose exec photoprism photoprism users reset -y</code> Show Face Recognition Commands <code>docker compose exec photoprism photoprism faces help</code> Index Faces <code>docker compose exec photoprism photoprism faces index</code> Reset People &amp; Faces <code>docker compose exec photoprism photoprism faces reset -f</code> Transcode Videos to AVC <code>docker compose exec photoprism photoprism convert</code> Regenerate Thumbnails <code>docker compose exec photoprism photoprism thumbs -f</code> Update Index <code>docker compose exec photoprism photoprism index --cleanup</code> Move to Originals <code>docker compose exec photoprism photoprism import [path]</code> Copy to Originals <code>docker compose exec photoprism photoprism cp [path]</code> <p>Complete Rescan</p> <p><code>docker compose exec photoprism photoprism index -f</code> rescans all originals, including already indexed and unchanged files. This may be necessary after major upgrades and after migrations of the database schema, especially if search results are missing or incorrect. Note you can also start a rescan from the user interface by navigating to Library &gt; Index, checking \"Complete Rescan\" and then clicking \"Start\". Manually entered information such as labels, people, titles or descriptions will not be modified when indexing, even if you perform a \"complete rescan\".</p> <ol> <li> <p>https://rominirani.com/docker-on-windows-mounting-host-directories-d96f3f056a2c \u21a9</p> </li> <li> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/docker/","title":"Running PhotoPrism with Docker","text":"<p>We recommend using Docker Compose because it is easier and provides more convenience for running multiple services than the pure Docker command-line interface. Before you proceed, make sure you have Docker installed on your system. It is available for Mac, Linux, and Windows.</p> <p>Podman is also supported as a drop-in replacement for Docker on Red Hat-compatible Linux distributions such as CentOS, Fedora, AlmaLinux, and Rocky Linux.</p>"},{"location":"getting-started/docker/#step-1-start-the-server","title":"Step 1: Start the server","text":"LinuxPodman <p>Open a terminal and run this command to start the app after replacing <code>~/Pictures</code> with the folder containing your pictures:</p> <pre><code>docker run -d \\\n--name photoprism \\\n--security-opt seccomp=unconfined \\\n--security-opt apparmor=unconfined \\\n-p 2342:2342 \\\n-e PHOTOPRISM_UPLOAD_NSFW=\"true\" \\\n-e PHOTOPRISM_ADMIN_PASSWORD=\"insecure\" \\\n-v /photoprism/storage \\\n-v ~/Pictures:/photoprism/originals \\\nphotoprism/photoprism\n</code></pre> <p>Open a terminal and run this command to start the app after replacing <code>~/Pictures</code> with the folder containing your pictures:</p> <pre><code>podman run -d \\\n--name photoprism \\\n--privileged \\\n--security-opt seccomp=unconfined \\\n--security-opt apparmor=unconfined \\\n-p 2342:2342 \\\n-e PHOTOPRISM_UPLOAD_NSFW=\"true\" \\\n-e PHOTOPRISM_ADMIN_PASSWORD=\"insecure\" \\\n-v /photoprism/storage \\\n-v ~/Pictures:/photoprism/originals \\\nphotoprism/photoprism\n</code></pre> <p>Please keep in mind to replace the <code>docker</code> command with <code>podman</code> when following the examples in our documentation.</p> <p>The server port and other config options can be changed as needed. If you provide no database server credentials, SQLite database files will be created in the storage folder.</p> <p>Always change <code>PHOTOPRISM_ADMIN_PASSWORD</code> so that the app starts with a secure initial password. Never use easy-to-guess passwords or default values like <code>insecure</code> on publicly accessible servers. There is no default in case no password was provided. A minimum length of 8 characters is required.</p> <p>Commands on Linux may have to be prefixed with <code>sudo</code> when not running as root. Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in volume mounts. Kernel security modules such as AppArmor and SELinux have been reported to cause issues.</p> <p>When the app has been started, open the Web UI by navigating to http://localhost:2342/. You should see a login screen. Sign in with the user <code>admin</code> and the password configured via <code>PHOTOPRISM_ADMIN_PASSWORD</code>. You may change it on the account settings page. Enabling public mode will disable authentication.</p> <p>It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting.</p> <p>Should the server already be running, or you see no errors, you may have started it on a different host and/or port. There could also be an issue with your browser, ad blocker, or firewall settings.</p> <p>It is not possible to change the password via <code>PHOTOPRISM_ADMIN_PASSWORD</code> after the app has been  started for the first time. You may run <code>docker exec -ti photoprism photoprism passwd [username]</code> in a terminal to change an existing password. You can also reset your database for a clean start. </p>"},{"location":"getting-started/docker/#volumes","title":"Volumes","text":"<p>Since the app is running inside a container, you have to explicitly mount the host folders you want to use. PhotoPrism won't be able to see folders that have not been mounted. That's an important security feature.</p>"},{"location":"getting-started/docker/#photoprismoriginals","title":"/photoprism/originals","text":"<p>The originals folder contains your original photo and video files. They are mounted from <code>~/Pictures</code> in the example above, where <code>~</code> is a shortcut for your home directory.</p> <p>You may mount any folder accessible from the host instead, including network drives. Additional directories can be mounted as sub folders of <code>/photoprism/originals</code>:</p> <pre><code>-v ~/Example:/photoprism/originals/Example\n</code></pre> <p>If read-only mode is enabled, all features that require write permission to the originals folder are disabled, e.g. WebDAV, uploading and deleting files. Run the app with <code>-e PHOTOPRISM_READONLY=\"true\"</code>  for this. You can mount a folder with the <code>:ro</code> flag to make Docker block write operations as well.</p>"},{"location":"getting-started/docker/#photoprismstorage","title":"/photoprism/storage","text":"<p>SQLite, config, cache, thumbnail and sidecar files are saved in the storage folder:</p> <ul> <li>a storage folder must always be mounted so that you do not lose these files after a restart or upgrade</li> <li>never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden</li> <li>we recommend placing the storage folder on a local SSD drive for best performance</li> <li>mounting symbolic links or using them inside the storage folder is currently not supported</li> </ul> <p>Using our example, an anonymous volume is created and mounted as storage folder. You can mount a specific host folder instead, just as with originals, which is better for production environments.</p> <p>Should you later want to move your instance to another host, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>"},{"location":"getting-started/docker/#photoprismimport","title":"/photoprism/import","text":"<p>You can optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates:</p> <ul> <li>imported files receive a canonical filename and will be organized by year and month</li> <li>never configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files</li> </ul> <p>You can safely skip this. Adding files via Web Upload and WebDAV remains possible, unless read-only mode is enabled or the features have been disabled.</p>"},{"location":"getting-started/docker/#step-2-first-steps","title":"Step 2: First steps","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>Easy, isn't it?</p>"},{"location":"getting-started/docker/#step-3-when-youre-done","title":"Step 3: When you're done...","text":"<p>You can stop PhotoPrism and start it again using the following commands:</p> <pre><code>docker stop photoprism\ndocker start photoprism\n</code></pre> <p>To remove the container completely:</p> <pre><code>docker rm -f photoprism\n</code></pre>"},{"location":"getting-started/docker/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project! </p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"getting-started/docker/#troubleshooting","title":"Troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value, depending on the CPU performance and number of cores</li> <li> Make sure your server has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/docker/#command-line-interface","title":"Command-Line Interface","text":""},{"location":"getting-started/docker/#introduction","title":"Introduction","text":"<p><code>photoprism help</code> lists all commands and config options available in the current version:</p> <pre><code>docker exec -ti photoprism photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>docker exec -ti photoprism photoprism backup --help\n</code></pre> <p>PhotoPrism's command-line interface is also well suited for job automation using a scheduler.</p> <p>When using Docker, you can prepend commands like <code>docker exec -ti [container] [command]</code> to run them in a container. Should this fail with no container found, make sure the container has been started and you have specified an existing container name or id.</p>"},{"location":"getting-started/docker/#opening-a-terminal","title":"Opening a Terminal","text":"<p>To open a terminal session as the current user, you can do the following:</p> <pre><code>docker exec -ti -u $UID photoprism bash\n</code></pre> <p>Specifying the <code>-ti</code> flag is important for interactive commands to work, for example when you need to confirm an action.</p>"},{"location":"getting-started/docker/#changing-the-user-id","title":"Changing the User ID","text":"<p>Specifying a user via <code>-u $UID</code> is possible for all commands you run with Docker. In the following examples, it is omitted for brevity. The currently supported user ID ranges are 0, 33, 50-99, 500-600, and 900-1200. Note that commands will otherwise be executed as root.</p>"},{"location":"getting-started/docker/#examples","title":"Examples","text":"Action Command Start PhotoPrism <code>docker start photoprism</code> Stop PhotoPrism <code>docker stop photoprism</code> Download Update <code>docker pull photoprism/photoprism:latest</code> Uninstall <code>docker rm -f photoprism</code> View Logs <code>docker logs --tail=100 -f photoprism</code> Display Config Values <code>docker exec -ti photoprism photoprism show config</code> Show Migration Status <code>docker exec -ti photoprism photoprism migrations ls</code> Repeat Failed Migrations <code>docker exec -ti photoprism photoprism migrations run -f</code> Reset Database <code>docker exec -ti photoprism photoprism reset -y</code> Backup Database <code>docker exec -ti photoprism photoprism backup -a -i</code> Restore Database <code>docker exec -ti photoprism photoprism restore -a -i</code> Change Admin Password <code>docker exec -ti photoprism photoprism passwd [username]</code> Show User Management Commands <code>docker exec -ti photoprism photoprism users help</code> Reset Users <code>docker exec -ti photoprism photoprism users reset -y</code> Show Face Recognition Commands <code>docker exec -ti photoprism photoprism faces help</code> Index Faces <code>docker exec -ti photoprism photoprism faces index</code> Reset People &amp; Faces <code>docker exec -ti photoprism photoprism faces reset -f</code> Transcode Videos to AVC <code>docker exec -ti photoprism photoprism convert</code> Regenerate Thumbnails <code>docker exec -ti photoprism photoprism thumbs -f</code> Update Index <code>docker exec -ti photoprism photoprism index --cleanup</code> Move to Originals <code>docker exec -ti photoprism photoprism import [path]</code> Copy to Originals <code>docker exec -ti photoprism photoprism cp [path]</code> <p>Complete Rescan</p> <p><code>docker exec -ti photoprism photoprism index -f</code> rescans all originals, including already indexed and unchanged files. This may be necessary after major upgrades and after migrations of the database schema, especially if search results are missing or incorrect. Note You can also start a rescan from the user interface by navigating to Library &gt; Index, checking \"Full Rescan\" and then clicking \"Start\". Manually entered information such as labels, people, titles or descriptions will not be modified when indexing, even if you perform a \"complete rescan\".</p>"},{"location":"getting-started/faq/","title":"Frequently Asked Questions","text":""},{"location":"getting-started/faq/#what-media-file-types-are-supported","title":"What media file types are supported?","text":"<p>PhotoPrism supports indexing, viewing, and converting most popular image, video and RAW formats, including JPEG, PNG, GIF, BMP, HEIF, HEIC, MP4, MOV, WebP, and WebM. TIFF is partially supported without extensions such as GeoTIFF.</p> <p>When indexing, a JPEG or PNG sidecar file is automatically created for videos and images in other formats, such as RAW or vector graphics. It is needed for thumbnail generation, image classification, and face detection. JPEG XL support is planned as soon as it is generally available and enough compatible tools exist.</p> <p>If installed, converting RAW files is possible with the following converters (our Docker image includes both):</p> <ul> <li>Darktable (supported cameras)</li> <li>RawTherapee (supported cameras)</li> </ul> <p>On a Mac, RAW files can also be converted with Sips (supported cameras). Our goal is to provide top-notch support for all RAW formats, regardless of camera make and model. Please let us know about any issues with a particular camera or file format.</p> <p>For maximum browser compatibility, video codecs and containers supported by FFmpeg can be transcoded to MPEG-4 AVC on demand, just as still images can be extracted for thumbnail creation.</p> <p>Make sure you have JSON sidecar files enabled if you have videos, live photos, and/or animated GIFs so that video-specific metadata such as codec, frames, and duration can be extracted, indexed, and searched.</p> <p>For a complete list of file formats and extensions, see our downloadable Feature Overview.</p> <p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have Exiftool enabled to extract metadata such as duration, resolution, and codec.</p>"},{"location":"getting-started/faq/#what-are-sidecar-files-and-where-do-i-find-them","title":"What are sidecar files and where do I find them?","text":"<p>A sidecar is a file that sits next to your main photo or video files and usually has the same name but a different extension:</p> <ul> <li><code>IMG_0123.mov</code></li> <li><code>IMG_0123.mov.jpg</code></li> <li><code>IMG_0123.json</code></li> </ul> <p>New sidecar files are saved in the storage folder by default, so the originals folder can be mounted read-only.</p> <p>Even if <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> and <code>PHOTOPRISM_DISABLE_BACKUPS</code> are set to <code>\"true\"</code>, the indexer looks for existing sidecar files and uses them.</p>"},{"location":"getting-started/faq/#what-metadata-sidecar-file-types-are-supported","title":"What metadata sidecar file types are supported?","text":"<p>Currently, three types of file formats are supported:</p>"},{"location":"getting-started/faq/#json","title":"JSON","text":"<p>If not disabled via <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> or <code>--disable-exiftool</code>, Exiftool is used to automatically create a JSON sidecar for each media file. In this way, embedded XMP and video metadata can also be indexed. Native metadata extraction is limited to common Exif headers. Note that this causes small amount of overhead when indexing for the first time.</p> <p>JSON files can also be useful for debugging, as they contain the full metadata and can be processed with common  development tools and text editors.</p> <p>JSON files exported from Google Photos can be read as well. Support for more schemas may be added over time.</p>"},{"location":"getting-started/faq/#yaml","title":"YAML","text":"<p>Unless disabled via <code>PHOTOPRISM_DISABLE_BACKUPS</code> or <code>--disable-backups</code>, PhotoPrism automatically creates/updates human-friendly YAML sidecar files during indexing and after manual editing of fields such as title, date, or location. They serve as a backup in case the database (index) is lost, or when folders are synchronized with a remote instance.</p> <p>Like JSON, YAML files can be opened with common development tools and  text editors. However, changes are not synchronized with the original index, as this could overwrite existing data.</p>"},{"location":"getting-started/faq/#xmp","title":"XMP","text":"<p>XMP (Extensible Metadata Platform) is an XML-based metadata container format developed by Adobe. It provides many more fields (as part of embedded models like Dublin Core) than Exif. This also makes it difficult - if not  impossible - to provide full support. Reading title, copyright, artist, and description from XMP sidecar files is  implemented as a proof-of-concept, contributions are welcome. Indexing of  embedded XMP is only possible via Exiftool, see above.</p>"},{"location":"getting-started/faq/#does-your-software-depend-on-any-external-services","title":"Does your software depend on any external services?","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>Your use of these services is fully covered by us. Depending on your usage, this can save you much more than the cost of a PhotoPrism+ Membership, since other providers generally charge usage-based fees and often don't allow you to cache the data they provide, compromising performance and your privacy with unnecessary requests.</p> <p>You might also come across other apps that use the free map tile service offered by openstreetmap.org. In this case, their usage and privacy policies apply, meaning that your request data is stored and used to create publicly available reports. This is a major difference from our approach, which focuses on your privacy and user experience.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p> <p>In order to successfully set up your installation and view location details in PhotoPrism, you must allow incoming requests as well as those to our Geocoding API and Docker if you have a firewall installed, and make sure that your Internet connection is working:</p> <p></p>"},{"location":"getting-started/faq/#why-do-i-see-connection-errors-when-requesting-api-keys-at-startup","title":"Why do I see connection errors when requesting API keys at startup?","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from external services. Please make sure that you allow requests to these API endpoints if you have a firewall installed, and verify that your Internet connection is working.</p>"},{"location":"getting-started/faq/#are-the-keys-for-using-interactive-world-maps-provided-free-of-charge","title":"Are the keys for using interactive world maps provided free of charge?","text":"<p>The API keys required to use the maps are unfortunately not free for us due to the number of users we have. Those costs are one of the reasons why we encourage all users to support our mission by signing up as a member or purchasing a commercial license.</p> <p>To improve the situation for those who don't want to or cannot sign up, it would be possible to add more details like cities and lakes to the basic maps. The only problem is that we don't have the resources to do it ourselves due to the large backlog of feature requests, so we hope someone can contribute this:</p> <ul> <li>Places: Improve the level of detail of the basic world map</li> </ul> <p>We are aware that advanced users could register \"non-commercial test accounts\" instead, but we think that would not be completely fair and MapTiler could then no longer offer them to those in need. Keep in mind that we have many more users than other open source projects that might encourage their users to do this. Likewise, using the OpenSteetMap development API is discouraged for consumer applications like ours, although some projects do it anyway.</p>"},{"location":"getting-started/faq/#how-can-i-activate-my-membership","title":"How can I activate my membership?","text":"<p>To connect a new instance to your membership account, you will need to log in with the admin user that is automatically created during setup (see your <code>docker-compose.yml</code> file or the app store documentation), and then follow the steps described in our activation guide.</p> <p>View Activation Guide \u203a</p>"},{"location":"getting-started/faq/#what-are-the-advantages-of-purchasing-a-commercial-license","title":"What are the advantages of purchasing a commercial license?","text":"<p>A key difference between the public license and a commercial license agreement is that you get access to additional support and configuration options, as well as the right to customize functionality to your needs without having to publicly disclose your changes. Our Compliance FAQ gives answers to the most frequently asked questions about product compliance and scalability.</p> <p>Compare Team Editions \u203a</p>"},{"location":"getting-started/faq/#will-the-self-hosted-version-continue-to-be-supported","title":"Will the self-hosted version continue to be supported?","text":"<p>Absolutely! We are on a mission to protect your freedom and privacy. Self-hosting is the easiest way to stay in control and protect your privacy. It also provides the best experience for advanced users who often rely on a local toolchain to select, edit, and publish their pictures.</p> <p>At the same time, we know there's a huge demand and many practical uses for a cloud-hosted app that is easy to set up. We like to give our users the choice and therefore offer a fully managed service as a deployment option. Selected hosting partners ensure that your privacy is protected as much as technically possible, even in the cloud.</p>"},{"location":"getting-started/faq/#are-jpegs-updated-when-raw-or-xmp-files-change","title":"Are JPEGs updated when RAW or XMP files change?","text":"<p>JPEGs are currently not regenerated when related RAW or XMP files change. RAW files are digital negatives by design. PhotoPrism therefore assumes that their image information is immutable.</p> <p>XMP files can affect the appearance, but most of the metadata they contain, such as title and description, does not. Creating JPEGs from RAW files is a time-consuming task, and in most cases would cause a huge, unjustified amount of overhead. In addition, the rendering information in XMP files is not well standardized. For example, changes you make in Photoshop may not be compatible with Darktable.</p> <p>We recommend manually updating existing JPEG sidecar files as needed or creating additional JPEGs, so you can choose between different versions. New files and other metadata changes are detected and reflected in the index as usual when your library is scanned.</p>"},{"location":"getting-started/faq/#which-folder-will-be-indexed","title":"Which folder will be indexed?","text":"<p>This depends on your environment and configuration. While sub folders can be selected for indexing in the UI, changing the originals base folder requires a restart for security reasons.</p> <p>If you skip configuration and don't use one of our Docker images, PhotoPrism will attempt to find a photo library by searching a list of common folder names such as <code>/photoprism/originals</code> and <code>~/Pictures</code>. It also searches for other resources such as external applications, classification models, and frontend assets.</p> <p>If you use our Docker Compose example without modifications, pictures will be mounted from <code>~/Pictures</code> where <code>~</code> is a shortcut for your home directory:</p> <ul> <li><code>\\user\\username</code> on Windows</li> <li><code>/Users/username</code> on macOS</li> <li>and <code>/root</code> or <code>/home/username</code> on Linux</li> </ul> <p>Since the app is running inside a container, you have to explicitly mount the host folders you want to use. PhotoPrism won't be able to see folders that have not been mounted. Multiple folders can be made accessible by mounting them as sub folders of <code>/photoprism/originals</code>, for example:</p> <pre><code>volumes:\n- \"/home/username/Pictures:/photoprism/originals\"\n- \"/example/friends:/photoprism/originals/friends\"\n- \"/mnt/photos:/photoprism/originals/media\"\n</code></pre>"},{"location":"getting-started/faq/#can-i-use-fat32-and-exfat-formatted-drives","title":"Can I use FAT32 and ExFAT formatted drives?","text":"<p>Photos and videos can be mounted from FAT-formatted drives, such as an external SSD. Our tests have shown that PhotoPrism and MariaDB can also be started from there. However, at least on macOS, the logs may occasionally show directory access errors and you will be forced to restart if problems occur.</p>"},{"location":"getting-started/faq/#i-cant-find-a-download-link-to-install-your-software-on-windows","title":"I can't find a download link to install your software on Windows?","text":"<p>PhotoPrism depends on a number of other open source tools and applications, such as Darktable, RawTherapee, and FFmpeg. While you can install them directly on Windows, it's a lot of work and we don't have the capacity to test the respective Windows versions before each release.</p> <p>We therefore recommend to use Docker, so you can take advantage of our pre-built and QA-tested Docker image, which includes all the dependencies you need. It is a well-tested standard tool that also lets you run many other self-hosted apps without having to worry about the details or Windows-specific issues. To further simplify the setup for you, we offer a batch script that you can run in the directory where you want to install PhotoPrism:</p> <pre><code>curl.exe -o install.bat https://dl.photoprism.app/docker/windows/install.bat\ninstall.bat\n</code></pre> <p>This will automatically download all required config files and start the server for you. Before you run the script, make sure you have Docker Desktop installed on your Windows PC.</p>"},{"location":"getting-started/faq/#how-can-i-install-photoprism-without-docker","title":"How can I install PhotoPrism without Docker?","text":""},{"location":"getting-started/faq/#building-from-source","title":"Building From Source","text":"<p>You can build and install PhotoPrism from the publicly available source code:</p> <pre><code>git clone https://github.com/photoprism/photoprism.git\ncd photoprism\nmake all install DESTDIR=/opt/photoprism\n</code></pre> <p>Missing build dependencies must be installed manually as shown in our human-readable and versioned Dockerfile. You often don't need to use the exact same versions, so it's possible to replace packages with what is available in your environment.</p> <p>Please note that we do not have the resources to provide private users with dependencies and TensorFlow libraries for their personal environments. We recommend giving Docker a try if you use Linux as it saves developers a lot of time when building, testing, and deploying complex applications like PhotoPrism. It also effectively helps avoid \"works for me\" moments and missing dependencies, see next question.</p>"},{"location":"getting-started/faq/#installation-packages","title":"Installation Packages","text":"<p>An unofficial port is available for FreeBSD / FreeNAS users. Developers are invited to contribute by building and testing standalone packages for Linux distributions and other operating systems. </p> <p>Updates are released several times a month, so maintaining the long list of dependencies for additional environments would currently consume too many of our resources.</p>"},{"location":"getting-started/faq/#lxc-images","title":"LXC Images","text":"<p>There is no official LXC image available yet, see related GitHub issue for details.</p>"},{"location":"getting-started/faq/#why-are-you-using-docker","title":"Why are you using Docker?","text":"<p>Containers are nothing new; Solaris Zones have been around for about 15 years, first released publicly in 2004. The chroot system call was introduced during development of Version 7 Unix in 1979. It is used ever since for hosting applications exposed to the public Internet.</p> <p>Modern Linux containers are an incremental enhancement. A main advantage of Docker is that application images can be easily made available to users via Internet. It provides a common standard across most operating systems and devices, which saves our team a lot of time that we can then spend more effectively, for example, providing support and developing one of the many features that users are waiting for.</p> <p>Human-readable and versioned Dockerfiles as part of our public source code also help avoid \"works for me\" moments and other unwelcome surprises by enabling teams to have the exact same environment everywhere in development, staging, and production.</p> <p>Last but not least, virtually all file format parsers have vulnerabilities that just haven't been discovered yet. This is a known risk that can affect you even if your computer is not directly connected to the Internet. Running apps in a container with limited host access is an easy way to improve security without compromising performance and usability.</p> <p>A virtual machine running its own operating system provides more security, but typically has side effects such as lower performance and more difficult handling. You can also run Docker in a VM to get the best of both worlds. It's essentially what happens when you run dockerized applications on virtual cloud servers and operating systems other than Linux.</p>"},{"location":"getting-started/faq/#why-does-your-docker-image-use-the-plus-license-instead-of-the-agpl","title":"Why does your Docker image use the Plus License instead of the AGPL?","text":"<p>Our Plus License is used for both the PhotoPrism+ extensions we provide to our members as well as the standard Docker image we distribute. This allows us to bundle the extensions, and other third-party components that we are not allowed to distribute under the AGPL, with the compiled application in the Docker image. The public source code, however, remains under the Open Source AGPL license. If you don't want additional features, you can alternatively use the \"ce\" tag instead of \"latest\" to get a smaller Docker image distributed under the AGPL License. Note that third-party components and digital assets included in this image are still subject to additional terms and conditions.</p> <p>View Plus License \u203a</p>"},{"location":"getting-started/faq/#should-i-use-sqlite-mariadb-or-mysql","title":"Should I use SQLite, MariaDB, or MySQL?","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+. Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p> <p>If you have few pictures, concurrent users, and CPU cores, SQLite may seem faster compared to full-featured database servers like MariaDB.</p> <p>This changes as the index grows and the number of concurrent accesses increases. The way MariaDB and MySQL handle multiple queries is completely different and optimized for high concurrency. SQLite, for example, locks the index on updates so that other operations have to wait. In the worst case, this can lead to timeout errors. Its main advantage is that you don't need to run a separate database server. This can be very useful for testing and also works great if you only have a few thousand files to index.</p> <p>MariaDB lacks some features that MySQL Enterprise Edition offers. On the other hand, MariaDB has many optimizations. It is also completely open-source.</p>"},{"location":"getting-started/faq/#ive-configured-an-external-database-but-cant-connect","title":"I've configured an external database, but can't connect?","text":"<p>Most often this happens when new users configure <code>localhost</code> or <code>127.0.0.1</code> as database server host, since these always point back to the current container or computer. So it is not possible to access an external service with such a hostname or an IP address starting with 127. It works only if it is used directly in the container or on the computer where the database server is running. Instead, you must use a hostname or IP address that is accessible from other machines and containers.</p>"},{"location":"getting-started/faq/#why-does-photoprism-always-consume-100-of-cpu-when-the-background-worker-is-running","title":"Why does PhotoPrism always consume 100% of CPU when the background worker is running?","text":"<p>Many users reporting poor performance and high CPU load have migrated from SQLite to MariaDB so that their database schema is not optimized for performance, for example, because indexes are missing or columns have the wrong data type. The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>In some instances, users have manually changed the contents of the database. It is also possible that the database is in an inconsistent state for other reasons, e.g. due to bugs in previous versions that have been fixed in the meantime. However, we are not currently aware of any such cases.</p> <p>Due to the amount of time required to review each report, we can only offer this to eligible members and business customers, and not to users who have chosen our free community edition.</p> <p>Get Performance Tips \u203a View Database Schema \u203a</p>"},{"location":"getting-started/faq/#can-you-improve-performance-when-using-older-or-otherwise-slow-hardware","title":"Can you improve performance when using older or otherwise slow hardware?","text":"<p>It is a known issue that the user interface and backend operations, especially face recognition, can be slow or even crash on older hardware due to a lack of resources. Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p> <p>In many cases, performance can be improved through optimizations. Since these can prove to be very time-consuming and cost-intensive in practice, users and developers must decide on a case-by-case basis whether this provides sufficient benefit in relation to the costs or whether the use of more powerful hardware is faster and cheaper overall.</p> <p>We kindly ask you not to open a problem report on GitHub Issues for poor performance on older hardware until a full cause and feasibility analysis has been performed. GitHub Discussions or any of our other public forums and communities are great places to start a discussion.</p> <p>That being said, one of the advantages of open-source software is that users can submit pull requests with performance and other enhancements they would like to see implemented. This will result in a much faster solution than waiting for a core team member to remotely analyze your problem and then provide a fix.</p>"},{"location":"getting-started/faq/#is-a-raspberry-pi-fast-enough","title":"Is a Raspberry Pi fast enough?","text":"<p>This largely depends on your expectations and the number of files you have. Most users report that PhotoPrism runs smoothly on their Raspberry Pi 4. However, initial indexing typically takes much longer than on standard desktop computers.</p> <p>Also keep in mind that the hardware has limited video transcoding capabilities, so the conversion of video file formats is not well-supported and software transcoding is generally slow.</p>"},{"location":"getting-started/faq/#should-i-use-an-sd-card-or-a-usb-stick","title":"Should I use an SD card or a USB stick?","text":"<p>Conventional USB sticks and SD cards are not suitable for long-term storage. Not only because of the performance, but also because they can lose data over time. Local Solid-State Drives (SSDs) are best, even when connected externally via USB 3. USB 1 and 2 devices will be slow either way.</p>"},{"location":"getting-started/faq/#why-dont-you-display-animated-gifs-natively","title":"Why don't you display animated GIFs natively?","text":"<p>Support for animated GIFs was added in April 2022.</p>"},{"location":"getting-started/faq/#why-is-my-storage-folder-so-large-what-is-in-it","title":"Why is my storage folder so large? What is in it?","text":"<p>The storage folder contains sidecar, cache, and configuration files. It may also contain index database files if you are using SQLite. Most of the space there is taken up by your thumbnails: These are high-quality, scaled-down versions of your originals. Thumbnails are necessary because web browsers are bad at resizing large images to fit the screen. Using full-resolution originals for slideshows and in search results would also consume a lot of browser memory and significantly reduce indexing performance.</p> <p>We are working to implement storage optimizations whenever there is an opportunity. It is also possible to increase the JPEG compression and/or limit the resolution if you are happy with lower quality thumbnails.</p> <p>To free up as much space as possible, the most effective way is to delete all files in the <code>/cache/thumbnails</code> storage folder. It is located outside the originals folder by default, depending on your configuration. Then perform a full rescan of your library or run the command <code>photoprism thumbs -f</code> in a terminal if you have direct server access. This command can also be used to replace existing thumbnails, for example after changing the quality settings. Higher resolution thumbnails cannot be automatically removed at this time.</p> <p>If you have a fast CPU and enough memory, you can choose to render certain thumbnails only on demand. However, storage is usually so cheap that most users opt for better quality and performance instead.</p> <p>Actual storage requirements vary and depend, among other things, on file resolutions and formats (RAW, JPEG, video,...). For highly compressed, high-resolution videos in modern formats that cannot be displayed natively by browsers, the storage folder may even be larger than the originals, since videos transcoded to AVC are not as heavily compressed.</p>"},{"location":"getting-started/faq/#can-i-skip-creating-thumbnails-completely","title":"Can I skip creating thumbnails completely?","text":"<p>The smallest configurable size is 720px for use by the indexer to perform color detection, image classification, as well as face detection and recognition. Recreating them every time they are needed is too demanding even for the most powerful servers. Unless you have just a few small pictures, this would make the app unusable.</p> <p>Reducing the Static Size Limit of thumbnails has a significant impact on face recognition and image classification results. Simply put, it means that the indexer can no longer see properly.</p>"},{"location":"getting-started/faq/#when-should-i-perform-a-complete-rescan","title":"When should I perform a complete rescan?","text":"<p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>You can start a rescan from the user interface by navigating to Library &gt; Index, selecting \"Complete Rescan\", and then clicking \"Start\". Manually entered information such as labels, people, titles or descriptions will not be modified when indexing, even if you perform a \"complete rescan\". Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"getting-started/faq/#how-can-i-shorten-the-startup-time-after-a-restart-or-update","title":"How can I shorten the startup time after a restart or update?","text":"<p>To reduce startup time, do not set <code>PHOTOPRISM_INIT</code> to avoid running additional setup scripts, and set <code>PHOTOPRISM_DISABLE_CHOWN</code> to <code>\"true\"</code> to disable automatic permission updates.</p> <p>If your instance doesn't start even after waiting for some time, our Troubleshooting Checklists help you quickly diagnose and solve the problem.</p>"},{"location":"getting-started/faq/#why-are-files-uploaded-via-webdav-not-indexedimported-immediately","title":"Why are files uploaded via WebDAV not indexed/imported immediately?","text":"<p><code>PHOTOPRISM_AUTO_INDEX</code> and <code>PHOTOPRISM_AUTO_IMPORT</code> let you specify how long PhotoPrism should wait before indexing or importing newly uploaded files. The default setting is 300 seconds, or 5 minutes. This is a safety mechanism for users with slow uploads to avoid incomplete file sets, for example when uploading pictures with sidecar files. You can therefore reduce the delay if you have a fast connection and usually do not upload stacks of related files such as RAW images with sidecar JPEG and XMP files.</p> <p>In some cases, it is also possible that the index is already being updated, so you will have to wait until the process is complete before indexing new files.</p>"},{"location":"getting-started/faq/#im-having-issues-understanding-the-difference-between-the-import-and-originals-folders","title":"I'm having issues understanding the difference between the import and originals folders?","text":"<p>You may optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates. Imported files receive a canonical filename and will be organized by year and month.</p> <p>Most users with existing photo libraries will want to index their originals folder directly without importing files, leaving the existing file and folder names unchanged. On the other hand importing is an efficient way to add files, since PhotoPrism doesn't have to search your originals folder to find new files.</p> <p>View First Steps Tutorial \u203a</p>"},{"location":"getting-started/faq/#can-i-use-photoprism-to-sort-files-into-a-configurable-folder-structure","title":"Can I use PhotoPrism to sort files into a configurable folder structure?","text":"<p>You have complete freedom in how you organize your originals. If you don't like the unique names and  folders used by the import function, you can resort to external batch renaming tools, for example ExifTool, PhockUp, or Photo Organizer.</p> <p>Configurable import folders may be available in a later version. This is because - depending on the specific  pattern - appropriate conflict resolution is required and the patterns must be well understood and validated  to avoid typos or other misconfigurations that lead to undesired results for which we do not want to be responsible.</p>"},{"location":"getting-started/faq/#why-is-only-the-logo-displayed-when-i-open-the-app","title":"Why is only the logo displayed when I open the app?","text":"<p>This may happen when the server cannot be reached, for example, because a proxy is misconfigured, JavaScript is disabled in your browser, an ad blocker is blocking requests, or you are using an incompatible browser.</p> <p>We recommend going through the checklist provided and to verify that your browser meets the system requirements.</p>"},{"location":"getting-started/faq/#why-is-photoprism-getting-stuck-in-a-restart-loop","title":"Why is PhotoPrism getting stuck in a restart loop?","text":"<p>This happens when Docker was configured to automatically restart services after failures.</p> <p>We recommend going through the checklist for fatal server errors and to verify that your computer meets the system requirements.</p>"},{"location":"getting-started/faq/#can-i-install-photoprism-in-a-sub-directory-on-a-shared-domain","title":"Can I install PhotoPrism in a sub-directory on a shared domain?","text":"<p>Setting up PhotoPrism behind a reverse proxy in a sub-directory on a shared domain is possible in principle. This method is experimental, however, and not generally recommended because a number of detailed issues remain to be addressed and technical expertise is required.</p>"},{"location":"getting-started/faq/#i-could-not-find-a-documentation-of-config-parameters","title":"I could not find a documentation of config parameters?","text":"<p>We maintain a complete list of config options in Getting Started. When you run <code>photoprism help</code> in a terminal,  all commands and parameters available in your currently installed version  are listed:</p> <pre><code>docker compose exec photoprism photoprism help\n</code></pre> <p>Our Docker Compose examples are continuously  updated and inline documentation has been added to simplify installation.</p>"},{"location":"getting-started/faq/#what-exactly-does-the-read-only-mode","title":"What exactly does the read-only mode?","text":"<p>When you enable read-only mode, all features that require write permission to the originals folder are disabled, for example import, upload, and delete. Set <code>PHOTOPRISM_READONLY</code> to <code>\"true\"</code> in <code>docker-compose.yml</code> for this. You can mount a folder with the <code>:ro</code> flag to make Docker block write operations as well.</p>"},{"location":"getting-started/faq/#in-which-cases-could-files-in-the-originals-folder-get-modified","title":"In which cases could files in the originals folder get modified?","text":"<p>PhotoPrism generally does not write to the originals folder, with the following exceptions: (1) You rotate an image in the user interface, so its Exif header must be updated. (2) You unstack files that were stacked based on their name, so they must be renamed. (3) You add files using the import functionality or the web upload. (4) You manually delete files in the user interface. (5) You have configured the originals folder as your sidecar folder. (6) You access the originals folder with a WebDAV client to manage your files without having read-only mode enabled.</p>"},{"location":"getting-started/faq/#how-can-i-uninstall-photoprism","title":"How can I uninstall PhotoPrism?","text":"<p>This depends on how you installed it. If you're running PhotoPrism with Docker Compose,  this command will stop and remove the Docker container:</p> <pre><code>docker compose rm -s -v\n</code></pre> <p>Please refer to the official Docker documentation  for further details.</p>"},{"location":"getting-started/faq/#how-can-i-mount-network-shares-with-docker","title":"How can I mount network shares with Docker?","text":"<p>Shared folders that have already been mounted on your host can be mounted like any local drive or directory. Alternatively, you can mount network storage with Docker Compose. Please never store database files on an unreliable device such as a USB stick, SD card, or network drive.</p> <p>Unix / NFS</p> <p>Follow this <code>docker-compose.yml</code> example to mount Network File System (NFS) shares e.g. from Unix servers or NAS devices:</p> <pre><code>services:\nphotoprism:\n# ...\nvolumes:\n# Map named volume \"originals\"\n# to \"/photoprism/originals\":\n- \"originals:/photoprism/originals\"     mariadb:\n# ...\n\n# Specify named volumes:\nvolumes:\noriginals:\ndriver_opts:\ntype: nfs\n# Authentication and other mounting options:\no: \"addr=1.2.3.4,username=user,password=secret,soft,rw,nfsvers=4\"\n# Mount this path:\ndevice: \":/mnt/example\"\n</code></pre> <p><code>device</code> should contain the path to the share on the NFS server, note the <code>:</code> at the beginning. In the above example, the share can be mounted as the named volume <code>originals</code> in your <code>docker-compose.yml</code>.</p> <p>Driver-specific options can be set after the server address in <code>o</code>, see the nfs manual page. Here are some examples of commonly used options:</p> <ul> <li><code>nfsvers=3</code> or <code>nfsvers=4</code> to specify the NFS version</li> <li><code>nolock</code> (optional): Remote applications on the NFS server are not affected by lock files inside the Docker container (only other processes inside the container are affected by locks)</li> <li><code>timeo=n</code> (optional, default 600): The NFS client waits <code>n</code> tenths of a second before retrying an NFS request</li> <li><code>soft</code> (optional): The NFS client aborts an NFS request after <code>retrans=n</code> unsuccessful retries, otherwise it retries indefinitely</li> <li><code>retrans=n</code> (optional, default 2): Sets the number of retries for NFS requests, only relevant when using <code>soft</code></li> </ul> <p>SMB / CIFS</p> <p>Follow this <code>docker-compose.yml</code> example to mount CIFS network shares, e.g. from Windows, NAS devices or Linux servers with Samba:</p> <pre><code>services:\nphotoprism:\n# ...\nvolumes:\n# Map named volume \"originals\"\n# to \"/photoprism/originals\":\n- \"originals:/photoprism/originals\"     mariadb:\n# ...\n\n# Specify named volumes:\nvolumes:\noriginals:\ndriver_opts:\ntype: cifs\no: \"username=user,password=secret,rw\"\ndevice: \"//host/folder\"\n</code></pre> <p>Then restart all services for the changes to take effect. Note that related values must start at the same indentation level in YAML and that tabs are not allowed for indentation. We recommend using 2 spaces, but any number will do as long as it is consistent.</p> <p>Mounting the import folder from a network drive that can also be accessed via other ways (e.g. CIFS) is handy  because you can dump all data from an SD card/camera directly to this folder and then start the import process under Library &gt; Import. PhotoPrism also has WebDAV support for remote file management and uploading, for example, through PhotoSync.</p>"},{"location":"getting-started/faq/#why-does-changing-permissions-using-chmod-does-not-work-for-my-network-shares","title":"Why does changing permissions using chmod does not work for my  network shares?","text":"<p>This is a common phenomenon with NFS shares. For security reasons, permissions must be changed on the server to take effect; unless the server allows them to be changed remotely, which depends on the settings.  Even then, the actual permissions on the server and those effective on the clients may be different in the worst case.</p>"},{"location":"getting-started/faq/#do-you-support-podman","title":"Do you support Podman?","text":"<p>Podman works just fine both in rootless and under root. Mind the SELinux which is enabled on  Red Hat compatible systems, you may hit permission error problems. </p> <p>More details on how to run PhotoPrism with Podman on CentOS in  this blog post,  it includes all the details including root and rootless modes, user mapping and SELinux.</p>"},{"location":"getting-started/faq/#any-plans-to-add-support-for-active-directory-ldap-or-other-centralized-account-management-options","title":"Any plans to add support for Active Directory, LDAP or other centralized account management options?","text":"<p>There is no single sign-on support yet as we didn't consider it essential for our initial release. Our team is currently working on OpenID Connect, which will be available in a future release.</p>"},{"location":"getting-started/faq/#your-app-is-really-terrible-can-i-tell-you-how-bad-it-is","title":"Your app is really terrible, can I tell you how bad it is?","text":"<p>Please take the time to read this documentation and determine the cause of your problem before opening invalid bug reports, starting a public \"shitstorm\" or insulting other community members in our chat rooms. Aside from being annoying for everyone, it also keeps our team from working on features and enhancements that users like you are waiting for. Visit photoprism.app/code-of-conduct to learn more.</p> <p>Professional Users</p> <p>Our Community Edition is designed primarily for small servers and home users. Professional users are welcome to contact us for a commercial solution.</p>"},{"location":"getting-started/raspberry-pi/","title":"Running PhotoPrism on a Raspberry Pi","text":"<p>Our stable version and development preview have been built into a single multi-arch Docker image for 64-bit AMD, Intel, and ARM processors.</p> <p>As a result, Raspberry Pi 3 / 4, Apple Silicon, and other ARM64-based devices can pull from the same repository, enjoy the same functionality, and can follow the regular installation instructions after going through a short list of system requirements.</p> <p>PhotoPrismPi</p> <p>The easiest way to run PhotoPrism on a Raspberry Pi is with PhotoPrismPi.<sup>1</sup> Simply flash the image to an SD card, plug it into the Pi and boot it. After a few minutes, our latest release will be ready to use!</p>"},{"location":"getting-started/raspberry-pi/#system-requirements","title":"System Requirements","text":"<ul> <li>Your device should have at least 3 GB of physical memory and a 64-bit operating system</li> <li>While PhotoPrism has been reported to work on devices with less memory, we take no responsibility for instability or performance problems</li> <li>RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory</li> <li>Indexing large photo and video collections significantly benefits from local SSD storage and plenty of memory for caching, especially the conversion of RAW images and the transcoding of videos are very demanding</li> <li>If less than 4 GB of swap space is configured or a manual memory/swap limit is set, this can cause unexpected restarts, for example, when the indexer temporarily needs more memory to process large files</li> <li>High-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum</li> <li>We recommend disabling kernel security in your    docker-compose.yml, especially if you do    not have experience with the configuration:   <pre><code>photoprism:\nsecurity_opt:\n- seccomp:unconfined\n- apparmor:unconfined\n</code></pre></li> <li>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy such as Traefik or Caddy</li> </ul>"},{"location":"getting-started/raspberry-pi/#architecture-specific-notes","title":"Architecture Specific Notes","text":""},{"location":"getting-started/raspberry-pi/#modern-arm64-based-devices","title":"Modern ARM64-based Devices","text":"Image Name Stable Release <code>photoprism/photoprism:latest</code> Development Preview <code>photoprism/photoprism:preview</code> MariaDB <code>arm64v8/mariadb:10.11</code> <p>Running 64-bit Docker images under Raspbian Linux requires a minimum of technical experience to perform the necessary configuration changes. This is because it is a 32-bit operating system with merely a 64-bit kernel to ensure compatibility with legacy software.  If you don't need compatibility with 32-bit apps, we recommend choosing a standard 64-bit Linux distribution instead as it will save you time and requires less experience:</p> <ul> <li>Raspberry Pi Debian</li> <li>Ubuntu for Raspberry Pi</li> <li>UbuntuDockerPi is a 64-bit Ubuntu Server with Docker pre-configured</li> </ul> <p>Other distributions that target the same use case as Raspbian, such as CoreELEC, will have similar issues and should therefore also be avoided to run modern server applications.</p>"},{"location":"getting-started/raspberry-pi/#raspberry-pi-os","title":"Raspberry Pi OS","text":"<p>To ensure compatibility with 64-bit Docker images, your Raspberry Pi 3 / 4 must boot with the <code>arm_64bit=1</code> flag in its config.txt file. An \"exec format\" error will occur otherwise.</p> <p>Try explicitly pulling the ARM64 version if you've booted your device with the <code>arm_64bit=1</code> flag  and you see the \"no matching manifest\" error on Raspberry Pi OS (Raspbian):</p> <pre><code>docker pull --platform=arm64 photoprism/photoprism:latest\n</code></pre> <p>It may also help to set the <code>DOCKER_DEFAULT_PLATFORM</code> environment variable to <code>linux/arm64</code>.</p> <p>In case you see Docker errors related to \"cgroups\", try adding the following parameters to  <code>/boot/firmware/cmdline.txt</code> or <code>/boot/cmdline.txt</code> (file location depends on the OS in use):</p> <pre><code>cgroup_enable=cpuset cgroup_enable=memory cgroup_memory=1\n</code></pre>"},{"location":"getting-started/raspberry-pi/#older-armv7-based-devices","title":"Older ARMv7-based Devices","text":"<p>You may use the following 32-bit Docker images to run PhotoPrism and MariaDB on ARMv7-based devices (always use our ARM64 image if possible):</p> Image Name Stable Release <code>photoprism/photoprism:armv7</code> Development Preview <code>photoprism/photoprism:preview-armv7</code> MariaDB <code>linuxserver/mariadb:latest</code> <p>If your device meets the requirements, mostly the same installation instructions as  for regular Linux servers apply. Please pay close attention to changed directory and environment variable names.</p> <p>Darktable is not included in the ARMv7 image because it is not 32-bit compatible. Always choose the regular 64-bit version if your device supports it.</p>"},{"location":"getting-started/raspberry-pi/#is-a-raspberry-pi-fast-enough","title":"Is a Raspberry Pi fast enough?","text":"<p>This largely depends on your expectations and the number of files you have. Most users report that PhotoPrism runs smoothly on their Raspberry Pi 4. However, initial indexing typically takes much longer than on standard desktop computers.</p> <p>Also keep in mind that the hardware has limited video transcoding capabilities, so the conversion of video file formats is not well-supported and software transcoding is generally slow.</p>"},{"location":"getting-started/raspberry-pi/#getting-updates","title":"Getting Updates","text":"<p>Open a terminal and change to the folder where the <code>docker-compose.yml</code> file is located.<sup>2</sup> Now run the following commands to download the most recent image from Docker Hub and restart your instance in the background:</p> <pre><code>docker compose pull\ndocker compose stop\ndocker compose up -d\n</code></pre> <p>Pulling a new version can take several minutes, depending on your internet connection speed.</p> <p>Advanced users can add this to a <code>Makefile</code> so that they only have to type a single command like <code>make update</code>. See Command-Line Interface  to learn more about terminal commands.</p> <p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. You can either manually upgrade as shown above, or set up a service like Watchtower to get automatic updates.</p>"},{"location":"getting-started/raspberry-pi/#config-examples","title":"Config Examples","text":"<p>We recommend that you compare your own <code>docker-compose.yml</code> with our latest examples from time to time, as they may include new config options or other enhancements relevant to you.</p>"},{"location":"getting-started/raspberry-pi/#mariadb-server","title":"MariaDB Server","text":"<p>Our config examples are generally based on the latest stable release to take advantage of performance enhancements. This does not mean older versions are no longer supported and you have to upgrade immediately.</p> <p>If MariaDB fails to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. See Troubleshooting MariaDB Problems for instructions on how to fix this.</p>"},{"location":"getting-started/raspberry-pi/#troubleshooting","title":"Troubleshooting","text":"<p>If your device runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the performance of your device</li> <li> Make sure your device has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/raspberry-pi/#credits","title":"Credits","text":"<ol> <li> <p>A big thank you to Guy Sheffer for helping us build a Raspberry Pi version!\u00a0\u21a9</p> </li> <li> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/updates/","title":"Getting Updates","text":""},{"location":"getting-started/updates/#docker-compose","title":"Docker Compose","text":"<p>Open a terminal and change to the folder where the <code>docker-compose.yml</code> file is located.<sup>1</sup> Now run the following commands to download the most recent image from Docker Hub and restart your instance in the background:</p> <pre><code>docker compose pull\ndocker compose stop\ndocker compose up -d\n</code></pre> <p>Note that our guides now use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code>.</p> <p>Pulling a new version can take several minutes, depending on your internet connection speed.</p> <p>Advanced users can add this to a <code>Makefile</code> so that they only have to type a single  command like <code>make update</code>. See Command-Line Interface to learn more about terminal commands.</p> <p>Even when you use an image with the <code>:latest</code> tag, Docker does not automatically download new images for you. You can either manually upgrade as shown above, or set up a service like Watchtower to get automatic updates.</p>"},{"location":"getting-started/updates/#config-examples","title":"Config Examples","text":"<p>We recommend that you compare your own <code>docker-compose.yml</code> with our latest examples from time to time, as they may include new config options or other enhancements relevant to you.</p>"},{"location":"getting-started/updates/#development-preview","title":"Development Preview","text":"<p>You can test upcoming features and enhancements by changing the image from <code>photoprism/photoprism:latest</code> to <code>photoprism/photoprism:preview</code> in your <code>docker-compose.yml</code>. Then pull the most recent image and restart your instance as shown above.</p>"},{"location":"getting-started/updates/#watchtower","title":"Watchtower","text":"<p>Adding Watchtower as a service to your <code>docker-compose.yml</code> will automatically keep images up-to-date:</p> <pre><code>services:\nwatchtower:\nimage: containrrr/watchtower\nrestart: unless-stopped\nvolumes:\n- \"/var/run/docker.sock:/var/run/docker.sock\"\n</code></pre> <p>Users of our DigitalOcean 1-Click App have Watchtower pre-installed.</p> <p>Danger</p> <p>Keep in mind that automatic updates can interrupt indexing and import operations, and enable Watchtower only if this is acceptable to you.</p>"},{"location":"getting-started/updates/#portainer","title":"Portainer","text":"<p>You can change or update the image you are using by navigating to \"Stacks\", selecting your existing PhotoPrism stack, and clicking \"Editor\":</p> <p></p> <p>When you have changed the configuration to your needs or just want to get the latest image from Docker Hub, scroll down, click on \"Update the stack\", enable the \"re-pull and redeploy\" option, and then click on \"Update\":</p> <p></p>"},{"location":"getting-started/updates/#pure-docker","title":"Pure Docker","text":"<p>Open a terminal on your server, and run the following command to pull the most recent container image:</p> <pre><code>docker pull photoprism/photoprism:latest\n</code></pre> <p>See Running PhotoPrism with Docker for a command reference.</p>"},{"location":"getting-started/updates/#complete-rescan","title":"Complete Rescan","text":"<p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>You can start a rescan from the user interface by navigating to Library &gt; Index, selecting \"Complete Rescan\", and then clicking \"Start\". Manually entered information such as labels, people, titles or descriptions will not be modified when indexing, even if you perform a \"complete rescan\".</p> <p>Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"getting-started/updates/#face-recognition","title":"Face Recognition","text":"<p>Existing users may index faces without performing a complete rescan:</p> <pre><code>docker compose exec photoprism photoprism faces index\n</code></pre> <p>Remove existing people and faces for a clean start e.g. after upgrading from our  development preview:</p> <pre><code>docker compose exec photoprism photoprism faces reset -f\n</code></pre>"},{"location":"getting-started/updates/#mariadb-server","title":"MariaDB Server","text":"<p>Our configuration examples are generally based on the current stable version to take advantage of performance improvements. This does not mean that older versions are no longer supported and you must upgrade immediately. We recommend not using the <code>:latest</code> tag for the MariaDB Docker image and to upgrade manually by changing the tag once we had a chance to test a new major version, e.g.:</p> <pre><code>services:\nmariadb:\nimage: mariadb:10.11\n...\n</code></pre> <p>If MariaDB fails to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. See Troubleshooting MariaDB Problems for instructions on how to fix this.</p>"},{"location":"getting-started/updates/#raspberry-pi","title":"Raspberry Pi","text":"<p>Our stable version and development preview have been built into a single multi-arch Docker image for 64-bit AMD, Intel, and ARM processors.</p> <p>That means, Raspberry Pi 3 / 4, Apple Silicon, and other ARM64-based devices can pull from the same repository, enjoy the exact same functionality, and can follow the regular Installation Instructions after going through a short list of System Requirements and Architecture Specific Notes.</p> <p>Try explicitly pulling the ARM64 version if you've booted your device with the <code>arm_64bit=1</code> flag and you see the \"no matching manifest\" error on Raspberry Pi OS (Raspbian):</p> <pre><code>docker pull --platform=arm64 photoprism/photoprism:latest\n</code></pre> <p>If you do not have legacy software, we recommend choosing a standard 64-bit Linux distribution as this requires less experience. Alternative 32-bit Docker images are provided for ARMv7-based devices.</p> <p>Darktable is not included in the ARMv7 version because it is not 32-bit compatible.</p>"},{"location":"getting-started/updates/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project! </p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"getting-started/updates/#how-can-i-shorten-the-startup-time-after-a-restart-or-update","title":"How can I shorten the startup time after a restart or update?","text":"<p>To reduce startup time, do not set <code>PHOTOPRISM_INIT</code> to avoid running additional setup scripts, and set <code>PHOTOPRISM_DISABLE_CHOWN</code> to <code>\"true\"</code> to disable automatic permission updates.</p> <p>If your instance doesn't start even after waiting for some time, our Troubleshooting Checklists help you quickly diagnose and solve the problem.</p> <ol> <li> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/using-a-cdn/","title":"Using a Content Delivery Network (CDN)","text":"<p>A Content Delivery Network is a distributed network of servers that can deliver static content to users around the world.</p>"},{"location":"getting-started/using-a-cdn/#when-to-use-a-cdn","title":"When to use a CDN?","text":"<p>Large Media Files: PhotoPrism stores photos and videos that can be very large. A CDN can help speed up the delivery of these files to users.</p> <p>Global Audience: If your PhotoPrism instance is accessed from different locations around the world, a CDN can help reduce latency and improve the overall user experience by delivering content from servers that are closer to your users.</p> <p>Many Users: If your PhotoPrism instance is getting a lot of traffic, a CDN can improve application performance by reducing the load on your server.</p> <p></p>"},{"location":"getting-started/using-a-cdn/#config-options","title":"Config Options","text":"<p>You can use the following config options to specify the URL of an external CDN and change the cache expiration time for thumbnails and other static content:</p> Environment CLI Flag Default Description PHOTOPRISM_CDN_URL --cdn-url content delivery network <code>URL</code> PHOTOPRISM_CDN_VIDEO --cdn-video false stream videos over the specified CDN PHOTOPRISM_HTTP_CSP --http-csp HTTP Content-Security-Policy (CSP) <code>HEADER</code> plus PHOTOPRISM_HTTP_CACHE_MAXAGE --http-cache-maxage 2592000 time in <code>SECONDS</code> until cached content expires PHOTOPRISM_HTTP_CACHE_PUBLIC --http-cache-public true allow static content to be cached by a CDN or caching proxy"},{"location":"getting-started/using-a-cdn/#cdn-providers","title":"CDN Providers","text":""},{"location":"getting-started/using-a-cdn/#bunnynet","title":"bunny.net","text":"<p> If you don't have a CDN provider yet, we can recommend bunny.net. This EU-based company has a cute name, but is a reputable provider with excellent performance, a wide range of features, and more than 20,000 customers including big names like Hyundai. We also chose bunny.net for our website and public demo as they are fully compliant with the GDPR.<sup>1</sup></p> <p>Pricing starts at $0.005/GB and there is no minimum usage or monthly fee, so you only pay for what you actually need.</p> <p>Learn more \u203a</p> <ol> <li> <p>We receive a $20 credit when you sign up through our link, which helps us fund the project infrastructure.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/advanced/backups/","title":"Advanced Backup Guide","text":"<p>A backup of PhotoPrism should include, at a minimum, the files in your originals folder and a copy of the index database. We also recommend backing up the storage folder so that you don't need to recreate the thumbnails and your backup includes all config files.</p> <p>You can create an index SQL backup by running this command in a terminal:</p> <pre><code>photoprism backup -i [filename]\n</code></pre> <p>Or the following for docker-compose:</p> <pre><code>docker compose exec -T photoprism photoprism backup -i - &gt; photoprism-db.sql\n</code></pre> <p>As seen above, you can use <code>-</code> as filename to write the backup to stdout. This is done to ensure the backup resides outside of the container environment.</p> <p>If you leave the filename empty, the backup will be written to the default backup folder configured via <code>PHOTOPRISM_BACKUP_PATH</code>.</p> <p>If you want, you can also export your cache and thumbnails, but it can also be re-generated after restore. It will save you from re-generating thumbnails from scratch however.</p> <p>Helpful information can be found on GitHub as well.</p>"},{"location":"getting-started/advanced/backups/#sqlite-backups","title":"SQLite Backups","text":"<p>Creating SQL dumps from SQLite is currently not supported by the <code>photoprism backup</code> command, since SQLite files are located in the storage folder and thus should automatically be part of any backup.</p> <p>However, if you prefer to have a dump, you can run this command to create one:</p> <pre><code>docker compose exec -T photoprism sqlite3 /photoprism/storage/index.db .dump &gt; photoprism-db.sql\n</code></pre> <p>If you use pure <code>docker</code>, you can run the following (or replace <code>docker</code> with <code>podman</code> on Red Hat-based Linux distributions):</p> <pre><code>docker exec -t PhotoPrism sqlite3 /photoprism/storage/index.db .dump &gt; photoprism-db.sql\n</code></pre>"},{"location":"getting-started/advanced/backups/#restore-backups","title":"Restore Backups","text":"<p>See our user guide to learn how to restore backups.</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/advanced/caching/","title":"Optimizing Cache Performance","text":"<p>For advanced users only. This guide is maintained by the community and may contain inaccurate or incomplete advice. You can contribute by clicking  to send a pull request with your changes.</p> <p>Some users might want to place the thumbnail cache on a separate, faster file system while keeping the actual photo files on large, slow bulk storage. This should result in faster access to the thumbnails. </p> <p>To do this, we add a further volume (<code>-v</code>) parameter to the docker script so we use an external path (outside the container) for the cache files. You can get the internal path with <code>photoprism config</code>, or as a docker command in a running system (for Linux/BSD systems): </p> <pre><code>sudo docker exec photoprism photoprism config | grep cache-path\n</code></pre> <p>This should return a line such as:</p> <pre><code>cache-path            /home/photoprism/.cache/photoprism\n</code></pre> <p>for the internal path. We now know to add a line like</p> <pre><code>  -v &lt;MYCACHE_FOLDER&gt;:/home/photoprism/.cache/photoprism \\\n</code></pre> <p>to the docker invocation, with your actual path to the cache folder replacing <code>&lt;MYCACHE_FOLDER&gt;</code>. </p> <p>As an example, let's assume a ZFS filesystem with two pools (\"volumes\" in classical terminology): A pool tank in a raidz2 (RAID6) configuration based on hard drives that holds the original pictures, and a pool dozer in a mirrored (RAID1) configuration based on SSD or NVMe drives to store the thumbnails. Our docker script could be:</p> <pre><code>docker run -d \\\n  --name photoprism \\\n  -p 2342:2342 \\\n  -v /tank/photos/:/home/photoprism/Pictures/Originals \\\n  -v /dozer/cache/:/home/photoprism/.cache/photoprism \\\n  photoprism/photoprism:latest\n</code></pre> <p>In a case like this, you will probably also want to optimize the datasets (\"file systems\") <code>tank/photos</code> and <code>dozer/cache</code> further. For instance, the original photo files will call for a larger recordsize than the smaller cache files.</p>"},{"location":"getting-started/advanced/databases/","title":"Advanced Database Setup","text":"<p>Note that this guide is intended for advanced users and that our docker-compose.yml examples already contain a tested and working database configuration. You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/advanced/databases/#compatibility","title":"Compatibility","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+. Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p> <p>Our configuration examples are generally based on the current stable version to take advantage of performance improvements. This does not mean that older versions are no longer supported and you must upgrade immediately. We recommend not using the <code>:latest</code> tag for the MariaDB Docker image and to upgrade manually by changing the tag once we had a chance to test a new major version.</p>"},{"location":"getting-started/advanced/databases/#storage","title":"Storage","text":"<p>Local Solid-State Drives (SSDs) are best for databases of any kind. Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p>"},{"location":"getting-started/advanced/databases/#configuration","title":"Configuration","text":"<p>When creating a new database, make sure to set the charset and collation as follows:</p> <pre><code>CREATE DATABASE photoprism\nCHARACTER SET = 'utf8mb4'\nCOLLATE = 'utf8mb4_unicode_ci';\n</code></pre> <p>Now create a user and grant privileges for this new database:</p> <pre><code>CREATE USER 'photoprism'@'%' IDENTIFIED BY 'insecure';\nGRANT ALL PRIVILEGES ON photoprism.* to 'photoprism'@'%';\nFLUSH PRIVILEGES;\n</code></pre> <p>Set the database environment variables for PhotoPrism and MariaDB as follows:</p> <pre><code>services:\nphotoprism:\nenvironment:\nPHOTOPRISM_DATABASE_DRIVER: \"mysql\"\nPHOTOPRISM_DATABASE_SERVER: \"mariadb:3306\"\nPHOTOPRISM_DATABASE_NAME: \"photoprism\"\nPHOTOPRISM_DATABASE_USER: \"photoprism\"\nPHOTOPRISM_DATABASE_PASSWORD: \"insecure\"\n\nmariadb:\nenvironment:\nMARIADB_AUTO_UPGRADE: \"1\"\nMARIADB_INITDB_SKIP_TZINFO: \"1\"\nMARIADB_DATABASE: \"photoprism\"\nMARIADB_USER: \"photoprism\"\nMARIADB_PASSWORD: \"insecure\"\nMARIADB_ROOT_PASSWORD: \"insecure\"\n</code></pre> <p>Set strong passwords if the database is exposed to an external network. Never expose your database to the public Internet in this way, for example, if it is running on a cloud server.</p>"},{"location":"getting-started/advanced/databases/#schema-migrations","title":"Schema Migrations","text":"<p>An index schema migration is performed automatically every time PhotoPrism is (re)started. The following instructions may be helpful in special cases, such as when a temporary problem has prevented a successful migration:</p> <p>Run Migrations \u203a</p>"},{"location":"getting-started/advanced/databases/#change-database","title":"Change Database","text":"<p>Migrate from SQLite to MariaDB \u203a</p> <p>Migrate from MariaDB to SQLite \u203a</p> <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>Due to the amount of time required to review each report, we can only offer this to eligible members and business customers, and not to users who have chosen our free community edition.</p> <p>Get Performance Tips \u203a View Database Schema \u203a </p>"},{"location":"getting-started/advanced/docker-security/","title":"Docker Security Guide","text":"<p>For advanced users only. This guide is maintained by the community and may contain inaccurate or incomplete advice. You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/advanced/docker-security/#run-services-as-non-root-user","title":"Run Services as Non-Root User","text":"<p>It is recommended that you run the PhotoPrism service as a non-root user by setting either the <code>user</code> service property or the <code>PHOTOPRISM_UID</code> environment variable in your <code>docker-compose.yml</code> file.</p> <p>Remember to update the file permissions and/or ownership with the <code>chmod</code> and <code>chown</code> commands when you make changes to these settings.</p>"},{"location":"getting-started/advanced/docker-security/#remove-passwords-from-the-environment","title":"Remove Passwords From the Environment","text":"<p>Passwords specified directly in a  <code>docker-compose.yml</code> file or otherwise passed to the container environment may pose a security risk. As an alternative, they can be set in an options.yml file located in the config storage folder:</p> <pre><code>AdminPassword: \"my super secret password\"\nDatabasePassword: \"my super secret password\"\n</code></pre> <p>Likewise, MariaDB can be configured to use Docker secret files. For details, see the Docker Compose Documentation.</p> <p>The following is an example of the changes to the <code>docker-compose.yml</code> file. Note that this example includes only the additional lines required to pass secret files to the MariaDB container:</p> <pre><code>secrets:\n# Secrets are single-line text files where the sole\n# content is the secret. Paths in this example assume\n# that secrets are kept in local \".secrets\" folder. \nDB_ROOT_PWD:\nfile: .secrets/db_root_pwd.txt\nDB_PWD:\nfile: .secrets/db_pwd.txt\n\nservices:\nmariadb:\nenvironment:\n# Change the env variables to _FILE and point them to\n# the file locations within the container.\nMARIADB_PASSWORD_FILE: /run/secrets/DB_PWD\nMARIADB_ROOT_PASSWORD_FILE: /run/secrets/DB_ROOT_PWD\nsecrets:\n# Give the container access to the secrets to mount\n# the files within the container.\n- DB_ROOT_PWD\n- DB_PWD\n</code></pre>"},{"location":"getting-started/advanced/docker-security/#rootless-docker","title":"Rootless Docker","text":"<p>In addition, you can run the Docker daemon as a non-root user in rootless mode. Configuring this is beyond the scope of this guide. For more information and instructions, see the Docker Security Documentation.</p>"},{"location":"getting-started/advanced/docker-volumes/","title":"Docker Volume Mounts","text":"<p>When using Docker, all application services run in isolated containers, so you must explicitly mount the host folders you want to use. Be aware that PhotoPrism and MariaDB cannot see folders that have not been mounted. This is an important security feature.</p>"},{"location":"getting-started/advanced/docker-volumes/#originals-folder","title":"Originals Folder","text":"<p>The originals folder contains your original photo and video files.</p> <p><code>~/Pictures</code> will be mounted by default, where <code>~</code> is a shortcut for your home directory:</p> <pre><code>volumes:\n# \"/host/folder:/photoprism/folder\"  # example\n- \"~/Pictures:/photoprism/originals\"\n</code></pre> <p>You can mount any folder accessible from the host, including network shares. Additional directories can also be mounted as sub folders of <code>/photoprism/originals</code> (depending on overlay file system support):</p> <pre><code>volumes:\n- \"/home/username/Pictures:/photoprism/originals\"\n- \"/example/friends:/photoprism/originals/friends\"\n- \"/mnt/photos:/photoprism/originals/media\"\n</code></pre> <p>On Windows, prefix the host path with the drive letter and use <code>/</code> instead of <code>\\</code> as separator:</p> <pre><code>volumes:\n- \"D:/Example/Pictures:/photoprism/originals\"\n</code></pre> <p>If read-only mode is enabled, all features that require write permission to the originals folder are disabled, e.g. WebDAV, uploading and deleting files. Set <code>PHOTOPRISM_READONLY</code> to <code>\"true\"</code> in <code>docker-compose.yml</code> for this. You can mount a folder with the <code>:ro</code> flag to make Docker block write operations as well.</p>"},{"location":"getting-started/advanced/docker-volumes/#storage-folder","title":"Storage Folder","text":"<p>SQLite, config, cache, thumbnail and sidecar files are saved in the storage folder:</p> <ul> <li>a storage folder mount must always be configured in your <code>docker-compose.yml</code> file so that you do not lose these files after a restart or upgrade</li> <li>never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden</li> <li>we recommend placing the storage folder on a local SSD drive for best performance</li> <li>mounting symbolic links or using them inside the storage folder is currently not supported</li> </ul> <p>Should you later want to move your instance to another host, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>"},{"location":"getting-started/advanced/docker-volumes/#import-folder","title":"Import Folder","text":"<p>You can optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates:</p> <ul> <li>imported files receive a canonical filename and will be organized by year and month</li> <li>never configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files</li> </ul> <p>You can safely skip this. Adding files via Web Upload and WebDAV remains possible, unless read-only mode is enabled or the features have been disabled.</p>"},{"location":"getting-started/advanced/docker-volumes/#mariadb-database","title":"MariaDB Database","text":"<p>Our example includes a pre-configured MariaDB database server that stores it files in the <code>database</code> folder by default. If you remove it and provide no other database server credentials, SQLite database files will be created in the storage folder.</p> <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files. We strongly recommend using SSD storage for databases only.</p>"},{"location":"getting-started/advanced/docker-volumes/#network-storage","title":"Network Storage","text":"<p>Shared folders that have already been mounted on your host can be mounted like any local drive or directory. Alternatively, you can mount network storage with Docker Compose. Please never store database files on an unreliable device such as a USB stick, SD card, or network drive.</p>"},{"location":"getting-started/advanced/docker-volumes/#unix-nfs","title":"Unix / NFS","text":"<p>Follow this <code>docker-compose.yml</code> example to mount Network File System (NFS) shares e.g. from Unix servers or NAS devices:</p> <pre><code>services:\nphotoprism:\n# ...\nvolumes:\n# Map named volume \"originals\"\n# to \"/photoprism/originals\":\n- \"originals:/photoprism/originals\"     mariadb:\n# ...\n\n# Specify named volumes:\nvolumes:\noriginals:\ndriver_opts:\ntype: nfs\n# Authentication and other mounting options:\no: \"addr=1.2.3.4,username=user,password=secret,soft,rw,nfsvers=4\"\n# Mount this path:\ndevice: \":/mnt/example\"\n</code></pre> <p><code>device</code> should contain the path to the share on the NFS server, note the <code>:</code> at the beginning. In the above example, the share can be mounted as the named volume <code>originals</code>. You can also choose another name as long as it is consistent.</p> <p>Driver-specific options can be set after the server address in <code>o</code>, see the nfs manual page. Here are some examples of commonly used options:</p> <ul> <li><code>nfsvers=3</code> or <code>nfsvers=4</code> to specify the NFS version</li> <li><code>nolock</code> (optional): Remote applications on the NFS server are not affected by lock files inside the Docker container (only other processes inside the container are affected by locks)</li> <li><code>timeo=n</code> (optional, default 600): The NFS client waits <code>n</code> tenths of a second before retrying an NFS request</li> <li><code>soft</code> (optional): The NFS client aborts an NFS request after <code>retrans=n</code> unsuccessful retries, otherwise it retries indefinitely</li> <li><code>retrans=n</code> (optional, default 2): Sets the number of retries for NFS requests, only relevant when using <code>soft</code></li> </ul>"},{"location":"getting-started/advanced/docker-volumes/#smb-cifs","title":"SMB / CIFS","text":"<p>Follow this <code>docker-compose.yml</code> example to mount CIFS network shares, e.g. from Windows, NAS devices or Linux servers with Samba:</p> <pre><code>services:\nphotoprism:\n# ...\nvolumes:\n# Map named volume \"originals\"\n# to \"/photoprism/originals\":\n- \"originals:/photoprism/originals\"     mariadb:\n# ...\n\n# Specify named volumes:\nvolumes:\noriginals:\ndriver_opts:\ntype: cifs\no: \"username=user,password=secret,rw\"\ndevice: \"//host/folder\"\n</code></pre> <p>Then restart all services for the changes to take effect. Note that related values must start at the same indentation level in YAML and that tabs are not allowed for indentation. We recommend using 2 spaces, but any number will do as long as it is consistent.</p>"},{"location":"getting-started/advanced/kubernetes/","title":"Running PhotoPrism with Kubernetes","text":"<p>For advanced users only. This guide is maintained by the community and may contain inaccurate or incomplete advice. You can contribute by clicking  to send a pull request with your changes.</p> <p>Running PhotoPrism on a Kubernetes cluster is straightforward.</p> <p>At a minimum, you can just define a Kubernetes <code>Service</code> and a <code>StatefulSet</code> and be up and running. For more real-world usage, you'll probably want to at least include persistent storage, and possibly some <code>Ingress</code> rules for exposing PhotoPrism outside your cluster.</p> <p>For those familiar with Helm, a PhotoPrism Helm chart is available.</p> <p>Once you've got PhotoPrism deployed, you can <code>exec</code> into the running container and <code>photoprism import</code> your photos.</p> <p>Here's an example of a YAML file that creates the following Kubernetes objects:</p> <ul> <li><code>Namespace</code></li> <li><code>Service</code> exposing PhotoPrism on port 80</li> <li><code>StatefulSet</code> with persistent NFS volumes</li> <li><code>Secret</code> which stores the database DSN and admin password</li> <li><code>Ingress</code> rule for a Kubernetes ingress controller</li> <li>Annotations for a Kubernetes <code>Certificate Manager</code></li> </ul> <pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\nname: photoprism\n---\napiVersion: v1\nkind: Secret\nmetadata:\nname: photoprism-secrets\nnamespace: photoprism\nstringData:\nPHOTOPRISM_ADMIN_PASSWORD: &lt;your admin password here&gt;\nPHOTOPRISM_DATABASE_DSN: username:password@tcp(db-server-address:3306)/dbname?charset=utf8mb4,utf8&amp;parseTime=true\n---\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\nname: photoprism\nnamespace: photoprism\nspec:\nselector:\nmatchLabels:\napp: photoprism\nserviceName: photoprism\nreplicas: 1\ntemplate:\nmetadata:\nlabels:\napp: photoprism\nspec:\ncontainers:\n- name: photoprism\nimage: photoprism/photoprism:latest\nenv:\n- name: PHOTOPRISM_DEBUG\nvalue: \"true\"\n- name: PHOTOPRISM_DATABASE_DRIVER\nvalue: mysql\n- name: PHOTOPRISM_HTTP_HOST\nvalue: 0.0.0.0\n- name: PHOTOPRISM_HTTP_PORT\nvalue: \"2342\"\n# Load database DSN &amp; admin password from secret\nenvFrom:\n- secretRef:\nname: photoprism-secrets\noptional: false\nports:\n- containerPort: 2342\nname: http\nvolumeMounts:\n- mountPath: /photoprism/originals\nname: originals\n- mountPath: /photoprism/import\nname: import\n- mountPath: /photoprism/storage\nname: storage\nreadinessProbe:\nhttpGet:\npath: /api/v1/status\nport: http\nvolumes:\n- name: originals\nnfs:\npath: /originals\n# readOnly: true # Disables import and upload!\nserver: my.nas.host\n- name: import\nnfs:\npath: /import\nserver: my.nas.host\n- name: storage\nnfs:\npath: /storage\nserver: my.nas.host\n---\napiVersion: v1\nkind: Service\nmetadata:\nname: photoprism\nnamespace: photoprism\nspec:\nports:\n- name: http\nport: 80\nprotocol: TCP\ntargetPort: http\nselector:\napp: photoprism\ntype: ClusterIP\n---\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\nannotations:\n# For nginx ingress controller:\nkubernetes.io/ingress.class: nginx\n# Default is very low so most photo uploads will fail:\nnginx.ingress.kubernetes.io/proxy-body-size: \"512M\"\n# If using cert-manager:\ncert-manager.io/cluster-issuer: letsencrypt-prod\nkubernetes.io/tls-acme: \"true\"\nname: photoprism\nnamespace: photoprism\nspec:\nrules:\n- host: photoprism.my.domain\nhttp:\npaths:\n- backend:\nservice:\nname: photoprism\nport:\nname: http\npath: /\npathType: Prefix\ntls:\n- hosts:\n- photoprism.my.domain\nsecretName: photoprism-cert\n</code></pre> <p>To run this locally, you can use minikube or a similar local cluster deployer.</p> <p>Once your cluster is up and running with your <code>kubectl</code> commands. Simply copy the above YAML markup to a file, make the necessary changes, and use the <code>kubectl</code> CLI command to deploy:</p> <pre><code>kubectl create -f photoprism.yaml\n</code></pre> <p>If you prefer to use helm, see p80n/photoprism-helm.</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/","title":"Advanced NGINX Proxy Setup","text":"<p>For advanced users only. This guide is maintained by the community and may contain inaccurate or incomplete advice. You can contribute by clicking  to send a pull request with your changes.</p> <p>Getting Support</p> <p>Since NGINX is notoriously difficult to configure, we unfortunately can't offer you support in case something isn't working. If you have NGINX related issues such as failed uploads, connection errors, broken thumbnails, and video playback problems, we recommend that you ask the NGINX community for advice or try to use Traefik as a reverse proxy, as it is easier to configure and much more convenient to work with overall.</p> <p>Using a reverse proxy in front of PhotoPrism has various benefits:</p> <ul> <li>Make use of HTTP/2</li> <li>Add encryption</li> <li>Perform traffic optimization</li> <li>Enhance security (NGINX may block dangerous request patterns the embedded Go-based HTTP server does not know about)</li> </ul> <p>If you consider exposing your PhotoPrism instance to the evil internet, you should at least secure it with a proper HTTPS encryption.</p> <p>This guide aims for a little more advanced setup, with good security in mind.</p> <p>Trough the entire guide we use <code>photoprism.example.com</code> as domain. You have to change all these occurrences with your own domain / DynDNS.</p> <p>Also, this was all tested on <code>ubuntu/20.04</code> - But the commands should work on a lot of other versions as well. If you use CentOS, SuSE, or any other distro, look up the commands for your package manager.</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/#setup","title":"Setup","text":""},{"location":"getting-started/advanced/nginx-proxy-setup/#domain-setup","title":"Domain setup","text":"<p>First, we need to decide what we want to use as domain / address. We will use a proper domain in this guide, but it will technically also work with just a static IP address. </p> <p>If you're lucky enough to have your own domain, just create a subdomain and use this for PhotoPrism.</p> <p>If you want to expose your instance hosted at home, just use a DynDNS  provider (just duckduckgo it, there a multiple ones that are free).</p> <p>Tip</p> <p>if you're new to DynDNS it might be good to know that most routers do support DynDNS.  Therefore only minimal setup is required. Just search for <code>your router name + DynDNS</code> ;)</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/#install-nginx-on-your-machine","title":"Install NGINX on your machine","text":"<p>If not already done, install the webserver on your machine which you wish to use as proxy.  This also can be the same host that is running the docker container. <pre><code>apt-get update &amp;&amp; apt-get install -y nginx apache2-utils\n</code></pre></p> <p>Info</p> <p>We use <code>apache2-utils</code> later for the password generation of the optional extra security with http basic auth.</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/#acquire-a-certificate","title":"Acquire a certificate","text":""},{"location":"getting-started/advanced/nginx-proxy-setup/#install-cerbot","title":"Install cerbot","text":"<p>Luckily nowadays there is a free certificate authority called Let's Encrypt. You can just use  their <code>certbot</code> tool and acquire a new certificate in seconds.</p> <p>For Ubuntu / Debian the package is directly in the repository. Therefore, you can easily install it using this command: </p> <pre><code>apt-get update &amp;&amp; apt-get install -y certbot python3-certbot-nginx\n</code></pre>"},{"location":"getting-started/advanced/nginx-proxy-setup/#generate-the-certificate","title":"Generate the certificate","text":"<p>Now, just request a new certificate by using this command: </p> <pre><code>certbot -d photoprism.example.com\n</code></pre> <p>After that you should have a new certificate in: <code>/etc/letsencrypt/live/photoprism.example.com/</code></p> <p>Note</p> <p>In order for Let's Encrypt to work, the server has to be accessible from the internet on port 443</p> <p>Tip</p> <p>Please refer to Let's Encrypts documentation for automated certificate renewal. The certificates are valid for around 90 days.</p>"},{"location":"getting-started/advanced/nginx-proxy-setup/#setup-nginx","title":"Setup NGINX","text":"<p>Now that we have our certificate its time to setup the NGINX itself. Since it is best practice to create a configuration file per application / domain, this is exactly what we gonna do.</p> <p>Create a new file <code>/etc/nginx/sites-available/photoprism.example.com</code> and put the following content in it. Keep in mind to change the domain (there a multiple entries!) <pre><code># PhotoPrism Nginx config with SSL HTTP/2 and reverse proxy\n# This file gives you an example on how to secure you PP instance with SSL\nserver {\nlisten       80;\nlisten [::]:80; # HTTP IPv6\n# enforce https\nreturn 301 https://$server_name$request_uri;\n}\nserver {\n\nlisten 443 ssl http2; # Listen on port 443 and enable ssl and HTTP/2\nlisten [::]:443 ssl http2; # Same for IPv6\n\n# Put your domain name in here.\nserver_name  photoprism.example.com;\n\n# - - - - - - - - - -\n# SSL security\n# - - - - - - - - - -\nssl_certificate          /etc/letsencrypt/live/photoprism.example.com/fullchain.pem;\nssl_certificate_key      /etc/letsencrypt/live/photoprism.example.com/privkey.pem;\n\n# Since the PP API is also used on Android, we have to keep TLS1.2 in here for a while.\n# A lot of the older Android devices do not support TLS1.3 yet :/\nssl_protocols            TLSv1.2 TLSv1.3;\n\n# Use good and strong ciphers, disable weak and old ciphers\nssl_ciphers              HIGH:!RC4:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS;\n\n# Enable HSTS (https://developer.mozilla.org/en-US/docs/Security/HTTP_Strict_Transport_Security)\nadd_header Strict-Transport-Security \"max-age=172800; includeSubdomains\";\n\n# This checks if the certificate has been invalidated by the certificate authority\n# You can remove this section if you use self-singed certificates...\n# Enable OCSP stapling (http://blog.mozilla.org/security/2013/07/29/ocsp-stapling-in-firefox)\nssl_stapling on;\nssl_stapling_verify on;\nssl_trusted_certificate /etc/letsencrypt/live/photoprism.example.com/fullchain.pem;\n\n# DNS Servers to use for OCSP lookups\nresolver 8.8.8.8 1.1.1.1 9.9.9.9 valid=300s;\nresolver_timeout 5s;\n\n# - - - - - - - - -\n# Reverse Proxy\n# - - - - - - - - -\nproxy_redirect           off;\nproxy_set_header         X-Real-IP $remote_addr;                        # Let PP know the clients real IP\nproxy_set_header         X-Forwarded-For $proxy_add_x_forwarded_for;    # Let PP know that a proxy did forward this request\nproxy_set_header         Host $http_host;                               # Set Proxy host info\n\nproxy_http_version 1.1;                                                 # Required for WebSocket connection\nproxy_set_header Upgrade $http_upgrade;                                 # Allow protocol switch to websocket\nproxy_set_header Connection \"upgrade\";                                  # Do protocol switch\nproxy_set_header X-Forwarded-Proto $scheme;                             # Let PP know that this connection used HTTP or HTTPS\n\nclient_max_body_size 500M;                                              # Bump the max body size, you may want to upload huge stuff via the upload GUI\nproxy_buffering off;                                                    # Do not hold back the request while the client sends data, give the stream directly to PP\n\nlocation / {\n# Optional; additional protection with Basic Auth.\n# Note: This breaks WebDAV without additional configuration\n#       You also have to create a .htpasswd file using the command:\n#       \"htpasswd -c /etc/nginx/.pp_htpasswd my_secret_user\"\n# - - -\n# auth_basic           \"PhotoPrism Pre Auth\";\n# auth_basic_user_file /etc/nginx/.pp_htpasswd;\n\n# pipes the traffic to PhotoPrism\n# Change this to your PhotoPrisms IP / DNS\nproxy_pass http://docker.homenet:2342;\n}\n}\n</code></pre></p> <p>Have a look at the individual comments in the configuration for a further description.</p> <p>Tip</p> <p>Don't forget to change the PhotoPrism IP / DNS on the bottom of the config... ;)</p> <p>Once you've changed everything you need, let's restart <code>nginx</code>:</p> <p><pre><code>sudo nginx -t\nsudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/\nsystemctl reload nginx\n</code></pre> Now, you should have access to PhotoPrism.</p> <p>Warning</p> <p>Make sure to setup proper firewalling on the machine that is running PhotoPrism. Have a look at ufw for simple firewall rules.</p>"},{"location":"getting-started/advanced/scalability/","title":"Scalability, Distributed Computing and Cloud Storage","text":"<p>Our team aims to get the most of what is there. Development and testing have been focused on smaller servers and typical home users with  less than 500,000 files.</p> <p>While PhotoPrism has been reported to run well on 24 cores or more, we can not invest a  lot of time in optimizing it for enterprise-class servers. There are more important  feature requests waiting - and most users don't actually own such hardware.</p> <p>If the primary focus was on larger servers or clusters, the current architecture might be different in some aspects, and had other tradeoffs. For example, relying on database locking and conflict resolution tends  to be inefficient with an increasing number of cores and workers. On the other hand, this simplifies application logic,  especially when running multiple instances on the same index.</p> <p>Traditional database servers like MariaDB might be slower and less powerful  than specialized NoSQL or in-memory engines. They are often better documented and easier  to maintain for the majority of users though.</p> <p>Also, there is no native support for sharding or cloud storage APIs like S3.  Instead, PhotoPrism prefers a fast, local solid-state drive. Support for S3 may be added for backing up originals later.</p> <p>We are happy to assist if you need a custom solution  that runs well in a corporate cloud environment.</p>"},{"location":"getting-started/advanced/transcoding/","title":"Video Transcoding","text":""},{"location":"getting-started/advanced/transcoding/#avc-encoders","title":"AVC Encoders","text":"<p>The encoder used by FFmpeg can be configured with <code>PHOTOPRISM_FFMPEG_ENCODER</code> in your <code>docker-compose.yml</code> config file:</p> Encoder Value Software H.264 <code>software</code> Apple Video Toolbox <code>apple</code> Intel Quick Sync <code>intel</code> NVIDIA H.264 <code>nvidia</code> Raspberry Pi / Video4Linux <code>raspberry</code> Video Acceleration API <code>vaapi</code> <p>It defaults to <code>software</code> if no value is set or hardware transcoding fails. Please refer to the FFmpeg documentation for a full list of encoders and their implementation status. We welcome contributions to support additional encoders.</p> <p>For transcoding to work, FFmpeg must be enabled and installed. When using our Docker images, it is already pre-installed. In addition, the service must have permission to use the related video devices. This depends on your hardware and operating system, so we can only give you examples that may need to be changed to work for you.</p>"},{"location":"getting-started/advanced/transcoding/#size-limit","title":"Size Limit","text":"<p>The <code>PHOTOPRISM_FFMPEG_SIZE</code> config option allows to limit the resolution of transcoded videos. It accepts the following standard sizes, while other values are automatically adjusted to the next supported size:</p> Size Usage 720 SD TV, Mobile 1280 HD TV, SXGA 1920 Full HD 2048 DCI 2K, Tablets 2560 Quad HD, Notebooks 3840 4K Ultra HD 4096 DCI 4K, Retina 4K 7680 8K Ultra HD 2 <p>When transcoding videos, the original aspect ratio is maintained and smaller videos will not be upscaled.</p>"},{"location":"getting-started/advanced/transcoding/#bitrate-limit","title":"Bitrate Limit","text":"<p>You can limit the bitrate of the AVC encoder with the config option <code>PHOTOPRISM_FFMPEG_BITRATE</code>. Keep in mind that this is a \"soft limit\", so the actual bitrate varies and depends on the encoder used as well as the specific FFmpeg parameters, which in turn depend on the encoder. It may also depend on the operating system and the GPU drivers.</p> <p>If the bitrate is significantly exceeded in your environment and you want improvements to be implemented, we recommend that you take a look at the FFmpeg documentation and the parameters in our source code so you can tell us which parameters should be changed to make it work for you.</p> <p>Note that MPEG-4 AVC videos are not re-encoded if they exceed the configured bitrate limit. To reduce the size of AVC videos, you can manually replace the original files with a smaller version or wait for a future release that offers this functionality.</p> <p>Already transcoded video files are not automatically re-transcoded when the limit is changed. To do this, you must manually remove the <code>*.avc</code> files in the <code>sidecar</code> storage folder and run the <code>photoprism convert</code> command in a terminal.</p>"},{"location":"getting-started/advanced/transcoding/#gpu-drivers","title":"GPU Drivers","text":"<p>Depending on your hardware, it may be necessary to install additional packages for FFmpeg to use the AVC encoding device. </p> <p>One way to do this automatically is to set <code>PHOTOPRISM_INIT</code> to <code>\"gpu tensorflow\"</code> when using our Docker images. Note that this is experimental and not required for most encoders.</p> <p>See the related installation script on GitHub for details. We welcome contributions to support additional devices or update package names if needed.</p> <p>Most users can either skip <code>PHOTOPRISM_INIT</code> completely or just use <code>PHOTOPRISM_INIT: \"tensorflow\"</code> to install a special version of TensorFlow that improves indexing performance if the server CPU supports AVX, which is independent of video transcoding and the type of GPU.</p>"},{"location":"getting-started/advanced/transcoding/#intel-quick-sync","title":"Intel Quick Sync","text":"<p>To enable Intel Quick Sync hardware video transcoding, add the <code>intel</code> target to <code>PHOTOPRISM_INIT</code>, choose the <code>intel</code> encoder, and share the <code>/dev/dri</code> devices with the <code>photoprism</code> service:</p> <pre><code>services:\nphotoprism:\nenvironment:\nPHOTOPRISM_FFMPEG_ENCODER: \"intel\"\nPHOTOPRISM_INIT: \"intel tensorflow\"\n...\ndevices:\n- \"/dev/dri:/dev/dri\"\nvolumes:\n- ...\n</code></pre> <p>Now restart the services for the changes to take effect.</p> <p>Note that older hardware may not support certain video codecs and resolutions. In this case, it is not possible to use hardware transcoding for these videos. We may later add a configuration option that allows you to downscale videos.</p>"},{"location":"getting-started/advanced/transcoding/#nvidia-container-toolkit","title":"NVIDIA Container Toolkit","text":"<p>For hardware transcoding with an NVIDIA graphics card, the NVIDIA Container Toolkit must be installed on the host computer first. Instructions can be found in their installation guide.</p> <p>Once the toolkit is installed, choose the <code>nvidia</code> encoder and add a <code>deploy</code> section to the <code>photoprism</code> service:</p> <pre><code>services:\nphotoprism:    environment:\nPHOTOPRISM_FFMPEG_ENCODER: \"nvidia\"\nPHOTOPRISM_INIT: \"tensorflow\"\nNVIDIA_VISIBLE_DEVICES: \"all\"\nNVIDIA_DRIVER_CAPABILITIES: \"compute,video,utility\"\n...\nvolumes:\n- ...\ndeploy:\nresources:\nreservations:\ndevices:\n- driver: \"nvidia\"\ncount: 1\ncapabilities: [gpu]\n...\n</code></pre> <p>Now restart the services for the changes to take effect.</p> <p>We also provide a ready-to-use <code>docker-compose.yml</code> example for your convenience. Note that older hardware may not support certain video codecs and resolutions.</p>"},{"location":"getting-started/advanced/transcoding/#raspberry-pi","title":"Raspberry Pi","text":"<p>Experimental hardware-accelerated transcoding on a Raspberry Pi (and compatible devices) can be enabled by choosing the <code>raspberry</code> encoder:</p> <pre><code>PHOTOPRISM_FFMPEG_ENCODER: \"raspberry\"\n</code></pre> <p>The Docker container must also have access to one or more video devices.  For the <code>raspberry</code> encoder, for example, you add:</p> <pre><code>devices:\n- \"/dev/video11:/dev/video11\"\n</code></pre> <p>Additional advanced configuration options are available to improve stability if needed:</p> <pre><code>PHOTOPRISM_FFMPEG_BUFFERS: \"64\" # FFmpeg capture buffers (default: 32)\n</code></pre> <p>Now restart the services for the changes to take effect.</p> <p>Some server configurations, especially Raspberry Pi's, may experience memory allocation issues when using hardware acceleration. Carefully monitor your server's logs and increase the available GPU and/or CMA memory allocations if necessary. Note that the Raspberry Pi hardware currently only supports video resolutions up to 2160p.</p>"},{"location":"getting-started/advanced/transcoding/#other-hardware","title":"Other Hardware","text":"<p>If you want to use other hardware for transcoding, choose the appropriate AVC encoder and share the required devices with the <code>photoprism</code> service, as shown in the examples above. Then restart the services for the changes to take effect.</p> <p>Which devices need to be shared and whether additional drivers are required depends on your specific hardware. For more information, see the FFmpeg documentation.</p>"},{"location":"getting-started/advanced/transcoding/#troubleshooting","title":"Troubleshooting","text":"<p>A good way to troubleshoot transcoding issues is to increase the log level and examine the entire FFmpeg command and its output. To enable debug mode, set <code>PHOTOPRISM_DEBUG</code> to <code>\"true\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--debug</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\nphotoprism:\nenvironment:\nPHOTOPRISM_DEBUG: \"true\"\n...\n</code></pre> <p>Then restart all services for the changes to take effect.</p> <p>Learn more \u203a</p> <p>If FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have Exiftool enabled to extract metadata such as duration, resolution, and codec. Note that your hardware may not support certain video codecs and resolutions. In this case, the software encoder is used automatically.</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/advanced/migrations/","title":"Performing Index Migrations","text":"<p>When using Docker Compose, you can prepend commands like <code>docker compose exec [service] [command]</code> to run them in a service container. Should this fail with no container found, make sure the service has been started, you have specified an existing service (usually <code>photoprism</code>) and you are in the folder where the <code>docker-compose.yml</code> file is located.</p>"},{"location":"getting-started/advanced/migrations/#show-migration-status","title":"Show Migration Status","text":"<p>Run the <code>photoprism migrations ls</code> command in a terminal to see a list of all migrations and their current status:</p> <pre><code>$ photoprism migrations ls\n\n|-----------------|---------|---------------------|---------------------|--------|\n|       ID        | Dialect |     Started At      |     Finished At     | Status |\n|-----------------|---------|---------------------|---------------------|--------|\n| 20211121-094727 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20211124-120008 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-030000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-040000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-050000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-060000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-061000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-070000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-071000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-080000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-081000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-083000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-090000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-091000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220329-093000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220421-200000 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000001 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000002 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n| 20220521-000003 | mysql   | 2022-07-12 08:07:35 | 2022-07-12 08:07:35 | OK     |\n|-----------------|---------|---------------------|---------------------|--------|\n</code></pre>"},{"location":"getting-started/advanced/migrations/#run-specific-migrations","title":"Run Specific Migrations","text":"<p>To explicitly re-run specific migrations, you can pass them as arguments to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run 20220521-000003\n\nINFO[2022-07-12T11:45:29Z] migrate: 20220521-000003 successful [12.967654ms] \nINFO[2022-07-12T11:45:29Z] migration completed in 40.89123ms            \nINFO[2022-07-12T11:45:29Z] closed database connection \n</code></pre>"},{"location":"getting-started/advanced/migrations/#retry-failed-migrations","title":"Retry Failed Migrations","text":"<p>To automatically retry previously failed migrations, pass the <code>-f</code> flag to the <code>photoprism migrations run</code> command:</p> <pre><code>$ photoprism migrations run -f\n</code></pre>"},{"location":"getting-started/advanced/migrations/mariadb-to-sqlite/","title":"Migrating from MariaDB to SQLite","text":"<p>For advanced users only: The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us. You can contribute by clicking  to send a pull request with your changes.</p> <ul> <li>Install techouse/mysql-to-sqlite3 on your host.</li> <li>Stop Photoprism: <code>docker compose stop photoprism</code></li> <li>Add the port to the MariaDB service</li> <li>On the host now run <code>sudo mysql2sqlite -f &lt;PATH_TO_STORAGE_MOUNT&gt;/storage/index.db -d photoprism -u root --mysql-password 'insecure'</code></li> <li>Shutdown your current stack fully: <code>docker compose down</code></li> <li>Edit your <code>docker-compose.yml</code>:</li> <li>Remove the MariaDB service.</li> <li>Change in the Photoprism settings to use the sqlite driver and remove the other database settings</li> <li>Start your stack again with <code>docker compose up -d</code></li> <li>If this worked you may want to delete the old mountpoint for the MariaDB database.</li> </ul> <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated, so their database schema is no longer optimized for performance, for example, because indexes are missing or columns have the wrong data type.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p>"},{"location":"getting-started/advanced/migrations/sqlite-to-mariadb/","title":"Migrating from SQLite to MariaDB","text":"<p>For advanced users only: The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us. You can contribute by clicking  to send a pull request with your changes.</p> <ul> <li>Install techouse/sqlite3-to-mysql on your host. (openSUSE: <code>zypper in python-sqlite3-to-mysql</code>)</li> <li>Shutdown your current stack: <code>docker compose down</code></li> <li>Add the current snippet of the MariaDB to your Sqlite Photoprism docker compose with the addition of the extra <code>ports</code>   section where you expose port 3306 to the Host. In my case this looked like attachment 1.</li> <li>Start the stack again: <code>docker compose up -d</code></li> <li>Stop Photoprism: <code>docker compose stop photoprism</code></li> <li>On the host now run <code>sudo sqlite3mysql -f &lt;PATH_TO_STORAGE_MOUNT&gt;/storage/index.db -d photoprism -u root -p</code> and enter the MariaDB password when prompted (default is <code>insecure</code>).</li> <li>Shutdown your current stack again: <code>docker compose down</code></li> <li>Edit your <code>docker-compose.yml</code> so it uses the MariaDB database you added before. Don't forget to remove the <code>ports</code>   section of the MariaDB Container.</li> <li>Start your stack again with <code>docker compose up -d</code></li> <li>If this worked you may want to delete the file <code>index.db</code> in the <code>storage</code> mount since it contains out of date   information.</li> </ul> <p>Attachment 1:</p> <pre><code>services:\nmariadb:\nrestart: unless-stopped\nimage: mariadb:10.11\nports:\n- 3306:3306 # Expose Port 3306 \nsecurity_opt:\n- seccomp:unconfined\n- apparmor:unconfined\ncommand: mysqld --innodb-buffer-pool-size=1G &gt;\n--transaction-isolation=READ-COMMITTED --character-set-server=utf8mb4\n--collation-server=utf8mb4_unicode_ci --max-connections=512\n--innodb-rollback-on-timeout=OFF --innodb-lock-wait-timeout=120\nvolumes:\n- \"./database:/var/lib/mysql\" # DO NOT REMOVE\nenvironment:\nMARIADB_AUTO_UPGRADE: \"1\"\nMARIADB_INITDB_SKIP_TZINFO: \"1\"\nMARIADB_DATABASE: \"photoprism\"\nMARIADB_USER: \"photoprism\"\nMARIADB_PASSWORD: \"insecure\"\nMARIADB_ROOT_PASSWORD: \"insecure\"\n</code></pre> <p>Bad Performance</p> <p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexing are resolved.</p> <p>View Database Schema \u203a </p>"},{"location":"getting-started/cloud/digitalocean/","title":"Using our DigitalOcean 1-Click App","text":"<p>PhotoPrism can be deployed at DigitalOcean with just a few clicks. If you have no DigitalOcean account yet, you may use this sign-up link to receive a $100, 60-day account credit:</p> <p> Sign up at DigitalOcean </p>"},{"location":"getting-started/cloud/digitalocean/#install-photoprism","title":"Install PhotoPrism","text":"<ul> <li>Sign Up or Log In at DigitalOcean</li> <li>Open the PhotoPrism listing in the marketplace</li> <li>Click Create PhotoPrism Droplet</li> </ul>"},{"location":"getting-started/cloud/digitalocean/#configure-your-droplet","title":"Configure Your Droplet","text":""},{"location":"getting-started/cloud/digitalocean/#choose-an-image","title":"Choose an Image","text":"<p>The PhotoPrism image will be pre-selected</p> <p></p>"},{"location":"getting-started/cloud/digitalocean/#choose-a-plan","title":"Choose a Plan","text":"<p>We recommend hosting PhotoPrism on a server with at least 2 cores and 3 GB of physical memory. Indexing and searching can be slow on smaller Droplets, depending on how many and what types of files you upload.</p> <p>While PhotoPrism has been reported to work on Droplets with less memory, we take no responsibility for instability or performance problems. RAW image conversion and TensorFlow are disabled on Droplets with 1 GB or less memory.</p> <p></p>"},{"location":"getting-started/cloud/digitalocean/#choose-a-datacenter-region","title":"Choose a Datacenter Region","text":""},{"location":"getting-started/cloud/digitalocean/#choose-an-authentication-mode","title":"Choose an Authentication Mode","text":""},{"location":"getting-started/cloud/digitalocean/#finalize-your-droplet","title":"Finalize Your Droplet","text":"<p>Finalize your droplet and click Create Droplet </p> <p></p> <p>Your droplet is now being created.</p>"},{"location":"getting-started/cloud/digitalocean/#admin-password","title":"Admin Password","text":"<ul> <li>Click More</li> </ul> <ul> <li>Click Access console</li> </ul> <ul> <li>Launch the console as root</li> </ul> <ul> <li>Within the console type <code>cat /root/.initial-password.txt</code> and click enter</li> <li>Copy your initial password</li> </ul>"},{"location":"getting-started/cloud/digitalocean/#open-photoprism","title":"Open PhotoPrism","text":"<ul> <li>Click Get started</li> </ul> <ul> <li>Click Quick access</li> </ul> <p>Info</p> <p>In case you have no domain and let's encrypt set up you will see the notice \"Your connection is not private\".  Click Advanced and click Open page.</p> <ul> <li>Use username \"admin\" and your initial password to sign in</li> <li>You may change your password using the Web UI</li> </ul>"},{"location":"getting-started/cloud/digitalocean/#first-steps","title":"First Steps","text":"<ol> <li>Configure library and advanced settings according to your needs.</li> <li>Choose whether you want to index your originals so that the existing file and folder names are preserved, or import them so that they are automatically organized by year and month.</li> <li>To add new pictures, you can either copy them to the import or originals folder e.g. using WebDAV, or upload them with a browser, which will import them automatically after upload.</li> <li>Start indexing or importing</li> <li>Finally, set up automatic syncing from your mobile phone and install the Progressive Web App (PWA) on your desktop, tablet, and phone home screens as needed.</li> </ol>"},{"location":"getting-started/cloud/pikapods/","title":"PikaPods Open Source App Hosting","text":"<p>Trusted Partner</p> <p>PikaPods has partnered with us to offer you this officially supported, cloud-hosted solution.<sup>1</sup> Your personal app instance is ready to use in just a few steps and includes member features like premium themes and high-resolution world maps - at no additional cost! New customers also receive a $5 welcome credit.</p>"},{"location":"getting-started/cloud/pikapods/#setup","title":"Setup","text":"<p>This step-by-step guide explains how to set up a new PhotoPrism instance at PikaPods.</p>"},{"location":"getting-started/cloud/pikapods/#1-create-account","title":"1. Create Account","text":"<p>Sign up at www.pikapods.com/register with your contact details. You will then receive a confirmation email with an activation link that you must click to continue.</p> <p>Before proceeding, we recommend that you enter your credit card information first to avoid usage restrictions.</p>"},{"location":"getting-started/cloud/pikapods/#2-start-photoprism","title":"2. Start PhotoPrism","text":"<p>If it isn't already selected, go to Available Apps and select PhotoPrism, then click Run Your Own:</p> <p></p> <p>Continue by entering a Pod Name and selecting a Region:</p> <p></p> <p>Click ENV VARS to specify the initial password for the \"admin\" user account:</p> <p></p> <p>In RESOURCES, you can configure the storage space available for photos and videos, as well as the compute resources PhotoPrism can use, such as for indexing and face recognition.</p> <p>PhotoPrism currently requires at least 2 CPUs and 8 GB of memory. We are working to lower these minimum requirements.</p> <p>The approximate price per month is shown at the bottom:</p> <p></p> <p>Finally, click Add Pod to complete the setup and start your instance.</p>"},{"location":"getting-started/cloud/pikapods/#3-add-your-files","title":"3. Add Your Files","text":"<p>PhotoPrism is now fully set up and ready to use. To log in, click Open Pod, enter the username \"admin\" and the password you have specified:</p> <p></p> <p>If you want to change your password, you can do so in Settings &gt; Account. Our First Steps \ud83d\udc63 tutorial will guide you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <ol> <li> <p>A share of the revenue helps fund the development of PhotoPrism \u21a9</p> </li> </ol>"},{"location":"getting-started/config-files/","title":"<code>options.yml</code>","text":"<p>If you are unable to configure your instance using environment variables or command flags, for example because it was installed through an app store, you can alternatively set config values using an <code>options.yml</code> file in the config folder.</p> <p>A custom config path can be specified with the variable <code>PHOTOPRISM_CONFIG_PATH</code> or the flag <code>--config-path</code>. If you use a third-party integration or package, you should find the exact location in the corresponding documentation. By default, it is a subdirectory of the storage folder.</p> <p>All changes require a restart to take effect. Also note that config values changed in the Advanced Settings UI will be stored in the same file. We therefore recommend that you edit the file only while PhotoPrism is not running.</p>"},{"location":"getting-started/config-files/#format","title":"Format","text":"<p>When editing YAML files, it is important that related values start at the same indentation level and that spaces are used, since tabs are not allowed. You can use any text editor for this.</p>"},{"location":"getting-started/config-files/#example","title":"Example","text":"<p>Since you only need to specify the values you want to change, an <code>options.yml</code> file doesn't have to contain all possible options and could look like this, for example:</p> <pre><code>Debug: true\nReadOnly: false\nJpegQuality: 83\nSiteCaption: PhotoPrism\nSiteUrl: \"http://127.0.0.1:2342/\"\n</code></pre>"},{"location":"getting-started/config-files/#values","title":"Values","text":"<p>To display all global config flags and variables, you can run <code>photoprism --help</code> in a terminal. The corresponding config option names to use in the <code>options.yml</code> and <code>defaults.yml</code> files are listed below, grouped by purpose.</p>"},{"location":"getting-started/config-files/#defaults","title":"Defaults","text":"<p>Default values, including the config path to use, may optionally be specified in a <code>defaults.yml</code> file located in <code>/etc/photoprism</code>. A custom default config filename can be set with the <code>PHOTOPRISM_DEFAULTS_YAML</code> variable or the <code>--defaults-yaml</code> flag.</p>"},{"location":"getting-started/config-files/#config-options","title":"Config Options","text":""},{"location":"getting-started/config-files/#authentication","title":"Authentication","text":"Name Type CLI Flag AuthMode string --auth-mode RegisterUri string --register-uri PasswordLength int --password-length PasswordResetUri string --password-reset-uri Public bool --public AdminUser string --admin-user AdminPassword string --admin-password SessionMaxAge int64 --session-maxage SessionTimeout int64 --session-timeout"},{"location":"getting-started/config-files/#logging","title":"Logging","text":"Name Type CLI Flag LogLevel string --log-level Prod bool --prod Debug bool --debug Trace bool --trace"},{"location":"getting-started/config-files/#storage","title":"Storage","text":"Name Type CLI Flag ConfigPath string --config-path OriginalsPath string --originals-path OriginalsLimit int --originals-limit ResolutionLimit int --resolution-limit UsersPath string --users-path StoragePath string --storage-path SidecarPath string --sidecar-path BackupPath string --backup-path CachePath string --cache-path ImportPath string --import-path ImportDest string --import-dest AssetsPath string --assets-path TempPath string --temp-path"},{"location":"getting-started/config-files/#index-workers","title":"Index Workers","text":"Name Type CLI Flag Workers int --workers WakeupInterval time.Duration --wakeup-interval AutoIndex int --auto-index AutoImport int --auto-import"},{"location":"getting-started/config-files/#feature-flags","title":"Feature Flags","text":"Name Type CLI Flag ReadOnly bool --read-only Experimental bool --experimental DisableSettings bool --disable-settings DisableRestart bool --disable-restart DisableBackups bool --disable-backups DisableWebDAV bool --disable-webdav DisablePlaces bool --disable-places DisableTensorFlow bool --disable-tensorflow DisableFaces bool --disable-faces DisableClassification bool --disable-classification DisableFFmpeg bool --disable-ffmpeg DisableExifTool bool --disable-exiftool DisableSips bool --disable-sips DisableDarktable bool --disable-darktable DisableRawTherapee bool --disable-rawtherapee DisableImageMagick bool --disable-imagemagick DisableHeifConvert bool --disable-heifconvert DisableVectors bool --disable-vectors DisableJpegXL bool --disable-jpegxl DisableRaw bool --disable-raw RawPresets bool --raw-presets ExifBruteForce bool --exif-bruteforce DetectNSFW bool --detect-nsfw UploadNSFW bool --upload-nsfw"},{"location":"getting-started/config-files/#customization","title":"Customization","text":"Name Type CLI Flag DefaultTheme string --default-theme DefaultLocale string --default-locale AppName string --app-name AppMode string --app-mode AppIcon string --app-icon AppColor string --app-color LegalInfo string --legal-info LegalUrl string --legal-url WallpaperUri string --wallpaper-uri"},{"location":"getting-started/config-files/#site-information","title":"Site Information","text":"Name Type CLI Flag CdnUrl string --cdn-url CdnVideo bool --cdn-video SiteUrl string --site-url SiteAuthor string --site-author SiteTitle string --site-title SiteCaption string --site-caption SiteDescription string --site-description SitePreview string --site-preview HttpsProxy string --https-proxy HttpsProxyInsecure bool --https-proxy-insecure"},{"location":"getting-started/config-files/#web-server","title":"Web Server","text":"Name Type CLI Flag TrustedProxies []string --trusted-proxy ProxyProtoHeaders []string --proxy-proto-header ProxyProtoHttps []string --proxy-proto-https DisableTLS bool --disable-tls DefaultTLS bool --default-tls TLSEmail string --tls-email TLSCert string --tls-cert TLSKey string --tls-key HttpMode string --http-mode HttpCompression string --http-compression HttpCacheMaxAge int --http-cache-maxage HttpCachePublic bool --http-cache-public HttpHost string --http-host HttpPort int --http-port"},{"location":"getting-started/config-files/#database-connection","title":"Database Connection","text":"Name Type CLI Flag DatabaseDriver string --database-driver DatabaseDsn string --database-dsn DatabaseName string --database-name DatabaseServer string --database-server DatabaseUser string --database-user DatabasePassword string --database-password DatabaseConns int --database-conns DatabaseConnsIdle int --database-conns-idle SipsBin string --sips-bin SipsBlacklist string --sips-blacklist FFmpegBin string --ffmpeg-bin FFmpegEncoder string --ffmpeg-encoder FFmpegSize int --ffmpeg-size FFmpegBitrate int --ffmpeg-bitrate FFmpegMapVideo string --ffmpeg-map-video FFmpegMapAudio string --ffmpeg-map-audio ExifToolBin string --exiftool-bin"},{"location":"getting-started/config-files/#file-converters","title":"File Converters","text":"Name Type CLI Flag DarktableBin string --darktable-bin DarktableCachePath string --darktable-cache-path DarktableConfigPath string --darktable-config-path DarktableBlacklist string --darktable-blacklist RawTherapeeBin string --rawtherapee-bin RawTherapeeBlacklist string --rawtherapee-blacklist ImageMagickBin string --imagemagick-bin ImageMagickBlacklist string --imagemagick-blacklist HeifConvertBin string --heifconvert-bin RsvgConvertBin string --rsvgconvert-bin"},{"location":"getting-started/config-files/#security-tokens","title":"Security Tokens","text":"Name Type CLI Flag DownloadToken string --download-token PreviewToken string --preview-token"},{"location":"getting-started/config-files/#image-quality","title":"Image Quality","text":"Name Type CLI Flag ThumbColor string --thumb-color ThumbFilter string --thumb-filter ThumbSize int --thumb-size ThumbSizeUncached int --thumb-size-uncached ThumbUncached bool --thumb-uncached JpegQuality string --jpeg-quality JpegSize int --jpeg-size PngSize int --png-size"},{"location":"getting-started/config-files/#daemon-mode","title":"Daemon Mode","text":"<p>If you start the server as a daemon in the background, you can additionally specify a filename for the log and the process ID:</p> Name Type CLI Flag PIDFilename string --pid-filename LogFilename string --log-filename DetachServer bool --detach-server"},{"location":"getting-started/config-files/defaults/","title":"<code>defaults.yml</code>","text":"<p>Default values, including the config path to use, may optionally be specified in a <code>defaults.yml</code> file located in <code>/etc/photoprism</code>. Write permissions are not required, since all changes will be stored in the <code>options.yml</code> file.</p> <p>With the variable <code>PHOTOPRISM_DEFAULTS_YAML</code> or the flag <code>--defaults-yaml</code>, you can also specify a custom defaults file to be loaded when PhotoPrism starts. overriding Defaults</p>"},{"location":"getting-started/config-files/defaults/#format","title":"Format","text":"<p>When editing YAML files, it is important that related values start at the same indentation level and that spaces are used, since tabs are not allowed. You can use any text editor for this.</p>"},{"location":"getting-started/config-files/defaults/#example","title":"Example","text":"<p>Since you only need to specify the values for which you want to set a default, a <code>defaults.yml</code> file does not need to contain all possible options and could look like this, for example:</p> <pre><code>Debug: false\nReadOnly: true\nJpegQuality: 85\n</code></pre>"},{"location":"getting-started/config-files/defaults/#overriding-defaults","title":"Overriding Defaults","text":"<p>The default values can be overridden by values in an <code>options.yml</code> file, command flags, and environment variables. As with all global config options, changes require a restart to take effect.</p>"},{"location":"getting-started/config-files/defaults/#config-options","title":"Config Options","text":"<p>\u21aa see <code>options.yml</code></p>"},{"location":"getting-started/config-files/settings/","title":"<code>settings.yml</code>","text":"<p>User interface, download and indexing preferences are stored in the <code>settings.yml</code> file located in the config folder. If it does not exist yet, it will be created automatically.</p> <p>Advanced users can edit the file directly to change certain settings, since not all of them can be modified through the user interface.</p> <p>All changes require a restart to take effect. Also note that settings changed on the web interface will be stored in the same file. We therefore recommend that you edit it only while PhotoPrism is not running.</p>"},{"location":"getting-started/config-files/settings/#format","title":"Format","text":"<p>When editing YAML files, it is important that related values start at the same indentation level and that spaces are used, since tabs are not allowed. You can use any text editor for this.</p>"},{"location":"getting-started/config-files/settings/#defaults","title":"Defaults","text":"<p>In the upcoming release, the settings can optionally be initialized from a <code>settings.yml</code> file located in the same folder as the <code>defaults.yml</code> file e.g. <code>/etc/photoprism</code>.</p>"},{"location":"getting-started/config-files/settings/#sections","title":"Sections","text":""},{"location":"getting-started/config-files/settings/#user-interface","title":"User Interface","text":"<pre><code>UI:\nScrollbar: true\nZoom: false\nTheme: default\nLanguage: en\n</code></pre> <p>If you set <code>Scrollbar</code> to <code>false</code>, the browser scrollbar will be hidden regardless of which device you use and which page you are on. This is generally not recommended, but can be useful e.g. when taking screenshots.</p> <p>Setting <code>Zoom</code> to <code>true</code> allows you to enlarge the user interface with gestures on mobile devices, making the app feel more like a regular web page. This can be useful for visually impaired users so that they can magnify text and images when needed.</p> <p><code>Theme</code> and <code>Language</code> change the theme and language of the user interface and correspond to the settings dropdowns you find when navigating to Settings &gt; General.</p>"},{"location":"getting-started/config-files/settings/#file-downloads","title":"File Downloads","text":"<pre><code>Download:\nName: file\nDisabled: false\nOriginals: true\nMediaRaw: false\nMediaSidecar: false\n</code></pre> <p>The <code>Name</code> setting determines which file names are used when downloading pictures from search results or in the photo viewer. Currently, the following options are supported:</p> <ul> <li><code>file</code> uses the actual file name in the originals folder</li> <li><code>original</code> uses the original file name if the file was imported</li> <li><code>share</code> uses a share-friendly file name based on the title and creation date</li> </ul> <p>Note that your choice will not affect the file names in ZIP archives when you download complete albums, as they always use share-friendly names. However, we may add settings for this in a future release.</p> <p>In case <code>Originals</code> is set to <code>true</code>, only the files in the originals folder will be downloaded, but not any files that were automatically created in the sidecar folder. This is the recommended default.</p> <p>If you set <code>MediaRaw</code> to <code>true</code>, RAW image files are downloaded automatically, for example when you click the download button in the photo viewer.</p> <p>Setting <code>MediaSidecar</code> to <code>true</code> will also download sidecar files as used for XMP metadata. This is generally not recommended except for some professional workflows.</p>"},{"location":"getting-started/config-files/settings/#media-library","title":"Media Library","text":"<pre><code>Import:\nPath: /\nMove: false\nIndex:\nPath: /\nConvert: true\nRescan: false\nSkipArchived: false\nStack:\nUUID: true\nMeta: true\nName: false\n</code></pre> <p>These settings affect which files are stacked, as well as your preferences when indexing or importing files.</p> <p>You can also change these settings by navigating to Settings &gt; Library and in the Library UI, so it is generally not necessary to edit them directly in the config file.</p>"},{"location":"getting-started/nas/asustor/","title":"Running PhotoPrism on an Asustor NAS","text":"<p>Before setting up PhotoPrism on your NAS, we recommend that you check the Asustor product database for the CPU and memory configuration of your device.</p> <p>For a good user experience, it should be a 64-bit system with at least 2 cores and 3 GB of RAM. Indexing large photo and video collections also benefits greatly from using SSD storage, especially for the database and cache files.</p> <p>Third-party integrations may not provide direct access to config files or the command line, so you might not be able to use all features and config options. Also note that RAW image conversion and TensorFlow are disabled on devices with 1 GB or less memory, and that high-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>"},{"location":"getting-started/nas/asustor/#setup","title":"Setup","text":"<p>This step-by-step guide explains how to set up a new PhotoPrism instance through App Central, the built-in app store.</p>"},{"location":"getting-started/nas/asustor/#step-1-open-app-central","title":"Step 1: Open App Central","text":"<p>Log in to the user interface of your NAS. You can do this by navigating to https://asustor:7001 if you replace asustor with the actual IP address or hostname of your device and change the port depending on your configuration.</p> <p>Now open \"App Central\" on the home screen:</p> <p></p>"},{"location":"getting-started/nas/asustor/#step-2-install-photoprism","title":"Step 2: Install PhotoPrism","text":"<p>Type PhotoPrism in the search box in the upper right corner and press Enter to start the search. PhotoPrism should then be displayed so you can click \"Install\" to start the installation:</p> <p></p> <p>Next, you will be informed about dependencies like Docker that need to be installed, and you can decide whether you want your instance to be accessible from the Internet (if you have set this up for your NAS and your Internet router is compatible):</p> <p></p> <p>If you want to uninstall PhotoPrism later, you can also do that in App Central.</p>"},{"location":"getting-started/nas/asustor/#step-3-open-photoprism","title":"Step 3: Open PhotoPrism","text":"<p>Once the installation is complete, you will find PhotoPrism on your home screen, where you can open it in a new tab with one click:</p> <p></p> <p>You can also navigate to port 32770 on your device if you want to open PhotoPrism directly. When you see the login screen, enter the username \"admin\" and password \"admin321\" to sign in:</p> <p></p> <p>Remember to change your password after the first login. You can do this in Settings &gt; Account.</p>"},{"location":"getting-started/nas/asustor/#step-4-add-your-files","title":"Step 4: Add Your Files","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>Depending on which strategy you choose, you can add your media files to the originals or import folder located in /volume1/Docker/PhotoPrism/data:</p> <p></p> <p>The storage folder, which contains configuration, cache and sidecar files, can also be found there.</p> <p>Note that the folders that PhotoPrism uses cannot be dynamically configured at the moment when using this app store version. However, we are working to make this possible.</p>"},{"location":"getting-started/nas/openmediavault/","title":"Running PhotoPrism on openmediavault","text":"<p>Should you experience problems with the installation, we recommend that you ask the openmediavault community for advice, as we cannot provide support for third-party software and services. Also note that third-party integrations may not provide direct access to config files or the command line, so you might not be able to use all features and config options.</p> <p>PhotoPrism can be conveniently installed using the openmediavault plugin.</p> <p></p>"},{"location":"getting-started/nas/openmediavault/#getting-updates","title":"Getting Updates","text":"<p>To upgrade your instance, open a terminal, download our most recent image from Docker Hub, and then restart the service:</p> <pre><code>podman pull docker.io/photoprism/photoprism:latest\nsystemctl restart pod-photoprism.service\n</code></pre> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/nas/qnap/","title":"Setting Up PhotoPrism on QNAP","text":"<p>Before setting up PhotoPrism on your NAS, we recommend that you check the QNAP product database for the CPU and memory configuration of your device.</p> <p>For a good user experience, it should be a 64-bit system with at least 2 cores and 3 GB of RAM. Indexing large photo and video collections also benefits greatly from using SSD storage, especially for the database and cache files.</p> <p>Should you experience problems with the installation, we recommend that you ask the QNAP community for advice, as we cannot provide support for third-party software and services. Also note that RAW image conversion and TensorFlow are disabled on devices with 1 GB or less memory, and that high-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p>"},{"location":"getting-started/nas/qnap/#setup","title":"Setup","text":"<p>You can follow this tutorial to install PhotoPrism on QNAP:</p> <p>\u21aa https://safjan.com/install-photoprism-on-qnap-nas-using-docker-compose/</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/nas/synology/","title":"Running PhotoPrism on a Synology NAS","text":"<p>Before setting up PhotoPrism on your NAS, we recommend that you check the Synology Knowledge Base for the CPU and memory configuration of your device.</p> <p>For a good user experience, it should be a 64-bit system with at least 2 cores and 3 GB of RAM. Indexing large photo and video collections also benefits greatly from using SSD storage, especially for the database and cache files.</p> <p>Should you experience problems with the installation, we recommend that you ask the Synology community for advice, as we cannot provide support for third-party software and services. Also note that RAW image conversion and TensorFlow are disabled on devices with 1 GB or less memory, and that high-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p>"},{"location":"getting-started/nas/synology/#will-my-device-be-fast-enough","title":"Will my device be fast enough?","text":"<p>This largely depends on your expectations and the number of files you have. Most users report that PhotoPrism runs well on their Synology NAS. However, you should keep in mind:</p> <ul> <li>initial indexing may take longer than on standard desktop computers</li> <li>the hardware has no video transcoding support and software transcoding is generally slow</li> </ul>"},{"location":"getting-started/nas/synology/#troubleshooting","title":"Troubleshooting","text":"<p>If your device runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the performance of your device</li> <li> Make sure your device has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p>"},{"location":"getting-started/nas/synology/#setup-using-docker-sqlite","title":"Setup using Docker &amp; SQLite","text":"<p>Note that SQLite is generally not a good choice for users who require scalability and high performance.</p> <p>Since we don't have a Synology test device, contributions to a step-by-step tutorial using mariadb are greatly appreciated. You can contribute by clicking  to send a pull request with your changes.</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p> <p>This guide describes how to set up PhotoPrism using the new Synology user interface.</p>"},{"location":"getting-started/nas/synology/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker is installed</li> <li>folders config and photos are created:</li> </ul> <ul> <li>for testing purposes, add some pictures to your photos folder</li> <li>later, if you're ok with your setup, you can link your pictures to the photos folder</li> </ul>"},{"location":"getting-started/nas/synology/#get-the-image","title":"Get the image","text":"<ul> <li>Launch Docker</li> <li>Search for photoprism/photoprism in the Registry</li> <li>Download and choose your flavor</li> <li>Wait until you get the message your image is downloaded. It is big, so this can take a while</li> </ul>"},{"location":"getting-started/nas/synology/#set-photoprism-up","title":"Set PhotoPrism up","text":"<ul> <li>double-click the image you just downloaded</li> <li>Network: choose your network - next</li> <li>give your container a name and click on Advanced Settings</li> </ul> <ul> <li>Add Variable PHOTOPRISM_ADMIN_PASSWORD with your password</li> </ul> <ul> <li>enter values for PHOTPRISM_SITE_DESCRIPTION and PHOTOPRISM_SITE_AUTOR</li> <li>PHOTOPRISM_DATABASE_SERVER and PHOTOPRISM_DATABASE_PASSWORD are used for mariadb. It is recommended to use mariadb but not part of this guide</li> <li>Save</li> </ul> <ul> <li>Next</li> <li>enter the local port you want to use to connect to PhotoPrism</li> </ul> <ul> <li>in the Volume Settings we're adding the two folders (see prerequisites)</li> <li>choose config, add /photoprism/storage as Mount path</li> <li>choose photos, add /photoprism/originals as Mount path</li> </ul> <ul> <li>Done</li> <li>Run the container and give it some minutes to create</li> <li>connect to your instance of Photoprism with your browser ip-to-your-nas:port and login</li> </ul>"},{"location":"getting-started/nas/synology/#first-steps","title":"First Steps","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p>"},{"location":"getting-started/nas/unraid/","title":"Setting Up PhotoPrism on Unraid","text":"<p>Should you experience problems with the installation, we recommend that you ask the Unraid community for advice, as we cannot provide support for third-party software and services. Also note that third-party integrations may not provide direct access to config files or the command line, so you might not be able to use all features and config options.</p> <p>Using SQLite is not recommended for users who require scalability and high performance. </p> <p>We recommend you follow this tutorial provided by IBRACORP to install PhotoPrism on Unraid:</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/portainer/","title":"Portainer Setup Guide","text":"<p>Portainer can be used to manage Docker containers through a web interface. On many NAS devices, it either comes pre-installed or you can simply install it from the vendor's app store. If you are installing PhotoPrism on a regular home or cloud server, you may instead want to follow our Docker Compose Setup Guide, which only uses standard Docker tools and commands.</p>"},{"location":"getting-started/portainer/#step-1-create-stack","title":"Step 1: Create Stack","text":"<p>Navigate to \"Stacks\", click \"Add stack\" and paste the contents of our stack.yml config template (opens in a new tab) into the Web editor so that you can change the storage folder locations in the <code>volumes</code> sections as needed:</p> <p></p> <p>When using the Web editor, please make sure that related values remain on the same indentation level and that lists start with a dash as shown in our template.</p>"},{"location":"getting-started/portainer/#volumes","title":"Volumes","text":"<p>You need to explicitly specify the directories you want to use on your NAS device, since PhotoPrism can't see files in folders that have not been shared. This is an important security feature and allows for a flexible configuration without having to change any other variables.</p> <p>The volume mount paths to configure depend on your NAS device and its configuration. As on most operating systems, <code>.</code> can be used to specify a path relative to the application directory. So if you keep the default settings, all files will be in the internal application folder that Portainer creates when you add a new stack.</p>"},{"location":"getting-started/portainer/#database","title":"Database","text":"<p>Our stack template includes a pre-configured MariaDB database server that stores its data in the internal application folder by default:</p> <pre><code>services:\nmariadb:\nvolumes:\n- \"./database:/var/lib/mysql\"\n</code></pre> <p>If your NAS device has a mixed drive configuration with solid-state drives (SSDs) and traditional hard disks, we recommend that you change <code>./database</code> to an absolute path located on an SSD as this significantly improves performance, for example:</p> <pre><code>      - \"/mnt/ssd/database:/var/lib/mysql\"\n</code></pre> <p>Database files should never be located on an unreliable device such as a USB flash drive, SD card, or network folder.</p>"},{"location":"getting-started/portainer/#photoprismoriginals","title":"/photoprism/originals","text":"<p>The originals folder contains your original photo and video files:</p> <pre><code>services:\nphotoprism:\nvolumes:\n- \"./originals:/photoprism/originals\"\n</code></pre> <p>We recommend that you change <code>./originals</code> to the directory on your NAS where your existing media files are, for example:</p> <pre><code>      - \"/mnt/photos:/photoprism/originals\"\n</code></pre> <p>Additional directories can be mounted as sub folders of <code>/photoprism/originals</code> (depending on overlay filesystem support):</p> <pre><code>    volumes:\n- \"/mnt/photos:/photoprism/originals\"\n- \"/mnt/videos:/photoprism/originals/videos\"\n</code></pre> <p>If you want to start with an empty library, you can mount any volume that has enough free space for your needs.</p>"},{"location":"getting-started/portainer/#photoprismstorage","title":"/photoprism/storage","text":"<p>The storage folder is used to save config, cache, thumbnail, and sidecar files. It must always be specified so that you do not lose these files after a restart or upgrade. If available, we recommend that you put the storage folder on a local SSD drive for best performance. You can otherwise keep the default to store the files in the internal application folder:</p> <pre><code>services:\nphotoprism:\nvolumes:\n- \"./storage:/photoprism/storage\"\n</code></pre> <p>Never configure the storage folder to be inside the originals folder unless the name starts with a <code>.</code> to indicate that it is hidden. Should you later want to move your instance to another NAS, the easiest and most time-saving way is to copy the entire storage folder along with your originals and database.</p>"},{"location":"getting-started/portainer/#photoprismimport","title":"/photoprism/import","text":"<p>You can optionally mount an import folder from which files can be transferred to the originals folder in a structured way that avoids duplicates, for example:</p> <pre><code>services:\nphotoprism:\nvolumes:\n- \"/mnt/media/usb:/photoprism/import\"\n</code></pre> <p>Imported files receive a canonical filename and will be organized by year and month. You should never configure the import folder to be inside the originals folder, as this will cause a loop by importing already indexed files.</p> <p>Even if you don't specify an import folder, adding files via Web Upload and WebDAV remains possible unless read-only mode is enabled or the features have been disabled.</p>"},{"location":"getting-started/portainer/#step-2-finalize-setup","title":"Step 2: Finalize Setup","text":"<p>To complete the setup, download the stack.env file from our server (right click and Save Link As...), click \"Load variables from .env file\", upload it to Portainer, and then change the values according to your needs:</p> <p></p> <p>Always change <code>PHOTOPRISM_ADMIN_PASSWORD</code> so that the app starts with a secure initial password. Never use easy-to-guess passwords or default values like <code>insecure</code> on publicly accessible instances. There is no default in case no password was provided. A minimum length of 8 characters is required.</p> <p>It is not possible to change the database password with <code>MARIADB_PASSWORD</code> after MariaDB has been started for the first time. However, choosing a secure password is not essential if you don't expose the database to other apps or hosts. To enable automatic schema updates after upgrading to a new major version, make sure that  <code>MARIADB_AUTO_UPGRADE</code> is set to a non-empty value.</p> <p>When you're done, scroll down and click \"Deploy the stack\" without changing any of the other options:</p> <p></p> <p>After waiting a few moments, you should be able to log in as <code>admin</code> with the password specified in <code>PHOTOPRISM_ADMIN_PASSWORD</code> when you navigate to http://localhost:2342/.</p> <p>If you have modified the server hostname, port, or protocol in your configuration, the URL to use changes accordingly. </p>"},{"location":"getting-started/portainer/#step-3-index-your-library","title":"Step 3: Index Your Library","text":"<p>Our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p> <p>The config options and container image you want to use can be changed at any time by navigating to \"Stacks\", selecting your existing PhotoPrism stack, clicking \"Editor\", updating the configuration to your needs, and then clicking \"Update the stack\" to apply the changes.</p>"},{"location":"getting-started/portainer/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project! </p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"getting-started/portainer/#troubleshooting","title":"Troubleshooting","text":"<p>If your device runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value, depending on the CPU performance and number of cores</li> <li> Make sure your device has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding</li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/portainer/#command-line-interface","title":"Command-Line Interface","text":""},{"location":"getting-started/portainer/#opening-a-terminal","title":"Opening a Terminal","text":"<p>Navigate to \"Stacks\", select the PhotoPrism stack and scroll down to the list of containers:</p> <p></p> <p>Now click the  button belonging to the photoprism-photoprism-1 container and accept the default settings to open a terminal:</p> <p></p> <p>Running <code>photoprism help</code> lists all commands and options available in the current version:</p> <pre><code>photoprism help\n</code></pre> <p>Use the <code>--help</code> flag to see a detailed command description, for example:</p> <pre><code>photoprism backup --help\n</code></pre> <p>The command-line interface is also well suited for job automation using a scheduler.</p>"},{"location":"getting-started/portainer/#examples","title":"Examples","text":"Action Command Display Config Values <code>photoprism show config</code> Show Migration Status <code>photoprism migrations ls</code> Repeat Failed Migrations <code>photoprism migrations run -f</code> Reset Database <code>photoprism reset -y</code> Backup Database <code>photoprism backup -a -i</code> Restore Database <code>photoprism restore -a -i</code> Change Admin Password <code>photoprism passwd [username]</code> Show User Management Commands <code>photoprism users help</code> Reset Users <code>photoprism users reset -y</code> Show Face Recognition Commands <code>photoprism faces help</code> Index Faces <code>photoprism faces index</code> Reset People &amp; Faces <code>photoprism faces reset -f</code> Transcode Videos to AVC <code>photoprism convert</code> Regenerate Thumbnails <code>photoprism thumbs -f</code> Update Index <code>photoprism index --cleanup</code> Move to Originals <code>photoprism import [path]</code> Copy to Originals <code>photoprism cp [path]</code>"},{"location":"getting-started/ports/freebsd/","title":"Running PhotoPrism On FreeBSD","text":"<p>Please note that third-party apps may not provide access to the docker-compose.yml file or the command line, and therefore you may not be able to use all of PhotoPrism's features and config options.</p> <p>Should you experience problems with the installation, we recommend that you ask the FreeBSD community for advice, as we cannot provide support for third-party software and services. You can contribute by clicking  to send a pull request with your changes.</p> <p>For FreeBSD / FreeNAS users, an unofficial PhotoPrism port  is available.</p> <p>The port will compile and install libtensorflow 1.15.2 and build <code>photoprism</code> from source on FreeBSD.</p> <p>1. Clone or download the port:</p> <pre><code>git clone https://github.com/huo-ju/photoprism-freebsd-port\n</code></pre> <p>2. Build TensorFlow and PhotoPrism from source, then install:</p> <pre><code>cd photoprism-freebsd-port\nmake config\nmake &amp;&amp; make install\n</code></pre> <p>When running the make config command, a CPU feature options dialog will be presented, and the default option is NONE.</p> <p>3. Add entries to rc.conf:</p> <pre><code>photoprism_enable=\"YES\"\nphotoprism_assetspath=\"/var/photoprism/assets\"\nphotoprism_storagepath=\"/var/photoprism/storage\"\n</code></pre> <p>You can add more command line parameters into photoprism_flags=\"\" in the rc.conf</p> <p><code>photoprism config</code> shows all config parameters. </p> <p>4. Start the service:</p> <pre><code>service photoprism start\n</code></pre> <p>Done!</p>"},{"location":"getting-started/ports/freebsd/#when-should-i-perform-a-complete-rescan","title":"When should I perform a complete rescan?","text":"<p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>You can start a rescan from the user interface by navigating to Library &gt; Index, selecting \"Complete Rescan\", and then clicking \"Start\".</p> <p>Manually entered information such as labels, people, titles or descriptions will not be modified when indexing, even if you perform a \"complete rescan\". Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"getting-started/proxies/apache-2/","title":"Using Apache 2.4 as Reverse Proxy","text":"<p>Should you experience problems with Apache, we recommend that you ask the Apache community for advice, as we cannot provide support for third-party software and services.</p> <p>Example</p> <pre><code>ProxyPass /api/v1/ws ws://photoprism.lxd:2342/api/v1/ws\nProxyPassReverse /api/v1/ws ws://photoprism.lxd:2342/api/v1/ws\nProxyPass / http://photoprism:2342/\nProxyPassReverse / http://photoprism:2342/\nProxyRequests off\n</code></pre> <p>The official documentation explains in detail, how to configure Apache Web Server 2.4 to reverse proxy WebSockets.</p>"},{"location":"getting-started/proxies/apache-2/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted  by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to  connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/caddy-1/","title":"Using Caddy 1 as Reverse Proxy","text":"<p>Should you experience problems with Caddy, we recommend that you ask the Caddy community for advice, as we cannot provide support for third-party software and services.</p> <p>For PhotoPrism to work properly, you need to enable websockets and transparent proxying:</p> <p>Example</p> <pre><code>example.com {\n    proxy / photoprism:2342 {\n        websocket\n        transparent\n    }\n}\n</code></pre> <p>Please refer to the official documentation for further details.</p>"},{"location":"getting-started/proxies/caddy-1/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/caddy-2/","title":"Using Caddy 2 as Reverse Proxy","text":"<p>Should you experience problems with Caddy, we recommend that you ask the Caddy community for advice, as we cannot provide support for third-party software and services.</p> <p>WebSocket proxying automatically works in Caddy 2. There is no need to enable this as necessary for Caddy 1, Apache, and NGINX. In addition, Caddy 2 may automatically create  and update Let's Encrypt HTTPS certificates.</p> <p>Example</p> <pre><code>example.com {\n    reverse_proxy photoprism:2342\n}\n</code></pre> <p>Please refer to the official documentation for further details.</p>"},{"location":"getting-started/proxies/caddy-2/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/haproxy/","title":"Using HAPROXY as Reverse Proxy","text":"<p>Should you experience problems with Haproxy, we recommend that you ask the Haproxy community for advice, as we cannot provide support for third-party software and services.</p> <pre><code>defaults\n    #Defaults used in frontend and backends\n    #Defined here to avoid repitition\n    #Can be overwritten in frontends and/or backends\n    log global\n    option logasap\n    mode http\n    timeout connect 30000ms\n    timeout client 30000ms\n    timeout server 30000ms\n    timeout tunnel 120000ms\n    timeout queue 5000ms\n\n##########################################################\n\n#Frontend config\nfrontend fe-photoprism\n    #'photo' is the name of the subdomain\n    #TLS certs should be referenced here, maybe created by dehydrated, certbot, ...\n    bind *:443 ssl crt /etc/ssl/localcerts/wildcard.example.com.pem\n\n    #SNI-Detection\n    #Can be removed, if not needed\n    acl sni_photo hdr(host) -i photo.example.com\n    #Use Backend if domain (acl is set) detected\n    use_backend be-photoprism if sni_photo\n\n    #Every unflagged request goes here, may target to another backend as well\n    default_backend be-photoprism\n\n##########################################################\n\n#Backend config\n#be-photoprism is the name of the backend referenced in frontend\nbackend be-photoprism\n    retries 3\n    option forwardfor\n    no option httpclose\n\n    #Local PhotoPrism-Instance\n    server photo 127.0.0.1:2342\n</code></pre>"},{"location":"getting-started/proxies/haproxy/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/nginx/","title":"Using NGINX as Reverse Proxy","text":"<p>Getting Support</p> <p>Since NGINX is notoriously difficult to configure, we unfortunately can't offer you support in case something isn't working. If you have NGINX related issues such as failed uploads, connection errors, broken thumbnails, and video playback problems, we recommend that you ask the NGINX community for advice or try to use Traefik as a reverse proxy, as it is easier to configure and much more convenient to work with overall.</p> <p>This tutorial explains, how to configure NGINX WebSocket connections between your client and backend services.</p> <p>Example</p> <pre><code>http {\n  server {\n    listen 80 ssl;\n    listen [::]:80 ssl;\n    server_name example.com;\n    client_max_body_size 500M;\n\n    # With SSL via Let's Encrypt\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; # managed by Certbot\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; # managed by Certbot\n    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot\n\n    location / {\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header Host $host;\n\n      proxy_pass http://photoprism:2342;\n\n      proxy_buffering off;\n      proxy_http_version 1.1;\n      proxy_set_header Upgrade $http_upgrade;\n      proxy_set_header Connection \"upgrade\";\n\n      client_max_body_size 500M;\n    }\n  }\n}\n</code></pre> <p>At the very least you will need to adapt <code>server_name</code> and the <code>ssl_certificate</code>/<code>ssl_certificate_key</code> paths to match your setup. Please refer to their official documentation for further details.</p> <p>View \"Pitfalls and Common Mistakes\" \u203a</p>"},{"location":"getting-started/proxies/nginx/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/swag/","title":"Using SWAG as Reverse Proxy","text":"<p>Should you experience problems with Swag, we recommend that you ask the Swag community for advice, as we cannot provide support for third-party software and services.</p> <p>To simplify the setup of a reverse HTTPS proxy, Linuxserver.io developed SWAG.</p> <p>SWAG - Secure Web Application Gateway (formerly known as letsencrypt, no relation to Let's Encrypt\u2122) sets up a Nginx web server and reverse proxy with PHP support and a built-in certbot client that automates free SSL server certificate generation and renewal processes (Let's Encrypt and ZeroSSL). It also contains fail2ban for intrusion prevention.</p>"},{"location":"getting-started/proxies/swag/#setup","title":"Setup","text":""},{"location":"getting-started/proxies/swag/#step-1-get-a-domain","title":"Step 1: Get a domain","text":"<p>The first step is to grab a dynamic DNS if you don't have your own subdomain already. You can get this from for example DuckDNS.</p>"},{"location":"getting-started/proxies/swag/#step-2-set-up-swag","title":"Step 2: Set-up SWAG","text":"<p>Then you will need to set up SWAG, the variables of the docker compose are explained on the Github page of SWAG. This is an example of how to set it up using duckdns and docker-compose. </p> <p>docker-compose.yml</p> <pre><code>version: \"2.1\"\nservices:\nswag:\nimage: ghcr.io/linuxserver/swag\ncontainer_name: swag\ncap_add:\n- NET_ADMIN\nenvironment:\n- PUID=1000\n- PGID=1000\n- TZ=Europe/Brussels\n- URL=&lt;mydomain.duckdns&gt;\n- SUBDOMAINS=wildcard\n- VALIDATION=duckdns\n- CERTPROVIDER= #optional\n- DNSPLUGIN= #optional\n- DUCKDNSTOKEN=&lt;duckdnstoken&gt; - EMAIL=&lt;e-mail&gt; #optional\n- ONLY_SUBDOMAINS=false #optional\n- EXTRA_DOMAINS=&lt;extradomains&gt; #optional\n- STAGING=false #optional\nvolumes:\n- /etc/config/swag:/config\nports:\n- 443:443\nrestart: unless-stopped\n</code></pre> <p>Don't forget to change the <code>mydomain.duckdns</code> into your personal domain and the <code>duckdnstoken</code> into your token and remove the brackets.</p>"},{"location":"getting-started/proxies/swag/#step-3-change-the-config-files","title":"Step 3: Change the config files","text":"<p>Navigate to the config folder of SWAG and head to <code>proxy-confs</code>. If you used the example above, you should navigate to: <code>/etc/config/swag/nginx/proxy-confs/ </code>. There are a lot of preconfigured files to use for different apps such as radarr,sonarr,overseerr,... </p> <p>To use the bundled configuration file, simply rename <code>photoprism.subdomain.conf.sample</code> in the proxy-confs folder to <code>photoprism.subdomain.conf</code>. Alternatively, you can create a new file <code>photoprism.subdomain.conf</code> in proxy-confs with the following configuration:</p> <p>photoprism.subdomain.conf</p> <pre><code>server {\nlisten 443 ssl http2;\nlisten [::]:443 ssl http2;\n\nserver_name photoprism.*;\n\ninclude /config/nginx/ssl.conf;\n\nclient_max_body_size 0;\n\nlocation / {\ninclude /config/nginx/proxy.conf;\nresolver 127.0.0.11 valid=30s;\nset $upstream_app photoprism;\nset $upstream_port 2342;\nset $upstream_proto http;\nproxy_pass $upstream_proto://$upstream_app:$upstream_port;\n}\n\n}   </code></pre>"},{"location":"getting-started/proxies/swag/#step-4-port-forward-port-443","title":"Step 4: Port-forward port 443","text":"<p>Since SWAG allows you to set up a secure connection, you will need to open port 443 on your router for encrypted traffic. This is way more secure than port 80 for http.</p>"},{"location":"getting-started/proxies/swag/#step-5-restart-swag","title":"Step 5: Restart SWAG","text":"<p>When you change anything in the config of Nginx, you will need to restart the container using <code>docker restart swag</code>. If everything went well, you can now access photoprism on the subdomain you configured: photoprism.mydomain.duckdns.org</p> <p>Attention</p> <p>The docker-container of photoprism won't be named \"photoprism\", it will be \"name_photoprism\". To check this, execute <code>docker ps</code> and check wether it is named \"photoprism\". If it's not, go to your docker-compose.yml file and add the following line to photoprism below 'image' <code>container_name=photoprism</code>. Restart swag afterwards. Keep in mind to not have two photoprism containers with the same name!  You could also change the config file of Swag with the right name in the proxy-confs directory.</p>"},{"location":"getting-started/proxies/swag/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/proxies/traefik/","title":"Using Traefik as Reverse Proxy","text":"<p>Best Choice</p> <ul> <li>No special settings required in combination with modern web applications</li> <li>WebSocket proxying automatically works</li> <li>Traefik can create and update Let's Encrypt HTTPS certificates for you</li> </ul> <p>Our example shows a working configuration, excluding general PhotoPrism config options  documented in Setup Using Docker Compose:</p> <p>docker-compose.yml</p> <pre><code>services:\ntraefik:\nimage: traefik:v2.5\nrestart: unless-stopped\nports:\n- \"80:80\"\n- \"443:443\"\nvolumes:\n- \"./traefik.yaml:/etc/traefik/traefik.yaml\"\n- \"./traefik/data:/data\"\n- \"/var/run/docker.sock:/var/run/docker.sock\"\n\nphotoprism:\nimage: photoprism/photoprism:latest\nrestart: unless-stopped\nlabels:\n- \"traefik.http.routers.photoprism.rule=Host(`example.com`)\"\n- \"traefik.http.routers.photoprism.tls=true\"\n- \"traefik.http.routers.photoprism.tls.certresolver=myresolver\"\nvolumes:\n- \"./originals:/photoprism/originals\"\n- \"./storage:/photoprism/storage\"\nenvironment:\nPHOTOPRISM_SITE_URL: \"https://example.com/\"\n</code></pre> <p>traefik.yaml</p> <pre><code>entryPoints:\nweb:\naddress: \":80\"\nhttp:\nredirections:\nentryPoint:\nto: websecure\nwebsecure:\naddress: \":443\"\n\nproviders:\ndocker: {}\n\ncertificatesResolvers:\nmyresolver:\nacme:\nemail: you@example.com\nstorage: /data/letsencrypt.json\nhttpChallenge:\nentryPoint: web\n</code></pre> <p>Please refer to the official documentation for further details.</p>"},{"location":"getting-started/proxies/traefik/#why-use-a-proxy","title":"Why Use a Proxy?","text":"<p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to connect as well.</p> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/","title":"MicroSD Image for the Raspberry Pi","text":"<p> The easiest way to run PhotoPrism on a Raspberry Pi is with PhotoPrismPi.<sup>1</sup> Simply flash the image to an SD card and boot your device with it.</p> <p>We recommend using a fast MicroSD card with at least 64 GB so that you don't run out of storage space later on. These are usually sold with an adapter that fits into normal SD card slots.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#step-1-install-balenaetcher","title":"Step 1: Install balenaEtcher","text":"<p>Etcher is a powerful OS image flasher that makes flashing an SD card a pleasant and safe experience. You can download it from the official website or GitHub:</p> <ul> <li>https://www.balena.io/etcher/</li> <li>https://github.com/balena-io/etcher/releases</li> </ul>"},{"location":"getting-started/raspberry-pi/microsd-image/#step-2-flash-from-url","title":"Step 2: Flash from URL","text":"<p>Open balenaEtcher and enter the following URL as image source:</p> <pre><code>https://dl.photoprism.app/dist/photoprismpi/latest.zip\n</code></pre> <p></p> <p>When you have selected the image and inserted a suitable card into your computer, press Flash!.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#step-3-boot-your-device","title":"Step 3: Boot Your Device","text":"<p>Insert the MicroSD card into the Pi, make sure your device is connected to a wired network, and turn it on. After a few minutes,<sup>2</sup> our latest release should be ready to use when you navigate to http://photoprismpi.local/!<sup>3</sup></p>"},{"location":"getting-started/raspberry-pi/microsd-image/#user-accounts","title":"User Accounts","text":"<p>When you first log in to PhotoPrism, the username for the initial super admin account is <code>admin</code> and the password is <code>photoprismpi</code>.</p> <p>You can also connect to the server via SSH with the username <code>ubuntu</code> and password <code>ubuntu</code>.</p> <p>Both passwords should be changed immediately if your Pi is connected to a public network, as they can be easily guessed.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#storage-folders","title":"Storage Folders","text":"<p>Uploads, sidecar and cache files are stored in <code>/opt/photoprism</code>. External drives can be connected via USB and accessed as folders <code>/mnt/a</code> to <code>/mnt/d</code> without further configuration.</p> <p>Should you want to make changes to the default settings, you can find the <code>docker-compose.yml</code> file in <code>/boot/firmware/docker-compose/photoprism</code>. After connecting via SSH with the credentials provided above, you can obtain root privileges by running <code>sudo -i</code>.</p>"},{"location":"getting-started/raspberry-pi/microsd-image/#https-proxy","title":"HTTPS Proxy","text":"<p>Caddy is installed as a reverse proxy that can be configured in <code>/etc/caddy/Caddyfile</code>. By default, the automatically generated certificates are not recognized as valid by browsers, so you will see a warning when connecting over HTTPS.</p> <ol> <li> <p>Based on Ubuntu Server 22.04 and CustomPiOS by Guy Sheffer.\u00a0\u21a9</p> </li> <li> <p>Download and installation time depends on the speed of your Internet connection.\u00a0\u21a9</p> </li> <li> <p>If you can't connect, try using the existing hostname or IP address instead.\u00a0\u21a9</p> </li> </ol>"},{"location":"getting-started/troubleshooting/","title":"Troubleshooting Checklists","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/#connection-fails","title":"Connection Fails","text":"<p>If your browser cannot connect to the Web UI even after waiting a few minutes, run this command to display the last 100 log messages (omit <code>--tail=100</code> to see all):</p> <pre><code>docker compose logs --tail=100\n</code></pre> <p>Before reporting a bug:</p> <ul> <li> Check the logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, and killed:<ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem</li> <li> It may help to add the <code>:z</code> mount flag to volumes when using SELinux (Red Hat/Fedora)</li> <li> Log messages that contain \"no route to host\" indicate a problem with the database or Docker network configuration (follow our examples)</li> </ul> </li> <li> Make sure you are using the correct protocol (default is <code>http</code>), port (default is <code>2342</code>), and host (default is <code>localhost</code>):<ul> <li> Check if the server port you try to use has been exposed and no firewall is blocking it</li> <li> Only use <code>localhost</code> or <code>127.0.0.1</code> if the server is running on the same computer (host)</li> <li> Avoid using IP addresses other than <code>127.0.0.1</code> directly, as they can change</li> <li> We recommend configuring a local hostname to access other hosts on your network</li> </ul> </li> <li> If you use a firewall, ensure that it is configured correctly and that outgoing connections to our geocoding API are allowed</li> <li> Note that HTTP security headers will prevent the app from loading in a frame (override them)</li> <li> Verify your computer meets the system requirements</li> <li> Go through the checklist for fatal server errors</li> </ul>"},{"location":"getting-started/troubleshooting/#mariadb","title":"MariaDB","text":"<p>Should MariaDB get stuck in a restart loop and PhotoPrism can't connect to it, this indicates a memory, filesystem, or other permission issue:</p> <pre><code>mariadb: mysqld: ready for connections.\nmariadb: mysqld (initiated by: unknown): Normal shutdown\nphotoprism: dial tcp 172.18.0.2:3306: connect: no route to host\nmariadb: mysqld: Shutdown complete\n</code></pre> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/#firewall","title":"Firewall","text":"<p>Maps &amp; Places: As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. You therefore need allow requests to these API endpoints if you have a firewall installed and make sure your Internet connection is working.</p> <p>Learn more \u203a</p> <p>IPTables: On Linux, Docker manipulates the <code>iptables</code> rules to provide network isolation. This does have some implications for what you need to do if you want to have your own policies in addition to the rules Docker manages.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/#debug-mode","title":"Debug Mode","text":"<p>To enable debug mode, set <code>PHOTOPRISM_DEBUG</code> to <code>\"true\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--debug</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\nphotoprism:\nenvironment:\nPHOTOPRISM_DEBUG: \"true\"\n</code></pre> <p>Then restart all services for the changes to take effect. It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting:</p> <pre><code>docker compose stop\ndocker compose up </code></pre> <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.</p>"},{"location":"getting-started/troubleshooting/#docker-doesnt-work","title":"Docker Doesn't Work","text":"<p>Users of Red Hat-compatible Linux distributions such as Red Hat Enterprise Linux\u00ae, CentOS, Fedora, AlmaLinux, and Rocky Linux can substitute the <code>docker</code> and <code>docker compose</code> commands with <code>podman</code> and <code>podman-compose</code> as drop-in replacements.</p> <p>\u21aa Getting Docker Up and Running</p>"},{"location":"getting-started/troubleshooting/#bad-performance","title":"Bad Performance","text":"<p>\u21aa Performance Tips</p> <p>\u21aa Solving Windows-Specific Issues</p>"},{"location":"getting-started/troubleshooting/#fatal-server-errors","title":"Fatal Server Errors","text":"<p>Fatal errors are often caused by one of the following conditions:</p> <ul> <li> Your (virtual) server disk is full (add storage)</li> <li> You have accidentally mounted the wrong folders (update config and restart)</li> <li> There is disk space left, but a usage or the inode limit has been reached (change it)</li> <li> You are using a filesystem or network drive with a file size limit (change settings or storage)</li> <li> The storage folder is not writable or mounted read-only (change permissions)</li> <li> Symbolic links were mounted or used within a storage folder (replace with actual paths)</li> <li> The server is low on memory (add memory)</li> <li> You didn't configure at least 4 GB of swap space (add swap)</li> <li> High-resolution panoramic images require additional memory above the recommended minimum (add more swap or memory)</li> <li> The server CPU is overheating (improve cooling)</li> <li> The server has an outdated operating system that is not fully compatible (update)</li> <li> The server hardware is defective and causes random panics (test on another server)</li> <li> The database server is not running, incompatible, or misconfigured (start, upgrade, or fix it)</li> <li> You've upgraded the MariaDB server without running <code>mariadb-upgrade</code></li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder</li> <li> There are network problems caused by a bad configuration, firewall, or unstable connection</li> <li> Kernel security modules such as AppArmor and SELinux are blocking permissions</li> <li> Your Raspberry Pi has not been configured according to our recommendations</li> </ul> <p>We recommend checking your Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, and killed:</p> <ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem </li> <li> Log messages that contain \"no route to host\" indicate a problem with the database or network configuration (follow our examples)</li> </ul> <p>Start a full rescan if necessary, for example, if it looks like thumbnails or pictures are missing.</p>"},{"location":"getting-started/troubleshooting/#app-not-loading","title":"App Not Loading","text":"<p>If the app doesn't load in your browser when you navigate to the server URL, you can check the browser console for helpful errors and warnings. Sometimes you just need to wait a moment, for example, if you are using a slow wireless connection or the server was started only a few seconds ago. In case this does not help:</p> <ul> <li> You are using an incompatible browser (try another browser)</li> <li> JavaScript is disabled in your browser settings, so you only see the splash screen (enable it)</li> <li> JavaScript was disabled by a browser plugin (disable it or add an exception)</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> HTTP security headers prevent the app from loading in a frame (override them)</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> There is a problem with your network connection (test if other sites work)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul>"},{"location":"getting-started/troubleshooting/#cannot-log-in","title":"Cannot Log In","text":"<p>If password authentication is enabled and the user interface loads, but you can't log in with what you assume is the correct password:</p> <ul> <li> There is a problem with the integrity, stability or connection of the database that you should be able to diagnose by watching the logs for errors and warnings</li> <li> You had too many failed login attempts, therefore another attempt from your computer is temporarily not possible</li> <li> Caps Lock is enabled on your keyboard, your computer has the wrong input locale set, or somebody else might have changed the password without telling you</li> <li> <code>PHOTOPRISM_ADMIN_PASSWORD</code> does not have a minimum length of 8 characters, so PhotoPrism has been started without a password since there is no default</li> <li> The password may be correct, but the username is wrong and does not match <code>PHOTOPRISM_ADMIN_USER</code></li> <li> You upgraded from a Development Preview and might need to run the <code>photoprism users reset --yes</code> command in a terminal after the upgrade, see Known Issues for details</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> <li> Remember that the initial admin username and password cannot be changed after PhotoPrism has been started for the first time</li> </ul> <p>To see which user accounts exist, open a terminal and run <code>photoprism users ls</code>. A new password can be set with <code>photoprism passwd [username]</code>. You can then try to log in again. Upgrade to the latest release, restart the server, and check the logs for errors and warnings if it still doesn't work.</p>"},{"location":"getting-started/troubleshooting/#missing-pictures","title":"Missing Pictures","text":"<p>If you have indexed your library and some images or videos are missing, first check Library &gt; Errors for errors and warnings. In case the application logs don't contain anything helpful:</p> <ul> <li> The files exceed the size limit in megabyte or the resolution limit in megapixels</li> <li> The files have bad filesystem permissions or the wrong owner, so they cannot be opened</li> <li> The pictures are in Review due to low quality or incomplete metadata</li> <li> The file type is generally unsupported</li> <li> The file type is generally supported, but a specific feature or codec is not</li> <li> The indexer has skipped the files because they are exact duplicates</li> <li> The files are ignored based on pattern in a <code>.ppignore</code> file</li> <li> They are in Library &gt; Hidden because thumbnails could not be created:<ul> <li> Convert to JPEG is disabled in Settings &gt; Library (enable it)</li> <li> FFmpeg and/or RAW converters are disabled in Settings &gt; Advanced</li> <li> The file is broken, e.g. because of short Huffman data (try to fix it)</li> <li> Your (virtual) server disk is full (add storage)</li> <li> The storage folder is not writable (change permissions)</li> <li> A disk usage or the inode limit has been reached (remove or increase it)</li> </ul> </li> <li> Multiple files were stacked based on their metadata or file names</li> <li> The private or archived status was restored from a backup</li> <li> The NSFW filter is enabled, so they were marked as private</li> <li> You are not signed in as admin, so you can't see everything</li> <li> You try to index a shared drive on a remote server, but the server is offline</li> <li> The indexer has crashed because you didn't configure at least 4 GB of swap</li> <li> Somebody has deleted files without telling you</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>Depending on the cause of the problem, you may need to perform a full rescan once the issue is resolved.</p>"},{"location":"getting-started/troubleshooting/#zip-archives","title":"Zip Archives","text":"<p>When you want to download multiple pictures and find that some of them are missing from the resulting zip archive, or you get the error message \"No files available for download\":</p> <ul> <li> Index your library and wait until indexing is complete, as your index may be incomplete or out of date</li> <li> In some cases, you may have to perform a complete rescan of your library, for example after upgrading to a new major release</li> </ul>"},{"location":"getting-started/troubleshooting/#wrong-search-results","title":"Wrong Search Results","text":"<p>If search results are incorrect, for example, in the wrong order or not filtered properly:</p> <ul> <li> Indexing is still in progress and has not been completed yet</li> <li> You need to re-index your pictures, for example after updating PhotoPrism</li> <li> Previously failed migrations must be re-run to update the index schema</li> <li> The database server is incompatible or needs to be updated</li> </ul> <p>It may be a bug if you cannot find any other reasons, such as a local configuration problem or a misunderstanding in how the software works. Please note that reports must be reproducible in order for us to provide a solution.</p>"},{"location":"getting-started/troubleshooting/#broken-thumbnails","title":"Broken Thumbnails","text":"<p>If some pictures have broken or missing thumbnails, first check Library &gt; Errors for errors and warnings. In case the application logs don't contain anything helpful:</p> <ul> <li> The issue can be resolved by reloading the page or clearing the browser cache</li> <li> You browse non-JPEG files in Library &gt; Originals which have an icon but no preview</li> <li> Dynamic Previews are enabled in Settings &gt; Advanced, but the server is not powerful enough</li> <li> The sizes in Settings &gt; Advanced have been changed so the request can't be fulfilled</li> <li> FFmpeg and/or RAW converters are disabled in Settings &gt; Advanced (enable them)</li> <li> Convert to JPEG is disabled in Settings &gt; Library (enable it)</li> <li> Your (virtual) server disk is full (add storage)</li> <li> A disk usage or the inode limit has been reached (remove or increase it)</li> <li> The storage folder is not writable or mounted read-only (change permissions)</li> <li> Files were deleted manually, for example to free up disk space</li> <li> Files can't be opened, e.g. because the file system permissions have been changed</li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder</li> <li> Some thumbnails could not be created because you didn't configure at least 4 GB of swap</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> Your proxy, router, or firewall has a request rate limit, so some requests fail</li> <li> There are other network problems caused by a firewall, router, or unstable connection</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>We also recommend checking your Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, and killed:</p> <ul> <li> If a service has been \"killed\" or otherwise automatically terminated, this points to a memory problem</li> <li> In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem</li> </ul> <p>Depending on the cause of the problem, you may need to perform a full rescan once the issue is resolved.</p>"},{"location":"getting-started/troubleshooting/#videos-dont-play","title":"Videos Don't Play","text":"<p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have Exiftool enabled to extract metadata such as duration, resolution, and codec.</p> <p>If videos do not play and/or you only see a white/black area when you open a video:</p> <ul> <li> You are using an incompatible browser, e.g. without AVC support (try another browser)</li> <li> AVC support or related JavaScript features have been disabled in your browser (check the settings and try another browser)</li> <li> It is a large non-AVC video that needs to be transcoded first (wait or run <code>photoprism convert</code> to pre-transcode videos)</li> <li> An ad blocker or other plugins block requests (disable them or add an exception)</li> <li> Your (virtual) server disk is full (add storage)</li> <li> A disk usage or the inode limit has been reached (remove or increase it)</li> <li> The storage folder is not writable or mounted read-only (change permissions)</li> <li> Files are stored on an unreliable device such as a USB flash drive or a shared network folder (check if the files are accessible)</li> <li> Your browser cannot communicate properly with the server, e.g. because a reverse proxy, VPN, or CDN is configured incorrectly (check its configuration and try without)</li> <li> There are other network problems caused by a proxy, firewall, or unstable connection (try a direct connection)</li> <li> You are connected to the wrong server, VPN, CDN, or a DNS record has not been updated yet</li> </ul> <p>We recommend that you check your Docker Logs and the browser console for messages related to HTTP requests, permissions, security, FFmpeg, videos, and file conversion.</p> <p>Please note:</p> <ol> <li>Not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</li> <li>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</li> <li>MPEG-4 AVC videos are not re-encoded if they exceed the configured bitrate limit. To reduce the size of AVC videos, you can manually replace the original files with a smaller version or wait for a future release that offers this functionality.</li> </ol> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"getting-started/troubleshooting/browsers/","title":"Diagnosing Frontend Issues","text":"<p>Problems with the user interface can be caused by a bug or an incompatible browser:</p> <ul> <li>some features may not be supported by non-standard browsers, as well as nightly, unofficial, or outdated versions</li> <li>not all video and audio formats can be played with every browser, device, and operating system</li> <li>for example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera</li> </ul> <p>If the user interface doesn't load at all, our App Not Loading checklist helps you identify and resolve the cause.</p>"},{"location":"getting-started/troubleshooting/browsers/#try-another-browser","title":"Try Another Browser","text":"<p>To test if you have a general problem that is not browser-specific, open the Web UI in other browsers:</p> <ul> <li>if you are using Firefox Nightly, try the stable version and Chrome or Chromium</li> <li>if you have browser plugins installed, try disabling them to see if this makes a difference</li> <li>when the problem disappears, you know that the issue is browser-dependent or caused by a plugin</li> <li>otherwise, the issue may not be specific to the browser version</li> <li>make a note in which browsers the problem occurs, as this will be helpful when submitting a support request</li> </ul> <p>The user interface works with most modern browsers, and runs best on Chrome, Chromium, Safari, Firefox, and Edge. Opera and Samsung Internet have been reported to be compatible as well. Due to limited resources, we can not test every release with all browser types and versions.</p>"},{"location":"getting-started/troubleshooting/browsers/#getting-error-details","title":"Getting Error Details","text":"<p>If possible, please also include the error type, error message, and URL of the affected resource when submitting a support request. For this purpose, check the browser console for warnings and errors as described below. It is perfectly fine to take screenshots instead of writing down the details.</p> <p>In case you don't see any log messages, try reloading the page, as the problem may occur while the page is loading.</p> Chrome, Chromium, and EdgeFirefoxSafari <ul> <li>press \u2318+Option+J (Mac) or Ctrl+Shift+J (Windows, Linux, Chrome OS) to go directly to the Developer Tools</li> <li>or, navigate to More tools &gt; Developer tools in the browser menu and open the Console tab</li> </ul> <ul> <li>press \u2318+Option+K (Mac) or Ctrl+Shift+K (Windows) to go directly to the Firefox Web Console panel</li> <li>or, navigate to Web Development &gt; Web Console in the menu and open the Console panel</li> </ul> <p>Before you can access the console in Safari, you first need to enable the Develop menu:</p> <ol> <li>Choose Safari Menu &gt; Preferences and select the Advanced Tab</li> <li>Select \"Show Develop menu in menu bar\"</li> </ol> <p>Once the Develop menu is enabled:</p> <ul> <li>press Option+\u2318+C to go directly to the Javascript Console</li> <li>or, navigate to Develop &gt; Show Javascript Console in the browser menu</li> </ul> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"getting-started/troubleshooting/docker/","title":"Getting Docker Up and Running","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/docker/#installation","title":"Installation","text":"<p>If you cannot use the <code>docker</code> and <code>docker compose</code> (or <code>docker-compose</code>) commands, make sure Docker is running on the host you are connected to and your current user has permission to use it. The following instructions explain how to install Docker:</p> <ul> <li>Ubuntu, Mint, Debian, and Arch Linux</li> <li>Microsoft Windows</li> <li>Apple macOS</li> </ul>"},{"location":"getting-started/troubleshooting/docker/#podman","title":"Podman","text":"<p>Podman is supported as a replacement for Docker on Red Hat Enterprise Linux\u00ae and compatible Linux distributions such as CentOS, Fedora, AlmaLinux, and Rocky Linux. The following installs the <code>podman</code> and <code>podman-compose</code> commands if they are not already installed:</p> <pre><code>sudo dnf update -y\nsudo dnf install epel-release -y\nsudo dnf install netavark aardvark-dns podman podman-docker podman-compose -y\nsudo systemctl start podman\nsudo systemctl enable podman\npodman --version\n</code></pre> <p>We also provide a setup script that conveniently installs Podman and downloads the default configuration to a directory of your choice:</p> <pre><code>mkdir -p /opt/photoprism\ncd /opt/photoprism\ncurl -sSf https://dl.photoprism.app/podman/install.sh | bash\n</code></pre> <p>Please keep in mind to replace the <code>docker</code> and <code>docker compose</code> commands with <code>podman</code> and <code>podman-compose</code> when following the examples in our documentation.</p>"},{"location":"getting-started/troubleshooting/docker/#ubuntu-linux","title":"Ubuntu Linux","text":"<p>If you are using Ubuntu Linux, you can run this script to install the latest Docker version, including the Compose Plugin, on your server in one step:</p> <pre><code>bash &lt;(curl -s https://setup.photoprism.app/ubuntu/install-docker.sh)\n</code></pre>"},{"location":"getting-started/troubleshooting/docker/#docker-compose","title":"Docker Compose","text":"<p>The examples in our guides now use the new <code>docker compose</code> command by default. However, if your Docker version does not yet support the Compose Plugin, you can still use the standalone <code>docker-compose</code> command.</p> <p>On some Linux distributions, you may need to install an additional package. To do so, you can use a graphical software package manager or run the following command in a terminal to install the Compose Plugin for Docker on Ubuntu and Debian:</p> <pre><code>sudo apt update\nsudo apt install docker-compose-plugin\n</code></pre> <p>If that does not work, this will install the legacy <code>docker-compose</code> command:</p> <pre><code>sudo apt update\nsudo apt install docker-compose\n</code></pre> <p>Running the following commands will add a <code>docker-compose</code> alias for the new Compose plugin so that older scripts don't break:</p> <pre><code>echo 'docker compose \"$@\"' | sudo tee /bin/docker-compose\nsudo chmod +x /bin/docker-compose\n</code></pre>"},{"location":"getting-started/troubleshooting/docker/#using-docker","title":"Using Docker","text":""},{"location":"getting-started/troubleshooting/docker/#cannot-connect","title":"Cannot Connect","text":"<p>If you see the error message \"Cannot connect to the Docker daemon\", it means that Docker is not installed or not running yet. Before you try anything else, it may help to simply restart your computer.</p> <p>On many Linux distributions, this command will start the Docker daemon manually if needed:</p> <pre><code>sudo systemctl start docker.service\n</code></pre> <p>On other operating systems, start Docker Desktop and enable the \"Start Docker Desktop when you log in\" option in its settings.</p>"},{"location":"getting-started/troubleshooting/docker/#connection-aborted","title":"Connection Aborted","text":"<p>If you see the error message \"Connection aborted\" or \"Connection denied\", it usually means that your current user does not have permission to use Docker.</p> <p>On Linux, this command grants permission by adding a user to the <code>docker</code> group (relogin for changes to take effect):</p> <pre><code>sudo usermod -aG docker [username]\n</code></pre> <p>Alternatively, you can prefix the <code>docker</code> and <code>docker-compose</code> commands with <code>sudo</code> when not running as root, for example:</p> <pre><code>sudo docker compose stop\nsudo docker compose up -d\n</code></pre> <p>Note that this will point the home directory shortcut <code>~</code> to <code>/root</code> in the <code>volumes:</code> section of your <code>docker-compose.yml</code>.</p>"},{"location":"getting-started/troubleshooting/docker/#iptables-firewall","title":"IPTables Firewall","text":"<p>On Linux, Docker manipulates the <code>iptables</code> rules to provide network isolation. This does have some implications for what you need to do if you want to have your own policies in addition to the rules Docker manages.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/docker/#viewing-logs","title":"Viewing Logs","text":"<p>Run this command to display the last 100 log messages (omit <code>--tail=100</code> to see all):</p> <pre><code>docker compose logs --tail=100\n</code></pre> <p>To enable debug mode, set <code>PHOTOPRISM_DEBUG</code> to <code>\"true\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--debug</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\nphotoprism:\nenvironment:\nPHOTOPRISM_DEBUG: \"true\"\n</code></pre> <p>Then restart all services for the changes to take effect. It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting:</p> <pre><code>docker compose stop\ndocker compose up </code></pre> <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.</p>"},{"location":"getting-started/troubleshooting/docker/#adding-swap","title":"Adding Swap","text":"<p>Note that high-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p>"},{"location":"getting-started/troubleshooting/docker/#linux","title":"Linux","text":"<p>Open a terminal and run this command to check if your server has swap configured.</p> <pre><code>swapon --show\n</code></pre> <p>Example output:</p> <pre><code>NAME      TYPE SIZE USED PRIO\n/swapfile file  64G  88M   -2\n</code></pre> <p>This means you have 64 GB of swap and don't need to add more. Learn how much you need.</p> <p>Otherwise, run these commands to permanently add 4 GB of swap (or more depending on how much physical memory you have):</p> <pre><code>sudo -i\nfallocate -l 4G /swapfile\nchmod 600 /swapfile\nmkswap /swapfile\nswapon /swapfile\necho '/swapfile none swap sw 0 0' | tee -a /etc/fstab\n</code></pre> <p>You can skip <code>sudo -i</code> if you are already logged in as root.</p>"},{"location":"getting-started/troubleshooting/docker/#raspbian","title":"Raspbian","text":"<p>Open a terminal on your Raspberry Pi and run the following command to verify if it has swap configured:</p> <pre><code>swapon --show\n</code></pre> <p>Example output:</p> <pre><code>NAME      TYPE SIZE USED PRIO\n/swapfile file  100M  0B   -2\n</code></pre> <p>If no swap has been configured or the command only shows 100 MB, open <code>/etc/dphys-swapfile</code> with a text editor, search for <code>CONF_SWAPSIZE=100</code> and increase the value to <code>2048</code> if your device has 4 GB of physical memory, and <code>4096</code> otherwise:</p> <pre><code>sudo nano /etc/dphys-swapfile\n</code></pre> <p>Then restart for the changes to take effect:</p> <pre><code>sudo reboot\n</code></pre> <p>In addition, you can reduce memory usage and improve stability by setting <code>PHOTOPRISM_WORKERS</code> to <code>1</code> in your <code>docker-compose.yml</code> file to limit the number of indexing workers.</p>"},{"location":"getting-started/troubleshooting/docker/#windows","title":"Windows","text":"<p>On Windows Pro, you may need to disable the WSL 2-based engine under Docker Settings &gt; General  so that you can mount drives other than <code>C:</code> This will enable Hyper-V, which Microsoft doesn't offer to its Windows Home customers. Docker Desktop uses dynamic memory allocation with WSL 2.</p> <p>It is important to explicitly increase the Docker memory limit to 4 GB or more when using Hyper-V. The default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p>"},{"location":"getting-started/troubleshooting/docker/#macos","title":"macOS","text":"<p>It is important to increase the Docker memory limit to 4 GB or more, as the default of 2 GB can reduce indexing performance and cause unexpected restarts. Also, ensure that you configure at least 4 GB of swap space.</p>"},{"location":"getting-started/troubleshooting/docker/#kernel-security","title":"Kernel Security","text":"<p>We recommend disabling Linux kernel security modules like SELinux (Red Hat/Fedora) on private servers, especially if you have no experience configuring them.</p> <p>If you have working configuration rules for a particular Linux distribution, feel free to share the instructions with the community so that less experienced users can harden their installation without running into problems.</p>"},{"location":"getting-started/troubleshooting/docker/#file-permissions","title":"File Permissions","text":"<p>Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem:</p> <ul> <li> Use a file manager, or the commands <code>ls -alh</code>, <code>chmod</code>, and <code>chown</code> on Unix-like operating systems, to check and change filesystem permissions so all files and folders are accessible</li> <li> The app and database storage folders must be writable as well: Verify that the services have write permissions and that you have not mounted the folders read-only on your host or via Docker using the <code>:ro</code> flag</li> <li> If you have configured specific user and group IDs for a service, make sure they match</li> <li> If symbolic links are mounted or used within storage folders, replace them with actual paths</li> <li> It may help to add the <code>:z</code> mount flag to volumes when using SELinux (Red Hat/Fedora)</li> <li> When mounting folders that only root has access to, you may have to prefix the <code>docker</code> and <code>docker-compose</code> commands with <code>sudo</code> on Linux if you are not already logged in as root</li> </ul> <p>An easy way to test for missing permissions is to (temporarily) remove restrictions and make the entire folder accessible to everyone:</p> <p><pre><code>sudo chmod -R a+rwx [folder]\n</code></pre> Start a full rescan once all issues have been resolved, especially if it looks like thumbnails or pictures are missing.</p> <p>Be very careful when changing permissions in shared hosting environments. If you are using PhotoPrism on corporate or university servers, we recommend that you ask your IT help desk for advice.</p>"},{"location":"getting-started/troubleshooting/docker/#overlay-volumes","title":"Overlay Volumes","text":"<p>Depending on overlay file system support, it is possible to mount additional host folders as sub folders of <code>/photoprism/originals</code> (or other storage folders), for example:</p> <pre><code>volumes:\n- \"/home/username/Pictures:/photoprism/originals\"\n- \"/example/friends:/photoprism/originals/friends\"\n- \"/mnt/photos:/photoprism/originals/media\"\n</code></pre> <p>For this to work, you should have the <code>cgroupfs-mount</code> package installed, as shown in the installation script we provide. You may otherwise find that files added to the mounted folders are not visible on the host, and data loss may occur.</p> <p>We recommend that you start with a simple configuration without overlay volume mounts or path placeholders like <code>~</code>, and only move on to a more complex setup once this works.</p>"},{"location":"getting-started/troubleshooting/docker/#disk-space","title":"Disk Space","text":"<p>In case the logs show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (get a new one or use a different disk) or a disk usage limit is configured, for example in the Docker, Kubernetes, or Virtual Machine configuration (remove or increase it):</p> <ul> <li>on Linux and other Unix-like operating systems, the available disk space can be viewed by running <code>df -h</code> in a terminal</li> <li>if you are using Kubernetes, Docker Desktop, Hyper-V, or a Virtual Machine, they have their own settings to adjust the size of storage, RAM, and swap</li> <li>for details, refer to the corresponding documentation</li> </ul> <p>Start a full rescan if necessary, for example, if it looks like thumbnails or pictures are missing.</p>"},{"location":"getting-started/troubleshooting/docker/#network-storage","title":"Network Storage","text":"<p>Shared folders that have already been mounted on your host can be mounted like any local drive or directory. Alternatively, you can mount network storage with Docker Compose. Please never store database files on an unreliable device such as a USB stick, SD card, or network drive.</p>"},{"location":"getting-started/troubleshooting/docker/#unix-nfs","title":"Unix / NFS","text":"<p>Follow this <code>docker-compose.yml</code> example to mount Network File System (NFS) shares e.g. from Unix servers or NAS devices:</p> <pre><code>services:\nphotoprism:\n# ...\nvolumes:\n# Map named volume \"originals\"\n# to \"/photoprism/originals\":\n- \"originals:/photoprism/originals\"     mariadb:\n# ...\n\n# Specify named volumes:\nvolumes:\noriginals:\ndriver_opts:\ntype: nfs\n# Authentication and other mounting options:\no: \"addr=1.2.3.4,username=user,password=secret,soft,rw,nfsvers=4\"\n# Mount this path:\ndevice: \":/mnt/example\"\n</code></pre> <p><code>device</code> should contain the path to the share on the NFS server, note the <code>:</code> at the beginning. In the above example, the share can be mounted as the named volume <code>originals</code>. You can also choose another name as long as it is consistent.</p> <p>Driver-specific options can be set after the server address in <code>o</code>, see the nfs manual page. Here are some examples of commonly used options:</p> <ul> <li><code>nfsvers=3</code> or <code>nfsvers=4</code> to specify the NFS version</li> <li><code>nolock</code> (optional): Remote applications on the NFS server are not affected by lock files inside the Docker container (only other processes inside the container are affected by locks)</li> <li><code>timeo=n</code> (optional, default 600): The NFS client waits <code>n</code> tenths of a second before retrying an NFS request</li> <li><code>soft</code> (optional): The NFS client aborts an NFS request after <code>retrans=n</code> unsuccessful retries, otherwise it retries indefinitely</li> <li><code>retrans=n</code> (optional, default 2): Sets the number of retries for NFS requests, only relevant when using <code>soft</code></li> </ul>"},{"location":"getting-started/troubleshooting/docker/#smb-cifs","title":"SMB / CIFS","text":"<p>Follow this <code>docker-compose.yml</code> example to mount CIFS network shares, e.g. from Windows, NAS devices or Linux servers with Samba:</p> <pre><code>services:\nphotoprism:\n# ...\nvolumes:\n# Map named volume \"originals\"\n# to \"/photoprism/originals\":\n- \"originals:/photoprism/originals\"     mariadb:\n# ...\n\n# Specify named volumes:\nvolumes:\noriginals:\ndriver_opts:\ntype: cifs\no: \"username=user,password=secret,rw\"\ndevice: \"//host/folder\"\n</code></pre> <p>Then restart all services for the changes to take effect. Note that related values must start at the same indentation level in YAML and that tabs are not allowed for indentation. We recommend using 2 spaces, but any number will do as long as it is consistent.</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"getting-started/troubleshooting/firewall/","title":"Configuring Your Firewall","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/firewall/#incoming-requests","title":"Incoming Requests","text":"<p>Unless you have changed the default configuration, PhotoPrism is reachable via port 2342 on all network devices. If you are using a firewall, please ensure that this port can be accessed from other computers on your network, or that your instance can be accessed through a reverse proxy:</p> <p></p>"},{"location":"getting-started/troubleshooting/firewall/#outgoing-connections","title":"Outgoing Connections","text":"<p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p> <p>In order to successfully set up your installation and view location details in PhotoPrism, you must allow requests to the following hosts if you have a firewall installed, and make sure that your Internet connection is working:</p> <ul> <li> dl.photoprism.app</li> <li> my.photoprism.app</li> <li> cdn.photoprism.app</li> <li> maps.photoprism.app</li> <li> places.photoprism.app</li> <li> places.photoprism.xyz</li> </ul> <p>In addition, the following API endpoints should be whitelisted so that public Docker images can be pulled from Docker Hub:</p> <ul> <li> auth.docker.io</li> <li> registry-1.docker.io</li> <li> index.docker.io</li> <li> dseasb33srnrn.cloudfront.net</li> <li> production.cloudflare.docker.com</li> </ul>"},{"location":"getting-started/troubleshooting/firewall/#iptables-and-docker","title":"IPTables and Docker","text":"<p>On Linux, Docker manipulates the <code>iptables</code> rules to provide network isolation. This does have some implications for what you need to do if you want to have your own policies in addition to the rules Docker manages.</p> <p>Learn more \u203a</p>"},{"location":"getting-started/troubleshooting/logs/","title":"Collecting Debug Information","text":"Web AppBrowserDocker Logs <p>Make sure Logs is enabled under Settings &gt; General so you can see log messages in the Web UI.</p> <p>Live Logs</p> <p>The continuously updated live logs in Library &gt; Logs are especially useful for diagnosing indexing and import issues, but also display other types of logs (depending on the log level):</p> <ol> <li>Navigate to Library</li> <li>Open the Logs tab</li> </ol> <p>Only a limited number of messages are visible in the Web App to reduce memory usage. You can see all messages in the Docker Logs. This may be more convenient if you are looking for information on a specific file or want to attach your full logs to a support request.</p> <p>Errors and Warnings</p> <ol> <li>Expand the main navigation</li> <li>Open the Library sub navigation</li> <li>Navigate to Library &gt; Errors</li> </ol> <p></p> <p>If you have a frontend issue, it is often helpful to check the browser console for errors and warnings. A console is available in all modern browsers and can be activated via keyboard shortcuts or the browser menu.</p> <p>Problems with the user interface can be caused by a bug or an incompatible browser: Some features may not be supported by non-standard browsers, as well as nightly, unofficial, or outdated versions.</p> <p>In case you don't see any log messages, try reloading the page, as the problem may occur while the page is loading.</p> <p>Chrome, Chromium, and Edge</p> <ul> <li>press \u2318+Option+J (Mac) or Ctrl+Shift+J (Windows, Linux, Chrome OS) to go directly to the Developer Tools</li> <li>or, navigate to More tools &gt; Developer tools in the browser menu and open the Console tab</li> </ul> <p>Firefox</p> <ul> <li>press \u2318+Option+K (Mac) or Ctrl+Shift+K (Windows) to go directly to the Firefox Web Console panel</li> <li>or, navigate to Web Development &gt; Web Console in the menu and open the Console panel</li> </ul> <p>Safari</p> <p>Before you can access the console in Safari, you first need to enable the Develop menu:</p> <ol> <li>Choose Safari Menu &gt; Preferences and select the Advanced Tab</li> <li>Select \"Show Develop menu in menu bar\"</li> </ol> <p>Once the Develop menu is enabled:</p> <ul> <li>press Option+\u2318+C to go directly to the Javascript Console</li> <li>or, navigate to Develop &gt; Show Javascript Console in the browser menu</li> </ul> <p>Run this command to display the last 100 log messages (omit <code>--tail=100</code> to see all):</p> <pre><code>docker compose logs --tail=100\n</code></pre> <p>To enable debug mode, set <code>PHOTOPRISM_DEBUG</code> to <code>\"true\"</code> in the <code>environment:</code> section of the <code>photoprism</code> service (or use the <code>--debug</code> flag when running the <code>photoprism</code> command directly):</p> <pre><code>services:\nphotoprism:\nenvironment:\nPHOTOPRISM_DEBUG: \"true\"\n</code></pre> <p>Then restart all services for the changes to take effect. It can be helpful to keep Docker running in the foreground while debugging so that log messages are displayed directly. To do this, omit the <code>-d</code> parameter when restarting:</p> <pre><code>docker compose stop\ndocker compose up </code></pre> <p>If you see no errors or no logs at all, you may have started the server on a different host and/or port. There could also be an issue with your browser, browser plugins, firewall settings, or other tools you may have installed.</p> <p>The default Docker Compose config filename is <code>docker-compose.yml</code>. For simplicity, it doesn't need to be specified when running <code>docker compose</code> or <code>docker-compose</code> in the same directory. Config files for other apps or instances should be placed in separate folders.</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Ask for technical support if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"getting-started/troubleshooting/mariadb/","title":"Troubleshooting MariaDB Problems","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/mariadb/#compatibility","title":"Compatibility","text":"<p>PhotoPrism is compatible with SQLite 3 and MariaDB 10.5.12+. Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p> <p>Our configuration examples are generally based on the current stable version to take advantage of performance improvements. This does not mean that older versions are no longer supported and you must upgrade immediately. We recommend not using the <code>:latest</code> tag for the MariaDB Docker image and to upgrade manually by changing the tag once we had a chance to test a new major version, e.g.:</p> <pre><code>services:\nmariadb:\nimage: mariadb:10.11\n...\n</code></pre>"},{"location":"getting-started/troubleshooting/mariadb/#cannot-connect","title":"Cannot Connect","text":"<p>First, verify that you are using the correct port (default is <code>3306</code>) and host:</p> <ul> <li>in the internal Docker network, the default hostname is <code>mariadb</code> (same as the service)</li> <li>avoid changing the default network configuration, unless you are experienced with this</li> <li>avoid using IP addresses other than <code>127.0.0.1</code> (localhost) directly, as they can change</li> <li>only use <code>localhost</code> or <code>127.0.0.1</code> if the database port has been exposed as described below and you are on the same computer (host)</li> <li>we recommend configuring a local hostname to access other hosts on your network</li> </ul> <p>To connect to MariaDB from your host or home network, you need to expose port <code>3306</code> in your <code>docker-compose.yml</code> and restart the service for changes to take effect:</p> <pre><code>services:\nmariadb:\nports:\n- \"3306:3306\"\n</code></pre> <p>Set strong passwords if the database is exposed to an external network. Never expose your database to the public Internet in this way, for example, if it is running on a cloud server.</p> <p>If this doesn't help, check the Docker Logs for messages like disk full, disk quota exceeded, no space left on device, read-only file system, error creating path, wrong permissions, no route to host, connection failed, exec format error, no matching manifest, and killed:</p> <ul> <li> Make sure that the database storage folder is readable and writable: Errors such as \"read-only file system\", \"error creating path\", or \"wrong permissions\" indicate a filesystem permission problem</li> <li> If symbolic links are mounted or used within the storage folder, replace them with the actual paths and verify that they are accessible</li> <li> If the MariaDB service has been \"killed\" or otherwise automatically terminated, this can point to a memory problem (add swap and/or memory; remove or increase usage limits)</li> <li> In case the logs also show \"disk full\", \"quota exceeded\", or \"no space left\" errors, either the disk containing the storage folder is full (add storage) or a disk usage limit is configured (remove or increase it)</li> <li> Log messages that contain \"no route to host\" may also indicate a general network configuration problem (follow our examples)</li> <li> You have to resort to alternative Docker images to run MariaDB on ARMv7-based devices and those with a 32-bit operating system</li> </ul>"},{"location":"getting-started/troubleshooting/mariadb/#bad-performance","title":"Bad Performance","text":"<p>Many users reporting poor performance and high CPU usage have migrated from SQLite to MariaDB, so their database schema is no longer optimized for performance. For example, MariaDB cannot handle rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation. It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>Get Performance Tips \u203a View Database Schema \u203a</p>"},{"location":"getting-started/troubleshooting/mariadb/#version-upgrade","title":"Version Upgrade","text":"<p>Should MariaDB fail to start after upgrading from an earlier version (or migrating from MySQL), the internal management schema may be outdated. With older versions, it could only be updated manually. However, newer MariaDB Docker images support automatic upgrades on startup, so you don't have to worry about that anymore.</p> <p>When upgrading from MariaDB 10.x to 11.0, you must replace <code>command: mysqld</code> with <code>command: mariadbd</code> in your <code>docker-compose.yml</code> file, otherwise the database server may fail to start. </p>"},{"location":"getting-started/troubleshooting/mariadb/#manual-update","title":"Manual Update","text":"<p>To manually upgrade the internal database schema, run this command in a terminal:</p> <pre><code>docker compose exec mariadb mariadb-upgrade -uroot -p\n</code></pre> <p>Enter the MariaDB \"root\" password specified in your <code>docker-compose.yml</code> when prompted.</p> <p>Alternatively, you can downgrade to the previous version, create a database backup using the <code>photoprism backup</code> command, start a new database instance based on the latest version, and then restore your index with the <code>photoprism restore</code> command.</p>"},{"location":"getting-started/troubleshooting/mariadb/#auto-upgrade","title":"Auto Upgrade","text":"<p>To enable automatic schema updates, set <code>MARIADB_AUTO_UPGRADE</code> to a non-empty value in your <code>docker-compose.yml</code> as shown in our config example:</p> <pre><code>services:\nmariadb:\nimage: mariadb:10.11\n...\nenvironment:\nMARIADB_AUTO_UPGRADE: \"1\"\nMARIADB_INITDB_SKIP_TZINFO: \"1\"\n...\n</code></pre> <p>Before starting MariaDB in production mode, the database image entrypoint script now runs <code>mariadb-upgrade</code> to update the internal management schema as needed. For example, when you pull a new major release and restart the service.</p> <p>Since PhotoPrism does not require time zone support, you can also add <code>MARIADB_INITDB_SKIP_TZINFO</code> to your config as shown above. However, this is only a recommendation and optional.</p>"},{"location":"getting-started/troubleshooting/mariadb/#incompatible-schema","title":"Incompatible Schema","text":"<p>If your database does not seem to be compatible with the currently installed version of PhotoPrism, for example because search results are missing or incorrect, first make sure you are using a supported database and that its internal management schema is up-to-date. How to do that is explained in the previous section.</p> <p>Once you have verified that neither is a problem, you can run the following command in a terminal to check the status of previous database schema migrations:</p> <pre><code>docker compose exec photoprism photoprism migrations ls\n</code></pre> <p>Omit the <code>docker compose exec photoprism</code> prefix if you are using an interactive terminal session or are running PhotoPrism directly on your computer without Docker.</p>"},{"location":"getting-started/troubleshooting/mariadb/#re-run-migrations","title":"Re-Run Migrations","text":"<p>Should the status of any migration not be OK, you can re-run failed migrations using this command in a terminal:</p> <pre><code>docker compose exec photoprism photoprism migrations run -f\n</code></pre> <p>The <code>-f</code> flag instructs the <code>photoprism migrations run</code> subcommand to re-run previously failed migrations. Use <code>--help</code> to see the command help.</p> <p>Additional migration command examples can be found in the Developer Guide.</p>"},{"location":"getting-started/troubleshooting/mariadb/#complete-rescan","title":"Complete Rescan","text":"<p>We recommend that you re-index your pictures after a schema migration, especially if problems persist. You can either start a rescan from the user interface by navigating to Library &gt; Index, checking \"Complete Rescan\", and then clicking \"Start\", or by running this command in a terminal:</p> <pre><code>docker compose exec photoprism photoprism index -f\n</code></pre> <p>Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"getting-started/troubleshooting/mariadb/#server-crashes","title":"Server Crashes","text":"<p>If the server crashes unexpectedly or your database files get corrupted frequently, it is usually because they are stored on an unreliable device such as a USB flash drive, an SD card, or a shared network folder mounted via NFS or CIFS. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p> <ul> <li> Never use the same database files with more than one server instance</li> <li> To share a database over a network, run the database server directly on the remote server instead of sharing database files</li> <li> To repair your tables after you have moved the files to a local disk, you can start MariaDB with <code>--innodb-force-recovery=1</code> (otherwise the same procedure as for recovering a lost password, see above)</li> <li> Make sure you are using the latest Docker version and read the release notes for the database server version you are using</li> </ul>"},{"location":"getting-started/troubleshooting/mariadb/#invalid-table-errors","title":"Invalid Table Errors","text":"<p>If you are using macOS and see errors like <code>Invalid (old?) table or database name '._column_stats'</code>, it may be because you are running MariaDB on a file system like ExFAT that does not support extended attributes. In this case, macOS automatically creates these files and MariaDB then reports them as invalid tables (which is technically correct). To remove extended attribute files, you can run the following in a terminal:</p> <pre><code>find . -type f -name '._*' -delete\n</code></pre> <p>Unless you open the storage folder again in macOS Finder, the errors should then be gone after restarting the database.</p>"},{"location":"getting-started/troubleshooting/mariadb/#corrupted-files","title":"Corrupted Files","text":"<p>\u21aa Server Crashes</p>"},{"location":"getting-started/troubleshooting/mariadb/#lost-root-password","title":"Lost Root Password","text":"<p>In case you forgot the MariaDB \"root\" password and the one specified in your configuration does not work, you can start the server with the <code>--skip-grant-tables</code> flag added to the <code>mysqld</code> command in your <code>docker-compose.yml</code>. This will temporarily give full access to all users after a restart:</p> <pre><code>services:\nmariadb:\ncommand: mysqld --skip-grant-tables\n</code></pre> <p>Restart the <code>mariadb</code> service for changes to take effect:</p> <pre><code>docker compose stop mariadb\ndocker compose up -d mariadb\n</code></pre> <p>Now open a database console:</p> <pre><code>docker compose exec mariadb mysql -uroot\n</code></pre> <p>Enter the following commands to change the password for \"root\":</p> <pre><code>FLUSH PRIVILEGES;\nALTER USER 'root'@'%' IDENTIFIED BY 'new_password';\nALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';\nUPDATE mysql.user SET authentication_string = '' WHERE user = 'root';\nUPDATE mysql.user SET plugin = '' WHERE user = 'root';\nexit\n</code></pre> <p>When you are done, remove the <code>--skip-grant-tables</code> flag again to restore the original command and restart the <code>mariadb</code> service as described above.</p>"},{"location":"getting-started/troubleshooting/mariadb/#server-relocation","title":"Server Relocation","text":"<p>When moving MariaDB to another computer, cloud server, or virtual machine:</p> <ul> <li> Move the complete storage folder along with it and preserve the file permissions</li> <li> or restore your index from an SQL dump (backup file)</li> <li> Perform a version upgrade if necessary</li> <li> Make sure that PhotoPrism can access the database on the new host</li> <li> Set strong passwords if the database is exposed to an external network</li> <li> Never expose your database to the public Internet</li> </ul>"},{"location":"getting-started/troubleshooting/mariadb/#unicode-support","title":"Unicode Support","text":"<p>If the logs show \"incorrect string value\" database errors and you are running a custom MariaDB or MySQL server that is not based on our default configuration:</p> <ul> <li> Full Unicode support must be enabled, e.g. using the <code>mysqld</code> command parameters <code>--character-set-server=utf8mb4</code> and <code>--collation-server=utf8mb4_unicode_ci</code></li> <li> Note that an existing database may use a different character set if you imported it from another server</li> <li> Before submitting a support request, verify the problem still occurs with a newly created database based on our example</li> </ul> <p>Run this command in a terminal to see the current values of the collation and character set variables (change the root password <code>insecure</code> and database name <code>photoprism</code> as specified in your <code>docker-compose.yml</code>):</p> <pre><code>echo \"SHOW VARIABLES WHERE Variable_name LIKE 'character\\_set\\_%' OR Variable_name LIKE 'collation%';\" | \\\ndocker compose exec -T mariadb mysql -uroot -pinsecure photoprism\n</code></pre>"},{"location":"getting-started/troubleshooting/mariadb/#mysql-errors","title":"MySQL Errors","text":"<p>Official support for MySQL 8 is discontinued as Oracle seems to have stopped shipping new features and enhancements. As a result, the testing effort required before each release is no longer feasible.</p>"},{"location":"getting-started/troubleshooting/performance/","title":"Performance Tips","text":""},{"location":"getting-started/troubleshooting/performance/#mariadb","title":"MariaDB","text":"<p>The InnoDB buffer pool serves as a cache for data and indexes. It is a key component for optimizing MariaDB performance. Its size should be as large as possible to keep frequently used data in memory and reduce disk I/O - typically the biggest bottleneck.</p> <p>By default, the buffer pool size is between 128 MB and 512 MB, depending on which configuration example you use. You can change it with the <code>--innodb-buffer-pool-size</code> command parameter in the <code>mariadb:</code> section of your <code>docker-compose.yml</code>. <code>M</code> stands for Megabyte, <code>G</code> for Gigabyte. Do not use spaces.</p> <p>If your server has plenty of physical memory, we recommend increasing the size to 1 or 2 GB:</p> <pre><code>services:\nmariadb:\ncommand: mysqld --innodb-buffer-pool-size=1G ...\n</code></pre> <p>As a rule of thumb, <code>Innodb_buffer_pool_pages_free</code> should never be less than 5% of the total pages. You can run the following SQL statement, for example using the <code>mariadb</code> command in a terminal, to display the number of free pages and other InnoDB-related status information:</p> <pre><code>SHOW GLOBAL STATUS LIKE 'Innodb_buffer%';\n</code></pre> <p>Advanced users may adjust additional parameters to further improve performance. Tools such as the mysqltuner.pl script can provide helpful recommendations for this.</p> <p>Windows and macOS</p> <p>If you are using Docker Desktop on Windows or macOS, remember to increase the total memory available for Docker services. Otherwise, they may run out of resources and cannot benefit from a larger cache size. In case PhotoPrism and MariaDB are running in a virtual machine, its memory size should be increased as well. Restart for changes to take effect.</p>"},{"location":"getting-started/troubleshooting/performance/#migration-from-sqlite","title":"Migration from SQLite","text":"<p>After migrating from SQLite, it is possible that columns do not have exactly the data type they should have or that indexes are missing. This can lead to poor performance. For example, MariaDB cannot process rows with <code>text</code> columns in memory and always uses temporary tables on disk if there are any.</p> <p>The instructions for these migrations were provided by a contributor and are not part of the original software distribution. As such, they have not been officially released, recommended, or extensively tested by us.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation . It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>View Database Schema \u203a</p>"},{"location":"getting-started/troubleshooting/performance/#windows","title":"Windows","text":"<p>Solve Windows-Specific Issues \u203a</p>"},{"location":"getting-started/troubleshooting/performance/#storage","title":"Storage","text":"<p>Local Solid-State Drives (SSDs) are best for databases of any kind:</p> <ul> <li>database performance extremely benefits from high throughput which HDDs can't provide</li> <li>SSDs have more predictable performance and can handle more concurrent requests</li> <li>due to the HDD seek time, HDDs only support 5% of the reads per second of SSDs</li> <li>the cost savings from using slow hard disks are minimal</li> </ul> <p>Switching to SSDs makes a big difference, especially for write operations and when the read cache is not big enough or can't be used.</p> <p>Never store database files on an unreliable device such as a USB flash drive, SD card, or shared network folder. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p>"},{"location":"getting-started/troubleshooting/performance/#memory","title":"Memory","text":"<p>Indexing large photo and video collections benefits from plenty of memory for caching and processing large media files. Ideally, the amount of RAM should match the number of physical CPU cores. If not, reduce the number of workers  as explained below.</p> <p>Especially the conversion of RAW images and the transcoding of videos are very demanding. High-resolution panoramic images may require additional swap space and/or physical memory above the recommended minimum.</p> <p>RAW image conversion and TensorFlow are disabled on systems with 1 GB or less memory. We take no responsibility for instability or performance problems if your device does not meet the requirements.</p>"},{"location":"getting-started/troubleshooting/performance/#server-cpu","title":"Server CPU","text":"<p>Last but not least, performance can be limited by your server CPU. If you've tried everything else, then only moving your instance to a more powerful device or cloud server may help.</p> <p>Be aware that most NAS devices are optimized for minimal power consumption and low production costs. Although their hardware gets faster with each generation, benchmarks show that even 8-year-old standard desktop CPUs like the Intel Core i3-4130 are often many times faster:</p> <p></p>"},{"location":"getting-started/troubleshooting/performance/#legacy-hardware","title":"Legacy Hardware","text":"<p>It is a known issue that the user interface and backend operations, especially face recognition, can be slow or even crash on older hardware due to a lack of resources. Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p> <p>In many cases, performance can be improved through optimizations. Since these can prove to be very time-consuming and cost-intensive in practice, users and developers must decide on a case-by-case basis whether this provides sufficient benefit in relation to the costs or whether the use of more powerful hardware is faster and cheaper overall.</p> <p>We kindly ask you not to open a problem report on GitHub Issues for poor performance on older hardware until a full cause and feasibility analysis has been performed. GitHub Discussions or any of our other public forums and communities are great places to start a discussion.</p> <p>That being said, one of the advantages of open-source software is that users can submit pull requests with performance and other enhancements they would like to see implemented. This will result in a much faster solution than waiting for a core team member to remotely analyze your problem and then provide a fix.</p>"},{"location":"getting-started/troubleshooting/performance/#troubleshooting","title":"Troubleshooting","text":"<p>If your server runs out of memory, the index is frequently locked, or other system resources are running low:</p> <ul> <li> Try reducing the number of workers by setting <code>PHOTOPRISM_WORKERS</code> to a reasonably small value in <code>docker-compose.yml</code>, depending on the CPU performance and number of cores</li> <li> Make sure your server has at least 4 GB of swap space so that indexing doesn't cause restarts when memory usage spikes; RAW image conversion and video transcoding are especially demanding </li> <li> If you are using SQLite, switch to MariaDB, which is better optimized for high concurrency</li> <li> As a last measure, you can disable the use of TensorFlow for image classification and facial recognition</li> </ul> <p>Other issues? Our troubleshooting checklists help you quickly diagnose and solve them.</p> <p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/raspberry-pi/","title":"Troubleshooting Raspberry Pi Problems","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/raspberry-pi/#hardware-watchdog-initiates-reboot","title":"Hardware Watchdog Initiates Reboot","text":"<p>A watchdog timer is an electronic timer that is used to detect and correct computer malfunctions. When activated, it can trigger a reboot when the computer is under heavy load, e.g. when indexing pictures. </p> <p>Should your Raspberry Pi fail to reset the timer before it expires, the WDT signal will reboot it. It is disabled by default in the firmware.</p> <p>Users can set up \"dtparam\" also known as Device Tree config files for Raspberry Pi's in <code>/boot/config.txt</code>, which will enable the kernel module.</p> <p>It is the responsibility of the user to set the parameters of the watchdog daemon correctly.</p> <p>A common parameter that users set is the average CPU load for 1, 5, or 15 minutes. The default value for the 1 minute span is 24</p> <pre><code>max-load-1 = 24\n</code></pre> <p>The average load is the sum of the queue length and the number of jobs currently running on the CPUs. You can use the following commands to view load average statistics:</p> <pre><code>uptime, procinfo, w, top\n</code></pre> <p>Raspberry Pi users who have the hardware watchdog enabled need to set a more appropriate value for the 1-minute span for the maximum load than the default value. As a workaround, you can log the average workload to a file:</p> <pre><code>#!/bin/bash\n\nwhile true; do\necho $(cat /proc/loadavg) &gt;&gt; test_file.log\nsleep 10\ndone\n</code></pre> <p>This will write a log with a timestamp every 10 seconds. Run the above script while performing intensive tasks that would normally trigger a reboot, such as tagging faces. With this information, you can now set a new value that is greater than the recorded maximum.</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"getting-started/troubleshooting/sqlite/","title":"Troubleshooting SQLite Problems","text":"<p>You are welcome to ask for help in our community chat. Sponsors receive direct technical support via email. Before submitting a support request, try to determine the cause of your problem.</p>"},{"location":"getting-started/troubleshooting/sqlite/#bad-performance","title":"Bad Performance","text":"<p>If you have only a few images, concurrent users, and CPU cores, SQLite may seem faster compared to full-fledged database servers like MariaDB.</p> <p>This changes as the index grows and the number of concurrent requests increases. The way MariaDB handles multiple queries is completely different and optimized for high concurrency, while SQLite, for example, locks the index on updates so that other operations have to wait. In the worst case, this can lead to locking errors and timeouts during indexing - especially when combined with a slow disk or network storage.</p> <p>The biggest advantage of SQLite is that you don't need to run a separate database server. This can be very useful for testing and works well if you only have a few thousand files to index. If you are looking for scalability and high performance, it is not a good choice.</p> <p>Get MariaDB Performance Tips \u203a</p>"},{"location":"getting-started/troubleshooting/sqlite/#locking-errors","title":"Locking Errors","text":"<p>If you use traditional hard drives instead of SSDs, you will find that PhotoPrism frequently runs into locking issues with SQLite because your CPU is many times faster than the mechanical heads of your disks. To some extent, this may also happen with solid-state drives, but it is much more likely with slow storage.</p> <p>You may be able to optimize the behavior and reduce locking errors with SQLite parameters that you can set with the database DSN config option, but ultimately you should use an SSD if you want to keep SQLite or switch to MariaDB. Please note that our team cannot provide support otherwise.</p>"},{"location":"getting-started/troubleshooting/sqlite/#server-crashes","title":"Server Crashes","text":"<p>If the server crashes unexpectedly or your database files get corrupted frequently, it is usually because they are stored on an unreliable device such as a USB flash drive, an SD card, or a shared network folder mounted via NFS or CIFS. These may also have unexpected file size limitations, which is especially problematic for databases that do not split data into smaller files.</p> <ul> <li> Never use the same database files with more than one server instance</li> <li> Use SSDs instead of traditional hard drives, never use network storage</li> <li> Consider using MariaDB instead of SQLite</li> </ul>"},{"location":"getting-started/troubleshooting/sqlite/#corrupted-files","title":"Corrupted Files","text":"<p>\u21aa Server Crashes</p>"},{"location":"getting-started/troubleshooting/sqlite/#migrating-to-mariadb","title":"Migrating to MariaDB","text":"<p>When migrating from SQLite to MariaDB, e.g. using scripts and instructions from the community, you should note that your database schema may no longer be optimized for performance and indexes may be missing. Also, MariaDB cannot handle rows with \"text\" columns in memory and always uses temporary tables on disk if there are any.</p> <p>If this is the case, please make sure that your migrated database schema matches that of a fresh, non-migrated installation . It may help to run the migrations manually in a terminal using the migrations subcommands. However, this does not guarantee that all issues such as missing indexes are resolved.</p> <p>Troubleshoot MariaDB Problems \u203a</p>"},{"location":"getting-started/troubleshooting/windows/","title":"Solving Windows-Specific Issues","text":""},{"location":"getting-started/troubleshooting/windows/#ntfs-file-system","title":"NTFS File System","text":"<p>If you experience poor performance when indexing large libraries stored on NTFS:</p> <ul> <li> The I/O bandwidth used to update the Last Access Time can be a significant percentage of the total I/O bandwidth on NTFS volumes with a large number of files or folders (disable updates).<sup>1</sup></li> <li> In folders with many files, file names may start to conflict after NTFS uses all of the 8.3 short file names that are similar to the long names. Repeated conflicts between new and existing short names cause NTFS to regenerate the short file name from 6 to 8 times (disable short file names and reduce the number of files per folder).<sup>2</sup> <sup>3</sup></li> <li> exFat can be faster than NTFS, especially on external SSD drives with a lot of small files.</li> <li> Windows 10 and 11 allow physical disks formatted with the Linux ext4 file system to be mounted directly in WSL 2, which may be an option for some use cases.<sup>4</sup></li> </ul>"},{"location":"getting-started/troubleshooting/windows/#connecting-via-webdav","title":"Connecting via WebDAV","text":"<p>If you followed our step-by-step instructions and still have trouble connecting via WebDAV:</p> <ul> <li> You need to change the basic authentication level (see below)</li> <li> You do not have sufficient user rights (try as admin)</li> <li> You are experiencing a general authentication problem</li> <li> Your instance or reverse proxy uses an invalid HTTPS certificate</li> <li> You are trying to connect to the wrong network or server</li> </ul> <p>To change the basic authentication level in the Windows registry:</p> <ol> <li>Open the Windows Registry Editor.</li> <li>Locate the following registry directory: <code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\WebClient\\Parameters</code></li> <li>Locate the value <code>BasicAuthLevel</code>.</li> <li>The value data box should be set to 2. If the value is not 2, right click it and then select Modify.</li> <li>Change the value to 2.</li> </ol>"},{"location":"getting-started/troubleshooting/windows/#webdav-file-size-limit","title":"WebDAV File Size Limit","text":"<p>When uploading or downloading large files (more than 50 MB) on Windows, this error may occur:</p> <pre><code>Error 0x800700DF: The file size exceeds the limit allowed and cannot be saved\n</code></pre> <p>To allow larger files, you must increase the size limit in the Windows registry:<sup>5</sup></p> <ol> <li>Open the Windows Registry Editor.</li> <li>Locate the following registry directory: <code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\WebClient\\Parameters</code></li> <li>Locate the value <code>FileSizeLimitInBytes</code>.</li> <li>Set the value to 4294967295 (in Decimal). </li> <li>Restart your computer.</li> </ol> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p> <ol> <li> <p>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc781134(v=ws.10)?redirectedfrom=MSDN#last-access-time \u21a9</p> </li> <li> <p>https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/cc781134(v=ws.10)?redirectedfrom=MSDN#how-ntfs-generates-short-file-names \u21a9</p> </li> <li> <p>https://stackoverflow.com/a/9600126 \u21a9</p> </li> <li> <p>https://www.bleepingcomputer.com/news/microsoft/windows-10-now-lets-you-mount-linux-ext4-filesystems-in-wsl-2/ \u21a9</p> </li> <li> <p>https://docs.druva.com/Knowledge_Base/inSync/Troubleshooting/WebDAV_download_fails_with_file_size_exceeds__the_limit_error \u21a9</p> </li> </ol>"},{"location":"getting-started/vpn/tailscale/","title":"Tailscale VPN","text":"<p>Should you experience problems with Tailscale, we recommend that you ask the Tailscale community for advice, as we cannot provide support for third-party software and services.</p> <ol> <li> <p>Open the Tailscale website and Select Use Tailscale button. </p> </li> <li> <p>Sign up with an email address or using any of your other accounts and install Tailscale on all the relevant devices. Detailed and clear instructions are available to guide your through the process depending on the operating system.</p> <p></p> <p>For example below the instruction for Linux and Android</p> <p></p> </li> <li> <p>When the devices have Tailscale installed (and logged in via the same account) they all appear in the overview as in the printscreen below.</p> <p></p> </li> <li> <p>Each device gets an IP address allocated (100.xxx.xxx.xxx), which can be used to reach them via the VPN network. This IP address with addition of the port number where Photoprism is run on can be used to reach Photoprism outside the home network. </p> </li> </ol> <p></p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"license/agpl/","title":"GNU Affero General Public License","text":"<p>Version 3, 19 November 2007</p> <p>Copyright \u00a9 2007 Free Software Foundation, Inc.</p> <p>Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</p>"},{"location":"license/agpl/#preamble","title":"Preamble","text":"<p>The GNU Affero General Public License is a free, copyleft license for software and other kinds of works, specifically designed to ensure cooperation with the community in the case of network server software.</p> <p>The licenses for most software and other practical works are designed to take away your freedom to share and change the works.  By contrast, our General Public Licenses are intended to guarantee your freedom to share and change all versions of a program--to make sure it remains free software for all its users.</p> <p>When we speak of free software, we are referring to freedom, not price.  Our General Public Licenses are designed to make sure that you have the freedom to distribute copies of free software (and charge for them if you wish), that you receive source code or can get it if you want it, that you can change the software or use pieces of it in new free programs, and that you know you can do these things.</p> <p>Developers that use our General Public Licenses protect your rights with two steps: (1) assert copyright on the software, and (2) offer you this License which gives you legal permission to copy, distribute and/or modify the software.</p> <p>A secondary benefit of defending all users' freedom is that improvements made in alternate versions of the program, if they receive widespread use, become available for other developers to incorporate.  Many developers of free software are heartened and encouraged by the resulting cooperation.  However, in the case of software used on network servers, this result may fail to come about. The GNU General Public License permits making a modified version and letting the public access it on a server without ever releasing its source code to the public.</p> <p>The GNU Affero General Public License is designed specifically to ensure that, in such cases, the modified source code becomes available to the community.  It requires the operator of a network server to provide the source code of the modified version running there to the users of that server.  Therefore, public use of a modified version, on a publicly accessible server, gives the public access to the source code of the modified version.</p> <p>An older license, called the Affero General Public License and published by Affero, was designed to accomplish similar goals.  This is a different license, not a version of the Affero GPL, but Affero has released a new version of the Affero GPL which permits relicensing under this license.</p> <p>The precise terms and conditions for copying, distribution and modification follow.</p>"},{"location":"license/agpl/#terms-and-conditions","title":"TERMS AND CONDITIONS","text":""},{"location":"license/agpl/#0-definitions","title":"0. Definitions","text":"<p>\u201cThis License\u201d refers to version 3 of the GNU Affero General Public License.</p> <p>\u201cCopyright\u201d also means copyright-like laws that apply to other kinds of works, such as semiconductor masks.</p> <p>\u201cThe Program\u201d refers to any copyrightable work licensed under this License.  Each licensee is addressed as \u201cyou\u201d.  \u201cLicensees\u201d and \u201crecipients\u201d may be individuals or organizations.</p> <p>To \u201cmodify\u201d a work means to copy from or adapt all or part of the work in a fashion requiring copyright permission, other than the making of an exact copy.  The resulting work is called a \u201cmodified version\u201d of the earlier work or a work \u201cbased on\u201d the earlier work.</p> <p>A \u201ccovered work\u201d means either the unmodified Program or a work based on the Program.</p> <p>To \u201cpropagate\u201d a work means to do anything with it that, without permission, would make you directly or secondarily liable for infringement under applicable copyright law, except executing it on a computer or modifying a private copy.  Propagation includes copying, distribution (with or without modification), making available to the public, and in some countries other activities as well.</p> <p>To \u201cconvey\u201d a work means any kind of propagation that enables other parties to make or receive copies.  Mere interaction with a user through a computer network, with no transfer of a copy, is not conveying.</p> <p>An interactive user interface displays \u201cAppropriate Legal Notices\u201d to the extent that it includes a convenient and prominently visible feature that (1) displays an appropriate copyright notice, and (2) tells the user that there is no warranty for the work (except to the extent that warranties are provided), that licensees may convey the work under this License, and how to view a copy of this License.  If the interface presents a list of user commands or options, such as a menu, a prominent item in the list meets this criterion.</p>"},{"location":"license/agpl/#1-source-code","title":"1. Source Code","text":"<p>The \u201csource code\u201d for a work means the preferred form of the work for making modifications to it.  \u201cObject code\u201d means any non-source form of a work.</p> <p>A \u201cStandard Interface\u201d means an interface that either is an official standard defined by a recognized standards body, or, in the case of interfaces specified for a particular programming language, one that is widely used among developers working in that language.</p> <p>The \u201cSystem Libraries\u201d of an executable work include anything, other than the work as a whole, that (a) is included in the normal form of packaging a Major Component, but which is not part of that Major Component, and (b) serves only to enable use of the work with that Major Component, or to implement a Standard Interface for which an implementation is available to the public in source code form.  A \u201cMajor Component\u201d, in this context, means a major essential component (kernel, window system, and so on) of the specific operating system (if any) on which the executable work runs, or a compiler used to produce the work, or an object code interpreter used to run it.</p> <p>The \u201cCorresponding Source\u201d for a work in object code form means all the source code needed to generate, install, and (for an executable work) run the object code and to modify the work, including scripts to control those activities.  However, it does not include the work's System Libraries, or general-purpose tools or generally available free programs which are used unmodified in performing those activities but which are not part of the work.  For example, Corresponding Source includes interface definition files associated with source files for the work, and the source code for shared libraries and dynamically linked subprograms that the work is specifically designed to require, such as by intimate data communication or control flow between those subprograms and other parts of the work.</p> <p>The Corresponding Source need not include anything that users can regenerate automatically from other parts of the Corresponding Source.</p> <p>The Corresponding Source for a work in source code form is that same work.</p>"},{"location":"license/agpl/#2-basic-permissions","title":"2. Basic Permissions","text":"<p>All rights granted under this License are granted for the term of copyright on the Program, and are irrevocable provided the stated conditions are met.  This License explicitly affirms your unlimited permission to run the unmodified Program.  The output from running a covered work is covered by this License only if the output, given its content, constitutes a covered work.  This License acknowledges your rights of fair use or other equivalent, as provided by copyright law.</p> <p>You may make, run and propagate covered works that you do not convey, without conditions so long as your license otherwise remains in force.  You may convey covered works to others for the sole purpose of having them make modifications exclusively for you, or provide you with facilities for running those works, provided that you comply with the terms of this License in conveying all material for which you do not control copyright.  Those thus making or running the covered works for you must do so exclusively on your behalf, under your direction and control, on terms that prohibit them from making any copies of your copyrighted material outside their relationship with you.</p> <p>Conveying under any other circumstances is permitted solely under the conditions stated below.  Sublicensing is not allowed; section 10 makes it unnecessary.</p>"},{"location":"license/agpl/#3-protecting-users-legal-rights-from-anti-circumvention-law","title":"3. Protecting Users' Legal Rights From Anti-Circumvention Law","text":"<p>No covered work shall be deemed part of an effective technological measure under any applicable law fulfilling obligations under article 11 of the WIPO copyright treaty adopted on 20 December 1996, or similar laws prohibiting or restricting circumvention of such measures.</p> <p>When you convey a covered work, you waive any legal power to forbid circumvention of technological measures to the extent such circumvention is effected by exercising rights under this License with respect to the covered work, and you disclaim any intention to limit operation or modification of the work as a means of enforcing, against the work's users, your or third parties' legal rights to forbid circumvention of technological measures.</p>"},{"location":"license/agpl/#4-conveying-verbatim-copies","title":"4. Conveying Verbatim Copies","text":"<p>You may convey verbatim copies of the Program's source code as you receive it, in any medium, provided that you conspicuously and appropriately publish on each copy an appropriate copyright notice; keep intact all notices stating that this License and any non-permissive terms added in accord with section 7 apply to the code; keep intact all notices of the absence of any warranty; and give all recipients a copy of this License along with the Program.</p> <p>You may charge any price or no price for each copy that you convey, and you may offer support or warranty protection for a fee.</p>"},{"location":"license/agpl/#5-conveying-modified-source-versions","title":"5. Conveying Modified Source Versions","text":"<p>You may convey a work based on the Program, or the modifications to produce it from the Program, in the form of source code under the terms of section 4, provided that you also meet all of these conditions:</p> <ul> <li>a) The work must carry prominent notices stating that you modified it, and giving a relevant date.</li> <li>b) The work must carry prominent notices stating that it is released under this License and any conditions added under section 7. This requirement modifies the requirement in section 4 to \u201ckeep intact all notices\u201d.</li> <li>c) You must license the entire work, as a whole, under this License to anyone who comes into possession of a copy.  This License will therefore apply, along with any applicable section 7 additional terms, to the whole of the work, and all its parts, regardless of how they are packaged.  This License gives no permission to license the work in any other way, but it does not invalidate such permission if you have separately received it.</li> <li>d) If the work has interactive user interfaces, each must display Appropriate Legal Notices; however, if the Program has interactive interfaces that do not display Appropriate Legal Notices, your work need not make them do so.</li> </ul> <p>A compilation of a covered work with other separate and independent works, which are not by their nature extensions of the covered work, and which are not combined with it such as to form a larger program, in or on a volume of a storage or distribution medium, is called an \u201caggregate\u201d if the compilation and its resulting copyright are not used to limit the access or legal rights of the compilation's users beyond what the individual works permit.  Inclusion of a covered work in an aggregate does not cause this License to apply to the other parts of the aggregate.</p>"},{"location":"license/agpl/#6-conveying-non-source-forms","title":"6. Conveying Non-Source Forms","text":"<p>You may convey a covered work in object code form under the terms of sections 4 and 5, provided that you also convey the machine-readable Corresponding Source under the terms of this License, in one of these ways:</p> <ul> <li>a) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by the Corresponding Source fixed on a durable physical medium customarily used for software interchange.</li> <li>b) Convey the object code in, or embodied in, a physical product (including a physical distribution medium), accompanied by a written offer, valid for at least three years and valid for as long as you offer spare parts or customer support for that product model, to give anyone who possesses the object code either (1) a copy of the Corresponding Source for all the software in the product that is covered by this License, on a durable physical medium customarily used for software interchange, for a price no more than your reasonable cost of physically performing this conveying of source, or (2) access to copy the Corresponding Source from a network server at no charge.</li> <li>c) Convey individual copies of the object code with a copy of the written offer to provide the Corresponding Source.  This alternative is allowed only occasionally and noncommercially, and only if you received the object code with such an offer, in accord with subsection 6b.</li> <li>d) Convey the object code by offering access from a designated place (gratis or for a charge), and offer equivalent access to the Corresponding Source in the same way through the same place at no further charge.  You need not require recipients to copy the Corresponding Source along with the object code.  If the place to copy the object code is a network server, the Corresponding Source may be on a different server (operated by you or a third party) that supports equivalent copying facilities, provided you maintain clear directions next to the object code saying where to find the Corresponding Source.  Regardless of what server hosts the Corresponding Source, you remain obligated to ensure that it is available for as long as needed to satisfy these requirements.</li> <li>e) Convey the object code using peer-to-peer transmission, provided you inform other peers where the object code and Corresponding Source of the work are being offered to the general public at no charge under subsection 6d.</li> </ul> <p>A separable portion of the object code, whose source code is excluded from the Corresponding Source as a System Library, need not be included in conveying the object code work.</p> <p>A \u201cUser Product\u201d is either (1) a \u201cconsumer product\u201d, which means any tangible personal property which is normally used for personal, family, or household purposes, or (2) anything designed or sold for incorporation into a dwelling.  In determining whether a product is a consumer product, doubtful cases shall be resolved in favor of coverage.  For a particular product received by a particular user, \u201cnormally used\u201d refers to a typical or common use of that class of product, regardless of the status of the particular user or of the way in which the particular user actually uses, or expects or is expected to use, the product.  A product is a consumer product regardless of whether the product has substantial commercial, industrial or non-consumer uses, unless such uses represent the only significant mode of use of the product.</p> <p>\u201cInstallation Information\u201d for a User Product means any methods, procedures, authorization keys, or other information required to install and execute modified versions of a covered work in that User Product from a modified version of its Corresponding Source.  The information must suffice to ensure that the continued functioning of the modified object code is in no case prevented or interfered with solely because modification has been made.</p> <p>If you convey an object code work under this section in, or with, or specifically for use in, a User Product, and the conveying occurs as part of a transaction in which the right of possession and use of the User Product is transferred to the recipient in perpetuity or for a fixed term (regardless of how the transaction is characterized), the Corresponding Source conveyed under this section must be accompanied by the Installation Information.  But this requirement does not apply if neither you nor any third party retains the ability to install modified object code on the User Product (for example, the work has been installed in ROM).</p> <p>The requirement to provide Installation Information does not include a requirement to continue to provide support service, warranty, or updates for a work that has been modified or installed by the recipient, or for the User Product in which it has been modified or installed.  Access to a network may be denied when the modification itself materially and adversely affects the operation of the network or violates the rules and protocols for communication across the network.</p> <p>Corresponding Source conveyed, and Installation Information provided, in accord with this section must be in a format that is publicly documented (and with an implementation available to the public in source code form), and must require no special password or key for unpacking, reading or copying.</p>"},{"location":"license/agpl/#7-additional-terms","title":"7. Additional Terms","text":"<p>\u201cAdditional permissions\u201d are terms that supplement the terms of this License by making exceptions from one or more of its conditions. Additional permissions that are applicable to the entire Program shall be treated as though they were included in this License, to the extent that they are valid under applicable law.  If additional permissions apply only to part of the Program, that part may be used separately under those permissions, but the entire Program remains governed by this License without regard to the additional permissions.</p> <p>When you convey a copy of a covered work, you may at your option remove any additional permissions from that copy, or from any part of it.  (Additional permissions may be written to require their own removal in certain cases when you modify the work.)  You may place additional permissions on material, added by you to a covered work, for which you have or can give appropriate copyright permission.</p> <p>Notwithstanding any other provision of this License, for material you add to a covered work, you may (if authorized by the copyright holders of that material) supplement the terms of this License with terms:</p> <ul> <li>a) Disclaiming warranty or limiting liability differently from the terms of sections 15 and 16 of this License; or</li> <li>b) Requiring preservation of specified reasonable legal notices or author attributions in that material or in the Appropriate Legal Notices displayed by works containing it; or</li> <li>c) Prohibiting misrepresentation of the origin of that material, or requiring that modified versions of such material be marked in reasonable ways as different from the original version; or</li> <li>d) Limiting the use for publicity purposes of names of licensors or authors of the material; or</li> <li>e) Declining to grant rights under trademark law for use of some trade names, trademarks, or service marks; or</li> <li>f) Requiring indemnification of licensors and authors of that material by anyone who conveys the material (or modified versions of it) with contractual assumptions of liability to the recipient, for any liability that these contractual assumptions directly impose on those licensors and authors.</li> </ul> <p>All other non-permissive additional terms are considered \u201cfurther restrictions\u201d within the meaning of section 10.  If the Program as you received it, or any part of it, contains a notice stating that it is governed by this License along with a term that is a further restriction, you may remove that term.  If a license document contains a further restriction but permits relicensing or conveying under this License, you may add to a covered work material governed by the terms of that license document, provided that the further restriction does not survive such relicensing or conveying.</p> <p>If you add terms to a covered work in accord with this section, you must place, in the relevant source files, a statement of the additional terms that apply to those files, or a notice indicating where to find the applicable terms.</p> <p>Additional terms, permissive or non-permissive, may be stated in the form of a separately written license, or stated as exceptions; the above requirements apply either way.</p>"},{"location":"license/agpl/#8-termination","title":"8. Termination","text":"<p>You may not propagate or modify a covered work except as expressly provided under this License.  Any attempt otherwise to propagate or modify it is void, and will automatically terminate your rights under this License (including any patent licenses granted under the third paragraph of section 11).</p> <p>However, if you cease all violation of this License, then your license from a particular copyright holder is reinstated (a) provisionally, unless and until the copyright holder explicitly and finally terminates your license, and (b) permanently, if the copyright holder fails to notify you of the violation by some reasonable means prior to 60 days after the cessation.</p> <p>Moreover, your license from a particular copyright holder is reinstated permanently if the copyright holder notifies you of the violation by some reasonable means, this is the first time you have received notice of violation of this License (for any work) from that copyright holder, and you cure the violation prior to 30 days after your receipt of the notice.</p> <p>Termination of your rights under this section does not terminate the licenses of parties who have received copies or rights from you under this License.  If your rights have been terminated and not permanently reinstated, you do not qualify to receive new licenses for the same material under section 10.</p>"},{"location":"license/agpl/#9-acceptance-not-required-for-having-copies","title":"9. Acceptance Not Required for Having Copies","text":"<p>You are not required to accept this License in order to receive or run a copy of the Program.  Ancillary propagation of a covered work occurring solely as a consequence of using peer-to-peer transmission to receive a copy likewise does not require acceptance.  However, nothing other than this License grants you permission to propagate or modify any covered work.  These actions infringe copyright if you do not accept this License.  Therefore, by modifying or propagating a covered work, you indicate your acceptance of this License to do so.</p>"},{"location":"license/agpl/#10-automatic-licensing-of-downstream-recipients","title":"10. Automatic Licensing of Downstream Recipients","text":"<p>Each time you convey a covered work, the recipient automatically receives a license from the original licensors, to run, modify and propagate that work, subject to this License.  You are not responsible for enforcing compliance by third parties with this License.</p> <p>An \u201centity transaction\u201d is a transaction transferring control of an organization, or substantially all assets of one, or subdividing an organization, or merging organizations.  If propagation of a covered work results from an entity transaction, each party to that transaction who receives a copy of the work also receives whatever licenses to the work the party's predecessor in interest had or could give under the previous paragraph, plus a right to possession of the Corresponding Source of the work from the predecessor in interest, if the predecessor has it or can get it with reasonable efforts.</p> <p>You may not impose any further restrictions on the exercise of the rights granted or affirmed under this License.  For example, you may not impose a license fee, royalty, or other charge for exercise of rights granted under this License, and you may not initiate litigation (including a cross-claim or counterclaim in a lawsuit) alleging that any patent claim is infringed by making, using, selling, offering for sale, or importing the Program or any portion of it.</p>"},{"location":"license/agpl/#11-patents","title":"11. Patents","text":"<p>A \u201ccontributor\u201d is a copyright holder who authorizes use under this License of the Program or a work on which the Program is based.  The work thus licensed is called the contributor's \u201ccontributor version\u201d.</p> <p>A contributor's \u201cessential patent claims\u201d are all patent claims owned or controlled by the contributor, whether already acquired or hereafter acquired, that would be infringed by some manner, permitted by this License, of making, using, or selling its contributor version, but do not include claims that would be infringed only as a consequence of further modification of the contributor version.  For purposes of this definition, \u201ccontrol\u201d includes the right to grant patent sublicenses in a manner consistent with the requirements of this License.</p> <p>Each contributor grants you a non-exclusive, worldwide, royalty-free patent license under the contributor's essential patent claims, to make, use, sell, offer for sale, import and otherwise run, modify and propagate the contents of its contributor version.</p> <p>In the following three paragraphs, a \u201cpatent license\u201d is any express agreement or commitment, however denominated, not to enforce a patent (such as an express permission to practice a patent or covenant not to sue for patent infringement).  To \u201cgrant\u201d such a patent license to a party means to make such an agreement or commitment not to enforce a patent against the party.</p> <p>If you convey a covered work, knowingly relying on a patent license, and the Corresponding Source of the work is not available for anyone to copy, free of charge and under the terms of this License, through a publicly available network server or other readily accessible means, then you must either (1) cause the Corresponding Source to be so available, or (2) arrange to deprive yourself of the benefit of the patent license for this particular work, or (3) arrange, in a manner consistent with the requirements of this License, to extend the patent license to downstream recipients.  \u201cKnowingly relying\u201d means you have actual knowledge that, but for the patent license, your conveying the covered work in a country, or your recipient's use of the covered work in a country, would infringe one or more identifiable patents in that country that you have reason to believe are valid.</p> <p>If, pursuant to or in connection with a single transaction or arrangement, you convey, or propagate by procuring conveyance of, a covered work, and grant a patent license to some of the parties receiving the covered work authorizing them to use, propagate, modify or convey a specific copy of the covered work, then the patent license you grant is automatically extended to all recipients of the covered work and works based on it.</p> <p>A patent license is \u201cdiscriminatory\u201d if it does not include within the scope of its coverage, prohibits the exercise of, or is conditioned on the non-exercise of one or more of the rights that are specifically granted under this License.  You may not convey a covered work if you are a party to an arrangement with a third party that is in the business of distributing software, under which you make payment to the third party based on the extent of your activity of conveying the work, and under which the third party grants, to any of the parties who would receive the covered work from you, a discriminatory patent license (a) in connection with copies of the covered work conveyed by you (or copies made from those copies), or (b) primarily for and in connection with specific products or compilations that contain the covered work, unless you entered into that arrangement, or that patent license was granted, prior to 28 March 2007.</p> <p>Nothing in this License shall be construed as excluding or limiting any implied license or other defenses to infringement that may otherwise be available to you under applicable patent law.</p>"},{"location":"license/agpl/#12-no-surrender-of-others-freedom","title":"12. No Surrender of Others' Freedom","text":"<p>If conditions are imposed on you (whether by court order, agreement or otherwise) that contradict the conditions of this License, they do not excuse you from the conditions of this License.  If you cannot convey a covered work so as to satisfy simultaneously your obligations under this License and any other pertinent obligations, then as a consequence you may not convey it at all.  For example, if you agree to terms that obligate you to collect a royalty for further conveying from those to whom you convey the Program, the only way you could satisfy both those terms and this License would be to refrain entirely from conveying the Program.</p>"},{"location":"license/agpl/#13-remote-network-interaction-use-with-the-gnu-general-public-license","title":"13. Remote Network Interaction; Use with the GNU General Public License","text":"<p>Notwithstanding any other provision of this License, if you modify the Program, your modified version must prominently offer all users interacting with it remotely through a computer network (if your version supports such interaction) an opportunity to receive the Corresponding Source of your version by providing access to the Corresponding Source from a network server at no charge, through some standard or customary means of facilitating copying of software.  This Corresponding Source shall include the Corresponding Source for any work covered by version 3 of the GNU General Public License that is incorporated pursuant to the following paragraph.</p> <p>Notwithstanding any other provision of this License, you have permission to link or combine any covered work with a work licensed under version 3 of the GNU General Public License into a single combined work, and to convey the resulting work.  The terms of this License will continue to apply to the part which is the covered work, but the work with which it is combined will remain governed by version 3 of the GNU General Public License.</p>"},{"location":"license/agpl/#14-revised-versions-of-this-license","title":"14. Revised Versions of this License","text":"<p>The Free Software Foundation may publish revised and/or new versions of the GNU Affero General Public License from time to time.  Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.</p> <p>Each version is given a distinguishing version number.  If the Program specifies that a certain numbered version of the GNU Affero General Public License \u201cor any later version\u201d applies to it, you have the option of following the terms and conditions either of that numbered version or of any later version published by the Free Software Foundation.  If the Program does not specify a version number of the GNU Affero General Public License, you may choose any version ever published by the Free Software Foundation.</p> <p>If the Program specifies that a proxy can decide which future versions of the GNU Affero General Public License can be used, that proxy's public statement of acceptance of a version permanently authorizes you to choose that version for the Program.</p> <p>Later license versions may give you additional or different permissions.  However, no additional obligations are imposed on any author or copyright holder as a result of your choosing to follow a later version.</p>"},{"location":"license/agpl/#15-disclaimer-of-warranty","title":"15. Disclaimer of Warranty","text":"<p>THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM \u201cAS IS\u201d WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.</p>"},{"location":"license/agpl/#16-limitation-of-liability","title":"16. Limitation of Liability","text":"<p>IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>"},{"location":"license/agpl/#17-interpretation-of-sections-15-and-16","title":"17. Interpretation of Sections 15 and 16","text":"<p>If the disclaimer of warranty and limitation of liability provided above cannot be given local legal effect according to their terms, reviewing courts shall apply local law that most closely approximates an absolute waiver of all civil liability in connection with the Program, unless a warranty or assumption of liability accompanies a copy of the Program in return for a fee.</p>"},{"location":"license/agpl/#additional-terms","title":"ADDITIONAL TERMS","text":""},{"location":"license/agpl/#18-photoprism-trademark-and-brand-assets","title":"18. PhotoPrism\u00ae Trademark and Brand Assets","text":"<p>(a) PhotoPrism\u2019s Brand Assets \u2014 including trademarks, logos, icons, fonts, corporate design, product and service names, and any other brand features and elements, whether registered or unregistered (\u201eBrand Assets\u201c) \u2014 are proprietary assets owned exclusively by PhotoPrism UG (\u201ePhotoPrism\u201c). We reserve the right to object to any use or misuse in any jurisdiction worldwide. Visit photoprism.app/trademark to learn more.</p> <p>(b) Contributors, licensees, business partners, and other third parties may never claim ownership of PhotoPrism's Brand Assets or brands confusingly similar to PhotoPrism's Brand Assets in any way, including, without limitation, as a trademark, service mark, company name or designation, domain name, social media profile/handle, or in any other manner.</p> <p>(c) You may not include the PhotoPrism trademark in the name of your app, product, or service, whether commercial or non-commercial in nature. This includes online services such as e-commerce, community, blog, information, advertising, and personal home pages, as well as apps, app stores, client apps, or third-party apps that interact with PhotoPrism.</p> <p>(d) In the event that any provision is found to be unenforceable by a court or other competent jurisdiction, the remaining portions hereof shall remain in full force and effect.</p> <p>END OF TERMS AND CONDITIONS</p>"},{"location":"license/docs/","title":"PhotoPrism\u00ae Documentation License","text":""},{"location":"license/docs/#creative-commons-attribution-noncommercial-sharealike-40-international-public-license","title":"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International Public License","text":"<p>By exercising the Licensed Rights (defined below), You accept and agree to be bound by the terms and conditions of this Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International Public License (\"Public License\"). To the extent this Public License may be interpreted as a contract, You are granted the Licensed Rights in consideration of Your acceptance of these terms and conditions, and the Licensor grants You such rights in consideration of benefits the Licensor receives from making the Licensed Material available under these terms and conditions.</p>"},{"location":"license/docs/#section-1-definitions","title":"Section 1 \u2013 Definitions.","text":"<p>a. Adapted Material means material subject to Copyright and Similar Rights that is derived from or based upon the Licensed Material and in which the Licensed Material is translated, altered, arranged, transformed, or otherwise modified in a manner requiring permission under the Copyright and Similar Rights held by the Licensor. For purposes of this Public License, where the Licensed Material is a musical work, performance, or sound recording, Adapted Material is always produced where the Licensed Material is synched in timed relation with a moving image.</p> <p>b. Adapter's License means the license You apply to Your Copyright and Similar Rights in Your contributions to Adapted Material in accordance with the terms and conditions of this Public License.</p> <p>c. BY-NC-SA Compatible License means a license listed at creativecommons.org/compatiblelicenses, approved by Creative Commons as essentially the equivalent of this Public License.</p> <p>d. Copyright and Similar Rights means copyright and/or similar rights closely related to copyright including, without limitation, performance, broadcast, sound recording, and Sui Generis Database Rights, without regard to how the rights are labeled or categorized. For purposes of this Public License, the rights specified in Section 2(b)(1)-(2) are not Copyright and Similar Rights.</p> <p>e. Effective Technological Measures means those measures that, in the absence of proper authority, may not be circumvented under laws fulfilling obligations under Article 11 of the WIPO Copyright Treaty adopted on December 20, 1996, and/or similar international agreements.</p> <p>f. Exceptions and Limitations means fair use, fair dealing, and/or any other exception or limitation to Copyright and Similar Rights that applies to Your use of the Licensed Material.</p> <p>g. License Elements means the license attributes listed in the name of a Creative Commons Public License. The License Elements of this Public License are Attribution, NonCommercial, and ShareAlike.</p> <p>h. Licensed Material means the artistic or literary work, database, or other material to which the Licensor applied this Public License.</p> <p>i. Licensed Rights means the rights granted to You subject to the terms and conditions of this Public License, which are limited to all Copyright and Similar Rights that apply to Your use of the Licensed Material and that the Licensor has authority to license.</p> <p>h. Licensor means the individual(s) or entity(ies) granting rights under this Public License.</p> <p>i. NonCommercial means not primarily intended for or directed towards commercial advantage or monetary compensation. For purposes of this Public License, the exchange of the Licensed Material for other material subject to Copyright and Similar Rights by digital file-sharing or similar means is NonCommercial provided there is no payment of monetary compensation in connection with the exchange.</p> <p>j. Share means to provide material to the public by any means or process that requires permission under the Licensed Rights, such as reproduction, public display, public performance, distribution, dissemination, communication, or importation, and to make material available to the public including in ways that members of the public may access the material from a place and at a time individually chosen by them.</p> <p>k. Sui Generis Database Rights means rights other than copyright resulting from Directive 96/9/EC of the European Parliament and of the Council of 11 March 1996 on the legal protection of databases, as amended and/or succeeded, as well as other essentially equivalent rights anywhere in the world.</p> <p>l. You means the individual or entity exercising the Licensed Rights under this Public License. Your has a corresponding meaning.</p>"},{"location":"license/docs/#section-2-scope","title":"Section 2 \u2013 Scope.","text":"<p>a. License grant.</p> <ol> <li>Subject to the terms and conditions of this Public License, the Licensor hereby grants You a worldwide, royalty-free, non-sublicensable, non-exclusive, irrevocable license to exercise the Licensed Rights in the Licensed Material to:</li> </ol> <p>A. reproduce and Share the Licensed Material, in whole or in part, for NonCommercial purposes only; and</p> <p>B. produce, reproduce, and Share Adapted Material for NonCommercial purposes only.</p> <ol> <li> <p>Exceptions and Limitations. For the avoidance of doubt, where Exceptions and Limitations apply to Your use, this Public License does not apply, and You do not need to comply with its terms and conditions.</p> </li> <li> <p>Term. The term of this Public License is specified in Section 6(a).</p> </li> <li> <p>Media and formats; technical modifications allowed. The Licensor authorizes You to exercise the Licensed Rights in all media and formats whether now known or hereafter created, and to make technical modifications necessary to do so. The Licensor waives and/or agrees not to assert any right or authority to forbid You from making technical modifications necessary to exercise the Licensed Rights, including technical modifications necessary to circumvent Effective Technological Measures. For purposes of this Public License, simply making modifications authorized by this Section 2(a)(4) never produces Adapted Material.</p> </li> <li> <p>Downstream recipients.</p> </li> </ol> <p>A. Offer from the Licensor \u2013 Licensed Material. Every recipient of the Licensed Material automatically receives an offer from the Licensor to exercise the Licensed Rights under the terms and conditions of this Public License.</p> <p>B. Additional offer from the Licensor \u2013 Adapted Material. Every recipient of Adapted Material from You automatically receives an offer from the Licensor to exercise the Licensed Rights in the Adapted Material under the conditions of the Adapter\u2019s License You apply.</p> <p>C. No downstream restrictions. You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, the Licensed Material if doing so restricts exercise of the Licensed Rights by any recipient of the Licensed Material.</p> <ol> <li>No endorsement. Nothing in this Public License constitutes or may be construed as permission to assert or imply that You are, or that Your use of the Licensed Material is, connected with, or sponsored, endorsed, or granted official status by, the Licensor or others designated to receive attribution as provided in Section 3(a)(1)(A)(i).</li> </ol> <p>b. Other rights.</p> <ol> <li> <p>Moral rights, such as the right of integrity, are not licensed under this Public License, nor are publicity, privacy, and/or other similar personality rights; however, to the extent possible, the Licensor waives and/or agrees not to assert any such rights held by the Licensor to the limited extent necessary to allow You to exercise the Licensed Rights, but not otherwise.</p> </li> <li> <p>Patent and trademark rights are not licensed under this Public License.</p> </li> <li> <p>To the extent possible, the Licensor waives any right to collect royalties from You for the exercise of the Licensed Rights, whether directly or through a collecting society under any voluntary or waivable statutory or compulsory licensing scheme. In all other cases the Licensor expressly reserves any right to collect such royalties, including when the Licensed Material is used other than for NonCommercial purposes.</p> </li> </ol>"},{"location":"license/docs/#section-3-license-conditions","title":"Section 3 \u2013 License Conditions.","text":"<p>Your exercise of the Licensed Rights is expressly made subject to the following conditions.</p> <p>a. Attribution.</p> <ol> <li>If You Share the Licensed Material (including in modified form), You must:</li> </ol> <p>A. retain the following if it is supplied by the Licensor with the Licensed Material:</p> <p>i. identification of the creator(s) of the Licensed Material and any others designated to receive attribution, in any reasonable manner requested by the Licensor (including by pseudonym if designated);</p> <p>ii. a copyright notice;</p> <p>iii. a notice that refers to this Public License;</p> <p>iv. a notice that refers to the disclaimer of warranties;</p> <p>v. a URI or hyperlink to the Licensed Material to the extent reasonably practicable;</p> <p>B. indicate if You modified the Licensed Material and retain an indication of any previous modifications; and</p> <p>C. indicate the Licensed Material is licensed under this Public License, and include the text of, or the URI or hyperlink to, this Public License.</p> <ol> <li> <p>You may satisfy the conditions in Section 3(a)(1) in any reasonable manner based on the medium, means, and context in which You Share the Licensed Material. For example, it may be reasonable to satisfy the conditions by providing a URI or hyperlink to a resource that includes the required information.</p> </li> <li> <p>If requested by the Licensor, You must remove any of the information required by Section 3(a)(1)(A) to the extent reasonably practicable.</p> </li> </ol> <p>b. ShareAlike.</p> <p>In addition to the conditions in Section 3(a), if You Share Adapted Material You produce, the following conditions also apply.</p> <ol> <li> <p>The Adapter\u2019s License You apply must be a Creative Commons license with the same License Elements, this version or later, or a BY-NC-SA Compatible License.</p> </li> <li> <p>You must include the text of, or the URI or hyperlink to, the Adapter's License You apply. You may satisfy this condition in any reasonable manner based on the medium, means, and context in which You Share Adapted Material.</p> </li> <li> <p>You may not offer or impose any additional or different terms or conditions on, or apply any Effective Technological Measures to, Adapted Material that restrict exercise of the rights granted under the Adapter's License You apply.</p> </li> </ol>"},{"location":"license/docs/#section-4-sui-generis-database-rights","title":"Section 4 \u2013 Sui Generis Database Rights.","text":"<p>Where the Licensed Rights include Sui Generis Database Rights that apply to Your use of the Licensed Material:</p> <p>a. for the avoidance of doubt, Section 2(a)(1) grants You the right to extract, reuse, reproduce, and Share all or a substantial portion of the contents of the database for NonCommercial purposes only;</p> <p>b. if You include all or a substantial portion of the database contents in a database in which You have Sui Generis Database Rights, then the database in which You have Sui Generis Database Rights (but not its individual contents) is Adapted Material, including for purposes of Section 3(b); and</p> <p>c. You must comply with the conditions in Section 3(a) if You Share all or a substantial portion of the contents of the database.</p> <p>For the avoidance of doubt, this Section 4 supplements and does not replace Your obligations under this Public License where the Licensed Rights include other Copyright and Similar Rights.</p>"},{"location":"license/docs/#section-5-disclaimer-of-warranties-and-limitation-of-liability","title":"Section 5 \u2013 Disclaimer of Warranties and Limitation of Liability.","text":"<p>a. Unless otherwise separately undertaken by the Licensor, to the extent possible, the Licensor offers the Licensed Material as-is and as-available, and makes no representations or warranties of any kind concerning the Licensed Material, whether express, implied, statutory, or other. This includes, without limitation, warranties of title, merchantability, fitness for a particular purpose, non-infringement, absence of latent or other defects, accuracy, or the presence or absence of errors, whether or not known or discoverable. Where disclaimers of warranties are not allowed in full or in part, this disclaimer may not apply to You.</p> <p>b. To the extent possible, in no event will the Licensor be liable to You on any legal theory (including, without limitation, negligence) or otherwise for any direct, special, indirect, incidental, consequential, punitive, exemplary, or other losses, costs, expenses, or damages arising out of this Public License or use of the Licensed Material, even if the Licensor has been advised of the possibility of such losses, costs, expenses, or damages. Where a limitation of liability is not allowed in full or in part, this limitation may not apply to You.</p> <p>c. The disclaimer of warranties and limitation of liability provided above shall be interpreted in a manner that, to the extent possible, most closely approximates an absolute disclaimer and waiver of all liability.</p>"},{"location":"license/docs/#section-6-term-and-termination","title":"Section 6 \u2013 Term and Termination.","text":"<p>a. This Public License applies for the term of the Copyright and Similar Rights licensed here. However, if You fail to comply with this Public License, then Your rights under this Public License terminate automatically.</p> <p>b. Where Your right to use the Licensed Material has terminated under Section 6(a), it reinstates:</p> <ol> <li> <p>automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or</p> </li> <li> <p>automatically as of the date the violation is cured, provided it is cured within 30 days of Your discovery of the violation; or</p> </li> </ol> <p>For the avoidance of doubt, this Section 6(b) does not affect any right the Licensor may have to seek remedies for Your violations of this Public License.</p> <p>c. For the avoidance of doubt, the Licensor may also offer the Licensed Material under separate terms or conditions or stop distributing the Licensed Material at any time; however, doing so will not terminate this Public License.</p> <p>d. Sections 1, 5, 6, 7, and 8 survive termination of this Public License.</p>"},{"location":"license/docs/#section-7-other-terms-and-conditions","title":"Section 7 \u2013 Other Terms and Conditions.","text":"<p>a. The Licensor shall not be bound by any additional or different terms or conditions communicated by You unless expressly agreed.</p> <p>b. Any arrangements, understandings, or agreements regarding the Licensed Material not stated herein are separate from and independent of the terms and conditions of this Public License.</p>"},{"location":"license/docs/#section-8-interpretation","title":"Section 8 \u2013 Interpretation.","text":"<p>a. For the avoidance of doubt, this Public License does not, and shall not be interpreted to, reduce, limit, restrict, or impose conditions on any use of the Licensed Material that could lawfully be made without permission under this Public License.</p> <p>b. To the extent possible, if any provision of this Public License is deemed unenforceable, it shall be automatically reformed to the minimum extent necessary to make it enforceable. If the provision cannot be reformed, it shall be severed from this Public License without affecting the enforceability of the remaining terms and conditions.</p> <p>c. No term or condition of this Public License will be waived and no failure to comply consented to unless expressly agreed to by the Licensor.</p> <p>d. Nothing in this Public License constitutes or may be interpreted as a limitation upon, or waiver of, any privileges and immunities that apply to the Licensor or You, including from the legal processes of any jurisdiction or authority.</p>"},{"location":"user-guide/","title":"User Guide","text":"<p>Step-by-step installation instructions for our self-hosted community edition can be found in Getting Started. All you need is a Web browser and  Docker to run the server.  It is available for Mac, Linux, and Windows. PhotoPrism also runs on PikaPods, DigitalOcean, Raspberry Pi, Portainer, FreeBSD, and many NAS devices.</p> <p>Once the initial setup is complete, our First Steps \ud83d\udc63 tutorial guides you through the user interface and settings to ensure your library is indexed according to your individual preferences.</p>"},{"location":"user-guide/#photoprism-plus","title":"PhotoPrism\u00ae Plus","text":"<p>Our members can activate additional features by logging in with the admin user created during setup and then following the steps described in our activation guide. Thank you for your support, which has been and continues to be essential to the success of the project!</p> <p>Compare Memberships \u203a View Membership FAQ \u203a </p> <p>We recommend that new users install our free Community Edition before signing up for a membership.</p>"},{"location":"user-guide/#getting-support","title":"Getting Support","text":"<p>If you need help installing our software at home, you are welcome to post your question in GitHub Discussions or ask in our Community Chat. Common problems can be quickly diagnosed and solved using our Troubleshooting Checklists. Silver, Gold, and Platinum members are also welcome to email us for technical support and advice.</p> <p>View Support Options \u203a</p> <p>We kindly ask you not to report bugs via GitHub Issues unless you are certain to have found a fully reproducible and previously unreported issue that must be fixed directly in the app. Contact us or a community member if you need help, it could be a local configuration problem, or a misunderstanding in how the software works.</p>"},{"location":"user-guide/faq/","title":"Frequently Asked Questions","text":""},{"location":"user-guide/faq/#general","title":"General","text":"Does your software depend on any external services? <p>As explained in our Privacy Policy, reverse geocoding and interactive world maps depend on retrieving the necessary information from us and MapTiler AG, headquartered in Switzerland. Both services are provided with a very high level of privacy and confidentiality.</p> <p>Your use of these services is fully covered by us. Depending on your usage, this can save you much more than the cost of a PhotoPrism+ Membership, since other providers generally charge usage-based fees and often don't allow you to cache the data they provide, compromising performance and your privacy with unnecessary requests.</p> <p>You might also come across other apps that use the free map tile service offered by openstreetmap.org. In this case, their usage and privacy policies apply, meaning that your request data is stored and used to create publicly available reports. This is a major difference from our approach, which focuses on your privacy and user experience.</p> <p>View Privacy Policy \u203a View Compliance FAQ \u203a</p> <p>In order to successfully set up your installation and view location details in PhotoPrism, you must allow incoming requests as well as those to our Geocoding API and Docker if you have a firewall installed, and make sure that your Internet connection is working:</p> <p></p> Why are some features only available to members? <p>PhotoPrism is 100% self-funded and independent. Voluntary donations do not cover the cost of a team working full time to provide you with updates, documentation, and support. It is your decision whether you want to sign up to enjoy additional benefits.</p> <p>View Membership FAQ \u203a</p> What are the advantages of purchasing a commercial license? <p>A key difference between the public license and a commercial license agreement is that you get access to additional support and configuration options, as well as the right to customize functionality to your needs without having to publicly disclose your changes. Our Compliance FAQ gives answers to the most frequently asked questions about product compliance and scalability.</p> <p>Compare Team Editions \u203a</p> When exactly will new features be released? <p>Our Project Roadmap shows what tasks are in progress and what features will be implemented next. You may give ideas you like a thumbs-up, so we know what's most popular.</p> <p>Be aware that we have a zero-bug policy and do our best to help users when they need support or have other questions. This comes at a price though, as we can't give exact release dates for new features. Our team receives many more requests than can be implemented, so we want to emphasize that we are in no way obligated to implement the features, enhancements, or other changes you request. We do, however, appreciate your feedback and carefully consider all requests.</p> <p>Since sustained funding is key to quickly releasing new features, we encourage all users to support our mission by signing up as a member or purchasing a commercial license.</p>"},{"location":"user-guide/faq/#membership","title":"Membership","text":"How can I activate my membership? <p>To connect a new instance to your membership account, you will need to log in with the admin user that is automatically created during setup (see your <code>docker-compose.yml</code> file or the app store documentation), and then follow the steps described in our activation guide.</p> <p>View Activation Guide \u203a</p> Are there alternatives to a recurring subscription? <p>Yes, our Plus members automatically receive a free lifetime Essentials membership after 24 months. Likewise, Silver members receive a lifetime Plus membership after 24 months, Gold members after 12 months, and Platinum members after only 6 months.</p> <p>If you would like to sign up for a Silver, Gold or Platinum membership, you can do so either directly on our website or on Patreon. In addition, we are working on a Plus Feature Pack that includes just the features without support, so we can offer it to you at a lower price.</p> <p>Note that as a lifetime member you will always receive updates and support for your personal use from us, unlike with so-called lifetime licenses, which may only be good until the next major version is released.</p> <p>View Membership FAQ \u203a</p> What happens if I cancel my membership? <p>If you are eligible for a lifetime Essentials or Plus membership, you can continue to use these features even if you decide to stop supporting us. Otherwise, you can continue to use all the freely available features. In no case will you lose access to your pictures.</p> <p>Compare Features \u203a</p>"},{"location":"user-guide/faq/#user-interface","title":"User Interface","text":"Can I select multiple pictures at once? <p>Yes, this is possible. How it works depends on what kind of device you use.</p> <p>Desktop Browser</p> <p>Select the first picture by clicking  in the lower right corner.</p> <p>The user interface is now in selection mode:</p> <ul> <li>to additionally select individual pictures, click them anywhere except on the play/view icons in the corner</li> <li>to select multiple pictures at once, use a shift+click to select all pictures between the last selected picture and the one you shift+click</li> </ul> <p>Mobile Devices</p> <p>Select the first picture with a long touch.</p> <p>The user interface is now in selection mode:</p> <ul> <li>to additionally select individual pictures, touch them anywhere except on the play/view icons in the corner</li> <li>to select multiple pictures at once, use a long touch to select all pictures between the last selected picture and the one you long touch</li> </ul> Can I use trees for organizing my pictures and albums? <p>Except in Library &gt; Originals and for object classification in Labels, PhotoPrism does not support hierarchically organized content for a number of reasons:</p> <p>First, there are many tools (including Windows Explorer and Mac OS Finder) that already browse folders in such a way.</p> <p>A common UX challenge is dealing with namespaces. For example, the album \"Berlin\" may exist 5 times in different parts of a tree. To avoid ambiguities, simple input fields need to be replaced with a tree browser that shows the complete context. This is especially difficult on mobile screens.</p> <p>Personal albums can typically be browsed by time, with optional filters for more specific results. This is different in Enterprise asset management, where trees are required to manage responsibilities &amp; permissions. We might do a special release for professional users later.</p> <p>While you have complete freedom with organizing your original files and folders, we don't think trees should be an integral part of our user interface. Most users won't be able to sort their memories in a strictly hierarchical way and prefer to explore them in multiple dimensions instead.</p>"},{"location":"user-guide/faq/#maps-places","title":"Maps &amp; Places","text":"Why are the streets on the Places map no longer loading? <p>The high-quality maps have been a paid feature for a long time, but were still available for testing. Since many users didn't realize this and simply used the commercial maps for free, this was recently changed. Please see the feature comparison on our website for reference. </p> <p>Compare Memberships \u203a</p> Why are some pictures positioned at unvisited locations on the map? <p>PhotoPrism can estimate the location of pictures taken without GPS information by extrapolating it from the location of other pictures taken on the same day. These estimates can be disabled in the settings if you don't want them.</p>"},{"location":"user-guide/faq/#media-library","title":"Media Library","text":"What media file types are supported? <p>PhotoPrism supports indexing, viewing, and converting most popular image, video and RAW formats, including JPEG, PNG, GIF, BMP, HEIF, HEIC, MP4, MOV, WebP, and WebM.  TIFF is partially supported without extensions like GeoTIFF.</p> <p>When indexing, a JPEG or PNG sidecar file is automatically created for videos and images in other formats, such as RAW or vector graphics. It is needed for thumbnail generation, image classification, and face detection. JPEG XL support is planned as soon as it is generally available and enough compatible tools exist.</p> <p>If installed, converting RAW files is possible with the following converters (our Docker image includes both):</p> <ul> <li>Darktable (supported cameras)</li> <li>RawTherapee (supported cameras)</li> </ul> <p>On a Mac, RAW files can also be converted with Sips (supported cameras). Our goal is to provide top-notch support for all RAW formats, regardless of camera make and model. Please let us know about any issues with a particular camera or file format.</p> <p>For maximum browser compatibility, video codecs and containers supported by FFmpeg can be transcoded to MPEG-4 AVC on demand, just as still images can be extracted for thumbnail creation.</p> <p>Make sure you have JSON sidecar files enabled if you have videos, live photos, and/or animated GIFs so that video-specific metadata such as codec, frames, and duration can be extracted, indexed, and searched.</p> <p>For a complete list of file formats and extensions, see our downloadable Feature Overview.</p> What metadata sidecar file types are supported? <p>Currently, three types of file formats are supported:</p> Why are my video files not indexed? <p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have Exiftool enabled to extract metadata such as duration, resolution, and codec.</p> Are JPEGs updated when RAW or XMP files change? <p>JPEGs are currently not regenerated when related RAW or XMP files change. RAW files are digital negatives by design. PhotoPrism therefore assumes that their image information is immutable.</p> <p>XMP files can affect the appearance, but most of the metadata they contain, such as title and description, does not. Creating JPEGs from RAW files is a time-consuming task, and in most cases would cause a huge, unjustified amount of overhead. In addition, the rendering information in XMP files is not well standardized. For example, changes you make in Photoshop may not be compatible with Darktable.</p> <p>We recommend manually updating existing JPEG sidecar files as needed or creating additional JPEGs, so you can choose between different versions. New files and other metadata changes are detected and reflected in the index as usual when your library is scanned.</p> Some files seem hidden, where are they? <p>If the quality filter is enabled, you might find them in Photos &gt; Review. Otherwise, their format may not be supported, they may be corrupted, or they may be stacked with other files if their name, exact date &amp; location, or unique image ID indicate they belong to the same photo. You may then unstack them if this happened by mistake e.g. because of bad metadata.</p> <p>View Troubleshooting Checklist \u203a</p> For what reasons can files be stacked? <ol> <li>Files sharing exactly the same file and folder name will always be stacked, for example <code>/2018/IMG_1234.jpg</code> and <code>/2018/IMG_1234.avi</code></li> <li>Files with related, sequential names like <code>/2018/IMG_1234 (2).jpg</code> and <code>/2018/IMG_1234 (3).jpg</code> may be stacked as well (optional)</li> <li>Pictures were taken at the same GPS position and second (optional)</li> <li>Image metadata contains the same Unique Image ID or XMP Instance ID (optional)</li> </ol> <p>You can change the behaviour for 2 - 4 in Settings.</p> <p>Note that already stacked files are not automatically unstacked when you change the stacking settings.</p> I already indexed some files. Why are Folders, Calendar and Moments still empty? <p>Folders, Calendar and Moments are populated at the end of the indexing process.</p> Why does the count in Search not match the count of files in Originals? <p>Library &gt; Originals shows actual files, whereas Search counts unique photos and videos.</p> <p>Photos and videos may have more than one file, for example:</p> <ul> <li>A raw file + related jpg file + related xmp file = 3 files, 1 photo</li> <li>A mp4 file + related jpg file = 2 files, 1 video</li> </ul> <p>It is also possible that multiple .jpg files are stacked because they are related to each other.</p> When should I perform a complete rescan? <p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>You can start a rescan from the user interface by navigating to Library &gt; Index, selecting \"Complete Rescan\", and then clicking \"Start\". Manually entered information such as labels, people, titles or descriptions will not be modified when indexing, even if you perform a \"complete rescan\". Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p> Can I use the web interface to permanently delete files? <p>Yes, you can permanently delete files.</p> In which cases could files in the originals folder get modified? <p>PhotoPrism generally does not write to the originals folder, with the following exceptions: (1) You rotate an image in the user interface, so its Exif header must be updated. (2) You unstack files that were stacked based on their name, so they must be renamed. (3) You add files using the import functionality or the web upload. (4) You manually delete files in the user interface. (5) You have configured the originals folder as your sidecar folder. (6) You access the originals folder with a WebDAV client to manage your files without having read-only mode enabled.</p>"},{"location":"user-guide/faq/#json","title":"JSON","text":"<p>If not disabled via <code>PHOTOPRISM_DISABLE_EXIFTOOL</code> or <code>--disable-exiftool</code>, Exiftool is used to automatically create a JSON sidecar for each media file. In this way, embedded XMP and video metadata can also be indexed. Native metadata extraction is limited to common Exif headers. Note that this causes small amount of overhead when indexing for the first time.</p> <p>JSON files can also be useful for debugging, as they contain the full metadata and can be processed with common development tools and text editors.</p> <p>Metadata JSON files exported from Google Photos can be read as well. Support for more schemas may be added over time.</p>"},{"location":"user-guide/faq/#yaml","title":"YAML","text":"<p>Unless disabled via <code>PHOTOPRISM_DISABLE_BACKUPS</code> or <code>--disable-backups</code>, PhotoPrism automatically creates/updates human-friendly YAML sidecar files during indexing and after manual editing of fields such as title, date, or location. They serve as a backup in case the database (index) is lost, or when folders are synchronized with a remote instance.</p> <p>Like JSON, YAML files can be opened with common development tools and text editors. However, changes are not synchronized with the original index, as this could overwrite existing data.</p>"},{"location":"user-guide/faq/#xmp","title":"XMP","text":"<p>XMP (Extensible Metadata Platform) is an XML-based metadata container format developed by Adobe. It provides many more fields (as part of embedded models like Dublin Core) than Exif. This also makes it difficult - if not impossible - to provide full support. Reading title, copyright, artist, and description from XMP sidecar files is implemented as a proof-of-concept, contributions are welcome. Indexing of embedded XMP is only possible via Exiftool, see above.</p>"},{"location":"user-guide/faq/#metadata","title":"Metadata","text":"Windows shows different metadata values. Could this be a bug in PhotoPrism? <p>We recommend that you use Exiftool to see all metadata fields and values, as Windows has limited functionality.</p> <p>It might then become clear why there are differences. For example, it could be that Windows does not support some fields and therefore ignores them, or that the data shown is actually from the file system and not from the files. Should you still believe to have found a bug, please provide us with sample files so that we can reproduce the issue.</p> Why is the date of pictures without metadata displayed as Unknown in the search results? <p>If there is no date information available in the metadata or the original file names, the file system modification time is used to sort pictures in search results and to create canonical file names for them during import. However, this is usually not the actual date a photo was taken (or a graphic was created by the original author), but only the time you downloaded or copied it. As a result, the date of pictures without a reliable creation date will be displayed as \"Unknown\" until you manually set a date in the edit dialog.</p> Why do some pictures have 08/12/2002 as date if they were not taken on that day? <p>This is usually caused by a bug in Android that caused photos to be created with an incorrect CreateDate. While the date can easily be changed in the edit dialog, this only updates the index without modifying your originals. To fix the date directly in your image or video files, please use other applications like Photoshop, or Exiftool, and re-index your library.</p> Why do some pictures have an odd date like 01/01/1980? <p>This may happen in case there was an issue with your camera's settings when the photo was taken. While the date can easily be changed in the edit dialog, this only updates the index without modifying your originals.</p> <p>To fix the date directly in your image or video files, please use other applications like Photoshop, or Exiftool, and re-index your library.</p> What's the difference between keywords and labels? <p>Keywords contain a list of search terms extracted from metadata, file names, and other sources like geodata. Pictures with matching keywords automatically show up in related Labels.</p> <p>Although related, keywords and labels serve different purposes:</p> <ul> <li> <p>Labels may have parent categories and are primarily used for classification, like \"animal\", \"cat\", or \"boat\". Duplicates and ambiguities should be avoided.</p> </li> <li> <p>Keywords are primarily used for searching. They may include similar terms and translations, like \"kitten\", \"kitty\", and \"cat\".</p> </li> </ul>"},{"location":"user-guide/faq/#live-photos","title":"Live Photos","text":"Why can't I play Live Photos or find stacks when I search for specific images? <p>Our search API and user interface perform a file search. This is intentional since \"stacks\" can contain files of different types and properties, such as color.</p> <p>For example, there may be color and monochrome versions. Now, when you search for them or sort them by color, the user interface must display individual files. Otherwise, the results showing a color image/video when you filter by monochrome would make no sense.</p> <p>Likewise, if you search for <code>filename.mp4.*</code>, you will find only JPEGs without video, because the video file extension is <code>.mp4</code> without an extra dot at the end.</p> <p>We recommend using the <code>path:</code> and/or <code>name:</code> filters with wildcards if searching for individual files limits the search results too much. Most users will want to find all related files so that they can be displayed together, e.g. as live photos consisting of a video and an image.</p> <p>You can combine these filters with other filters such as <code>live</code> to ensure that the results include only pictures with a specific media type. Alternatively, you can use the <code>filename:</code> filter with a more permissive wildcard that excludes the file extension.</p>"},{"location":"user-guide/faq/#thumbnails","title":"Thumbnails","text":"Isn't it insecure that thumbnail image URLs work even if you are not logged in? <p>Like most commercial image hosting services, we've chosen to use a cookie-free thumbnail API to minimize request latency and avoid unnecessary network traffic. If you were to copy private session cookies and use them in a different browser window, you would have a similar problem, except that they also work for other API endpoints, not just a single image.</p> <p>Even if URLs were to become invalid every minute: Digital copies are as good as originals. Once shared and downloaded, such images should be considered \"leaked\" because they are cached and can be re-shared by the recipient at any time, with no sure way to get all copies back. Any form of protection we could provide would essentially be \"snake oil\", could be circumvented, and would have a negative impact on the user experience, such as disabling the browser cache or context menu.</p> <p>For the highest level of protection, it is recommended to shield your private server from the public Internet. Always use HTTPS, a VPN and/or ideally TLS client certificates and make sure that only people you trust have access to your instance.</p> <p>Visit docs.photoprism.app/developer-guide/media/thumbnails/ to learn more.</p>"},{"location":"user-guide/faq/#webdav","title":"WebDAV","text":"Why are files uploaded via WebDAV not indexed/imported immediately? <p><code>PHOTOPRISM_AUTO_INDEX</code> and <code>PHOTOPRISM_AUTO_IMPORT</code> let you specify how long PhotoPrism should wait before indexing or importing newly uploaded files. The default setting is 300 seconds, or 5 minutes. This is a safety mechanism for users with slow uploads to avoid incomplete file sets, for example when uploading pictures with sidecar files. You can therefore reduce the delay if you have a fast connection and usually do not upload stacks of related files such as RAW images with sidecar JPEG and XMP files.</p> <p>In some cases, it is also possible that the index is already being updated, so you will have to wait until the process is complete before indexing new files.</p> Why do I get an error when trying to add a remote server for syncing? <p>When adding a new remote server, PhotoPrism tests a number of common endpoints. Only when that fails, you'll see an error. There may be different reasons for this:</p> <ul> <li>you are using HTTPS with an invalid certificate (not signed, outdated, domain doesn't match,...)</li> <li>your server has permission issues, or an otherwise bad configuration. For example, Nextcloud blocks requests if the host doesn't match <code>trusted_domains</code> in its <code>config.php</code></li> <li>the IP is not reachable from your PhotoPrism instance due to network settings, or a firewall</li> <li>the internal hostname can not be resolved to an IP address</li> <li>it's the wrong host or port</li> <li>username or password are wrong</li> </ul> <p>Curl is an excellent tool for testing HTTP connections if you don't mind using a terminal:</p> <pre><code>curl -X PROPFIND -H \"Depth: 1\" -u user:pass https://example.org/webdav/\n</code></pre> <p>To avoid overlooking issues, it's best to run it from the same Docker container, virtual machine, or server environment where PhotoPrism is installed.</p> My file sync app fails with \"unable to parse TLS packet headers\" when trying to connect via WebDAV? <p>Because of security considerations, some backup tools and file sync apps like FolderSync removed support for non-SSL HTTP communication.</p> <p>If you install PhotoPrism on a public server outside your home network, always run it behind a secure HTTPS reverse proxy. Your files and passwords will otherwise be transmitted in clear text and can be intercepted  by anyone, including your provider, hackers, and governments. Backup tools and file sync apps may refuse to  connect as well.</p>"},{"location":"user-guide/first-steps/","title":"First Steps \ud83d\udc63","text":"<p>Once the initial setup is complete, there are only two more steps before you can start browsing your pictures:</p> <ol> <li>Configure your library and advanced settings according to your individual preferences.</li> <li>Choose whether you want to index your originals directly, leaving all file and folder names unchanged, or use the optional import feature, which automatically removes duplicates, gives files a unique name, and sorts them by year and month.</li> </ol> <p>If you want to use folders that already exist on your computer, make sure you configured them as originals respectively import folders during setup.</p> <p>To add new pictures, you can either copy them to the originals or import folder, for example using WebDAV, or upload them using a browser, which will automatically import them once uploaded.</p> <p>Then start indexing or importing, depending on which strategy you have chosen.</p> <p>Ensure there is enough disk space available for creating thumbnails and verify filesystem permissions before starting to index: Files in the originals folder must be readable, while the storage folder including all subdirectories must be readable and writeable.</p>"},{"location":"user-guide/first-steps/#while-indexing-is-in-progress","title":"While indexing is in progress...","text":"<p>Your photos and videos will successively become visible in search results and other parts of the user interface. Open the Logs tab in Library to watch the indexer working. The counts in the navigation are constantly updated, so you can follow the progress.</p> <p>In case some of your pictures are still missing after indexing has been completed, they might be in Review due to low quality or incomplete metadata. You can turn this and other features off in Settings, depending on your specific use case.</p> <p>Of course, you can continue using your favorite tools for processing RAW files, editing metadata, or importing new shots. Go to Library and click Start to update the index after files have been changed, added, or removed. This can also be automated using CLI commands and a scheduler.</p> <p>While indexing, JPEG sidecar files may be created for originals in other formats such as RAW and HEIF. This is required for image classification, facial recognition, and for displaying them in a Web browser. Sidecar and thumbnail files will be added to the storage folder, so that your originals folder won't be modified.</p>"},{"location":"user-guide/first-steps/#setting-up-your-devices","title":"Setting up Your Devices","text":"<p>Finally, once indexing is complete and you're happy with the results, you can configure automatic syncing from your phone and install the Progressive Web App (PWA) on your desktop and mobile home screens as needed.</p>"},{"location":"user-guide/navigate/","title":"Navigating the User Interface","text":"<p>The user interface for browsing and searching your pictures is based on the following components. Screenshots in this documentation generally show pages in a medium-resolution desktop browser. All pages are fully responsive, so they may look different on mobile devices.</p> <p></p> <p></p>"},{"location":"user-guide/navigate/#1-main-navigation","title":"1. Main Navigation","text":"<p>Located on the left, minimized on mobile devices. Click on the links to switch between different pages like Photos, Albums, Places, or Settings.</p>"},{"location":"user-guide/navigate/#2-toolbar","title":"2. Toolbar","text":"<p>Located on the top. Find photos or videos by entering search terms like <code>cats</code> and filters like <code>label:cat</code>. A list with possible search filters can be found here.</p>"},{"location":"user-guide/navigate/#3-reload-button","title":"3. Reload Button","text":"<p> reloads search results without reloading the full page.</p>"},{"location":"user-guide/navigate/#4-view-button","title":"4. View Button","text":"<p>Click to switch to a different search result view (cards: , mosaic: , or list: ).</p>"},{"location":"user-guide/navigate/#5-upload-button","title":"5. Upload Button","text":"<p> opens the upload dialog. Available on most pages, unless read-only mode is enabled or upload is disabled in Settings.</p>"},{"location":"user-guide/navigate/#6-expanded-toolbar","title":"6. Expanded Toolbar","text":"<p>The expanded toolbar contains additional options and search filters for country, year, month, camera, color, and category.</p>"},{"location":"user-guide/navigate/#7-context-menu","title":"7. Context Menu","text":"<p>When photos or videos are selected, the context menu appears in the lower right corner.  The number displayed is the count of currently selected items. It also contains the following buttons:</p> <ul> <li> Archive photos</li> <li> Add photos to album</li> <li> Download photos</li> <li> Mark photos as private</li> <li> Open edit dialog</li> <li> Share photos</li> </ul> <p>To unselect all items, click the cross at the top:</p> <p></p>"},{"location":"user-guide/navigate/#selection-mode-and-multi-select","title":"Selection Mode and Multi-Select","text":""},{"location":"user-guide/navigate/#desktop-browser","title":"Desktop Browser","text":"<p>Select the first picture by clicking  in the lower right corner.</p> <p>The user interface is now in selection mode:</p> <ul> <li>to additionally select individual pictures, click them anywhere except on the play/view icons in the corner</li> <li>to select multiple pictures at once, use a shift+click to select all pictures between the last selected picture and the one you shift+click</li> </ul>"},{"location":"user-guide/navigate/#mobile-devices","title":"Mobile Devices","text":"<p>Select the first picture with a long touch.</p> <p>The user interface is now in selection mode:</p> <ul> <li>to additionally select individual pictures, touch them anywhere except on the play/view icons in the corner</li> <li>to select multiple pictures at once, use a long touch to select all pictures between the last selected picture and the one you long touch</li> </ul>"},{"location":"user-guide/pwa/","title":"Mobile App (PWA)","text":"<p>At the moment, PhotoPrism doesn't have a native mobile app that can be installed through an official app store. However, our Progressive Web App (PWA) offers an almost native app-like experience.  You can conveniently install it on the home screen of all major operating systems and mobile devices.</p>"},{"location":"user-guide/pwa/#installation-requirements","title":"Installation Requirements","text":"<p>The compatibility of our PWA has been tested with Apple Safari and Google Chrome, but other modern browsers like Firefox or Microsoft Edge may generally be compatible as well.</p> <p>When self-hosting PhotoPrism, please make sure the site URL is configured correctly. In addition, PWAs must be hosted on a dedicated domain with HTTPS in order to be installed. If that is not possible, you can still choose \"Create Shortcut...\", \"Add to Home Screen...\", or a similarly named action from the browser menu to make the app accessible from your home screen.</p>"},{"location":"user-guide/pwa/#step-by-step-instructions","title":"Step-by-Step Instructions","text":"Apple Safari (iOS)Google Chrome (Android) <ol> <li>Open PhotoPrism in Safari</li> <li> <p>Click </p> <p></p> </li> <li> <p>Click Add to Home Screen</p> <p></p> </li> <li> <p>Choose a name and click Add</p> <p></p> </li> </ol> <ol> <li>Open PhotoPrism in Chrome</li> <li> <p>Click </p> <p> </p> </li> <li> <p>Click Install app</p> <p></p> </li> <li> <p>Choose a name and click Add</p> <p></p> </li> </ol> <p>The PWA is now installed on the home screen of your device and can be launched from there.</p> <p></p>"},{"location":"user-guide/backups/","title":"Creating Backups","text":"<p>At a minimum, a backup of PhotoPrism should include the files in your originals folder and a copy of the index database. We also recommend backing up the storage folder so that you don't need to recreate any thumbnail or sidecar files, and your backup includes the complete configuration.</p> MariaDBSQLite <ol> <li>The easiest way to create a full backup is to first run the backup command to generate a MariaDB database dump as shown below.</li> <li>Then back up your originals and storage folders using any standard file backup utility.</li> </ol> <p>A full backup of both folders is mandatory, but it is not necessary to create a dump first, as there already is a copy of the index database in the storage folder.</p>"},{"location":"user-guide/backups/#backup-command","title":"Backup Command","text":"<p>The easiest way to create an index SQL dump of MariaDB is to run the backup command in a terminal:</p> <pre><code>docker compose exec photoprism photoprism backup -i -f\n</code></pre> <p>If you are using Podman on a Red Hat-compatible Linux distribution:</p> <pre><code>podman-compose exec photoprism photoprism backup -i -f\n</code></pre> <p>By default, a backup is created in <code>storage/backup/mysql/[YYYY-MM-DD].sql</code>. A custom backup folder can be configured with <code>PHOTOPRISM_BACKUP_PATH</code></p> <p>Omit the <code>-f</code> flag if you do not want to overwrite existing files. You can also specify a custom filename as an argument (or <code>-</code> to write the SQL dump to stdout):</p> <pre><code>docker compose exec photoprism photoprism backup -i [filename]\n</code></pre> <p>How to create SQL dumps from SQLite is shown in our advanced backup guide.</p> <p>Note that our guides now use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code>.</p>"},{"location":"user-guide/backups/#important-folders","title":"Important Folders","text":""},{"location":"user-guide/backups/#originals","title":"Originals","text":"<p>The originals folder contains your original photo and video files. You can back it up and restore it using any standard file backup program if you have not already set this up.</p>"},{"location":"user-guide/backups/#storage","title":"Storage","text":"<p>SQLite, config, cache, thumbnail and sidecar files are saved in the storage folder. As with the originals folder, the exact path on your computer depends on your configuration.</p> <p>We recommend that you back up this folder as well so that you don't need to recreate the thumbnails and have a complete backup of your configuration. As for the originals folder, you can use any standard file backup utility to do this.</p> <p>Depending on the resources available to us, a future version may include additional features so that you do not have to rely on external tools to perform file backups and can use a web interface.</p>"},{"location":"user-guide/backups/export/","title":"Metadata Exports","text":"<p>Control of your data does not only refer to being able to restore a backup in PhotoPrism. It also refers to providing users with multiple ways of accessing the metadata they've added to their libraries independent from the software itself. People that don't know what to do with a database will probably not feel in control when they only get a sql file that a regular backup provides.</p> <p>Because of this, PhotoPrism has handy features for exporting your metadata in a human-readable format as well as a regular database-backup.</p> <p>In case you have backups enabled in your Settings, PhotoPrism automatically creates YAML backup files for albums and photos.</p> <p>Keep in mind that the data still resides in your database, and any changes made to the files will not be reflected in PhotoPrism. This is comparable to doing a backup, but to a human readable format.</p>"},{"location":"user-guide/backups/export/#album-backups","title":"Album Backups","text":"<p>Album backups are created for the following album types: album, folder, state, moment and month. You find those backups inside your <code>storage path</code> in <code>/albums</code>.</p>"},{"location":"user-guide/backups/export/#album-backups_1","title":"Album Backups","text":"<p>For each album the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Sort Order, Country, CreatedAt, UpdatedAt, Photos (UID + date the photo was added to the album)</li> </ul>"},{"location":"user-guide/backups/export/#folder-backups","title":"Folder Backups","text":"<p>For each folder the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort order, Country, Year, Month, Day, CreatedAt, UpdatedAt</li> </ul>"},{"location":"user-guide/backups/export/#month-backups","title":"Month Backups","text":"<p>For each month the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, Year, Month, CreatedAt, UpdatedAt</li> </ul>"},{"location":"user-guide/backups/export/#state-backups","title":"State Backups","text":"<p>For each state the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, CreatedAt, UpdatedAt</li> </ul>"},{"location":"user-guide/backups/export/#moment-backups","title":"Moment Backups","text":"<p>For each moment the following metadata is stored in the YAML file:</p> <ul> <li>UID, Slug, Type, Title, Location, Category, Description, Filter, Sort Order, Country, Year, CreatedAt, UpdatedAt</li> </ul>"},{"location":"user-guide/backups/export/#photo-backups","title":"Photo Backups","text":"<p>PhotoPrism creates YAML backup files for each photo in your <code>sidecar path</code>.</p> <p>The following metadata is stored:</p> <ul> <li>TakenAt + Source, UID, Type, Title + Source, Description + Source, OriginalName, TimeZone, PlaceSrc, Altitude,    Lat, Lng, Year, Month, Day, Iso, Exposure, FNumber, FocalLength, Quality, Favorite, Private, Keywords + Source,    Notes + Source, Subject + Source, Artist + Source, Copyright + Source, License + Source, CreatedAt, UpdatedAt, EditedAt, DeletedAt (Archived)</li> </ul> <p>Helpful information can be found on GitHub as well.</p>"},{"location":"user-guide/backups/folders/","title":"Folder Overview","text":"<p>This page gives you an overview about the directories used by PhotoPrism.</p>"},{"location":"user-guide/backups/folders/#originals","title":"Originals","text":"<p>This path can be configured by <code>PHOTOPRISM_ORIGINALS_PATH</code>. The <code>originals</code> directory contains your photo library. PhotoPrism will never move or rename files in this folder. It may add files from uploads or imports, unless read-only mode is enabled.</p>"},{"location":"user-guide/backups/folders/#import","title":"Import","text":"<p>This path can be configured by <code>PHOTOPRISM_IMPORT_PATH</code>. If you decide to use our import functionality, you add your photos to the <code>import</code> directory, so that they can be imported into <code>originals</code>.</p>"},{"location":"user-guide/backups/folders/#storage","title":"Storage","text":"<p>The storage path can be configured using <code>PHOTOPRISM_STORAGE_PATH</code>.</p> <p>In case cache, sidecar and config path are not defined separately, those are located in the storage directory. In addition the storage directory contains album backups in <code>/albums</code> as well as database files.</p> <p>You storage path must NOT be located in your originals path. Otherwise your thumbnails will be indexed as well!</p>"},{"location":"user-guide/backups/folders/#cache","title":"Cache","text":"<p>The <code>cache</code> directory contains <code>json</code> and <code>thumbnails</code> directories.  The path can be set using <code>PHOTOPRISM_CACHE_PATH</code>.</p>"},{"location":"user-guide/backups/folders/#json","title":"JSON","text":"<p>PhotoPrism creates JSON files containing a file's metadata, read by exiftool, in this directory. You can prevent PhotoPrism from creating those JSON files by disabling exiftool in Settings.</p>"},{"location":"user-guide/backups/folders/#thumbnails","title":"Thumbnails","text":"<p>PhotoPrism creates thumbnails in different sizes for each photo. Those are stored in the <code>thumbnails</code> directory. More information on thumbnails can be found here.</p>"},{"location":"user-guide/backups/folders/#sidecar","title":"Sidecar","text":"<p>In the <code>sidecar</code> directory PhotoPrism stores YAML backup files for each photo as well as JPEG's it converted e.g. from RAWs. Both backup and converting functionalities can be disabled in Settings. The sidecar path can be configured using <code>PHOTOPRISM_SIDECAR_PATH</code>.</p>"},{"location":"user-guide/backups/folders/#config","title":"Config","text":"<p>In the config path, setting files might be stored. It can be set with <code>PHOTOPRISM_CONFIG_PATH</code>.</p>"},{"location":"user-guide/backups/folders/#backup","title":"Backup","text":"<p>Database backup files are stored in the backup directory. It can be configured using <code>PHOTOPRISM_BACKUP_PATH</code>.</p>"},{"location":"user-guide/backups/folders/#temp","title":"Temp","text":"<p>In the <code>temp</code> directory, uploads and downloads are temporarily stored. You can configure the path using <code>PHOTOPRISM_TEMP_PATH</code>.</p>"},{"location":"user-guide/backups/folders/#asset","title":"Asset","text":"<p>The asset path is used to store static resources like models and templates. It can be set using <code>PHOTOPRISM_ASSETS_PATH</code>.</p>"},{"location":"user-guide/backups/restore/","title":"Restoring Backups","text":"<p>To restore your instance, you must have the files in your originals folder and a copy of the index database. We also recommend having a backup of the storage folder so that you don't need to recreate any thumbnail or sidecar files, and your backup includes the complete configuration:</p> <ul> <li>if you have a backup copy of your storage and originals folders, the easiest way is to restore those folders first and then run the restore command in case you are using MariaDB</li> <li>otherwise, you additionally need to perform a complete rescan of your library to recreate missing sidecar and thumbnail files</li> <li>some of the metadata and your albums can also be recovered from YAML sidecar files even if you don't have a copy of the index database, unless you have disabled this feature</li> </ul>"},{"location":"user-guide/backups/restore/#restore-command","title":"Restore Command","text":"<p>To restore the index from an existing MariaDB dump, you can run the following command:</p> <pre><code>docker compose exec photoprism photoprism restore -i -f\n</code></pre> <p>If you are using Podman on a Red Hat-compatible Linux distribution:</p> <pre><code>podman-compose exec photoprism photoprism restore -i -f\n</code></pre> <p>This will automatically search the backup folder for the most recent index dump and restore it. A custom backup folder can be configured with <code>PHOTOPRISM_BACKUP_PATH</code>.</p> <p>Omit the <code>-f</code> flag to prevent overwriting an existing index. As with the backup command, you can also specify a specific dump filename as an argument:</p> <pre><code>docker compose exec photoprism photoprism restore -i [filename]\n</code></pre> <p>When the database is restored, all user accounts and passwords are restored as well. If you have changed your password, you must thus use the old password to sign in.</p> <p>Note that our guides now use the new <code>docker compose</code> command by default. If your server does not yet support it, you can still use <code>docker-compose</code>.</p>"},{"location":"user-guide/library/","title":"Indexing Your Library","text":"<p>Most users with an existing library will want to index their originals directly without using the optional import feature, leaving the file and folder names unchanged.</p> <p>When importing, files are first transferred from a temporary folder to the originals folder. In the process, duplicates are automatically skipped, and the imported files are given a unique file name and are sorted by year and month.</p> <p>Importing is also an efficient way to add files, since PhotoPrism does not need to search your originals folder to find new files.</p> <p>Hidden files and folders that start with a <code>.</code>, <code>@</code>, <code>_.</code>, or <code>__</code> like <code>__MACOSX</code> are automatically ignored. Other names to be ignored can be added to a <code>.ppignore</code> file in the originals or import folder it should affect. You can put it either in the main folder or in a subfolder to limit the scope.</p>"},{"location":"user-guide/library/#indexing-originals","title":"Indexing Originals","text":"<p>Use index if you want to index your photos and videos directly in the originals folder, leaving the file and folder names unchanged.</p> <p>Your folder structure in originals might look like this:</p> <p></p> <p>During indexing:</p> <ul> <li>files will not be renamed or moved</li> <li>your existing folder structure is preserved, so you can later choose to have your folders appear as albums</li> <li>metadata from your files is read to create captions, titles, and locations for your photos</li> <li>thumbnails and optionally JSON and/or YAML files containing metadata are created</li> </ul> <p>After indexing, the originals folder has not been changed in any way:</p> <p></p>"},{"location":"user-guide/library/#advantages","title":"Advantages","text":"<ul> <li>existing file and folder names remain unchanged.</li> <li>you can search your images by their current name and location</li> <li>indexing is usually faster because no files have to be copied or moved</li> </ul> <p>You can move media files between the different directories within your originals folder. The indexer detects this and updates the path automatically when running the next time.</p>"},{"location":"user-guide/library/#importing-files","title":"Importing Files","text":"<p>Importing is more efficient when adding files as you don't need to re-index all originals to find new photos and videos. Uploads will also be treated as import, you can't directly upload to originals (yet).</p> <p>Your initial folder structure in import might look like this:</p> <p></p> <p>During import:</p> <ul> <li>files are copied or moved from their source directory to the originals folder</li> <li>duplicates are automatically skipped, \"Move\" also deletes them in the source directory as if they were successfully moved</li> <li>imported files are given a unique file name and are sorted by year and month</li> <li>the original file name is indexed as a file property</li> <li>all imported files are indexed, the rest remains in the import folder</li> </ul> <p>After importing with \"Copy\" (default setting), your folders might look like this::</p> <p></p> <p>After importing with \"Move\" your folders might look like this:</p> <p></p>"},{"location":"user-guide/library/#advantages_1","title":"Advantages","text":"<ul> <li>unsupported files stay untouched in the import directory</li> <li>no duplicates in your originals directory</li> </ul> <p>The original file and folder names are used to extract keywords. For example, when you index a folder with the path \"Vacation/Africa\", all files from this folder will get the keywords \"vacation\" and \"africa\".</p>"},{"location":"user-guide/library/#conclusion","title":"Conclusion","text":"<p>In case your picture library is not well organized and/or you have many duplicates, you may consider importing your files as this will remove duplicates. Be aware that imported files are given a unique file name and are sorted by year and month.</p> <p>Provided you have a well-organized library with meaningful file and folder names, it is best to index your originals directly and leave the file and folder names unchanged.</p>"},{"location":"user-guide/library/duplicates/","title":"Duplicate Detection","text":"<p>Duplicate files are detected and automatically skipped when indexing, so they appear only once in search results and albums. Their SHA1 checksums and sizes are used for comparison.</p> <p>Browsing, analyzing and deleting duplicates via Web UI is planned for a future release.</p>"},{"location":"user-guide/library/duplicates/#file-import","title":"File Import","text":"<p>When importing, files are first copied or moved from a temporary folder to the originals folder. In the process, duplicates are automatically skipped. \"Move\" also deletes them in the source directory as if they were successfully moved.</p>"},{"location":"user-guide/library/duplicates/#related-files","title":"Related Files","text":"<p>In addition to exact duplicates, there may be similar pictures and related sidecar files (with the same filename) in your library, for example:</p> <ul> <li>raw + jpg + xmp</li> <li>jpg + json</li> <li>original + edited version</li> <li>original + compressed version</li> <li>live and timelapse photos</li> </ul> <p>Depending on your library settings, such files may be automatically grouped into stacks:</p> <p>Learn more \u203a Library Settings \u203a</p>"},{"location":"user-guide/library/files/","title":"Browsing Files and Folders","text":"<p>The Originals section displays all files of your originals directory.</p> <p>Clicking on a folder opens it. Clicking on a file opens its edit dialog. </p> <p></p> <p></p> <p>The context menu allows you to perform the following actions:</p>"},{"location":"user-guide/library/files/#download-files","title":"Download Files","text":"<ol> <li>Select files</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/library/files/#create-an-album-from-files","title":"Create an Album from Files","text":"<ol> <li>Select files</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/library/import/","title":"Importing Files to Originals","text":"<p>Most users with an existing library will want to index their originals directly without using the optional import feature, leaving the file and folder names unchanged. Importing first copies or moves from their source directory to the originals folder, which is optional.</p> <ol> <li> <p>Add files to the import folder if not done already</p> </li> <li> <p>Go to Library using the main navigation, and open the Import tab</p> </li> <li> <p>Select a sub-folder or keep the default to import all files</p> </li> <li> <p>Select Move Files if you want imported files to be removed from the import folder</p> </li> <li> <p>Click on Import</p> </li> </ol> <p></p> <p>You may use WebDAV for adding files to the import folder. This is especially helpful if PhotoPrism is running on a remote server.</p> <p>Import is not possible in read-only mode because it requires write permissions to the folder of originals.</p>"},{"location":"user-guide/library/import/#when-should-move-files-be-selected","title":"When should \"Move Files\" be selected?","text":"<p>If you select this option, files that have been moved to the originals folder, or that already exist, will be automatically deleted from the import folder. This way you save disk space if you don't want to keep them as backup or for other reasons.</p>"},{"location":"user-guide/library/import/#automatic-import","title":"Automatic Import","text":"<p>An import is triggered automatically when files are synced to the import folder via WebDAV.</p> <p>The default safety delay for automatic import is 3 minutes. You can change it using the PHOTOPRISM_AUTO_IMPORT config option.</p> <p>Can I use PhotoPrism to sort files into a configurable folder structure?</p> <p>You have complete freedom in how you organize your originals. If you don't like the unique names and folders used by the import function, you can resort to external batch renaming tools, for example:</p> <ul> <li>ExifTool</li> <li>PhockUp</li> <li>Photo Organizer</li> </ul> <p>Configurable import folders may be available in a later version. This is because - depending on the specific  pattern - appropriate conflict resolution is required and the patterns must be well understood and validated to avoid typos or other misconfigurations that lead to undesired results for which we do not want to be responsible.</p>"},{"location":"user-guide/library/metadata/","title":"Metadata Support","text":"<p>Original media and sidecar files are scanned for Exif and XMP data, as well as proprietary metadata, including Google Photos JSON. For this, PhotoPrism has a built-in Exif parser, a simple XMP reader and can also use Exiftool to extract metadata in various formats such as Exif, XMP and IPTC:</p> <p>View Supported Tags \u203a</p> <p>The combined information is then normalized, merged, and enriched with additional information.</p> <p>Feel free to submit a feature or pull request for Exif or XMP metadata that is not  supported yet.</p>"},{"location":"user-guide/library/metadata/#external-changes","title":"External Changes","text":"<p>If you update one of these tags with external tools such as Exiftool or Digikam, PhotoPrism reads the changes the next time it indexes the file, provided the file's modification date has been updated.</p>"},{"location":"user-guide/library/metadata/#xmp-sidecar-files","title":"XMP Sidecar Files","text":"<p>When a field is populated with data from an XMP sidecar file, that data is the only source for the field. This means that keywords from XMP override other keywords from PhotoPrism, such as those derived from colors or folder names.</p>"},{"location":"user-guide/library/metadata/#cloud-migration","title":"Cloud Migration","text":"<p>PhotoPrism also reads metadata from Google Photos JSON and Apple XMP files:</p> <p>Migrate from Google Photos \u203a</p> <p>Migrate from Apple Photos \u203a</p>"},{"location":"user-guide/library/metadata/#enrichment","title":"Enrichment","text":"<p>In addition to reading metadata from your original and sidecar files, PhotoPrism enriches the metadata of your photos with additional information:</p> <ul> <li>dates or keywords from folder or filenames</li> <li>keywords derived from image classification, color detection and facial recognition</li> <li>GPS information from location estimates </li> <li>keywords derived from location details</li> </ul>"},{"location":"user-guide/library/metadata/#export","title":"Export","text":"<p>We want you to be able to access your metadata independently of PhotoPrism and its database. That's why the indexer additionally creates human-readable YAML sidecar files that you can open with a text editor or other tools if needed.</p> <p>Except for the image orientation, PhotoPrism does not yet offer the ability to write changed metadata back to the original files to avoid possible data loss and conflicts with third-party apps. See GitHub Discussions.</p>"},{"location":"user-guide/library/originals/","title":"Indexing Your Originals","text":"<p>If you're using PhotoPrism for the first time, make sure your photo and video  collection is properly configured as originals folder. See installation instructions in Getting Started for details. When starting with an empty folder, you need to add or upload files first.</p> <ol> <li> <p>Go to Library using the main navigation</p> </li> <li> <p>Select a sub-folder or keep the default to index all files</p> </li> <li> <p>Select Complete Rescan to re-index all originals, including already indexed and unchanged files</p> </li> <li> <p>Press Start to start indexing</p> </li> </ol> <p></p> <p>You can use WebDAV-compatible apps, including Microsoft's Windows Explorer and Apple's Finder,  to add files to your originals folders from a remote computer or mobile device.</p> <p>NSFW</p> <p>An NSFW detector can be enabled to automatically mark images with potentially objectionable content as  private. Note that this feature is only partially reliable. </p> <p>Images that have already been indexed before the NSFW detector is activated will not be scanned by the detector.</p>"},{"location":"user-guide/library/originals/#ignoring-files-and-folders","title":"Ignoring Files and Folders","text":"<p>Hidden files and folders that start with a <code>.</code>, <code>@</code>, <code>_.</code>, or <code>__</code> like <code>__MACOSX</code> are automatically ignored. Other names to be  ignored can be added to a <code>.ppignore</code> file in the originals or import folder it should affect. You can put it either in the main folder or in a subfolder to limit the scope.</p> <p>Example:</p> <pre><code># ignore a directory by its name\nfoo\n# ignore all files\n*.*\n# ignore all files with gif extension\n*.gif\n# ignore videos which name start with MVI\nMVI_*.MOV\n# or\nMVI_*.*\n</code></pre> <p>Names in the same directory and in all subdirectories are ignored. You can use <code>*</code> as a wildcard.</p> <p>Files and folders that have already been indexed cannot be retroactively removed from the index using a <code>.ppignore</code> file. Adding their name won't remove them from PhotoPrism.</p> <p>If you are a new user and files or folders have already been indexed, it is generally easiest to reset the database and start with a new index by running <code>photoprism reset</code> in a terminal.</p>"},{"location":"user-guide/library/originals/#when-should-complete-rescan-be-selected","title":"When should \"Complete Rescan\" be selected?","text":"<p>If you select this option, all files in the originals folder will be re-indexed, including already indexed and unchanged files.</p> <p>We recommend performing a complete rescan after major updates to take advantage of new search filters and sorting options. Be sure to read the notes for each release to see what changes have been made and if they might affect your library, for example, because of the file types you have or because new search features have been added. If you encounter problems that you cannot solve otherwise (i.e. before reporting a bug), please also try a rescan and see if it solves the problem.</p> <p>Manually entered information such as labels, people, titles or descriptions will not be modified when indexing, even if you perform a \"complete rescan\".</p>"},{"location":"user-guide/library/originals/#automatic-indexing","title":"Automatic Indexing","text":"<p>Indexing is triggered automatically when files are synced with the originals folder via WebDAV.</p> <p>The default safety delay for automatic indexing is 5 minutes. You can change it through the PHOTOPRISM_AUTO_INDEX config option.</p> <p>Be careful not to start multiple indexing processes at the same time, as this will lead to a high server load.</p>"},{"location":"user-guide/library/upload/","title":"File Upload Using the Web UI","text":"From ToolbarFrom Library <ol> <li> <p>Click  in the upper right corner</p> <p></p> </li> <li> <p>In case you want to upload the files directly to an album select one</p> </li> <li> <p>Click Upload</p> <p></p> </li> <li> <p>Select files</p> </li> <li> <p>Click Upload to start uploading and importing the selected files</p> </li> </ol> <ol> <li> <p>Go to Library using the main navigation, and open the Import tab</p> </li> <li> <p>Click Upload</p> <p></p> </li> <li> <p>In case you want to upload the files directly to an album select one</p> </li> <li> <p>Click Upload</p> <p></p> </li> <li> <p>Select files</p> </li> <li> <p>Click Upload to start uploading and importing the selected files</p> </li> </ol>"},{"location":"user-guide/library/webdav/","title":"WebDAV File Upload","text":"<p>WebDAV-compatible apps and clients such as PhotoSync, Microsoft's Windows Explorer, and Apple's Finder can connect directly to PhotoPrism:</p> <p>Connect via WebDAV \u203a</p> <p>After files have been transferred, you can index or import them as usual. By default, indexing and importing start automatically after a safety delay when files have been uploaded using WebDAV.</p> <p>You can disable WebDAV in the advanced settings. Since it requires write permissions and authentication, the built-in WebDAV server is automatically disabled when running in read-only or public mode.</p> <p>You can also use WebDAV to download files from your library: Simply connect to  <code>http://server-ip:2342/originals/</code> (local server without HTTPS) or  <code>https://yourdomain/originals/</code> (public server with HTTPS enabled), and then copy the files to  a folder on your local device.</p>"},{"location":"user-guide/organize/albums/","title":"Albums","text":""},{"location":"user-guide/organize/albums/#create-new-album","title":"Create New Album","text":"<ol> <li>Go to Albums</li> <li> <p>In the upper right corner click </p> <p></p> </li> <li> <p>A new album with name \"Month Year\" is created</p> <p></p> </li> </ol>"},{"location":"user-guide/organize/albums/#edit-album-details","title":"Edit Album Details","text":"<p>Go to Albums and open the album edit dialog</p> From TitleContext MenuAlbum Toolbar <p>Click on the album title </p> <p>Select album, open context menu and click </p> <p></p> <p>Open album and click  in the upper right corner</p> <p></p> <p>Edit album details and click save</p> <p></p>"},{"location":"user-guide/organize/albums/#add-photos-to-album","title":"Add Photos to Album","text":"<ol> <li>Select photos and videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> <li> <p>Select album</p> <p></p> </li> <li> <p>Click add to album</p> <p></p> </li> </ol> <p>You can select many photos at once using shift.</p>"},{"location":"user-guide/organize/albums/#remove-photos-from-album","title":"Remove Photos from Album","text":"<ol> <li>Go to your album</li> <li>Select photos/videos you want to remove</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>"},{"location":"user-guide/organize/archive/","title":"Archive","text":"<p>You can move photos and videos you do not want to keep in your collection to Archive. Content that is archived is not deleted but it will not appear in any section apart from Archive.</p>"},{"location":"user-guide/organize/archive/#archive-photos","title":"Archive Photos","text":"<ol> <li>Select photos/videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>"},{"location":"user-guide/organize/archive/#restore-photos-from-archive","title":"Restore Photos from Archive","text":"<ol> <li>Go to Archive</li> <li>Select photos/videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol>"},{"location":"user-guide/organize/calendar/","title":"Calendar","text":"<p>Our Calendar enables you to browse through your photos by year and month.</p> <p></p> <p>The context menu allows you to perform the following actions:</p>"},{"location":"user-guide/organize/calendar/#download-months","title":"Download Months","text":"<ol> <li>Select month</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/calendar/#create-albums-from-months","title":"Create Albums from Months","text":"<ol> <li>Select month</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/organize/delete/","title":"Removing Files Permanently","text":"<p>You can permanently delete photo and video files you do not want to keep from your filesystem. Photos and videos must be archived before they can be deleted permanently.</p> <p>Before you start, make sure the Delete feature is enabled in Settings.</p>"},{"location":"user-guide/organize/delete/#delete-files","title":"Delete Files","text":"<ol> <li>Go to Archive</li> <li>Select the photos and videos your want to delete</li> <li>Click context menu</li> <li>Click </li> <li>Confirm</li> </ol>"},{"location":"user-guide/organize/download/","title":"Downloading Files","text":"Using Context MenuFrom Fullscreen ModeFrom Edit Dialog <ol> <li>Select photos</li> <li>Click on the context menu</li> <li> <p>Click . Photos will be downloaded in original size</p> <p></p> </li> </ol> <p>You can select many photos at once using shift.</p> <p>You can configure which files should be downloaded for each photo.</p> <ol> <li>Click on the photo</li> <li> <p>In fullscreen mode click </p> <p></p> </li> </ol> <p>You can configure which files should be downloaded for each photo.</p> <ol> <li>Open the photo's  edit dialog</li> <li>Open the Files Tab</li> <li>Click Download</li> </ol> <p></p>"},{"location":"user-guide/organize/edit/","title":"Editing Picture Details","text":"<p>PhotoPrisms edit dialog enables you to add/edit various types of metadata related to your photos/videos.</p> <p>During indexing PhotoPrism collects as much data as possible from sidecar files and the photo itself.</p>"},{"location":"user-guide/organize/edit/#open-edit-dialog","title":"Open Edit dialog","text":"From Card ViewFrom Full Screen ModeUsing Context Menu <ol> <li>Click on the photos title, time or camera information</li> </ol> <ol> <li>In the upper right corner click </li> </ol> <ol> <li>Select one or multiple photos</li> <li>Click on context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/edit/#edit-details","title":"Edit Details","text":"<p>In the edit dialog's Detail tab you can view and edit the following data:</p> <ul> <li>Title, Day, Month, Year, UTC time, UTC date, Time zone, Latitude, Longitude, Altitude, Country, Camera, ISO, Exposure, Lens, F Number, Focal Length, Subject, Artist, Copyright, License, Description, Keywords, Notes</li> </ul> <p></p> <p>Apply saves changes. Ok saves changes and closes edit dialog.</p> <p>Lots of metadata like labels, keywords, title, location, camera details are generated by PhotoPrism  itself during indexing. Once you change data manually PhotoPrism always keeps your data even if you index again.</p> <p>Every keyword can be used in PhotoPrisms search to find photos or videos.</p>"},{"location":"user-guide/organize/edit/#geolocation-plugin","title":"Geolocation Plugin","text":"<p>Geolocation Plugin is an open source extension that makes it easy to change latitude and longitude of a photo by selecting places on a graphical map. It can be installed through the Chrome web store.</p> <p></p>"},{"location":"user-guide/organize/edit/#edit-labels","title":"Edit Labels","text":"<p>In the edit dialog's Labels tab you can view and edit labels.</p>"},{"location":"user-guide/organize/edit/#edit-people","title":"Edit People","text":"<p>In the edit dialog's People tab you can view and edit people.</p>"},{"location":"user-guide/organize/edit/#edit-files","title":"Edit Files","text":"<p>In the edit dialog's Files tab you see all files that belong to a photo.</p> <p>In PhotoPrism a photo can consist of multiple files like a raw file + a jpeg version of this raw file + a related xmp or json file.</p> <p></p> <p>To open file details click .</p> <p></p> <p>In case you have stacked files you can change the primary file, delete not primary files, or unstack files using the action buttons.</p>"},{"location":"user-guide/organize/folders/","title":"Folders","text":"<p>We automatically display all folders of your originals directory in the Folders section. In case you add new files to your originals directory your folders will be updated.</p> <p></p> <p>The context menu allows you to perform the following actions:</p>"},{"location":"user-guide/organize/folders/#download-folders","title":"Download Folders","text":"<ol> <li>Select folder</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/folders/#create-albums-from-folders","title":"Create Albums from Folders","text":"<ol> <li>Select folder</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/organize/labels/","title":"Labels","text":"<p>PhotoPrism uses labels to classify images. Other tools use the term tags instead of labels. Labels are set automatically when adding new photos.  You can manually add new labels or edit/remove the ones that have been created by us.</p> <p>In Labels you find all labels of your photos and videos.  You can star labels by clicking . Starred labels will be listed first.</p> <p>PhotoPrism also attaches each generated label to a broader group (or category) of labels. For example, there is a general category 'vehicle' which will include labels such as 'cab', 'catamaran', 'lifeboat' and 'bullet train'. These broad label categories cannot be edited, but can be used in a search, in an identical way to all other labels.</p> <p>You may wish to see these broad label categories in addition to the usual labels in the Labels pages. Clicking the icon in the upper right-hand corner will switch between turning them on  ('Show More') and off  ('Show Less'). You can also include these label categories as part of a more complex search filter - the label categories from your photos will appear in the search filter bar as a drop-down selection under the option 'All Categories'.</p> <p></p>"},{"location":"user-guide/organize/labels/#view-all-photos-with-a-label","title":"View all Photos with a Label","text":"<ol> <li>Go to Labels</li> <li> <p>Click on the label you are interested in</p> <p> </p> </li> </ol> <p>Alternatively you can use the search field in Photos/Videos. You search for photos with a special label like this: <code>label:dog</code>.</p>"},{"location":"user-guide/organize/labels/#add-labels-to-photos","title":"Add Labels to Photos","text":"<ol> <li>Go to the photo edit dialog</li> <li>Go to Labels tab</li> <li>Click on the label field in the last row of the label table</li> <li>Enter a label name</li> <li> <p>Click  on the right side of this row</p> <p></p> </li> </ol>"},{"location":"user-guide/organize/labels/#removedelete-labels-from-photos","title":"Remove/Delete Labels from Photos","text":"<p>Labels that have been set automatically can be removed. Manually added labels can be deleted.</p> <ol> <li>Go to the photo edit dialog</li> <li>Go to Labels tab</li> <li> <p>Click the / button of the label you want to remove/delete</p> <p></p> </li> </ol> <p>Removed labels have a confidence of 0% and can be activated again at any time by clicking add.</p> <p></p> <p>You can hide Labels in Settings</p>"},{"location":"user-guide/organize/labels/#rename-labels","title":"Rename Labels","text":"<ol> <li> <p>Go to the photo edit dialog of any photo that has the label you want to rename</p> <p></p> </li> <li> <p>Go to Labels tab</p> </li> <li>Click on the label name you want to change</li> <li> <p>Change the name and click enter</p> <p></p> <p></p> </li> <li> <p>The changes will be applied to all photos with this label after the next  indexing</p> <p></p> </li> </ol> <p>Be aware this change applies to all photos that have this label.</p>"},{"location":"user-guide/organize/labels/#delete-labels","title":"Delete Labels","text":"<p>You can permanently delete a label. No file will get a deleted label set during indexing.</p> <ol> <li>Go to Labels</li> <li>Select the label you want to delete</li> <li>Open the context menu</li> <li> <p>Click </p> <p></p> </li> <li> <p>Confirm</p> <p></p> </li> </ol> <p>In case you want a deleted label to appear again, you need to add it to one photo and then index all files again.</p>"},{"location":"user-guide/organize/moments/","title":"Moments","text":"<p>PhotoPrism creates moments out of your memories.  Moments get constantly updated in case you add new photos.</p> <p>Moments can be based on location and time e.g. Germany 2020 or on labels like Nature &amp; Landscape or Pets.</p> <p></p> <p>The context menu allows you to perform the following actions:</p>"},{"location":"user-guide/organize/moments/#remove-moments","title":"Remove Moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> <li>Confirm</li> </ol> <p>Only the moment will be deleted. Your files stay untouched.</p>"},{"location":"user-guide/organize/moments/#download-moments","title":"Download Moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/moments/#create-albums-from-moments","title":"Create Albums from Moments","text":"<ol> <li>Select moment</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/organize/panoramas/","title":"Panoramas","text":"<p>PhotoPrism automatically marks photos with an aspect ratio of 2/1 or higher as panorama. You can view all your panorama images in the Panorama section.</p> <p></p>"},{"location":"user-guide/organize/panoramas/#edit-panorama-flags","title":"Edit Panorama Flags","text":"<ol> <li>Open the photo edit dialog</li> <li>Click </li> <li>Set or unset the panorama flag</li> </ol>"},{"location":"user-guide/organize/people/","title":"Face Recognition","text":"<p>Our latest version includes facial recognition that lets you find pictures of your family and friends. Be ready to discover long forgotten shots! New faces are detected as you scan your library. They are then grouped by similarity, so you can quickly match them to people.</p> <p>Recognition does not start until your library has been fully scanned. Searching and updating faces temporarily causes a high CPU load and may take a while, depending on your hardware and the number of images you have.</p> <p>Existing clusters are automatically optimized in the background, for example, when new faces are detected, you have reported a bad match, or new files are added to your library.</p>"},{"location":"user-guide/organize/people/#recognized-new-people","title":"Recognized &amp; New People","text":"<p>The people section shows you recognized people as well as new face clusters.</p> <p>To star a person click . Stared persons appear first.</p> <p> </p>"},{"location":"user-guide/organize/people/#why-doesnt-the-new-faces-page-show-all-faces","title":"Why doesn't the New Faces page show all faces?","text":"<p>The 'New Faces' page only shows automatically recognized face clusters, as there may be thousands of unknown faces in your library, including random movie actors or faces on shampoo bottles.</p> <p>You can use the <code>face:new</code> search filter to find images with unknown people. We recommend combining this filter with other filters like year or location when searching for specific people. The People tab in the photo edit dialog shows all faces, so you can name them or report a bad match by pressing the  button.</p>"},{"location":"user-guide/organize/people/#when-a-face-was-not-detected","title":"When a face was not detected...","text":"<p>There can be several reasons why a face was not detected:</p> <ul> <li>You may need to wait until indexing is complete, as face recognition will not begin until your library has been scanned</li> <li>Only the primary file in stacks will be searched for faces</li> <li>Faces can be smaller than the minimum size configured</li> <li>Our face detection did not scan the image thoroughly enough</li> <li>Reducing the resolution or quality of generated thumbnails negatively impacts face detection and recognition results, just like when you cannot see properly</li> <li>Contrast plays a major role, so a bright face with gray hair on a gray background may be less obvious to our face detection than it is to you</li> <li>In very rare cases an actual face may match a blacklist of false positives, like background noise and food that looks like a face</li> </ul> <p>Recognition compares the similarity of faces. The similarity threshold for a face is reduced when  you report a bad match.</p>"},{"location":"user-guide/organize/people/#assign-names-to-faces","title":"Assign Names to Faces","text":"From PeopleFrom Photo Edit dialog <ol> <li>Go to People</li> <li>Go to New</li> <li>Click on the input field</li> <li>Start typing a name</li> <li> <p>Press enter</p> <p></p> </li> </ol> <ol> <li>Open the photo edit dialog</li> <li>Go to the People tab</li> <li>Click on the input field</li> <li>Start typing a name</li> <li> <p>Press enter</p> <p></p> </li> </ol> <p>The person you just added will appear under Recognized</p>"},{"location":"user-guide/organize/people/#hiding-people","title":"Hiding People","text":"<p>You can hide a person in the Recognized section by clicking  in the upper right corner. Pictures of this person continue to be visible in search results and albums.</p> <p></p> <p>To see all people including hidden ones click .</p> <p></p> <p>Hidden people can be recovered by clicking </p> <p></p>"},{"location":"user-guide/organize/people/#hiding-faces","title":"Hiding Faces","text":"<p>You can hide face clusters from the New section, in the same way you hide people from the Recognized section.</p>"},{"location":"user-guide/organize/people/#view-all-photos-of-a-person","title":"View all Photos of a Person","text":"From PeopleFrom Search <ol> <li>Go to People</li> <li>Go to Recognized</li> <li> <p>Click on the person you want to view</p> <p></p> </li> </ol> <ol> <li>Go to Search</li> <li> <p>Search for person:\"jane-doe\"</p> <p></p> </li> </ol>"},{"location":"user-guide/organize/people/#rename-people","title":"Rename People","text":"<p>To rename all photos of a person:</p> <ol> <li>Go to People</li> <li>Go to Recognized</li> <li>Click on the persons name</li> <li>Type in a new name</li> <li>Press enter</li> </ol> <p></p> <p></p>"},{"location":"user-guide/organize/people/#change-people-assignments","title":"Change People Assignments","text":"<p>You may report bad matches by pressing the  button underneath a face in the People tab. This will remove the name. You can either leave it blank or enter the name of a different person.</p> <p>When you reject a match, the corresponding face cluster will be updated in the background so that similar  issues can be resolved automatically.</p> <ol> <li>Open the photo edit dialog</li> <li>Go to the People tab</li> <li>Click </li> <li>Then enter a new name or leave it empty</li> </ol> <p></p>"},{"location":"user-guide/organize/people/#remove-faces","title":"Remove Faces","text":"<p>In case PhotoPrism detected something wrong as face (false positives), or in case you just don't want to keep a face on the people tab you're not interested in, you can remove it.</p> <ol> <li>Open the photo edit dialogue</li> <li>Go to the People tab</li> <li>Click </li> </ol> <p></p> <p>You might undo this action before a reload.</p> <p></p>"},{"location":"user-guide/organize/people/#download-all-photos-of-a-person","title":"Download all Photos of a Person","text":"<ol> <li>Go to People</li> <li>Select a person</li> <li>Open context menu</li> <li>Click </li> </ol>"},{"location":"user-guide/organize/people/#create-albums-from-people","title":"Create Albums from People","text":"<ol> <li>Go to People</li> <li>Select a person</li> <li>Open context menu</li> <li>Click </li> <li>Select existing album or enter new album name</li> <li>Click add to album</li> </ol>"},{"location":"user-guide/organize/people/#search","title":"Search","text":"<p>You can find photos with people on it using the following queries:</p> <ul> <li><code>people</code>, <code>faces</code> or <code>faces:true</code> will result in all photos with people </li> <li><code>faces:false</code> will show all photos without people</li> <li><code>faces:3</code> will show all photos with at least 3 people on it</li> <li><code>person:\"John Doe\"</code> or <code>subject:\"John Doe\"</code> will show all photos of the person with the exact name John Doe</li> <li><code>people:\"John\"</code> or <code>subjects:\"John\"</code> will show all photos of people with a name like John e.g. John Doe and John Smith</li> </ul> <p>The person/subject and people/subjects filters can be used with &amp; and | (see search for more details). Filters may be combined.</p> <p><code>person:\"John Doe&amp;Jane Doe\" faces:3</code> will show all photos with John and Jane Doe and one other person.</p> <p></p>"},{"location":"user-guide/organize/people/#known-issues","title":"Known Issues","text":"<p>For all known issues, see Getting Started &gt; Known Issues &gt; Face Recognition.</p>"},{"location":"user-guide/organize/people/#legacy-hardware","title":"Legacy Hardware","text":"<p>Face recognition can be slow (or even crash) on old devices due to insufficient resources.</p> <p>Like most applications, PhotoPrism has certain requirements and our development process does not include testing on unsupported or unusual hardware.</p>"},{"location":"user-guide/organize/people/#asian-faces-and-children","title":"Asian Faces and Children","text":"<p>It is a known issue that children and Asian-looking faces cannot be recognized reliably. Detection without automatic recognition should not be affected by that.</p> <p>This is because the model we use was trained with North American images, which unfortunately do not include many Asians. The absence of children in the training data comes from the fact that parents do not usually share such images under a public license (and may not have the right to do so).</p> <p>We will continue to improve our models over time as our resources allow.</p>"},{"location":"user-guide/organize/people/#background-worker","title":"Background Worker","text":"<p>Face recognition was developed and tested under the assumption that the background worker runs every 15 minutes, unless the backend is busy with other tasks like indexing. It has not been tested with much longer intervals and is not designed for that.</p> <p>PhotoPrism's background worker groups new faces by similarity, compares faces with clusters, and optimizes existing clusters as needed. Without these routine tasks, the number of faces to be processed becomes too large. The first and next time the worker runs, it can then cause a heavy server load until all the faces, face clusters, and related pictures have been updated. The longer you wait, the more CPU is required and the longer it takes.</p> <p>An important reason for the worker to run independently of actual changes in the main instance is that some users change the database content directly or run additional instances, for example for indexing. It is a problem that can be solved, but it takes time. If we were to ignore this and don't run the worker at all times, it could lead to many additional support requests, further reducing the amount of time we can spend on development. </p> <p>The handling of changes in multiple instances will be improved over time so that the worker can be run less frequently in future releases.</p> <p>Upcoming Features</p> <ul> <li>manual tagging of faces</li> <li>importing of XMP face tags</li> <li>excluding people when browsing your pictures</li> <li>automatic backup of tagged people in YAML files</li> </ul>"},{"location":"user-guide/organize/places/","title":"Places","text":"<p>Places displays all photos with GPS information on a world map.</p> <p>You can zoom either by using  or  or by clicking on a photo or photo collector (the blue circles with a photo count inside).</p> <p> </p> <p>When using the search only photos matching the search term are shown on the map.</p> <p></p> <p>You can choose between different map styles like streets or topographic in the settings.</p> <p>To switch from a photos card view directly to the location of a photo on the world map click on the location.</p> <p> </p>"},{"location":"user-guide/organize/places/#enable-terrain-mode","title":"Enable Terrain Mode","text":"<p>Our \"Satellite\", \"Outdoor\" and \"Topography\" maps can also be viewed in 3D. </p> <p>To enable terrain mode click . To change the perspective, you can hold down the right mouse button and move it.</p> <p></p>"},{"location":"user-guide/organize/private/","title":"Hiding Private Photos","text":""},{"location":"user-guide/organize/private/#what-does-private-mean","title":"What does private mean?","text":"<p>Some of your photos might be private for personal reasons.  Our private functionality provides you with a solution to hide private photos or videos from some sections. This way you can let family and friends browse through your photos without risking that they see photos you do not want them to see.</p> <p>By default, photos marked as private will not appear in the following sections:</p> <ul> <li>Search</li> <li>Videos</li> <li>People</li> <li>Favorites</li> <li>Places</li> <li>Labels</li> <li>Autogenerated Albums (Moments, Calendar, States, Folders)</li> <li>Shared Albums</li> </ul> <p>Private photos will be displayed in the private section, in user generated albums and within the file browser.</p> <p>In case you want private content to appear everywhere you can configure that in Settings.</p>"},{"location":"user-guide/organize/private/#toggle-private-flag","title":"Toggle Private Flag","text":"Using Context MenuFrom List View <ol> <li>Go to Search</li> <li>Select photos/videos</li> <li>Click context menu</li> <li> <p>Click </p> <p></p> </li> </ol> <ol> <li>Go to Search</li> <li>Make sure you are in list view</li> <li> <p>Click  or  on the right</p> <p></p> </li> </ol>"},{"location":"user-guide/organize/review/","title":"Reviewing Non-Photographic and Low-Quality Images","text":"<p>When adding new photos a quality score from 1 to 5 is created automatically. Photos with a quality score lower than 3 do not appear in Search until you approve them (unless the quality filter was disabled in Settings)</p> <p>The quality score depends on the following:</p> <ul> <li>Known date and/or GPS coordinates</li> <li>At least 2 MP resolution if taken after 2012</li> <li>Photo not classified as info or screenshot</li> <li>Photo is favorite, was edited or approved</li> </ul> <p>In case you do not need the review mechanism you can turn it off in Settings</p>"},{"location":"user-guide/organize/review/#approve-photos","title":"Approve Photos","text":"Context MenuCard ViewEdit Dialog <ol> <li>Go to Review</li> <li>Select photos and open the context menu</li> <li> <p>Click </p> <p></p> </li> </ol> <ol> <li>Go to Review and make sure you are in card view</li> <li> <p>Click </p> <p></p> </li> </ol> <ol> <li>Open the photo's  edit dialog</li> <li> <p>Click approve</p> <p></p> </li> </ol> <p>The quality score is constantly updated.  If you add date or location information to a photo or like it, the quality score increases automatically.  In case the new score is equal or greater than 3 the photo is approved automatically.</p>"},{"location":"user-guide/organize/rotate/","title":"Rotate Image","text":"<p>PhotoPrism allows you to rotate JPG and PNG images.</p> <ol> <li>Open the photo edit dialog</li> <li>Go to the Files tab</li> <li>Click on the orientation icon and choose the correct orientation</li> </ol> <p></p> <p></p> <p>The updated orientation is stored in the metadata of your original file. Therefore, it is not possible to rotate images in read-only mode at this time.</p>"},{"location":"user-guide/organize/scans/","title":"Scans","text":"<p>You can mark scanned photos as scans within the photo edit dialog.</p> <p>We aim to automatically mark scans in the future.</p>"},{"location":"user-guide/organize/scans/#set-scan-flags","title":"Set Scan Flags","text":"<ol> <li>Open the photo edit dialog</li> <li>Click </li> <li>Set or unset the scan flag</li> </ol>"},{"location":"user-guide/organize/stacks/","title":"Stacks","text":"<p>Stacks are groups of files that have the same origin but differ in quality, format, size, or color. Go to Settings &gt; Library to change the stacking settings for your library.</p> <p>To see all images with a group of related files, open Stacks in the expanded Search navigation:</p> <p></p> <p>Note that Videos and Live Photos, which always have a preview image stacked with them, will not be displayed on the Stacks page.</p>"},{"location":"user-guide/organize/stacks/#for-what-reasons-can-files-be-stacked","title":"For what reasons can files be stacked?","text":"<ol> <li>Files that have exactly the same file and folder name are always stacked, for example <code>/2018/IMG_1234.jpg</code> and <code>/2018/IMG_1234.avi</code></li> <li>Files with related, sequential names like <code>/2018/IMG_1234 (2).jpg</code> and <code>/2018/IMG_1234 (3).jpg</code> may be stacked as well (optional)</li> <li>Pictures were taken at the same GPS position and second (optional)</li> <li>Image metadata contains the same Unique Image ID or XMP Instance ID (optional)</li> </ol> <p>You can change the behaviour for 2 - 4 in Settings &gt; Library.</p> <p>When you change the stacking settings, already stacked files will not be unstacked automatically.</p>"},{"location":"user-guide/organize/stacks/#browse-related-files","title":"Browse Related Files","text":"<ol> <li> <p>Click on </p> <p></p> </li> <li> <p>Use arrows to see all photos of the sequence</p> <p> </p> </li> </ol>"},{"location":"user-guide/organize/stacks/#change-primary-files","title":"Change Primary Files","text":"<p>The JPEG file marked as primary is used in our views. It is listed first in the files tab.</p> <p>To change the primary file:</p> <ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the file you want to set as primary</p> </li> <li> <p>Click primary</p> <p> </p> </li> </ol>"},{"location":"user-guide/organize/stacks/#unstack-files","title":"Unstack Files","text":"<ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the JPEG file that is not marked as primary</p> </li> <li> <p>Click unstack</p> </li> </ol> <p></p> <p>Now, both files appear in our views.</p> <p></p>"},{"location":"user-guide/organize/stacks/#delete-non-primary-files","title":"Delete Non-Primary Files","text":"<ol> <li> <p>Open the photos edit dialog</p> </li> <li> <p>Open Files tab</p> </li> <li> <p>Click  of the JPEG file that is not marked as primary</p> </li> <li> <p>Click delete</p> </li> <li> <p>Confirm</p> </li> </ol> <p> </p>"},{"location":"user-guide/organize/video/","title":"Browsing and Playing Videos","text":"<p>Navigate to Videos to browse all your videos. To play a video, click .</p> <p>Please note that not all video and audio formats can be played with every browser. For example, AAC - the default audio codec for MPEG-4 AVC / H.264 - is supported natively in Chrome, Safari, and Edge, while it is only optionally supported by the OS in Firefox and Opera.</p> <p></p> <p>In case FFmpeg is disabled or not installed, videos cannot be indexed because still images cannot be created. You should also have Exiftool enabled to extract metadata such as duration, resolution, and codec.</p>"},{"location":"user-guide/organize/video/#live-photos","title":"Live Photos","text":"<p>Short videos up to 3 seconds are categorized and displayed as Live Photos, regardless of your phone's make and model. You can recognize this by the  icon that appears in the upper left corner.</p> <p>Move the mouse cursor over the thumbnail to play the video without changing the view. You can limit a search to Live Photos by using the <code>type:live</code> filter or the keyword <code>live</code>.</p> <p></p>"},{"location":"user-guide/organize/video/#transcoding","title":"Transcoding","text":"<p>For maximum browser compatibility, PhotoPrism can transcode video codecs and containers supported by FFmpeg to MPEG-4 AVC, as well as extract still images for thumbnail creation:</p> <ul> <li>if FFmpeg is disabled or not installed, indexing and importing videos is not possible because still images cannot be created</li> <li>if Exiftool is disabled or not installed, indexing and importing videos is only partially possible because the video metadata cannot be extracted and thus the duration, resolution, and codec are unknown</li> <li>MPEG-4 AVC videos can be played natively by most modern browsers and are not re-encoded, even if they exceed the configured bitrate limit; to reduce the size of AVC videos, you can manually replace the original files with a smaller version or wait for a future release that offers this functionality</li> <li>OGV, VP8, VP9, AV1, WebM, and HEVC videos will be streamed directly if they are supported by your browser and do not exceed the configured bitrate limit</li> <li>other formats must always be transcoded</li> </ul> <p>If necessary, videos are transcoded on demand. This can cause unacceptable delays when large video files are played for the first time.</p> <p>In this case, you can run the following command in a terminal to pre-transcode all video files as needed:</p> <pre><code>docker compose exec photoprism photoprism convert\n</code></pre> <p>Our setup guide for advanced users explains how to configure hardware video transcoding.</p> <p>Make sure that there is enough disk space available on your server before transcoding all video files, as this may require a significant amount of extra storage.</p> <p>HEVC/H.265 video files can have a <code>.mp4</code> file extension too, which is often associated with AVC only. This is because MP4 is a container format, meaning that the actual video content may be compressed with H.264, H.265, or something else. The file extension doesn't really tell you anything other than that it's probably a video file.</p>"},{"location":"user-guide/search/","title":"Browsing and Searching Your Library","text":"<p>PhotoPrism offers many views and search filters so you can explore your photo collection in multiple dimensions instead of just scrolling through it day by day.</p> <p>This helps you rediscover long-forgotten shots, find specific pictures, or quickly create albums based on search results.</p>"},{"location":"user-guide/search/#views-and-filters","title":"Views and Filters","text":"<p>Using the main navigation you can visit the different sections of your photo library:</p>"},{"location":"user-guide/search/#search","title":"Search","text":"<p>Shows all photos and videos that are not in review or archived or private.</p> <p>In case the review, private or archive functions are turned off - Search displays those photos and videos as well.</p> <p></p>"},{"location":"user-guide/search/#monochrome","title":"Monochrome","text":"<p>Shows all monochrome photos and videos.</p>"},{"location":"user-guide/search/#panoramas","title":"Panoramas","text":"<p>Shows all panorama photos.</p>"},{"location":"user-guide/search/#stacks","title":"Stacks","text":"<p>Shows all stacked photos.</p>"},{"location":"user-guide/search/#scans","title":"Scans","text":"<p>Shows all scans.</p>"},{"location":"user-guide/search/#review","title":"Review","text":"<p>Shows all photos that are in review.</p>"},{"location":"user-guide/search/#archive","title":"Archive","text":"<p>Shows archived photos.</p>"},{"location":"user-guide/search/#albums","title":"Albums","text":"<p>Shows albums you created.</p> <p></p>"},{"location":"user-guide/search/#unsorted","title":"Unsorted","text":"<p>Shows all photos that are not part of an album.</p> <p></p>"},{"location":"user-guide/search/#videos","title":"Videos","text":"<p>Shows videos that are not in review or archived or private.</p>"},{"location":"user-guide/search/#live-photos","title":"Live Photos","text":"<p>Shows all short videos up to 3 seconds. </p>"},{"location":"user-guide/search/#people","title":"People","text":"<p>Shows photos and videos grouped by people on it.</p>"},{"location":"user-guide/search/#favorites","title":"Favorites","text":"<p>Shows all photos and videos you liked.</p>"},{"location":"user-guide/search/#moments","title":"Moments","text":"<p>Discover albums we automatically create for you.</p> <p></p>"},{"location":"user-guide/search/#calendar","title":"Calendar","text":"<p>Organizes your photos due to time taken.</p> <p></p>"},{"location":"user-guide/search/#places","title":"Places","text":"<p>Displays all photos and videos with location information on a worldmap.</p> <p></p>"},{"location":"user-guide/search/#states","title":"States","text":"<p>Shows your photos grouped by location.</p> <p></p>"},{"location":"user-guide/search/#labels","title":"Labels","text":"<p>Shows your photos and videos grouped by labels like cat, dog or beach.</p> <p></p>"},{"location":"user-guide/search/#folders","title":"Folders","text":"<p>Displays all folders of your originals directory.</p> <p></p>"},{"location":"user-guide/search/#private","title":"Private","text":"<p>Shows photos and videos marked as private.</p>"},{"location":"user-guide/search/#originals","title":"Originals","text":"<p>Hierarchical view of your originals directory.</p> <p></p> <p></p>"},{"location":"user-guide/search/filters/","title":"Using Search Filters","text":"<p>PhotoPrism's powerful search filters let you easily find specific photos and videos, for example:</p> <ul> <li>People on the photo</li> <li>Objects that are displayed on the photo</li> <li>The main color of the photo</li> <li>The filename or foldername of a photo</li> <li>Location where the photo has been taken</li> <li>Other metadata such as camera, lens, chroma...</li> </ul> <p>Just give it a try!</p> <p></p>"},{"location":"user-guide/search/filters/#introduction","title":"Introduction","text":"<p>The following filters can be set via dropdowns in the search toolbar:</p> <ul> <li>Country, Year, Month, Order, Camera, Color, Category.</li> </ul> <p>If you set multiple filters, only pictures that meet all filter criteria will be displayed in the search result. Filters can generally be combined unless they contradict each other.</p> <p></p> <p>In addition, these and many other filters can be entered into the toolbar search box as follows:</p> <pre><code>label:cat color:green type:live\n</code></pre> <p>A complete overview of the available search filters can be found below.</p> <p></p>"},{"location":"user-guide/search/filters/#and-search","title":"AND Search","text":"<p>To combine different filters use a space as separator:</p> <pre><code>mono:true review:false\n</code></pre> <p>The search result shows pictures that are monochrome and not in review.</p> <p>Additionally some filters can be combined with <code>&amp;</code> as follows:</p> <pre><code>keywords:buffalo&amp;water\n</code></pre> <p>or:</p> <pre><code>keywords:\"buffalo &amp; water\"\n</code></pre> <p>This query will show all photos that have the keywords water and buffalo.</p> <p>&amp; is supported by the following filters:</p> <ul> <li>albums, keywords, subject/person, subjects/people.</li> </ul> <p>The label filter does not support &amp;. You can use the keywords filter instead, as all labels are keywords as well.</p>"},{"location":"user-guide/search/filters/#or-search","title":"OR Search","text":"<p>An OR search is possible using <code>|</code>:</p> <pre><code>label:cat|dog\n</code></pre> <p>This will show all photos that have either the label cat or dog.</p> <p>The following filters work with |:</p> <ul> <li>albums, color, country, state, city, day, month, year, keywords, label, path, subject/person, subjects/people, title, type, name, filename, original, hash</li> </ul>"},{"location":"user-guide/search/filters/#wildcard","title":"Wildcard","text":"<p>The <code>*</code> character will act as a wildcard:</p> <pre><code>name:\"IMG_23*\"\n</code></pre> <p>This will show all photos which name start with <code>IMG_23</code>.</p> <pre><code>name:\"*_23*\"\n</code></pre> <p>This will show all photos which name contain <code>_23</code>, like <code>IMG_2356.MOV</code> , <code>2021_02_23.jpg</code>, etc.</p> <p>Wildcards can be combined with &amp; or |: <code>filename:\"*IMG123*|*_22F6FC19.jpg\"</code></p>"},{"location":"user-guide/search/filters/#filter-reference","title":"Filter Reference","text":"<p>This is a complete list of supported search filters with examples. Filters can generally be combined unless they contradict each other, e.g. results cannot be monochrome and have high color saturation at the same time.</p> Filter Type Examples Notes fmax decimal fmax:1.245 F-number (max) fmin decimal fmin:1.245 F-number (min) lat decimal lat:1.245 Latitude (GPS Position) lng decimal lng:1.245 Longitude (GPS Position) chroma number chroma:70 Chroma (0-100) diff number diff:-1 diff:2 Differential Perceptual Hash (000000-FFFFFF) dist number dist:5 Distance in km in combination with lat/lng quality number quality:0 quality:3 Quality Score (0-7) album string album:berlin Album UID or Name, supports * wildcards albums string albums:\"South Africa &amp; Birds\" Album Names, can be combined with &amp; and | camera string camera:canon Camera Make/Model Name category string category:\"name\" Location Category Name city string city:\"Berlin\" Name of City (Location), OR search with | color string color:\"red|blue\" Color Name (purple, magenta, pink, red, orange, gold, yellow, lime, green, teal, cyan, blue, brown, white, grey, black), OR search with | country string country:\"de|us\" Country Code, OR search with | day string day:3|13 Day of Month (1-31), OR search with | face string face:PN6QO5INYTUSAATOFL43LL2ABAV5ACZG Face ID, yes, no, new, or kind faces string faces:yes faces:3 Minimum number of Faces (yes = 1) filename string filename:\"2021/07/12345.jpg\" File Name with path and extension, OR search with | folder string folder:\"*/2020\" Path Name, OR search with |, supports * wildcards hash string hash:2fd4e1c67a2d SHA1 File Hash, OR search with | id string id:123e4567-e89b-... Finds pictures by Exif UID, XMP Document ID or Instance ID keywords string keywords:\"buffalo&amp;water\" Keywords, can be combined with &amp; and | label string label:cat|dog Label Name, OR search with | lens string lens:ef24 Lens Make/Model Name month string month:7|10 Month (1-12), OR search with | name string name:\"IMG_9831-112*\" File Name without path and extension, OR search with | original string original:\"IMG_9831-112*\" Original file name of imported files, OR search with | path string path:2020/Holiday Path Name, OR search with |, supports * wildcards people string people:\"Jane &amp; John\" Subject Names, can be combined with &amp; and | person string person:\"Jane Doe &amp; John Doe\" Subject Names, exact matches, can be combined with &amp; and | state string state:\"Baden-W\u00fcrttemberg\" Name of State (Location), OR search with | subject string subject:\"Jane Doe &amp; John Doe\" Alias for person subjects string subjects:\"Jane &amp; John\" Alias for people title string title:\"Lake*\" Title, OR search with | type string type:raw Media Type (image, video, raw, live, animated); OR search with | uid string uid:pqbcf5j446s0futy Limits results to the specified internal unique IDs year string year:1990|2003 Year Number, OR search with | animated switch animated:yes Finds animated GIFs archived switch archived:yes Finds archived pictures error switch error:yes Finds pictures with errors favorite switch favorite:yes Finds favorites only geo switch geo:yes Finds pictures with GPS location hidden switch hidden:yes Finds hidden pictures (broken or unsupported) landscape switch landscape:yes Finds pictures in landscape format live switch live:yes Finds Live Photos and short videos mono switch mono:yes Finds pictures with few or no colors panorama switch panorama:yes Finds pictures with an aspect ratio &gt; 1.9:1 photo switch photo:yes Finds only photos, no videos portrait switch portrait:yes Finds pictures in portrait format primary switch primary:yes Finds primary JPEG files only private switch private:yes Finds private pictures public switch public:yes Excludes private pictures raw switch raw:yes Finds pictures with RAW image file review switch review:yes Finds pictures in review scan switch scan:yes Finds scanned images and documents square switch square:yes Finds images with an aspect ratio of 1:1 stack switch stack:yes Finds pictures with more than one media file stackable switch stackable:yes Finds pictures that can be stacked with additional media files unsorted switch unsorted:yes Finds pictures not in an album unstacked switch unstacked:yes Finds pictures with a file that has been removed from a stack vector switch vector:yes Finds vector graphics only video switch video:yes Finds video files only after timestamp after:\"2022-01-30\" Finds pictures taken after this date before timestamp before:\"2022-01-30\" Finds pictures taken before this date <p>Why can't I play live photos or find stacks when I search for specific images?</p> <p>Our search API and user interface perform a file search. This is intentional since \"stacks\" can contain files of different types and properties, such as color.</p> <p>For example, there may be color and monochrome versions. Now, when you search for them or sort them by color, the user interface must display individual files. Otherwise, the results showing a color image/video when you filter by monochrome would make no sense.</p> <p>Likewise, if you search for <code>filename.mp4.*</code>, you will find only JPEGs without video, because the video file extension is <code>.mp4</code> without an extra dot at the end.</p> <p>We recommend using the <code>path:</code> and/or <code>name:</code> filters with wildcards if searching for individual files limits the search results too much. Most users will want to find all related files so that they can be displayed together, e.g. as live photos consisting of a video and an image.</p> <p>You can combine these filters with other filters such as <code>live</code> to ensure that the results include only pictures with a specific media type. Alternatively, you can use the <code>filename:</code> filter with a more permissive wildcard that excludes the file extension.</p>"},{"location":"user-guide/search/views/","title":"Search Result Views","text":"<p>PhotoPrism offers you three different views to browse your photos and videos. In addition you can choose between multiple light and dark themes.</p> Card ViewMosaic ViewList View <p>The card view displays important metadata like title, time and location next to the photos</p> <p></p> <p></p> <p>The mosaic view lets you enjoy your photos without distraction</p> <p></p> <p></p> <p>The list view provides you photos and metadata in a  well-arranged list</p> <p></p> <p></p> <p>To switch between views you can either use the filter in the filter bar or the view button (, , ) in the upper right corner.</p> <p>Additionally, you can open your photos/videos in fullscreen mode and start a slideshow ().</p> <p></p>"},{"location":"user-guide/settings/account/","title":"Account Settings","text":"<p>Since they are not needed, these settings are not available when running in public mode.</p> <p></p>"},{"location":"user-guide/settings/account/#change-password","title":"Change Password","text":"<ol> <li>Go to Settings</li> <li>Open Account tab</li> <li>Click Change Password</li> <li>Enter your current password</li> <li>Enter your new password twice</li> <li>Click Change</li> </ol>"},{"location":"user-guide/settings/account/#show-webdav-url","title":"Show WebDAV Url","text":"<ol> <li>Go to Settings</li> <li>Open Account tab</li> <li>Click Connect via WebDAV</li> </ol>"},{"location":"user-guide/settings/advanced/","title":"Advanced Settings","text":"<p>System config options such as the image quality can be changed  on the advanced settings page. You can also disable specific features and enable the debug or read-only mode.</p> <p>Since they are not safe to use without authentication, these settings are not available when running in public mode. Changing config options is still possible via configuration files and with command parameters.</p> <p>Changing advanced settings always requires a restart to take effect. Selecting a different thumbnail quality or size won't replace existing thumbnails. You can regenerate them using the  command-line interface.</p> <p></p> <p>All config options can be set in your <code>docker-compose.yml</code> or via command-line parameters as well. Manually changed values are saved in a config file. It is stored in the <code>storage/config</code> folder by default.</p>"},{"location":"user-guide/settings/advanced/#options","title":"Options","text":""},{"location":"user-guide/settings/advanced/#debug-logs","title":"Debug Logs","text":"<p>When enabled, debug logs are shown in Library&gt;Logs. Requires restart.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DEBUG</code>.</p>"},{"location":"user-guide/settings/advanced/#read-only-mode","title":"Read-only Mode","text":"<p>When enabled, importing, uploading and deleting files is not possible.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_READONLY</code>.</p>"},{"location":"user-guide/settings/advanced/#experimental-features","title":"Experimental Features","text":"<p>When enabled, your instance will be updated with experimental features.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_EXPERIMENTAL</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-backups","title":"Disable Backups","text":"<p>This option prevents creating the following <code>yml</code> backups:</p> <ul> <li>For photos in <code>storage/sidecar</code></li> <li>For albums, months, states and folders in <code>storage/albums</code></li> </ul> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_BACKUPS</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-webdav","title":"Disable WebDAV","text":"<p>This option prevents building WebDav connections. Requires restart for changes to be applied.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_WEBDAV</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-places","title":"Disable Places","text":"<p>When selected, geo-information (latitude, longitude) will still be read (and indexed) from your files metadata, however PhotoPrism will not use reverse lookup to determine place names using those coordinates as it normally would.</p> <p>The Places section will not be visible.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_PLACES</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-exiftool","title":"Disable ExifTool","text":"<p>This option prevents the creation of <code>json</code> files with Exif data in <code>storage/sidecar</code>. Note that you must have Exiftool enabled to extract video metadata such as duration, resolution, and codec.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_EXIFTOOL</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-tensorflow","title":"Disable TensorFlow","text":"<p>When selected, image classification / object detection (using TensorFlow) is disabled, so no labels are created for your files.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_TENSORFLOW</code>.</p>"},{"location":"user-guide/settings/advanced/#images","title":"Images","text":"<p>This section controls how JPEG preview and thumbnail images are rendered. These are high-quality, scaled-down versions of your originals.</p> <p>Thumbnails are necessary because web browsers are bad at resizing large images to fit the screen. Using full-resolution originals for slideshows and in search results would also consume a lot of browser memory and significantly reduce indexing performance.</p>"},{"location":"user-guide/settings/advanced/#downscaling-filter","title":"Downscaling Filter","text":"<p>This lets you select the algorithm used to resize your original images when creating thumbnails. A detailed description of the available filters can be found in the section below.</p> <p>For a good trade-off between quality and performance, we recommend choosing the lanczos filter. It may be a little slower in creating thumbnails, but produces very high quality images. In comparison, the less sophisticated cubic filter may be 30% faster.</p> <p>The corresponding config option is <code>PHOTOPRISM_THUMB_FILTER</code>.</p>"},{"location":"user-guide/settings/advanced/#dynamic-previews","title":"Dynamic Previews","text":"<p>Enable generating thumbnails on-the-fly as they're required (either for viewing or analysing with TensorFlow). This saves disk space, but is more processor-intensive and so not recommended when hosting on less powerful devices (such as Raspberry Pi).</p> <p>The corresponding config toggle is <code>PHOTOPRISM_THUMB_UNCACHED</code>.</p>"},{"location":"user-guide/settings/advanced/#jpeg-quality","title":"JPEG Quality","text":"<p>Choose a value above 90 to display your images in the best possible quality. Note that higher values  require more space in the storage folder for less compressed thumbnail files, which may also take longer to create.</p> <p>Lower quality thumbnails, on the other hand, are smaller, load faster on slow Internet connections,  and require less space in the storage folder and in the browser cache.</p> <ul> <li>Quality levels of 90% or higher are generally considered high quality</li> <li>80% to 90% is considered medium quality</li> <li>70% to 80% is considered low quality, as you might see with highly compressed content on social media </li> </ul> <p>Anything below 70% is generally of very low quality.</p> <p>Example: If a quality of 95 results in a thumbnail file size of 500kB, then reducing the quality  to 80 reduces the file size to about 100kB.</p> <p>The corresponding config option is <code>PHOTOPRISM_JPEG_QUALITY</code>.</p> <p>The actual impression depends on how much information an image contains. Empty areas and skies, for example, are easier to compress. Images with a lot of details suffer the most. For this reason, reducing the quality of thumbnails also negatively impacts face recognition and image classification results. Simply put, this means that the indexer sees fewer details.</p>"},{"location":"user-guide/settings/advanced/#dynamic-and-static-size-limits","title":"Dynamic and Static Size Limits","text":"<p>Dynamic Size Limit: During dynamic (on-demand) thumbnail generation, no thumbnails will be created above this size. The corresponding config option is <code>PHOTOPRISM_THUMB_SIZE_UNCACHED</code>.</p> <p>Static Size Limit: During initial indexing or import (as thumbnails are generated), no thumbnails will be created above this size. The corresponding config option is <code>PHOTOPRISM_THUMB_SIZE</code>.</p> <p>Reducing the Static Size Limit of thumbnails has a significant impact on face recognition  and image classification results. Simply put, it means that the indexer can no longer see properly.</p> <p>If the configured size limit is exceeded (for example, if users have a larger screen), a sufficiently large  thumbnail can't be created, and the photo viewer may be forced to display the original image instead. Downscaling images in browsers typically results in poor quality, and they may also be displayed in  the wrong orientation.</p> <p>The smallest configurable size is 720px for consumption by the indexer to perform color detection, face detection,  and image classification. Recreating them every time they are needed is too demanding for even the most powerful  servers. Unless you only have a few small images, it would render the app unusable.</p> <p>It is recommended that you set these limits high so that browsing pictures is as smooth as possible. However, if the amount of disk storage required is a serious problem, and you are willing to increase server load instead, it is possible to set the Static Size Limit to the minimum of 720px in combination with a higher Dynamic Size Limit. This allows the server to generate larger thumbnails on demand. It may also result in a noticeable delay  when viewing pictures in full-screen mode.</p> <p>To view original images, enable Dynamic Previews, and configure Dynamic Size Limit and Static Size Limit to a small value like <code>720</code>. When viewing images exceeding that limit, the original files will be displayed.</p>"},{"location":"user-guide/settings/advanced/#what-files-will-be-created-by-photoprism","title":"What files will be created by PhotoPrism?","text":"<p>The minimum size for static previews is 720px, so all images up to <code>720x720</code> will be rendered. Higher static limits will additionally generate previews only up to the defined limit.</p> <p>The files are generated in the <code>storage/cache/thumbnails</code> folder, with file paths dependent on the size and original file's hash, such as:</p> <p><code>storage/cache/thumbnails/1/a/3/1a30c1f...9_100x100_center.jpg</code></p> <p>The table below shows each generated size, with the PhotoPrism features using each.</p> Name Width Height Use colors 3 3 Color Detection tile_50 50 50 List Preview tile_100 100 100 Maps Preview tile_224 224 224 Mosaic Preview left_224 224 224 TensorFlow right_224 224 224 TensorFlow tile_500 500 500 Cards Preview fit_720 720 720 Mobile, TV fit_1280 1280 1024 Mobile, HD Ready TV fit_1920 1920 1200 Mobile, Full HD TV fit_2048 2048 2048 Tablets, Cinema 2K fit_2560 2560 1600 Quad HD, Retina Display fit_3840 3840 2400 Ultra HD fit_4096 4096 4096 Ultra HD, Retina 4K fit_7680 7680 4320 8K Ultra HD 2, Retina 6K"},{"location":"user-guide/settings/advanced/#downscaling-filters","title":"Downscaling Filters","text":""},{"location":"user-guide/settings/advanced/#linear","title":"Linear","text":"<p>Bilinear interpolation takes a weighted average of the four neighborhood pixels to calculate its final interpolated value. The result is a much smoother image than the original image. When all known pixel distances are equal, then the interpolated value is simply their sum divided by four. This technique performs interpolation in both directions, horizontal and vertical. This technique gives better result than nearest neighbor interpolation and take less computation time compared to bicubic interpolation.</p>"},{"location":"user-guide/settings/advanced/#cubic","title":"Cubic","text":"<p>Catmull-Rom is a local interpolating spline developed for computer graphics purposes. Its initial use was in design of curves and surfaces, and has recently been used in several applications. Catmull-Rom splines are a family of cubic interpolating splines formulated such that the tangent at each point is calculated using the previous and next point on the spline. The results are similar to ones produced by bicubic interpolation with regards to sharpness, but the Catmull-Rom reconstruction is clearly superior in smooth signal region.</p>"},{"location":"user-guide/settings/advanced/#lanczos","title":"Lanczos","text":"<p>The Lanczos interpolation function is a mathematical formula used to smoothly interpolate the value of a digital image between its samples. It maps each sample of the given image to a translated and scaled copy of the Lanczos kernel, which is a sinc function windowed by the central hump of a dilated sinc function. The sum of these translated and scaled kernels is then evaluated at the desired pixel. Lanczos interpolation has the best properties in terms of detail preservation and minimal generation of aliasing artifacts for geometric transformations not involving strong down sampling. However higher order Lanczos interpolation requires high computational time, which makes it unsuitable for most commercial software.</p>"},{"location":"user-guide/settings/advanced/#blackman","title":"Blackman","text":"<p>Blackman is a modification of Lanczos that has better control of ringing artifacts.</p>"},{"location":"user-guide/settings/advanced/#examples","title":"Examples","text":"<p>Original image:</p> <p></p> <p>The same image resized from 600x400px to 150x100px using different resampling filters. From faster (lower quality) to slower (higher quality):</p> Filter Resize result Nearest Neighbor Bilinear Sharp Bicubic Lanczos <p>Source: A Comparative Analysis of Image Interpolation Algorithms</p>"},{"location":"user-guide/settings/advanced/#raw-conversion","title":"RAW Conversion","text":"<p>Many photographers keep their originals in some sort of lossless RAW format instead of compressed JPEG, especially when shooting with a Digital SLR. Some mobile phones also support RAW or use HEIC/HEIF for a similar purpose. PhotoPrism aims at providing excellent support for all RAW formats, independent of camera brand and model. Please let us know when there is an issue with your specific device.</p> <p>Web browsers in general cannot display RAW image files. They need to be converted, which is what our import and convert commands do. You'll also find a checkbox for this step in our Web UI.</p> <p>In addition, PhotoPrism also supports TIFF, PNG, BMP and GIF files. Be aware that files in those formats often don't contain useful metadata and are typically used for screenshots, charts, graphs and icons only.</p> <p></p> <p>Generated sidecar files will be stored outside your originals folder by default, so that RAW to JPEG conversion also works in read-only mode.</p>"},{"location":"user-guide/settings/advanced/#jpeg-size-limit","title":"JPEG Size Limit","text":"<p>This sets the maximum size of the JPEG files created when converting original RAW images.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_JPEG_SIZE</code>.</p> <p>RawTherapee and \"heif-convert\" cannot limit the resolution of JPEG files when converting files from other formats such as RAW, DNG, HEIC or AVIF.</p>"},{"location":"user-guide/settings/advanced/#png-size-limit","title":"PNG Size Limit","text":"<p>This sets the maximum size of the PNG files created when converting original images.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_PNG_SIZE</code>.</p>"},{"location":"user-guide/settings/advanced/#use-presets","title":"Use Presets","text":"<p>Disables simultaneous conversion of RAW files to apply Darktable presets.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_RAW_PRESETS</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-darktable","title":"Disable Darktable","text":"<p>If this feature is disabled, Darktable will not be used for RAW conversion.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_DARKTABLE</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-rawtherapee","title":"Disable RawTherapee","text":"<p>If this feature is disabled, RawTherapee is not used for RAW conversion.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_RAWTHERAPEE</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-ffmpeg","title":"Disable FFmpeg","text":"<p>If this feature is disabled, FFmpeg is not used to transcode videos or extract still images for thumbnail creation, and indexing or importing video files is not possible.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_FFMPEG</code>.</p>"},{"location":"user-guide/settings/advanced/#disable-imagemagick","title":"Disable ImageMagick","text":"<p>If this feature is disabled, ImageMagick is not used for conversion.</p> <p>The corresponding config toggle is <code>PHOTOPRISM_DISABLE_IMAGEMAGICK</code>.</p>"},{"location":"user-guide/settings/general/","title":"General Settings","text":"<p>In the General settings tab, you can configure basic user interface settings as well as the maps in Places:</p> <p></p>"},{"location":"user-guide/settings/general/#user-interface","title":"User Interface","text":"<p>You can change the theme and language of the User interface.</p> <p>To make PhotoPrism suit your individual needs, the following sections and functionalities can be en- or disabled. Disabled sections do not appear in the main navigation.</p>"},{"location":"user-guide/settings/general/#upload","title":"Upload","text":"<p>When disabled, uploading files via upload is not possible.  This might be useful when you grant others access to your PhotoPrism but do not want them to upload photos.</p>"},{"location":"user-guide/settings/general/#download","title":"Download","text":"<p>When disabled, no files can be downloaded.</p>"},{"location":"user-guide/settings/general/#share","title":"Share","text":"<p>When disabled, album sharing and upload to remote services like ownCloud is not possible.</p>"},{"location":"user-guide/settings/general/#people","title":"People","text":"<p>When disabled, the people section is hidden. To disable face detection while indexing, you may set <code>PHOTOPRISM_DISABLE_FACES</code> and/or <code>PHOTOPRISM_DISABLE_TENSORFLOW</code> to <code>\"true\"</code> in your config.</p>"},{"location":"user-guide/settings/general/#hide-private","title":"Hide Private","text":"<p>Excludes content marked as private from search results, shared albums, labels and places.</p>"},{"location":"user-guide/settings/general/#archive","title":"Archive","text":"<p>When disabled, there is no Archive. Photos that have been archived beforehand will appear again in search results.</p>"},{"location":"user-guide/settings/general/#edit","title":"Edit","text":"<p>When disabled, it is not possible to edit photo information.</p>"},{"location":"user-guide/settings/general/#delete","title":"Delete","text":"<p>When disabled, permanent deletion of files from the archive is not possible.</p>"},{"location":"user-guide/settings/general/#originals","title":"Originals","text":"<p>When disabled, there is no Originals section.</p>"},{"location":"user-guide/settings/general/#moments","title":"Moments","text":"<p>When disabled, there is no Moments section.</p>"},{"location":"user-guide/settings/general/#labels","title":"Labels","text":"<p>When disabled, there is no Labels section and you cannot add or edit labels.</p>"},{"location":"user-guide/settings/general/#library","title":"Library","text":"<p>When disabled, there is no Library section.</p>"},{"location":"user-guide/settings/general/#import","title":"Import","text":"<p>When disabled, there is no possibility to import photos. You need to use index instead to add new photos.</p>"},{"location":"user-guide/settings/general/#logs","title":"Logs","text":"<p>When disabled, server logs are not shown.</p>"},{"location":"user-guide/settings/general/#places","title":"Places","text":"<p>When disabled, there is no Places section.</p>"},{"location":"user-guide/settings/general/#places_1","title":"Places","text":"<p>At the bottom of the General settings tab, you may choose your preferred map style and animation length for Places. PhotoPrism includes four high-resolution world maps to see where you've been, and for rediscovering long-forgotten shots.</p> <p>To enhance your photos with location data such as state, city and category, we've also launched our own geo-information service based on OpenStreetMap. A future release will additionally provide public events' data, so that albums of popular music festivals, or sports gatherings, can be created automatically.</p>"},{"location":"user-guide/settings/general/#downloads","title":"Downloads","text":"<p>Note that your choice will not affect ZIP archives when you download complete albums. However, we may add settings for this in a future release.</p>"},{"location":"user-guide/settings/general/#originals_1","title":"Originals","text":"<p>Only the files in the originals folder will be downloaded, but not any files that were automatically created in the sidecar folder. This is the recommended default.</p>"},{"location":"user-guide/settings/general/#raw","title":"RAW","text":"<p>Download RAW image files.</p>"},{"location":"user-guide/settings/general/#sidecar","title":"Sidecar","text":"<p>Download sidecar files as used for XMP metadata. This is generally not recommended except for some professional workflows.</p>"},{"location":"user-guide/settings/library/","title":"Library Settings","text":""},{"location":"user-guide/settings/library/#index","title":"Index","text":""},{"location":"user-guide/settings/library/#estimates","title":"Estimates","text":"<p>Estimates the location of pictures taken without GPS information by extrapolating it from the location of other pictures taken on the same day. </p> <p>Be aware that, if you have pictures from unrelated events at different locations, the GPS coordinates of pictures from one event will be applied/extrapolated to pictures of the other event that lack coordinates (even if these are in different folders).</p>"},{"location":"user-guide/settings/library/#quality-filter","title":"Quality Filter","text":"<p>Requires a review of non-photographic and low-quality images before they appear in search results.</p>"},{"location":"user-guide/settings/library/#convert-to-jpeg","title":"Convert to JPEG","text":"<p>Automatically creates JPEG or PNG preview images for other file types so they can be displayed in search results and in the full-screen viewer.</p> <p>Convert to JPEG should be enabled, otherwise PhotoPrism cannot index file types other than JPEG or PNG unless a preview sidecar file with the same filename prefix already exists. See Stacks to learn more about naming conventions of sidecar files.</p>"},{"location":"user-guide/settings/library/#stacks","title":"Stacks","text":"<p>Stacks are groups of files that have the same origin but differ in quality, format, size, or color. Go to Photos &gt; Stacks to see all the picture stacks in your library.</p> <p>PhotoPrism offers three methods for stacking files:</p> <ul> <li> Place &amp; Time stacks pictures taken at same GPS position and second</li> <li> Unique ID, matches the Unique Image ID (Exif), Document ID, or Instance ID (XMP)</li> <li> Sequential Name, for example <code>/2018/IMG_1234 (2).jpg</code> and <code>/2018/IMG_1234 (3).jpg</code></li> </ul> <p>Files that have exactly the same file and folder name are always stacked, for example <code>/2018/IMG_1234.jpg</code> and <code>/2018/IMG_1234.avi</code>.</p> <p>When you change the stacking settings, already stacked files will not be unstacked automatically.</p>"},{"location":"user-guide/settings/sync/","title":"Services","text":"<p>You can connect your PhotoPrism instance to other services with WebDAV support, such as other PhotoPrism instances, Nextcloud or ownCloud.</p> <p>This might be useful if you want to share or synchronize files between multiple services.</p> <p>Since they are not safe to use without authentication, these settings are not available when running in public mode.</p> <p>PhotoPrism can also serve/share files via WebDAV to be browsed on macOS or Windows. See instructions.</p>"},{"location":"user-guide/settings/sync/#add-service","title":"Add Service","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click Connect </li> <li>Fill in your service url, username and password</li> <li>Click connect </li> <li>Now the other service is connected with PhotoPrism</li> </ol>"},{"location":"user-guide/settings/sync/#edit-connection-details","title":"Edit Connection Details","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click </li> <li>Edit account details and click Save</li> </ol>"},{"location":"user-guide/settings/sync/#edit-upload-settings","title":"Edit Upload Settings","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click into the upload cell of your service</li> </ol> <p> 4. Select the folder to which photos should be uploaded and click save</p> <p></p> <p>You can now share albums or files with this service.</p> <p>Due to problems with some Nextcloud settings it might be that uploading to Nextcloud results in 0 byte files. You find information on how to solve it here.</p>"},{"location":"user-guide/settings/sync/#edit-sync-settings","title":"Edit Sync Settings","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click into the sync cell of your service    </li> <li>Enable synchronization in the upper right corner</li> <li>Choose a folder from your service</li> <li>Choose a sync interval</li> <li>Select the options that are suitable for you and click Save</li> </ol>"},{"location":"user-guide/settings/sync/#remote-sync-options","title":"Remote Sync Options","text":"<ul> <li>Download remote files will download all files from the selected folder of the other service that do not yet exist in PhotoPrism</li> <li>Upload local files will upload all files (including private or archived ones) from PhotoPrism to your service that do not yet exist there</li> <li>Preserve filenames will keep filenames without renaming them</li> <li>Sync raw and video files will upload/download raw and video files alongside with JPEGS</li> </ul>"},{"location":"user-guide/share/","title":"Sharing Albums via Link","text":"<p>Create sharing links to share albums, moments, calendar months, states or folders with your friends.</p> <p>Your friends are able to view and download photos from shared albums. Photos marked as private won't show up.</p> <p></p> <p>When link visitors click on the location of a photo, they can view the photos of the shared album in the map view</p> <p></p> <p>Clicking  allows link visitors to end their session.</p> <p>Support for optional password protection of sharing links as well as other enhancements are planned.</p>"},{"location":"user-guide/share/#create-sharing-link","title":"Create Sharing Link","text":"Using Context MenuVia Toolbar <ol> <li>Go to Albums / Moments / Calendar / States / Folders</li> <li>Select the album you want to share</li> <li>Open the context menu</li> <li>Click </li> </ol> <ol> <li>Go to Albums / Moments / Calendar / States / Folders</li> <li>Open the album by clicking on it</li> <li>Click </li> </ol> <p>Then</p> <ol> <li>Click  to open the link details</li> <li>Set a secret and expiry date</li> <li> <p>Click save</p> <p></p> </li> <li> <p>Copy the link by clicking on it</p> <p></p> </li> <li> <p>Share it with your friends</p> </li> </ol> <p>Share multiple albums with one link</p> <p>You can share multiple albums using the same link by using the same secret.</p> <p>You can create additional links with different secrets and expiry dates by clicking .</p>"},{"location":"user-guide/share/#delete-sharing-link","title":"Delete Sharing Link","text":"<ol> <li>Go to Albums</li> <li> <p>Click  on the album cover</p> <p></p> </li> <li> <p>Click </p> </li> <li> <p>Click </p> <p></p> </li> </ol>"},{"location":"user-guide/share/services-share/","title":"Share with other Apps","text":"<p>In settings you can connect your PhotoPrism instance to other services with WebDAV support, such as other PhotoPrism instances, Nextcloud or ownCloud.</p>"},{"location":"user-guide/share/services-share/#share-files-with-other-apps","title":"Share Files with other Apps","text":"<ol> <li>Go to Search</li> <li>Select photos you want to upload</li> <li>Open the context menu</li> <li>Click  </li> <li>Select your account and click upload</li> </ol> <p>Due to problems with some Nextcloud settings it might be that uploading to Nextcloud results in 0 byte files. You find information on how to solve it here.</p>"},{"location":"user-guide/share/services-share/#share-albums-with-other-apps","title":"Share Albums with other Apps","text":"<ol> <li>Go to Albums / Moments / Calendar / States / Folders</li> <li>Select the album you want to share</li> <li>Open the context menu</li> <li>Click </li> <li>Click WebDAV Upload </li> <li>Select your account and click upload</li> </ol>"},{"location":"user-guide/sync/dropbox/","title":"Syncing with Dropbox","text":"<p>It's possible to use Dropbox to store your photos, while viewing and managing them through PhotoPrism.</p> <ol> <li>Set up a Dropbox account.</li> <li>Install the Dropbox desktop client.</li> <li>Sync your Dropbox to a local directory.</li> <li>If using Docker, configure your <code>docker-compose.yml</code> with;     <pre><code>volumes:\n  - \"~/Dropbox/Photos:/photoprism/originals\"\n</code></pre></li> <li>Follow the PhotoPrism getting started guide as normal.</li> </ol>"},{"location":"user-guide/sync/dropbox/#auto-upload-from-mobile","title":"Auto-upload from Mobile","text":"<p>The Dropbox mobile apps also have a 'Camera Upload' feature which syncs photos to Dropbox, and then to any machine with Dropbox installed.</p> <p>To auto-import uploaded files into PhotoPrism;</p> <ol> <li>Install the Dropbox iOS or Android app.</li> <li>Enable 'Camera Uploads' in the Dropbox app's settings.</li> <li>Install the Dropbox desktop client on your server or a network-accessible machine</li> <li>Configure the <code>Camera Uploads</code> folder as your <code>import</code> directory for PhotoPrism.     In your <code>docker-compose.yml</code> file, this is;     <pre><code>volumes:\n  - \"~/Dropbox/Camera Uploads:/photoprism/import\"\n</code></pre></li> <li>Optional: Enable 'delete on import' in PhotoPrism's settings to delete imported files from Dropbox. This saves Dropbox space, allowing you to remain within the 2 GB free tier.</li> </ol> <p>The Dropbox mobile app needs to be opened periodically or it tends to fail to identify and sync new photos.</p>"},{"location":"user-guide/sync/dropbox/#smart-selective-sync","title":"Smart / Selective Sync","text":"<p>A useful (although paid) feature is Dropbox Smart Sync (with optional auto-evict) which will download the files from Dropbox's servers only when you (or PhotoPrism) accesses them (such as during initial indexing, or when downloading an original file via the PhotoPrism interface).</p> <p>This can save space on your server by automically offloading the originals unless/until they're viewed.</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"user-guide/sync/mobile-devices/","title":"Syncing with Mobile Devices","text":"<p>To sync photos and videos on your phone with PhotoPrism, you can use any app that supports WebDAV.</p> <p>You can disable WebDAV in the advanced settings. Since it requires write permissions and authentication, the built-in WebDAV server is automatically disabled when running in read-only or public mode.</p>"},{"location":"user-guide/sync/mobile-devices/#photosync","title":"PhotoSync","text":"<p>We recommend PhotoSync which is available for Android and iOS.</p>"},{"location":"user-guide/sync/mobile-devices/#set-photoprism-or-webdav-as-target","title":"Set PhotoPrism or WebDAV as Target","text":"<ol> <li>Open PhotoSync and click </li> <li>Click Configure</li> <li> <p>Select PhotoPrism as target</p> <p> </p> </li> <li> <p>Enter your settings</p> <p>Server: Your server url, e.g. \"example.com\".</p> <p>Port: Your port. If you are using HTTPS the port is 443.</p> <p>Login: Your username, e.g. \"admin\".</p> <p>Password: Your admin password.</p> <p>Directory: /import/ or /originals/ depending on your preferred ingestion method.</p> <p>Use SSL: Should be enabled.</p> <p>PikaPods users can find more information here. </p> <p></p> </li> <li> <p>Click Done</p> </li> <li> <p>You may adapt transfer details to match your preferences</p> <p> </p> </li> </ol>"},{"location":"user-guide/sync/mobile-devices/#set-up-automatic-sync","title":"Set Up Automatic Sync","text":"<ol> <li>Open PhotoSync and click </li> <li> <p>Click Autotransfer</p> <p></p> </li> <li> <p>Click Add new trigger and choose one or more trigger</p> <p></p> </li> <li> <p>Choose PhotoPrism as target</p> </li> <li> <p>Click Done</p> <p></p> </li> </ol> <p>Because PhotoSync uses WebDAV to send files, PhotoPrism automatically starts importing/indexing when it receives new files.</p>"},{"location":"user-guide/sync/mobile-devices/#other-apps","title":"Other Apps","text":"<p>As long as you run PhotoPrism on a device with Windows file sharing (on Linux, for example, via Samba), you can use this free open-source Android app:</p> <p>SMBSync2 - Github | SMBSync2 - Google Play</p>"},{"location":"user-guide/sync/services-sync/","title":"Sync files with other Apps","text":"<p>In settings you can connect your PhotoPrism instance to other services with WebDAV support, such as other PhotoPrism instances, Nextcloud or ownCloud.</p> <p>When syncing, your files are uploaded or downloaded to/from another service, so your files are duplicated.</p> <p>If you want PhotoPrism to read from the same folder as another service, without making copies, you can simply mount this folder as PhotoPrism's originals directory.</p>"},{"location":"user-guide/sync/services-sync/#automatically-uploaddownload-files-tofrom-another-app","title":"Automatically Upload/Download Files to/from another App","text":"<ol> <li>Go to Settings</li> <li>Open Services tab</li> <li>Click into the sync cell of your service    </li> <li>Enable synchronization in the upper right corner</li> <li>Choose a folder from your service</li> <li>Choose a sync interval</li> <li>Select the options that are suitable for you and click Save</li> </ol>"},{"location":"user-guide/sync/services-sync/#remote-sync-options","title":"Remote Sync Options","text":"<ul> <li>Download remote files will download all files from the selected folder of the other service that do not yet exist in PhotoPrism</li> <li>Upload local files will upload all files (including private or archived ones) from PhotoPrism to your service that do not yet exist there</li> <li>Preserve filenames will keep filenames without renaming them</li> <li>Sync raw and video files will upload/download raw and video files alongside with JPEGS</li> </ul>"},{"location":"user-guide/sync/webdav/","title":"Connecting via WebDAV","text":"<p>WebDAV-compatible apps and clients such as PhotoSync, Microsoft's Windows Explorer, and Apple's Finder can connect directly to PhotoPrism.</p> <p>This mounts the originals and/or import folder as a network drive, allowing you to open, edit, and delete files from a remote device as if they were local.</p> <p>After files have been transferred, you can index or import them as usual. By default, indexing and importing start automatically after a safety delay when files have been uploaded using WebDAV.</p> <p>You can disable WebDAV in the advanced settings. Since it requires authentication, the built-in WebDAV server is automatically disabled when running in public mode.</p> <p>It is also possible to sync files with external WebDAV servers such as ownCloud or other PhotoPrism instances.</p>"},{"location":"user-guide/sync/webdav/#server-url","title":"Server URL","text":"<p>The originals folder URL for a server exposed to the public Internet is:</p> <p><pre><code>https://admin@example.com/originals/\n</code></pre>  or</p> <pre><code>\\\\example.com@SSL\\originals\\\n</code></pre> <p>for Windows.</p> <p>Please replace example.com with your actual domain.</p> <p>The slash at the end is important and cannot be omitted.</p> <p>You can find your server url on the account page in settings.</p> <p>When connecting, you'll have to authenticate using your regular password. It will also change when you update it in Settings. The username is <code>admin</code>.</p> <p>You can also connect to the import folder by replacing <code>originals/</code> with <code>import/</code> in the URL.</p> <p>For users, who are running PhotoPrism locally on the default port 2342, the originals folder URL is:</p> <pre><code>http://admin@localhost:2342/originals/\n</code></pre> <p>Never use WebDAV without HTTPS outside your local, private network as your password would be transmitted, in clear text, over the Internet. Backup tools and file sync apps  like FolderSync may refuse to connect as well.</p>"},{"location":"user-guide/sync/webdav/#connect-to-a-webdav-server","title":"Connect to a WebDAV Server","text":"macOSWindows <ol> <li>In the Finder on your Mac, choose Go &gt; Connect to Server</li> <li>Enter the URL as shown above in the Server Address field</li> <li>Click Connect</li> </ol> <p>If you cannot connect to your instance via WebDAV using these instructions:</p> <ul> <li> You do not have sufficient user rights (try as admin)</li> <li> You are experiencing a general authentication problem</li> <li> Your instance or reverse proxy uses an invalid HTTPS certificate</li> <li> You are trying to connect to the wrong network or server</li> </ul> <ol> <li>Open Windows File Explorer</li> <li>Right click This PC</li> <li> <p>From the dropdown, select Map network drive...</p> <p></p> </li> <li> <p>Enter the drive letter and folder you want to map your WebDAV connection to</p> </li> <li>Check the boxes Reconnect at sign-in and Connect using different credentials</li> <li> <p>Click the Connect to a Web site that you can use to store your documents and pictures link</p> <p></p> </li> <li> <p>Click Next</p> <p></p> </li> <li> <p>Click Choose a custom network location and then click Next</p> <p> </p> </li> <li> <p>In the Internet or network address field, enter the URL as shown above and click Next</p> <p></p> </li> <li> <p>Enter your username and password and click Ok</p> <p></p> </li> <li> <p>Enter a name for the network location and click Next</p> <p></p> </li> <li> <p>Click Finish</p> <p></p> </li> </ol> <p>The originals folder appears as a mapped drive in Windows Explorer, and you can immediately add,  edit, or delete files and directories using the Windows File Explorer.</p> <p></p> <p>If you cannot connect to your instance via WebDAV using these instructions:</p> <ul> <li> You may need to change the basic authentication level in the registry</li> <li> You do not have sufficient user rights (try as admin)</li> <li> You are experiencing a general authentication problem</li> <li> Your instance or reverse proxy uses an invalid HTTPS certificate</li> <li> You are trying to connect to the wrong network or server</li> </ul>"},{"location":"user-guide/use-cases/apple/","title":"Migrate from Apple Photos","text":""},{"location":"user-guide/use-cases/apple/#transfer-files","title":"Transfer Files","text":"<ol> <li>Select the files or albums you want to export</li> <li>Click File &gt; Export &gt; Export Unmodified Original For Photos</li> <li>Select Export IPTC as XMP</li> <li>Click Export</li> <li>Move the exported files/folders to your originals or import diectory and start indexing or importing</li> </ol>"},{"location":"user-guide/use-cases/apple/#metadata","title":"Metadata","text":"<p>Apple saves the following information in it's XMP files:</p> <ul> <li>Title</li> <li>Description</li> <li>TakenAt Date</li> <li>Keywords (include people)</li> <li>GPS information</li> </ul> <p>The following metadata is read by PhotoPrism from the exported XMP files for each photo during indexing:</p> <ul> <li>Title</li> <li>Description</li> <li>TakenAt Date</li> <li>Keywords</li> </ul> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"user-guide/use-cases/flickr/","title":"Migrate from Flickr","text":""},{"location":"user-guide/use-cases/flickr/#transfer-files","title":"Transfer Files","text":"<ol> <li>Go to https://www.flickr.com/account</li> <li>Request your Flickr data</li> <li>Depending on the amount of photos it can take a few days for your data to be exported</li> <li>Download your data and add it to your originals directory (including json files)</li> <li>Start indexing</li> </ol> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"user-guide/use-cases/google/","title":"Migrate from Google Photos","text":""},{"location":"user-guide/use-cases/google/#transfer-files","title":"Transfer Files","text":"<ol> <li>Go to Google Takeout</li> <li>Click <code>Deselect all</code> then check only <code>Google Photos</code>.</li> <li>Trigger the export of your Google Photos Data.</li> <li>Depending on the number of photos, it can take a few days for your data to be exported</li> <li>Download your data and extract all archives into to your originals or import folder<ul> <li>the folder should include the photos themselves, alongside json files for each of the photos</li> </ul> </li> <li>Start indexing or importing</li> </ol>"},{"location":"user-guide/use-cases/google/#metadata","title":"Metadata","text":"<p>The following metadata is read by PhotoPrism from each photo's JSON file</p> <ul> <li>Title</li> <li>Description</li> <li>Geolocation Info (lat/long)</li> <li>Date/Time Taken</li> <li>Date/Time Created</li> <li>Date/Time Updated</li> </ul>"},{"location":"user-guide/use-cases/google/#transfer-albums","title":"Transfer Albums","text":"<p>Google Photos albums won't be automatically imported yet as we're trying to find a way to deal with  auto-generated albums users may not want to import.</p> <p>The community has created a bash script to import albums from a Google Takeout. For more information and support, see the project page on Github:</p> <p>inthreedee/photoprism-transfer-album</p> <p>Help improve these docs! You can contribute by clicking  to send a pull request with your changes.</p>"},{"location":"user-guide/users/","title":"Managing User Accounts","text":"<p>PhotoPrism\u00ae Plus includes a web user interface for account and session management, in addition to the command-line interface available in all editions.</p> <p>You can add, edit and delete user accounts by navigating to Settings &gt; Users as an Admin:</p> <p></p>"},{"location":"user-guide/users/#adding-a-new-user","title":"Adding a New User","text":""},{"location":"user-guide/users/#editing-user-details","title":"Editing User Details","text":""},{"location":"user-guide/users/#changing-passwords","title":"Changing Passwords","text":"<p>Super admins can reset a user's password, while regular admins can change passwords only if they know the current password.</p> <p></p>"},{"location":"user-guide/users/#deleting-a-user","title":"Deleting a User","text":""},{"location":"user-guide/users/cli/","title":"User Management Commands","text":""},{"location":"user-guide/users/cli/#managing-user-accounts","title":"Managing User Accounts","text":"<p>As an alternative to the web user interface, you can also add, view, modify, and delete user accounts by running the following commands in a terminal:</p> CLI Command Description <code>photoprism users ls [search]</code> Searches existing user accounts <code>photoprism users legacy [search]</code> Searches legacy user accounts <code>photoprism users add [options] [username]</code> Adds a new user account <code>photoprism users show [username]</code> Displays user account information <code>photoprism users mod [options] [username]</code> Modifies an existing user account <code>photoprism users rm [username]</code> Removes a user account <code>photoprism users reset</code> Removes all accounts and resets the database"},{"location":"user-guide/users/cli/#command-options","title":"Command Options","text":"<p>The <code>add</code> and <code>mod</code> commands support these flags to set or change account properties:</p> Command Flag Description <code>--name NAME</code>, <code>-n NAME</code> full NAME for display in the interface <code>--email EMAIL</code>, <code>-m EMAIL</code> unique EMAIL address of the user <code>--password PASSWORD</code>, <code>-p PASSWORD</code> PASSWORD for authentication <code>--role value</code>, <code>-r value</code> admin, user, viewer or guest (default: \"admin\") <code>--superadmin</code>, <code>-s</code> make user super admin with full access <code>--no-login</code>, <code>-l</code> disable login on the web interface <code>--webdav</code>, <code>-w</code> allow to sync files via WebDAV <code>--upload-path value</code>, <code>-u value</code> upload files to this sub-folder <p>For example, you could do the following to add a new admin with the username \"bob\" and the password \"mysecret\":</p> <pre><code>docker compose exec photoprism photoprism users add -p mysecret -n \"Bob\" bob\n</code></pre> <p>Additional account roles like user, viewer, and guest are currently only available with a membership to support development and maintenance.</p> <p>Note that our guides now use the new <code>docker compose</code> command by default. If your server does not yet support it, the old <code>docker-compose</code> command will still work.</p>"},{"location":"user-guide/users/cli/#viewing-account-details","title":"Viewing Account Details","text":"<p>To see all account properties of a particular user, use the <code>show</code> subcommand:</p> <pre><code>docker compose exec photoprism photoprism users show bob\n</code></pre>"},{"location":"user-guide/users/cli/#searching-user-accounts","title":"Searching User Accounts","text":"<p>To list all existing accounts, you can run the following:</p> <pre><code>docker compose exec photoprism photoprism users ls\n</code></pre> <p>This command can also filter the result if you provide a search term as argument:</p> <pre><code>docker compose exec photoprism photoprism users ls bob\n</code></pre> <p>To display a description and the available options for a command, use the <code>--help</code> flag:</p> <pre><code>docker compose exec photoprism photoprism users ls --help\n</code></pre>"},{"location":"user-guide/users/cli/#viewing-login-attempts","title":"Viewing Login Attempts","text":"<p>For security reasons, authentication logs are not visible on the regular web user interface and can only be viewed in the application service logs or searched in a terminal using the the following CLI command:</p> <pre><code>photoprism logins ls [search]\n</code></pre>"},{"location":"user-guide/users/cli/#command-options_1","title":"Command Options","text":"<p>You can combine it with these flags to change the output format and the maximum number of search results:</p> Command Flag Description <code>--md, -m</code> format as machine-readable Markdown <code>--csv, -c</code> export as semicolon separated values <code>--tsv, -t</code> export as tab separated values <code>-n LIMIT</code> LIMIT number of results (default: 100)"},{"location":"user-guide/users/cli/#example-report","title":"Example Report","text":"Client IP User Name Realm Status Last Login Failed At 172.19.0.1 user api OK 2023-02-03 07:17:46 172.19.0.1 viewer api OK 2023-02-03 07:16:55 172.19.0.1 admin api OK 2023-02-03 06:55:06 <p>Run <code>photoprism logins clear</code> to clear all recorded incidents and reset the database to a clean state.</p>"},{"location":"user-guide/users/cli/#session-monitoring","title":"Session Monitoring","text":"<p>You can use the following terminal commands to find, examine and, if necessary, delete browser sessions:</p> CLI Command Description <code>photoprism sess ls [search]</code> Finds and displays sessions <code>photoprism sess show [id]</code> Shows detailed session information <code>photoprism sess rm [id]</code> Deletes the specified session <code>photoprism sess clear</code> Removes all sessions"},{"location":"user-guide/users/libraries/","title":"Multiple Libraries","text":"<p>PhotoPrism\u00ae Plus includes advanced multi-user functionality and additional account roles. These roles are intended for situations where you want other people to have access to your library, such as giving family members access to your pictures without granting write permissions or exposing private content.</p> <p>It is recommended to set up additional instances if you have multiple users in a family, so that everyone can manage their own files independently. This way you can avoid problems with conflicting library settings, file permissions, and dealing with duplicates.</p> <p>In future versions, users will be able to share albums and other content in a decentralized way, regardless of where their library is hosted. We are also working on a dedicated web interface for managing multiple libraries and user accounts, which will be made available as a separate tool.</p> <p>Our ultimate goal is to make personal sharing compatible with other apps like Pixelfed and Mastodon.</p>"},{"location":"user-guide/users/roles/","title":"Roles and Permissions","text":"Role Search Library View &amp; Download Upload WebDAV Manage admin optional user optional viewer except private except private guest shared visitor shared"},{"location":"user-guide/users/roles/#admin","title":"Admin","text":"<p>Admins have unrestricted access to all pictures, albums, and settings.</p> <p>Regular Admins can lose their privileges due to an intentional or accidental role change. However, accounts with the optional \"superadmin\" status (can be set with the <code>-s</code> flag) retain their admin privileges even if they are assigned a non-admin or invalid role. This is to prevent them from locking themselves out.</p> <p>When Super Admins change settings such as the language or theme, these automatically become the default settings for other users, unless they have explicitly made a different choice. In addition, global feature flags can only be changed by Super Admins.</p> <p>Additional account roles like user, viewer, and guest are currently only available with a membership to support development and maintenance.</p>"},{"location":"user-guide/users/roles/#user","title":"User","text":"<p>Users have full access to the library and can view, edit, and delete all pictures and albums. Unlike Admins, Users cannot view or change the Library and Advanced Settings, only personal  preferences such as theme, language, and password. In addition, their WebDAV access can be disabled. Future releases may include more ways to customize user privileges, e.g. with individual account attributes.</p>"},{"location":"user-guide/users/roles/#viewer","title":"Viewer","text":"<p>Viewers are similar to regular Users, except that they do not have write access to the library and cannot see content that has been archived or marked private. They also cannot upload/import files or trigger indexing. Like all registered users, Viewers can change and save personal preferences such as theme, language, and password.</p>"},{"location":"user-guide/users/roles/#guest","title":"Guest","text":"<p>Guests have read-only access to view and download the resources that other users have shared with them. They can also change personal settings such as theme, language, and password.</p>"},{"location":"user-guide/users/roles/#visitor","title":"Visitor","text":"<p>Visitors cannot be added manually. This special role is tied to a system account that represents anonymous users who use links to view albums or other content that has been shared with them. Visitors can only access these resources and cannot log in with a username or password. Other than guests, they also cannot retain their personal settings for longer than their browsing session lasts.</p>"},{"location":"user-guide/users/sharing/","title":"Sharing with Guests","text":"<p>To share albums with guests, admins and users can create share links, just like when sharing with friends who don't have an account.</p> <p>When users with limited privileges open a share link while being logged in, they get permanent read-only access to the shared resources until the link is removed or expires.</p> <p>In a future release, you will be able to share content with local users directly from the web interface without having to create links first.</p>"}]}